(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"/6Yf":function(t,e,n){"use strict";n.d(e,"a",function(){return o}),n.d(e,"b",function(){return u}),n.d(e,"c",function(){return a});var r=n("mrSG"),i=n("qOnz"),o=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t}(),s="[DEFAULT]",a=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return t.prototype.get=function(t){void 0===t&&(t=s);var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new i.a;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch(o){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=Object(r.a)({identifier:s,optional:!1},t),n=e.optional,i=this.normalizeInstanceIdentifier(e.identifier);try{var o=this.getOrInitializeService({instanceIdentifier:i});if(!o){if(n)return null;throw Error("Service "+this.name+" is not available")}return o}catch(a){if(n)return null;throw a}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:s})}catch(h){}try{for(var i=Object(r.g)(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var a=Object(r.e)(o.value,2),u=a[1],c=this.normalizeInstanceIdentifier(a[0]);try{var l=this.getOrInitializeService({instanceIdentifier:c});u.resolve(l)}catch(h){}}}catch(d){e={error:d}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}},t.prototype.clearInstance=function(t){void 0===t&&(t=s),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return Object(r.b)(this,void 0,void 0,function(){var t;return Object(r.d)(this,function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(Object(r.f)(Object(r.f)([],Object(r.e)(t.filter(function(t){return"INTERNAL"in t}).map(function(t){return t.INTERNAL.delete()}))),Object(r.e)(t.filter(function(t){return"_delete"in t}).map(function(t){return t._delete()}))))];case 1:return e.sent(),[2]}})})},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t=s),this.instances.has(t)},t.prototype.initialize=function(t){void 0===t&&(t={});var e=t.instanceIdentifier,n=t.options,r=void 0===n?{}:n,i=this.normalizeInstanceIdentifier(void 0===e?s:e);if(this.isInitialized(i))throw Error(this.name+"("+i+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");return this.getOrInitializeService({instanceIdentifier:i,options:r})},t.prototype.getOrInitializeService=function(t){var e,n=t.instanceIdentifier,r=t.options,i=void 0===r?{}:r,o=this.instances.get(n);return!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:(e=n,e===s?void 0:e),options:i}),this.instances.set(n,o)),o||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:s:t},t}(),u=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new a(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}()},0:function(t,e,n){t.exports=n("zUnb")},"2QA8":function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random())()},"2fFW":function(t,e,n){"use strict";n.d(e,"a",function(){return i});let r=!1;const i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=t},get useDeprecatedSynchronousErrorHandling(){return r}}},"3N8a":function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("quSY");class i extends r.a{constructor(t,e){super()}schedule(t,e=0){return this}}class o extends i{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}requestAsyncId(t,e,n=0){return setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let n=!1,r=void 0;try{this.work(t)}catch(i){n=!0,r=!!i&&i||new Error(i)}if(n)return this.unsubscribe(),r}_unsubscribe(){const t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}},"3UD+":function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},"5+tZ":function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("lJxs"),i=n("Cfvw"),o=n("zx2A");function s(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?o=>o.pipe(s((n,o)=>Object(i.a)(t(n,o)).pipe(Object(r.a)((t,r)=>e(n,t,o,r))),n)):("number"==typeof e&&(n=e),e=>e.lift(new a(t,n)))}class a{constructor(t,e=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=e}call(t,e){return e.subscribe(new u(t,this.project,this.concurrent))}}class u extends o.b{constructor(t,e,n=Number.POSITIVE_INFINITY){super(t),this.project=e,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e)}_innerSub(t){const e=new o.a(this),n=this.destination;n.add(e);const r=Object(o.c)(t,e);r!==e&&n.add(r)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t){this.destination.next(t)}notifyComplete(){const t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},"6Uf2":function(t,e,n){"use strict";(function(t){var e,r=n("zIRd"),i=n("/6Yf"),o=n("qOnz"),s=n("mrSG"),a=n("q/0M"),u=function(){function t(t){this.domStorage_=t,this.prefix_="firebase:"}return t.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),Object(o.G)(e))},t.prototype.get=function(t){var e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:Object(o.A)(e)},t.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},t.prototype.prefixedName_=function(t){return this.prefix_+t},t.prototype.toString=function(){return this.domStorage_.toString()},t}(),c=function(){function t(){this.cache_={},this.isInMemoryStorage=!0}return t.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},t.prototype.get=function(t){return Object(o.h)(this.cache_,t)?this.cache_[t]:null},t.prototype.remove=function(t){delete this.cache_[t]},t}(),l=function(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new u(e)}}catch(n){}return new c},h=l("localStorage"),d=l("sessionStorage"),f=new a.b("@firebase/database"),p=(e=1,function(){return e++}),g=function(t){var e=Object(o.F)(t),n=new o.c;n.update(e);var r=n.digest();return o.f.encodeByteArray(r)},m=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",r=0;r<t.length;r++){var i=t[r];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?n+=m.apply(null,i):n+="object"==typeof i?Object(o.G)(i):i,n+=" "}return n},y=null,v=!0,b=function(t,e){Object(o.d)(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(f.logLevel=a.a.VERBOSE,y=f.log.bind(f),e&&d.set("logging_enabled",!0)):"function"==typeof t?y=t:(y=null,d.remove("logging_enabled"))},_=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!0===v&&(v=!1,null===y&&!0===d.get("logging_enabled")&&b(!0)),y){var n=m.apply(null,t);y(n)}},w=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];_.apply(void 0,Object(s.f)([t],Object(s.e)(e)))}},O=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+m.apply(void 0,Object(s.f)([],Object(s.e)(t)));f.error(n)},S=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+m.apply(void 0,Object(s.f)([],Object(s.e)(t)));throw f.error(n),new Error(n)},C=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+m.apply(void 0,Object(s.f)([],Object(s.e)(t)));f.warn(n)},E=function(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},T="[MIN_NAME]",I="[MAX_NAME]",x=function(t,e){if(t===e)return 0;if(t===T||e===I)return-1;if(e===T||t===I)return 1;var n=L(t),r=L(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null!==r?1:t<e?-1:1},k=function(t,e){return t===e?0:t<e?-1:1},N=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Object(o.G)(e))},A=function(t){if("object"!=typeof t||null===t)return Object(o.G)(t);var e=[];for(var n in t)e.push(n);e.sort();for(var r="{",i=0;i<e.length;i++)0!==i&&(r+=","),r+=Object(o.G)(e[i]),r+=":",r+=A(t[e[i]]);return r+"}"},j=function(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)r.push(t.substring(i,i+e>n?n:i+e));return r};function P(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}var R=function(t){var e,n,r,i,s;Object(o.d)(!E(t),"Invalid JSON number"),0===t?(n=0,r=0,e=1/t==-1/0?1:0):(e=t<0,(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(t)/Math.LN2),1023))+1023,r=Math.round(t*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(t/Math.pow(2,-1074))));var a=[];for(s=52;s;s-=1)a.push(r%2?1:0),r=Math.floor(r/2);for(s=11;s;s-=1)a.push(n%2?1:0),n=Math.floor(n/2);a.push(e?1:0),a.reverse();var u=a.join(""),c="";for(s=0;s<64;s+=8){var l=parseInt(u.substr(s,8),2).toString(16);1===l.length&&(l="0"+l),c+=l}return c.toLowerCase()},D=new RegExp("^-?(0*)\\d{1,10}$"),L=function(t){if(D.test(t)){var e=Number(t);if(e>=-2147483648&&e<=2147483647)return e}return null},M=function(t){try{t()}catch(e){setTimeout(function(){throw C("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},F=function(t,e){var n=setTimeout(t,e);return"object"==typeof n&&n.unref&&n.unref(),n},V=function(){function t(t,e){var n=this;this.app_=t,this.authProvider_=e,this.auth_=null,this.auth_=e.getImmediate({optional:!0}),this.auth_||e.get().then(function(t){return n.auth_=t})}return t.prototype.getToken=function(t){return this.auth_?this.auth_.getToken(t).catch(function(t){return t&&"auth/token-not-initialized"===t.code?(_("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)}):Promise.resolve(null)},t.prototype.addTokenChangeListener=function(t){this.auth_?this.auth_.addAuthTokenListener(t):(setTimeout(function(){return t(null)},0),this.authProvider_.get().then(function(e){return e.addAuthTokenListener(t)}))},t.prototype.removeTokenChangeListener=function(t){this.authProvider_.get().then(function(e){return e.removeAuthTokenListener(t)})},t.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.app_.name+'" are invalid. This usually indicates your app was not initialized correctly. ';C(t+="credential"in this.app_.options?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.app_.options?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.')},t}(),U=function(){function t(){}return t.prototype.getToken=function(e){return Promise.resolve({accessToken:t.EMULATOR_AUTH_TOKEN})},t.prototype.addTokenChangeListener=function(e){e(t.EMULATOR_AUTH_TOKEN)},t.prototype.removeTokenChangeListener=function(t){},t.prototype.notifyForInvalidToken=function(){},t.EMULATOR_AUTH_TOKEN="owner",t}(),q=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,B="websocket",H="long_polling",z=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=!1),void 0===o&&(o=""),void 0===s&&(s=!1),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=s,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=h.get("host:"+t)||this._host}return t.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},t.prototype.isCustomHost=function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain},Object.defineProperty(t.prototype,"host",{get:function(){return this._host},set:function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&h.set("host:"+this._host,this.internalHost))},enumerable:!1,configurable:!0}),t.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},t.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host+"/"+(this.includeNamespaceInQueryParams?"?ns="+this.namespace:"")},t}();function K(t,e,n){var r;if(Object(o.d)("string"==typeof e,"typeof type must == string"),Object(o.d)("object"==typeof n,"typeof params must == object"),e===B)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else{if(e!==H)throw new Error("Unknown connection type: "+e);r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?"}(function(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams})(t)&&(n.ns=t.namespace);var i=[];return P(n,function(t,e){i.push(t+"="+e)}),r+i.join("&")}var W=function(){function t(){this.counters_={}}return t.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),Object(o.h)(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},t.prototype.get=function(){return Object(o.j)(this.counters_)},t}(),Q={},G={};function $(t){var e=t.toString();return Q[e]||(Q[e]=new W),Q[e]}var Y=function(){function t(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return t.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},t.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;for(var r=function(){var t=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var e=function(e){t[e]&&M(function(){n.onMessage_(t[e])})},r=0;r<t.length;++r)e(r);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++},i=this;this.pendingResponses[this.currentResponseNum]&&"break"!==r(););},t}(),J="start",X="close",Z=function(){function t(t,e,n,r,i){this.connId=t,this.repoInfo=e,this.applicationId=n,this.transportSessionId=r,this.lastSessionId=i,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=w(t),this.stats_=$(e),this.urlFn=function(t){return K(e,H,t)}}return t.prototype.open=function(t,e){var n=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new Y(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null},Math.floor(3e4)),function(t){if(Object(o.w)()||"complete"===document.readyState)t();else{var e=!1,n=function(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}}(function(){if(!n.isClosed_){n.scriptTagHolder=new tt(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Object(s.e)(t,5),i=r[0],o=r[1],a=r[2];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===J)n.id=o,n.password=a;else{if(i!==X)throw new Error("Unrecognized command received: "+i);o?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(o,function(){n.onClosed_()})):n.onClosed_()}},function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Object(s.e)(t,2),i=r[0],o=r[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,o)},function(){n.onClosed_()},n.urlFn);var t={start:"t"};t.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=n.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",n.transportSessionId&&(t.s=n.transportSessionId),n.lastSessionId&&(t.ls=n.lastSessionId),n.applicationId&&(t.p=n.applicationId),"undefined"!=typeof location&&location.hostname&&q.test(location.hostname)&&(t.r="f");var e=n.urlFn(t);n.log_("Connecting via long-poll to "+e),n.scriptTagHolder.addTag(e,function(){})}})},t.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},t.forceAllow=function(){t.forceAllow_=!0},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){return!(Object(o.w)()||!t.forceAllow_&&(t.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))},t.prototype.markConnectionHealthy=function(){},t.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},t.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},t.prototype.send=function(t){var e=Object(o.G)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);for(var n=Object(o.g)(e),r=j(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++},t.prototype.addDisconnectPingFrame=function(t,e){if(!Object(o.w)()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},t.prototype.incrementIncomingBytes_=function(t){var e=Object(o.G)(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)},t}(),tt=function(){function t(e,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,Object(o.w)())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=p(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();var s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(s='<script>document.domain="'+document.domain+'";<\/script>');var a="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(a),this.myIFrame.doc.close()}catch(u){_("frame writing exception"),u.stack&&_(u.stack),_(u)}}}return t.createIFrame_=function(){var t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||_("No IE domain setting required")}catch(n){var e=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+e+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t},t.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)},Math.floor(0)));var e=this.onDisconnect;e&&(this.onDisconnect=null,e())},t.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},t.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var e=this.urlFn(t),n="",r=0;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+n.length<=1870;){var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return this.addLongPollTag_(e+=n,this.currentSerial),!0}return!1},t.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},t.prototype.addLongPollTag_=function(t,e){var n=this;this.outstandingRequests.add(e);var r=function(){n.outstandingRequests.delete(e),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(t,function(){clearTimeout(i),r()})},t.prototype.addTag=function(t,e){var n=this;Object(o.w)()?this.doNodeLongPoll(t,e):setTimeout(function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){var t=r.readyState;t&&"loaded"!==t&&"complete"!==t||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),e())},r.onerror=function(){_("Long-poll script failed to load: "+t),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}},Math.floor(1))},t}(),et="";function nt(t){et=t}var rt=null;"undefined"!=typeof MozWebSocket?rt=MozWebSocket:"undefined"!=typeof WebSocket&&(rt=WebSocket);var it=function(){function t(e,n,r,i,o){this.connId=e,this.applicationId=r,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=w(this.connId),this.stats_=$(n),this.connURL=t.connectionURL_(n,i,o),this.nodeAdmin=n.nodeAdmin}return t.connectionURL_=function(t,e,n){var r={v:"5"};return!Object(o.w)()&&"undefined"!=typeof location&&location.hostname&&q.test(location.hostname)&&(r.r="f"),e&&(r.s=e),n&&(r.ls=n),K(t,B,r)},t.prototype.open=function(t,e){var n=this;this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,h.set("previous_websocket_failure",!0);try{if(Object(o.w)()){var r={headers:{"User-Agent":"Firebase/5/"+et+"/"+process.platform+"/"+(this.nodeAdmin?"AdminNode":"Node"),"X-Firebase-GMPID":this.applicationId||""}},i=process.env,s=0===this.connURL.indexOf("wss://")?i.HTTPS_PROXY||i.https_proxy:i.HTTP_PROXY||i.http_proxy;s&&(r.proxy={origin:s}),this.mySock=new rt(this.connURL,[],r)}else this.mySock=new rt(this.connURL,[],r={headers:{"X-Firebase-GMPID":this.applicationId||""}})}catch(u){this.log_("Error instantiating WebSocket.");var a=u.message||u.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(t){n.handleIncomingFrame(t)},this.mySock.onerror=function(t){n.log_("WebSocket error.  Closing connection.");var e=t.message||t.data;e&&n.log_(e),n.onClosed_()}},t.prototype.start=function(){},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){var e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==rt&&!t.forceDisallow_},t.previouslyFailed=function(){return h.isInMemoryStorage||!0===h.get("previous_websocket_failure")},t.prototype.markConnectionHealthy=function(){h.remove("previous_websocket_failure")},t.prototype.appendFrame_=function(t){if(this.frames.push(t),this.frames.length===this.totalFrames){var e=this.frames.join("");this.frames=null;var n=Object(o.A)(e);this.onMessage(n)}},t.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},t.prototype.extractFrameCount_=function(t){if(Object(o.d)(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},t.prototype.handleIncomingFrame=function(t){if(null!==this.mySock){var e=t.data;if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(e);else{var n=this.extractFrameCount_(e);null!==n&&this.appendFrame_(n)}}},t.prototype.send=function(t){this.resetKeepAlive();var e=Object(o.G)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);var n=j(e,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},t.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},t.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},t.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()},Math.floor(45e3))},t.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(e){this.log_("Exception thrown from WebSocket.send():",e.message||e.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t}(),ot=function(){function t(t){this.initTransports_(t)}return Object.defineProperty(t,"ALL_TRANSPORTS",{get:function(){return[Z,it]},enumerable:!1,configurable:!0}),t.prototype.initTransports_=function(e){var n,r,i=it&&it.isAvailable(),o=i&&!it.previouslyFailed();if(e.webSocketOnly&&(i||C("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),o=!0),o)this.transports_=[it];else{var a=this.transports_=[];try{for(var u=Object(s.g)(t.ALL_TRANSPORTS),c=u.next();!c.done;c=u.next()){var l=c.value;l&&l.isAvailable()&&a.push(l)}}catch(h){n={error:h}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}},t.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},t.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},t}(),st=function(){function t(t,e,n,r,i,o,s,a){this.id=t,this.repoInfo_=e,this.applicationId_=n,this.onMessage_=r,this.onReady_=i,this.onDisconnect_=o,this.onKill_=s,this.lastSessionId=a,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=w("c:"+this.id+":"),this.transportManager_=new ot(e),this.log_("Connection created"),this.start_()}return t.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,void 0,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(function(){t.conn_&&t.conn_.open(n,r)},Math.floor(0));var i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=F(function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&t.conn_.bytesReceived>102400?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&t.conn_.bytesSent>10240?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))},Math.floor(i)))},t.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},t.prototype.disconnReceiver_=function(t){var e=this;return function(n){t===e.conn_?e.onConnectionLost_(n):t===e.secondaryConn_?(e.log_("Secondary connection lost."),e.onSecondaryConnectionLost_()):e.log_("closing an old connection")}},t.prototype.connReceiver_=function(t){var e=this;return function(n){2!==e.state_&&(t===e.rx_?e.onPrimaryMessageReceived_(n):t===e.secondaryConn_?e.onSecondaryMessageReceived_(n):e.log_("message on old connection"))}},t.prototype.sendRequest=function(t){this.sendData_({t:"d",d:t})},t.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},t.prototype.onSecondaryControl_=function(t){if("t"in t){var e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},t.prototype.onSecondaryMessageReceived_=function(t){var e=N("t",t),n=N("d",t);if("c"===e)this.onSecondaryControl_(n);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}},t.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},t.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},t.prototype.onPrimaryMessageReceived_=function(t){var e=N("t",t),n=N("d",t);"c"===e?this.onControl_(n):"d"===e&&this.onDataMessage_(n)},t.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},t.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},t.prototype.onControl_=function(t){var e=N("t",t);if("d"in t){var n=t.d;if("h"===e)this.onHandshake_(n);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(n):"r"===e?this.onReset_(n):"e"===e?O("Server Error: "+n):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):O("Unknown control packet command: "+e)}},t.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&C("Protocol version mismatch detected"),this.tryStartUpgrade_())},t.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},t.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),F(function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())},Math.floor(6e4))},t.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,1===this.state_?this.close():(this.closeConnections_(),this.start_())},t.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):F(function(){n.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))},t.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},t.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},t.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(h.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},t.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},t.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},t.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},t.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},t}(),at=function(){function t(){}return t.prototype.put=function(t,e,n,r){},t.prototype.merge=function(t,e,n,r){},t.prototype.refreshAuthToken=function(t){},t.prototype.onDisconnectPut=function(t,e,n){},t.prototype.onDisconnectMerge=function(t,e,n){},t.prototype.onDisconnectCancel=function(t,e){},t.prototype.reportStats=function(t){},t}(),ut=function(){function t(t){this.allowedEvents_=t,this.listeners_={},Object(o.d)(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=Object(s.f)([],Object(s.e)(this.listeners_[t])),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,e)},t.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});var r=this.getInitialEvent(t);r&&e.apply(n,r)},t.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},t.prototype.validateEventType_=function(t){Object(o.d)(this.allowedEvents_.find(function(e){return e===t}),"Unknown event: "+t)},t}(),ct=function(t){function e(){var e=t.call(this,["online"])||this;return e.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||Object(o.u)()||(window.addEventListener("online",function(){e.online_||(e.online_=!0,e.trigger("online",!0))},!1),window.addEventListener("offline",function(){e.online_&&(e.online_=!1,e.trigger("online",!1))},!1)),e}return Object(s.c)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return Object(o.d)("online"===t,"Unknown event type: "+t),[this.online_]},e.prototype.currentlyOnline=function(){return this.online_},e}(ut),lt=function(){function t(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}return t.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},t}();function ht(){return new lt("")}function dt(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function ft(t){return t.pieces_.length-t.pieceNum_}function pt(t){var e=t.pieceNum_;return e<t.pieces_.length&&e++,new lt(t.pieces_,e)}function gt(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function mt(t){for(var e="",n=t.pieceNum_;n<t.pieces_.length;n++)""!==t.pieces_[n]&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function yt(t,e){return void 0===e&&(e=0),t.pieces_.slice(t.pieceNum_+e)}function vt(t){if(t.pieceNum_>=t.pieces_.length)return null;for(var e=[],n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new lt(e,0)}function bt(t,e){for(var n=[],r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof lt)for(r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{var i=e.split("/");for(r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new lt(n,0)}function _t(t){return t.pieceNum_>=t.pieces_.length}function wt(t,e){var n=dt(t),r=dt(e);if(null===n)return e;if(n===r)return wt(pt(t),pt(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function Ot(t,e){for(var n=yt(t,0),r=yt(e,0),i=0;i<n.length&&i<r.length;i++){var o=x(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1}function St(t,e){if(ft(t)!==ft(e))return!1;for(var n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function Ct(t,e){var n=t.pieceNum_,r=e.pieceNum_;if(ft(t)>ft(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}var Et=function(){return function(t,e){this.errorPrefix_=e,this.parts_=yt(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=Object(o.E)(this.parts_[n]);Tt(this)}}();function Tt(t){if(t.byteLength_>768)throw new Error(t.errorPrefix_+"has a key path longer than 768 bytes ("+t.byteLength_+").");if(t.parts_.length>32)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+It(t))}function It(t){return 0===t.parts_.length?"":"in property '"+t.parts_.join(".")+"'"}var xt,kt,Nt=function(t){function e(){var e,n,r=t.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(n="visibilitychange",e="hidden"):void 0!==document.mozHidden?(n="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(n="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(n="webkitvisibilitychange",e="webkitHidden")),r.visible_=!0,n&&document.addEventListener(n,function(){var t=!document[e];t!==r.visible_&&(r.visible_=t,r.trigger("visible",t))},!1),r}return Object(s.c)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return Object(o.d)("visible"===t,"Unknown event type: "+t),[this.visible_]},e}(ut),At=1e3,jt=function(t){function e(n,r,i,s,a,u,c){var l=t.call(this)||this;if(l.repoInfo_=n,l.applicationId_=r,l.onDataUpdate_=i,l.onConnectStatus_=s,l.onServerInfoUpdate_=a,l.authTokenProvider_=u,l.authOverride_=c,l.id=e.nextPersistentConnectionId_++,l.log_=w("p:"+l.id+":"),l.interruptReasons_={},l.listens=new Map,l.outstandingPuts_=[],l.outstandingGets_=[],l.outstandingPutCount_=0,l.outstandingGetCount_=0,l.onDisconnectRequestQueue_=[],l.connected_=!1,l.reconnectDelay_=At,l.maxReconnectDelay_=3e5,l.securityDebugCallback_=null,l.lastSessionId=null,l.establishConnectionTimer_=null,l.visible_=!1,l.requestCBHash_={},l.requestNumber_=0,l.realtime_=null,l.authToken_=null,l.forceTokenRefresh_=!1,l.invalidAuthTokenCount_=0,l.firstConnection_=!0,l.lastConnectionAttemptTime_=null,l.lastConnectionEstablishedTime_=null,c&&!Object(o.w)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return l.scheduleConnect_(0),Nt.getInstance().on("visible",l.onVisible_,l),-1===n.host.indexOf("fblocal")&&ct.getInstance().on("online",l.onOnline_,l),l}return Object(s.c)(e,t),e.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,i={r:r,a:t,b:e};this.log_(Object(o.G)(i)),Object(o.d)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},e.prototype.get=function(t){var e=this,n=new o.a,r={p:t.path.toString(),q:t.queryObject()},i={action:"g",request:r,onComplete:function(t){var i=t.d;"ok"===t.s?(e.onDataUpdate_(r.p,i,!1,null),n.resolve(i)):n.reject(i)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;var s=this.outstandingGets_.length-1;return this.connected_||setTimeout(function(){var t=e.outstandingGets_[s];void 0!==t&&i===t&&(delete e.outstandingGets_[s],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),e.log_("get "+s+" timed out on connection"),n.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(s),n.promise},e.prototype.listen=function(t,e,n,r){var i=t.queryIdentifier(),s=t.path.toString();this.log_("Listen called for "+s+" "+i),this.listens.has(s)||this.listens.set(s,new Map),Object(o.d)(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"listen() called for non-default but complete query"),Object(o.d)(!this.listens.get(s).has(i),"listen() called twice for same path/queryId.");var a={onComplete:r,hashFn:e,query:t,tag:n};this.listens.get(s).set(i,a),this.connected_&&this.sendListen_(a)},e.prototype.sendGet_=function(t){var e=this,n=this.outstandingGets_[t];this.sendRequest("g",n.request,function(r){delete e.outstandingGets_[t],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})},e.prototype.sendListen_=function(t){var n=this,r=t.query,i=r.path.toString(),o=r.queryIdentifier();this.log_("Listen on "+i+" for "+o);var s={p:i};t.tag&&(s.q=r.queryObject(),s.t=t.tag),s.h=t.hashFn(),this.sendRequest("q",s,function(s){var a=s.d,u=s.s;e.warnOnListenWarnings_(a,r),(n.listens.get(i)&&n.listens.get(i).get(o))===t&&(n.log_("listen response",s),"ok"!==u&&n.removeListen_(i,o),t.onComplete&&t.onComplete(u,a))})},e.warnOnListenWarnings_=function(t,e){if(t&&"object"==typeof t&&Object(o.h)(t,"w")){var n=Object(o.D)(t,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+e.getQueryParams().getIndex().toString()+'"',i=e.path.toString();C("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+i+" to your security rules for better performance.")}}},e.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},function(){}),this.reduceReconnectDelayIfAdminCredential_(t)},e.prototype.reduceReconnectDelayIfAdminCredential_=function(t){(t&&40===t.length||Object(o.o)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},e.prototype.tryAuth=function(){var t=this;if(this.connected_&&this.authToken_){var e=this.authToken_,n=Object(o.z)(e)?"auth":"gauth",r={cred:e};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,function(n){var r=n.s,i=n.d||"error";t.authToken_===e&&("ok"===r?t.invalidAuthTokenCount_=0:t.onAuthRevoked_(r,i))})}},e.prototype.unlisten=function(t,e){var n=t.path.toString(),r=t.queryIdentifier();this.log_("Unlisten called for "+n+" "+r),Object(o.d)(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t.queryObject(),e)},e.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);var i={p:t};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},e.prototype.onDisconnectPut=function(t,e,n){this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},e.prototype.onDisconnectMerge=function(t,e,n){this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},e.prototype.onDisconnectCancel=function(t,e){this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},e.prototype.sendOnDisconnect_=function(t,e,n,r){var i={p:e,d:n};this.log_("onDisconnect "+t,i),this.sendRequest(t,i,function(t){r&&setTimeout(function(){r(t.s,t.d)},Math.floor(0))})},e.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},e.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},e.prototype.putInternal=function(t,e,n,r,i){var o={p:e,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:t,request:o,onComplete:r}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+e)},e.prototype.sendPut_=function(t){var e=this,n=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,i=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,r,function(r){e.log_(n+" response",r),delete e.outstandingPuts_[t],e.outstandingPutCount_--,0===e.outstandingPutCount_&&(e.outstandingPuts_=[]),i&&i(r.s,r.d)})},e.prototype.reportStats=function(t){var e=this;if(this.connected_){var n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,function(t){"ok"!==t.s&&e.log_("reportStats","Error sending stats: "+t.d)})}},e.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+Object(o.G)(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},e.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):O("Unrecognized action received from server: "+Object(o.G)(t)+"\nAre you using the latest client?")},e.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},e.prototype.scheduleConnect_=function(t){var e=this;Object(o.d)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(function(){e.establishConnectionTimer_=null,e.establishConnection_()},Math.floor(t))},e.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=At,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},e.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=At,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},e.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=At),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());var t=(new Date).getTime()-this.lastConnectionAttemptTime_,e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},e.prototype.establishConnection_=function(){var t=this;if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;var n=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+e.nextConnectionId_++,a=this,u=this.lastSessionId,c=!1,l=null,h=function(){l?l.close():(c=!0,i())};this.realtime_={close:h,sendRequest:function(t){Object(o.d)(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(t)}};var d=this.forceTokenRefresh_;this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(d).then(function(t){c?_("getToken() completed but was canceled"):(_("getToken() completed. Creating connection."),a.authToken_=t&&t.accessToken,l=new st(s,a.repoInfo_,a.applicationId_,n,r,i,function(t){C(t+" ("+a.repoInfo_.toString()+")"),a.interrupt("server_kill")},u))}).then(null,function(e){a.log_("Failed to get token: "+e),c||(t.repoInfo_.nodeAdmin&&C(e),h())})}},e.prototype.interrupt=function(t){_("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},e.prototype.resume=function(t){_("Resuming connection for reason: "+t),delete this.interruptReasons_[t],Object(o.s)(this.interruptReasons_)&&(this.reconnectDelay_=At,this.realtime_||this.scheduleConnect_(0))},e.prototype.handleTimestamp_=function(t){var e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})},e.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},e.prototype.onListenRevoked_=function(t,e){var n;n=e?e.map(function(t){return A(t)}).join("$"):"default";var r=this.removeListen_(t,n);r&&r.onComplete&&r.onComplete("permission_denied")},e.prototype.removeListen_=function(t,e){var n,r=new lt(t).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(e),i.delete(e),0===i.size&&this.listens.delete(r)}else n=void 0;return n},e.prototype.onAuthRevoked_=function(t,e){_("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},e.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},e.prototype.restoreState_=function(){var t,e,n,r;this.tryAuth();try{for(var i=Object(s.g)(this.listens.values()),o=i.next();!o.done;o=i.next()){var a=o.value;try{for(var u=(n=void 0,Object(s.g)(a.values())),c=u.next();!c.done;c=u.next())this.sendListen_(c.value)}catch(d){n={error:d}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(f){t={error:f}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}for(var l=0;l<this.outstandingPuts_.length;l++)this.outstandingPuts_[l]&&this.sendPut_(l);for(;this.onDisconnectRequestQueue_.length;){var h=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(h.action,h.pathString,h.data,h.onComplete)}for(l=0;l<this.outstandingGets_.length;l++)this.outstandingGets_[l]&&this.sendGet_(l)},e.prototype.sendConnectStats_=function(){var t={},e="js";Object(o.w)()&&(e=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+e+"."+et.replace(/\./g,"-")]=1,Object(o.u)()?t["framework.cordova"]=1:Object(o.x)()&&(t["framework.reactnative"]=1),this.reportStats(t)},e.prototype.shouldReconnect_=function(){var t=ct.getInstance().currentlyOnline();return Object(o.s)(this.interruptReasons_)&&t},e.nextPersistentConnectionId_=0,e.nextConnectionId_=0,e}(at),Pt=function(){function t(t,e){this.name=t,this.node=e}return t.Wrap=function(e,n){return new t(e,n)},t}(),Rt=function(){function t(){}return t.prototype.getCompare=function(){return this.compare.bind(this)},t.prototype.indexedValueChanged=function(t,e){var n=new Pt(T,t),r=new Pt(T,e);return 0!==this.compare(n,r)},t.prototype.minPost=function(){return Pt.MIN},t}(),Dt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(s.c)(e,t),Object.defineProperty(e,"__EMPTY_NODE",{get:function(){return xt},set:function(t){xt=t},enumerable:!1,configurable:!0}),e.prototype.compare=function(t,e){return x(t.name,e.name)},e.prototype.isDefinedOn=function(t){throw Object(o.e)("KeyIndex.isDefinedOn not expected to be called.")},e.prototype.indexedValueChanged=function(t,e){return!1},e.prototype.minPost=function(){return Pt.MIN},e.prototype.maxPost=function(){return new Pt(I,xt)},e.prototype.makePost=function(t,e){return Object(o.d)("string"==typeof t,"KeyIndex indexValue must always be a string."),new Pt(t,xt)},e.prototype.toString=function(){return".key"},e}(Rt),Lt=new Dt,Mt=function(){function t(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(t=t,o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return t.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t},t.prototype.hasNext=function(){return this.nodeStack_.length>0},t.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},t}(),Ft=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:Ut.EMPTY_NODE,this.right=null!=o?o:Ut.EMPTY_NODE}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.count=function(){return this.left.count()+1+this.right.count()},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},t.prototype.minKey=function(){return this.min_().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp_()},t.prototype.removeMin_=function(){if(this.left.isEmpty())return Ut.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),(t=t.copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},t.prototype.remove=function(t,e){var n,r;if(e(t,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return Ut.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()},t.prototype.isRed_=function(){return this.color},t.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},t.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_()),t},t.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=(t=t.rotateRight_()).colorFlip_()),t},t.prototype.rotateLeft_=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight_=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},t.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},t.RED=!0,t.BLACK=!1,t}(),Vt=function(){function t(){}return t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new Ft(t,e,null)},t.prototype.remove=function(t,e){return this},t.prototype.count=function(){return 0},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.check_=function(){return 0},t.prototype.isRed_=function(){return!1},t}(),Ut=function(){function t(e,n){void 0===n&&(n=t.EMPTY_NODE),this.comparator_=e,this.root_=n}return t.prototype.insert=function(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Ft.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Ft.BLACK,null,null))},t.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:e>0&&(n=n.right)}return null},t.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:e>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},t.prototype.isEmpty=function(){return this.root_.isEmpty()},t.prototype.count=function(){return this.root_.count()},t.prototype.minKey=function(){return this.root_.minKey()},t.prototype.maxKey=function(){return this.root_.maxKey()},t.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},t.prototype.getIterator=function(t){return new Mt(this.root_,null,this.comparator_,!1,t)},t.prototype.getIteratorFrom=function(t,e){return new Mt(this.root_,t,this.comparator_,!1,e)},t.prototype.getReverseIteratorFrom=function(t,e){return new Mt(this.root_,t,this.comparator_,!0,e)},t.prototype.getReverseIterator=function(t){return new Mt(this.root_,null,this.comparator_,!0,t)},t.EMPTY_NODE=new Vt,t}();function qt(t,e){return x(t.name,e.name)}function Bt(t,e){return x(t,e)}var Ht,zt,Kt,Wt,Qt,Gt=function(t){return"number"==typeof t?"number:"+R(t):"string:"+t},$t=function(t){if(t.isLeafNode()){var e=t.val();Object(o.d)("string"==typeof e||"number"==typeof e||"object"==typeof e&&Object(o.h)(e,".sv"),"Priority must be a string or number.")}else Object(o.d)(t===kt||t.isEmpty(),"priority of unexpected type.");Object(o.d)(t===kt||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},Yt=function(){function t(e,n){void 0===n&&(n=t.__childrenNodeConstructor.EMPTY_NODE),this.value_=e,this.priorityNode_=n,this.lazyHash_=null,Object(o.d)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),$t(this.priorityNode_)}return Object.defineProperty(t,"__childrenNodeConstructor",{get:function(){return Ht},set:function(t){Ht=t},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!0},t.prototype.getPriority=function(){return this.priorityNode_},t.prototype.updatePriority=function(e){return new t(this.value_,e)},t.prototype.getImmediateChild=function(e){return".priority"===e?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.getChild=function(e){return _t(e)?this:".priority"===dt(e)?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.hasChild=function(){return!1},t.prototype.getPredecessorChildName=function(t,e){return null},t.prototype.updateImmediateChild=function(e,n){return".priority"===e?this.updatePriority(n):n.isEmpty()&&".priority"!==e?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)},t.prototype.updateChild=function(e,n){var r=dt(e);return null===r?n:n.isEmpty()&&".priority"!==r?this:(Object(o.d)(".priority"!==r||1===ft(e),".priority must be the last token in a path"),this.updateImmediateChild(r,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(pt(e),n)))},t.prototype.isEmpty=function(){return!1},t.prototype.numChildren=function(){return 0},t.prototype.forEachChild=function(t,e){return!1},t.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.priorityNode_.isEmpty()||(t+="priority:"+Gt(this.priorityNode_.val())+":");var e=typeof this.value_;t+=e+":",t+="number"===e?R(this.value_):this.value_,this.lazyHash_=g(t)}return this.lazyHash_},t.prototype.getValue=function(){return this.value_},t.prototype.compareTo=function(e){return e===t.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof t.__childrenNodeConstructor?-1:(Object(o.d)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))},t.prototype.compareToLeafNode_=function(e){var n=typeof e.value_,r=typeof this.value_,i=t.VALUE_TYPE_ORDER.indexOf(n),s=t.VALUE_TYPE_ORDER.indexOf(r);return Object(o.d)(i>=0,"Unknown leaf type: "+n),Object(o.d)(s>=0,"Unknown leaf type: "+r),i===s?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-i},t.prototype.withIndex=function(){return this},t.prototype.isIndexed=function(){return!0},t.prototype.equals=function(t){return t===this||!!t.isLeafNode()&&this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)},t.VALUE_TYPE_ORDER=["object","boolean","number","string"],t}(),Jt=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(s.c)(e,t),e.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority(),i=n.compareTo(r);return 0===i?x(t.name,e.name):i},e.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},e.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},e.prototype.minPost=function(){return Pt.MIN},e.prototype.maxPost=function(){return new Pt(I,new Yt("[PRIORITY-POST]",Kt))},e.prototype.makePost=function(t,e){var n=zt(t);return new Pt(e,new Yt("[PRIORITY-POST]",n))},e.prototype.toString=function(){return".priority"},e}(Rt)),Xt=Math.log(2),Zt=function(){function t(t){this.count=parseInt(Math.log(t+1)/Xt,10),this.current_=this.count-1;var e=parseInt(Array(this.count+1).join("1"),2);this.bits_=t+1&e}return t.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},t}(),te=function(t,e,n,r){t.sort(e);var i=function(e,r){var o,s,a=r-e;if(0===a)return null;if(1===a)return o=t[e],s=n?n(o):o,new Ft(s,o.node,Ft.BLACK,null,null);var u=parseInt(a/2,10)+e,c=i(e,u),l=i(u+1,r);return o=t[u],s=n?n(o):o,new Ft(s,o.node,Ft.BLACK,c,l)},o=function(e){for(var r=null,o=null,s=t.length,a=function(e,r){var o=s-e,a=s;s-=e;var c=i(o+1,a),l=t[o],h=n?n(l):l;u(new Ft(h,l.node,r,null,c))},u=function(t){r?(r.left=t,r=t):(o=t,r=t)},c=0;c<e.count;++c){var l=e.nextBitIsOne(),h=Math.pow(2,e.count-(c+1));l?a(h,Ft.BLACK):(a(h,Ft.BLACK),a(h,Ft.RED))}return o}(new Zt(t.length));return new Ut(r||e,o)},ee={},ne=function(){function t(t,e){this.indexes_=t,this.indexSet_=e}return Object.defineProperty(t,"Default",{get:function(){return Object(o.d)(ee&&Jt,"ChildrenNode.ts has not been loaded"),Wt=Wt||new t({".priority":ee},{".priority":Jt})},enumerable:!1,configurable:!0}),t.prototype.get=function(t){var e=Object(o.D)(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Ut?e:null},t.prototype.hasIndex=function(t){return Object(o.h)(this.indexSet_,t.toString())},t.prototype.addIndex=function(e,n){Object(o.d)(e!==Lt,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,i=[],a=!1,u=n.getIterator(Pt.Wrap),c=u.getNext();c;)a=a||e.isDefinedOn(c.node),i.push(c),c=u.getNext();r=a?te(i,e.getCompare()):ee;var l=e.toString(),h=Object(s.a)({},this.indexSet_);h[l]=e;var d=Object(s.a)({},this.indexes_);return d[l]=r,new t(d,h)},t.prototype.addToIndexes=function(e,n){var r=this;return new t(Object(o.B)(this.indexes_,function(t,i){var s=Object(o.D)(r.indexSet_,i);if(Object(o.d)(s,"Missing index implementation for "+i),t===ee){if(s.isDefinedOn(e.node)){for(var a=[],u=n.getIterator(Pt.Wrap),c=u.getNext();c;)c.name!==e.name&&a.push(c),c=u.getNext();return a.push(e),te(a,s.getCompare())}return ee}var l=n.get(e.name),h=t;return l&&(h=h.remove(new Pt(e.name,l))),h.insert(e,e.node)}),this.indexSet_)},t.prototype.removeFromIndexes=function(e,n){return new t(Object(o.B)(this.indexes_,function(t){if(t===ee)return t;var r=n.get(e.name);return r?t.remove(new Pt(e.name,r)):t}),this.indexSet_)},t}(),re=function(){function t(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&$t(this.priorityNode_),this.children_.isEmpty()&&Object(o.d)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(t,"EMPTY_NODE",{get:function(){return Qt||(Qt=new t(new Ut(Bt),null,ne.Default))},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!1},t.prototype.getPriority=function(){return this.priorityNode_||Qt},t.prototype.updatePriority=function(e){return this.children_.isEmpty()?this:new t(this.children_,e,this.indexMap_)},t.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();var e=this.children_.get(t);return null===e?Qt:e},t.prototype.getChild=function(t){var e=dt(t);return null===e?this:this.getImmediateChild(e).getChild(pt(t))},t.prototype.hasChild=function(t){return null!==this.children_.get(t)},t.prototype.updateImmediateChild=function(e,n){if(Object(o.d)(n,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(n);var r=new Pt(e,n),i=void 0,s=void 0;n.isEmpty()?(i=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(r,this.children_));var a=i.isEmpty()?Qt:this.priorityNode_;return new t(i,a,s)},t.prototype.updateChild=function(t,e){var n=dt(t);if(null===n)return e;Object(o.d)(".priority"!==dt(t)||1===ft(t),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(pt(t),e);return this.updateImmediateChild(n,r)},t.prototype.isEmpty=function(){return this.children_.isEmpty()},t.prototype.numChildren=function(){return this.children_.count()},t.prototype.val=function(e){if(this.isEmpty())return null;var n={},r=0,i=0,o=!0;if(this.forEachChild(Jt,function(s,a){n[s]=a.val(e),r++,o&&t.INTEGER_REGEXP_.test(s)?i=Math.max(i,Number(s)):o=!1}),!e&&o&&i<2*r){var s=[];for(var a in n)s[a]=n[a];return s}return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.getPriority().isEmpty()||(t+="priority:"+Gt(this.getPriority().val())+":"),this.forEachChild(Jt,function(e,n){var r=n.hash();""!==r&&(t+=":"+e+":"+r)}),this.lazyHash_=""===t?"":g(t)}return this.lazyHash_},t.prototype.getPredecessorChildName=function(t,e,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new Pt(t,e));return i?i.name:null}return this.children_.getPredecessorKey(t)},t.prototype.getFirstChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.minKey();return n&&n.name}return this.children_.minKey()},t.prototype.getFirstChild=function(t){var e=this.getFirstChildName(t);return e?new Pt(e,this.children_.get(e)):null},t.prototype.getLastChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.maxKey();return n&&n.name}return this.children_.maxKey()},t.prototype.getLastChild=function(t){var e=this.getLastChildName(t);return e?new Pt(e,this.children_.get(e)):null},t.prototype.forEachChild=function(t,e){var n=this.resolveIndex_(t);return n?n.inorderTraversal(function(t){return e(t.name,t.node)}):this.children_.inorderTraversal(e)},t.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},t.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,function(t){return t});for(var r=this.children_.getIteratorFrom(t.name,Pt.Wrap),i=r.peek();null!=i&&e.compare(i,t)<0;)r.getNext(),i=r.peek();return r},t.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},t.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,function(t){return t});for(var r=this.children_.getReverseIteratorFrom(t.name,Pt.Wrap),i=r.peek();null!=i&&e.compare(i,t)>0;)r.getNext(),i=r.peek();return r},t.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===ie?-1:0},t.prototype.withIndex=function(e){if(e===Lt||this.indexMap_.hasIndex(e))return this;var n=this.indexMap_.addIndex(e,this.children_);return new t(this.children_,this.priorityNode_,n)},t.prototype.isIndexed=function(t){return t===Lt||this.indexMap_.hasIndex(t)},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()===e.children_.count()){for(var n=this.getIterator(Jt),r=e.getIterator(Jt),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1}return!1},t.prototype.resolveIndex_=function(t){return t===Lt?null:this.indexMap_.get(t.toString())},t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t}(),ie=new(function(t){function e(){return t.call(this,new Ut(Bt),re.EMPTY_NODE,ne.Default)||this}return Object(s.c)(e,t),e.prototype.compareTo=function(t){return t===this?0:1},e.prototype.equals=function(t){return t===this},e.prototype.getPriority=function(){return this},e.prototype.getImmediateChild=function(t){return re.EMPTY_NODE},e.prototype.isEmpty=function(){return!1},e}(re));function oe(t,e){if(void 0===e&&(e=null),null===t)return re.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(e=t[".priority"]),Object(o.d)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t)return new Yt(t,oe(e));if(t instanceof Array){var n=re.EMPTY_NODE;return P(t,function(e,r){if(Object(o.h)(t,e)&&"."!==e.substring(0,1)){var i=oe(r);!i.isLeafNode()&&i.isEmpty()||(n=n.updateImmediateChild(e,i))}}),n.updatePriority(oe(e))}var r=[],i=!1;if(P(t,function(t,e){if("."!==t.substring(0,1)){var n=oe(e);n.isEmpty()||(i=i||!n.getPriority().isEmpty(),r.push(new Pt(t,n)))}}),0===r.length)return re.EMPTY_NODE;var s=te(r,qt,function(t){return t.name},Bt);if(i){var a=te(r,Jt.getCompare());return new re(s,oe(e),new ne({".priority":a},{".priority":Jt}))}return new re(s,oe(e),ne.Default)}Object.defineProperties(Pt,{MIN:{value:new Pt(T,re.EMPTY_NODE)},MAX:{value:new Pt(I,ie)}}),Dt.__EMPTY_NODE=re.EMPTY_NODE,Yt.__childrenNodeConstructor=re,kt=ie,Kt=ie,zt=oe;var se,ae,ue=function(t){function e(e){var n=t.call(this)||this;return n.indexPath_=e,Object(o.d)(!_t(e)&&".priority"!==dt(e),"Can't create PathIndex with empty path or .priority key"),n}return Object(s.c)(e,t),e.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},e.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},e.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node),i=n.compareTo(r);return 0===i?x(t.name,e.name):i},e.prototype.makePost=function(t,e){var n=oe(t),r=re.EMPTY_NODE.updateChild(this.indexPath_,n);return new Pt(e,r)},e.prototype.maxPost=function(){var t=re.EMPTY_NODE.updateChild(this.indexPath_,ie);return new Pt(I,t)},e.prototype.toString=function(){return yt(this.indexPath_,0).join("/")},e}(Rt),ce=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(s.c)(e,t),e.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?x(t.name,e.name):n},e.prototype.isDefinedOn=function(t){return!0},e.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},e.prototype.minPost=function(){return Pt.MIN},e.prototype.maxPost=function(){return Pt.MAX},e.prototype.makePost=function(t,e){var n=oe(t);return new Pt(e,n)},e.prototype.toString=function(){return".value"},e}(Rt)),le="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",he=(se=0,ae=[],function(t){var e,n=t===se;se=t;var r=new Array(8);for(e=7;e>=0;e--)r[e]=le.charAt(t%64),t=Math.floor(t/64);Object(o.d)(0===t,"Cannot push at time == 0");var i=r.join("");if(n){for(e=11;e>=0&&63===ae[e];e--)ae[e]=0;ae[e]++}else for(e=0;e<12;e++)ae[e]=Math.floor(64*Math.random());for(e=0;e<12;e++)i+=le.charAt(ae[e]);return Object(o.d)(20===i.length,"nextPushId: Length should be 20."),i}),de=function(t){if("2147483647"===t)return"-";var e=L(t);if(null!=e)return""+(e+1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);if(n.length<786)return n.push("-"),n.join("");for(var i=n.length-1;i>=0&&"z"===n[i];)i--;if(-1===i)return I;var o=le.charAt(le.indexOf(n[i])+1);return n[i]=o,n.slice(0,i+1).join("")},fe=function(t){if("-2147483648"===t)return T;var e=L(t);if(null!=e)return""+(e-1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);return"-"===n[n.length-1]?1===n.length?"2147483647":(delete n[n.length-1],n.join("")):(n[n.length-1]=le.charAt(le.indexOf(n[n.length-1])-1),n.join("")+"z".repeat(786-n.length))};function pe(t){return{type:"value",snapshotNode:t}}function ge(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function me(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function ye(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}var ve=function(){function t(t){this.index_=t}return t.prototype.updateChild=function(t,e,n,r,i,s){Object(o.d)(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var a=t.getImmediateChild(e);return a.getChild(r).equals(n.getChild(r))&&a.isEmpty()===n.isEmpty()?t:(null!=s&&(n.isEmpty()?t.hasChild(e)?s.trackChildChange(me(e,a)):Object(o.d)(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?s.trackChildChange(ge(e,n)):s.trackChildChange(ye(e,n,a))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},t.prototype.updateFullNode=function(t,e,n){return null!=n&&(t.isLeafNode()||t.forEachChild(Jt,function(t,r){e.hasChild(t)||n.trackChildChange(me(t,r))}),e.isLeafNode()||e.forEachChild(Jt,function(e,r){if(t.hasChild(e)){var i=t.getImmediateChild(e);i.equals(r)||n.trackChildChange(ye(e,r,i))}else n.trackChildChange(ge(e,r))})),e.withIndex(this.index_)},t.prototype.updatePriority=function(t,e){return t.isEmpty()?re.EMPTY_NODE:t.updatePriority(e)},t.prototype.filtersNodes=function(){return!1},t.prototype.getIndexedFilter=function(){return this},t.prototype.getIndex=function(){return this.index_},t}(),be=function(){function t(e){this.indexedFilter_=new ve(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e)}return t.prototype.getStartPost=function(){return this.startPost_},t.prototype.getEndPost=function(){return this.endPost_},t.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},t.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new Pt(e,n))||(n=re.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},t.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=re.EMPTY_NODE);var r=e.withIndex(this.index_);r=r.updatePriority(re.EMPTY_NODE);var i=this;return e.forEachChild(Jt,function(t,e){i.matches(new Pt(t,e))||(r=r.updateImmediateChild(t,re.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.indexedFilter_},t.prototype.getIndex=function(){return this.index_},t.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},t.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},t}(),_e=function(){function t(t){this.rangedFilter_=new be(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return t.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new Pt(e,n))||(n=re.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},t.prototype.updateFullNode=function(t,e,n){var r;if(e.isLeafNode()||e.isEmpty())r=re.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){r=re.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var s=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),s)<=0:this.index_.compare(s,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(s.name,s.node),o++}}else{r=(r=e.withIndex(this.index_)).updatePriority(re.EMPTY_NODE);var a=void 0,u=void 0,c=void 0;if(i=void 0,this.reverse_){i=r.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var l=this.index_.getCompare();c=function(t,e){return l(e,t)}}else i=r.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();o=0;for(var h=!1;i.hasNext();)s=i.getNext(),!h&&c(a,s)<=0&&(h=!0),h&&o<this.limit_&&c(s,u)<=0?o++:r=r.updateImmediateChild(s.name,re.EMPTY_NODE)}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},t.prototype.getIndex=function(){return this.index_},t.prototype.fullLimitUpdateChild_=function(t,e,n,r,i){var s;if(this.reverse_){var a=this.index_.getCompare();s=function(t,e){return a(e,t)}}else s=this.index_.getCompare();var u=t;Object(o.d)(u.numChildren()===this.limit_,"");var c=new Pt(e,n),l=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),h=this.rangedFilter_.matches(c);if(u.hasChild(e)){for(var d=u.getImmediateChild(e),f=r.getChildAfterChild(this.index_,l,this.reverse_);null!=f&&(f.name===e||u.hasChild(f.name));)f=r.getChildAfterChild(this.index_,f,this.reverse_);var p=null==f?1:s(f,c);if(h&&!n.isEmpty()&&p>=0)return null!=i&&i.trackChildChange(ye(e,n,d)),u.updateImmediateChild(e,n);null!=i&&i.trackChildChange(me(e,d));var g=u.updateImmediateChild(e,re.EMPTY_NODE);return null!=f&&this.rangedFilter_.matches(f)?(null!=i&&i.trackChildChange(ge(f.name,f.node)),g.updateImmediateChild(f.name,f.node)):g}return n.isEmpty()?t:h&&s(l,c)>=0?(null!=i&&(i.trackChildChange(me(l.name,l.node)),i.trackChildChange(ge(e,n))),u.updateImmediateChild(e,n).updateImmediateChild(l.name,re.EMPTY_NODE)):t},t}(),we=function(){function t(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Jt}return t.prototype.hasStart=function(){return this.startSet_},t.prototype.hasStartAfter=function(){return this.startAfterSet_},t.prototype.hasEndBefore=function(){return this.endBeforeSet_},t.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_},t.prototype.getIndexStartValue=function(){return Object(o.d)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},t.prototype.getIndexStartName=function(){return Object(o.d)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:T},t.prototype.hasEnd=function(){return this.endSet_},t.prototype.getIndexEndValue=function(){return Object(o.d)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},t.prototype.getIndexEndName=function(){return Object(o.d)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:I},t.prototype.hasLimit=function(){return this.limitSet_},t.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},t.prototype.getLimit=function(){return Object(o.d)(this.limitSet_,"Only valid if limit has been set"),this.limit_},t.prototype.getIndex=function(){return this.index_},t.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},t.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===Jt},t.prototype.copy=function(){var e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e},t}();function Oe(t,e){var n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="l",n}function Se(t,e){var n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="r",n}function Ce(t,e,n){var r=t.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function Ee(t,e,n){var r;return t.index_===Lt?("string"==typeof e&&(e=de(e)),r=Ce(t,e,n)):r=Ce(t,e,null==n?I:de(n)),r.startAfterSet_=!0,r}function Te(t,e,n){var r=t.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function Ie(t,e,n){var r;return t.index_===Lt?("string"==typeof e&&(e=fe(e)),r=Te(t,e,n)):r=Te(t,e,null==n?T:fe(n)),r.endBeforeSet_=!0,r}function xe(t,e){var n=t.copy();return n.index_=e,n}function ke(t){var e,n={};return t.isDefault()||(t.index_===Jt?e="$priority":t.index_===ce?e="$value":t.index_===Lt?e="$key":(Object(o.d)(t.index_ instanceof ue,"Unrecognized index type!"),e=t.index_.toString()),n.orderBy=Object(o.G)(e),t.startSet_&&(n.startAt=Object(o.G)(t.indexStartValue_),t.startNameSet_&&(n.startAt+=","+Object(o.G)(t.indexStartName_))),t.endSet_&&(n.endAt=Object(o.G)(t.indexEndValue_),t.endNameSet_&&(n.endAt+=","+Object(o.G)(t.indexEndName_))),t.limitSet_&&(t.isViewFromLeft()?n.limitToFirst=t.limit_:n.limitToLast=t.limit_)),n}var Ne=function(t){function e(e,n,r){var i=t.call(this)||this;return i.repoInfo_=e,i.onDataUpdate_=n,i.authTokenProvider_=r,i.log_=w("p:rest:"),i.listens_={},i}return Object(s.c)(e,t),e.prototype.reportStats=function(t){throw new Error("Method not implemented.")},e.getListenId_=function(t,e){return void 0!==e?"tag$"+e:(Object(o.d)(t.getQueryParams().isDefault(),"should have a tag if it's not a default query."),t.path.toString())},e.prototype.listen=function(t,n,r,i){var s=this,a=t.path.toString();this.log_("Listen called for "+a+" "+t.queryIdentifier());var u=e.getListenId_(t,r),c={};this.listens_[u]=c;var l=ke(t.getQueryParams());this.restRequest_(a+".json",l,function(t,e){var n=e;404===t&&(n=null,t=null),null===t&&s.onDataUpdate_(a,n,!1,r),Object(o.D)(s.listens_,u)===c&&i(t?401===t?"permission_denied":"rest_error:"+t:"ok",null)})},e.prototype.unlisten=function(t,n){var r=e.getListenId_(t,n);delete this.listens_[r]},e.prototype.get=function(t){var e=this,n=ke(t.getQueryParams()),r=t.path.toString(),i=new o.a;return this.restRequest_(r+".json",n,function(t,n){var o=n;404===t&&(o=null,t=null),null===t?(e.onDataUpdate_(r,o,!1,null),i.resolve(o)):i.reject(new Error(o))}),i.promise},e.prototype.refreshAuthToken=function(t){},e.prototype.restRequest_=function(t,e,n){var r=this;void 0===e&&(e={}),e.format="export",this.authTokenProvider_.getToken(!1).then(function(i){var s=i&&i.accessToken;s&&(e.auth=s);var a=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+t+"?ns="+r.repoInfo_.namespace+Object(o.C)(e);r.log_("Sending REST request for "+a);var u=new XMLHttpRequest;u.onreadystatechange=function(){if(n&&4===u.readyState){r.log_("REST Response for "+a+" received. status:",u.status,"response:",u.responseText);var t=null;if(u.status>=200&&u.status<300){try{t=Object(o.A)(u.responseText)}catch(e){C("Failed to parse JSON response for "+a+": "+u.responseText)}n(null,t)}else 401!==u.status&&404!==u.status&&C("Got unsuccessful REST response for "+a+" Status: "+u.status),n(u.status);n=null}},u.open("GET",a,!0),u.send()})},e}(at),Ae=function(){function t(){this.rootNode_=re.EMPTY_NODE}return t.prototype.getNode=function(t){return this.rootNode_.getChild(t)},t.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},t}();function je(){return{value:null,children:new Map}}function Pe(t,e,n){if(_t(e))t.value=n,t.children.clear();else if(null!==t.value)t.value=t.value.updateChild(e,n);else{var r=dt(e);t.children.has(r)||t.children.set(r,je()),Pe(t.children.get(r),e=pt(e),n)}}function Re(t,e){if(_t(e))return t.value=null,t.children.clear(),!0;if(null!==t.value){if(t.value.isLeafNode())return!1;var n=t.value;return t.value=null,n.forEachChild(Jt,function(e,n){Pe(t,new lt(e),n)}),Re(t,e)}if(t.children.size>0){var r=dt(e);return e=pt(e),t.children.has(r)&&Re(t.children.get(r),e)&&t.children.delete(r),0===t.children.size}return!0}function De(t,e,n){null!==t.value?n(e,t.value):function(t,e){t.children.forEach(function(t,n){e(n,t)})}(t,function(t,r){De(r,new lt(e.toString()+"/"+t),n)})}var Le=function(){function t(t){this.collection_=t,this.last_=null}return t.prototype.get=function(){var t=this.collection_.get(),e=Object(s.a)({},t);return this.last_&&P(this.last_,function(t,n){e[t]=e[t]-n}),this.last_=t,e},t}(),Me=function(){function t(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new Le(t);var n=1e4+2e4*Math.random();F(this.reportStats_.bind(this),Math.floor(n))}return t.prototype.reportStats_=function(){var t=this,e=this.statsListener_.get(),n={},r=!1;P(e,function(e,i){i>0&&Object(o.h)(t.statsToReport_,e)&&(n[e]=i,r=!0)}),r&&this.server_.reportStats(n),F(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},t}(),Fe=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}({});function Ve(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}var Ue,qe=function(){function t(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=Fe.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return t.prototype.operationForChild=function(e){if(_t(this.path)){if(null!=this.affectedTree.value)return Object(o.d)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new lt(e));return new t(ht(),n,this.revert)}return Object(o.d)(dt(this.path)===e,"operationForChild called for unrelated child."),new t(pt(this.path),this.affectedTree,this.revert)},t}(),Be=function(){function t(t,e){this.source=t,this.path=e,this.type=Fe.LISTEN_COMPLETE}return t.prototype.operationForChild=function(e){return _t(this.path)?new t(this.source,ht()):new t(this.source,pt(this.path))},t}(),He=function(){function t(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=Fe.OVERWRITE}return t.prototype.operationForChild=function(e){return _t(this.path)?new t(this.source,ht(),this.snap.getImmediateChild(e)):new t(this.source,pt(this.path),this.snap)},t}(),ze=function(){function t(t,e,n){this.source=t,this.path=e,this.children=n,this.type=Fe.MERGE}return t.prototype.operationForChild=function(e){if(_t(this.path)){var n=this.children.subtree(new lt(e));return n.isEmpty()?null:n.value?new He(this.source,ht(),n.value):new t(this.source,ht(),n)}return Object(o.d)(dt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,pt(this.path),this.children)},t.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},t}(),Ke=function(){function t(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}return t.prototype.isFullyInitialized=function(){return this.fullyInitialized_},t.prototype.isFiltered=function(){return this.filtered_},t.prototype.isCompleteForPath=function(t){if(_t(t))return this.isFullyInitialized()&&!this.filtered_;var e=dt(t);return this.isCompleteForChild(e)},t.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},t.prototype.getNode=function(){return this.node_},t}(),We=function(){return function(t){this.query_=t,this.index_=this.query_.getQueryParams().getIndex()}}();function Qe(t,e,n,r,i,s){var a=r.filter(function(t){return t.type===n});a.sort(function(e,n){return function(t,e,n){if(null==e.childName||null==n.childName)throw Object(o.e)("Should only compare child_ events.");var r=new Pt(e.childName,e.snapshotNode),i=new Pt(n.childName,n.snapshotNode);return t.index_.compare(r,i)}(t,e,n)}),a.forEach(function(n){var r=function(t,e,n){return"value"===e.type||"child_removed"===e.type||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}(t,n,s);i.forEach(function(i){i.respondsTo(n.type)&&e.push(i.createEvent(r,t.query_))})})}function Ge(t,e){return{eventCache:t,serverCache:e}}function $e(t,e,n,r){return Ge(new Ke(e,n,r),t.serverCache)}function Ye(t,e,n,r){return Ge(t.eventCache,new Ke(e,n,r))}function Je(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Xe(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}var Ze=function(){function t(t,e){void 0===e&&(Ue||(Ue=new Ut(k)),e=Ue),this.value=t,this.children=e}return t.fromObject=function(e){var n=new t(null);return P(e,function(t,e){n=n.set(new lt(t),e)}),n},t.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},t.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:ht(),value:this.value};if(_t(t))return null;var n=dt(t),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(pt(t),e);return null!=i?{path:bt(new lt(n),i.path),value:i.value}:null}return null},t.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,function(){return!0})},t.prototype.subtree=function(e){if(_t(e))return this;var n=dt(e),r=this.children.get(n);return null!==r?r.subtree(pt(e)):new t(null)},t.prototype.set=function(e,n){if(_t(e))return new t(n,this.children);var r=dt(e),i=(this.children.get(r)||new t(null)).set(pt(e),n),o=this.children.insert(r,i);return new t(this.value,o)},t.prototype.remove=function(e){if(_t(e))return this.children.isEmpty()?new t(null):new t(null,this.children);var n=dt(e),r=this.children.get(n);if(r){var i=r.remove(pt(e)),o=void 0;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?new t(null):new t(this.value,o)}return this},t.prototype.get=function(t){if(_t(t))return this.value;var e=dt(t),n=this.children.get(e);return n?n.get(pt(t)):null},t.prototype.setTree=function(e,n){if(_t(e))return n;var r,i=dt(e),o=(this.children.get(i)||new t(null)).setTree(pt(e),n);return r=o.isEmpty()?this.children.remove(i):this.children.insert(i,o),new t(this.value,r)},t.prototype.fold=function(t){return this.fold_(ht(),t)},t.prototype.fold_=function(t,e){var n={};return this.children.inorderTraversal(function(r,i){n[r]=i.fold_(bt(t,r),e)}),e(t,this.value,n)},t.prototype.findOnPath=function(t,e){return this.findOnPath_(t,ht(),e)},t.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if(_t(t))return null;var i=dt(t),o=this.children.get(i);return o?o.findOnPath_(pt(t),bt(e,i),n):null},t.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,ht(),e)},t.prototype.foreachOnPath_=function(e,n,r){if(_t(e))return this;this.value&&r(n,this.value);var i=dt(e),o=this.children.get(i);return o?o.foreachOnPath_(pt(e),bt(n,i),r):new t(null)},t.prototype.foreach=function(t){this.foreach_(ht(),t)},t.prototype.foreach_=function(t,e){this.children.inorderTraversal(function(n,r){r.foreach_(bt(t,n),e)}),this.value&&e(t,this.value)},t.prototype.foreachChild=function(t){this.children.inorderTraversal(function(e,n){n.value&&t(e,n.value)})},t}(),tn=function(){function t(t){this.writeTree_=t}return t.empty=function(){return new t(new Ze(null))},t}();function en(t,e,n){if(_t(e))return new tn(new Ze(n));var r=t.writeTree_.findRootMostValueAndPath(e);if(null!=r){var i=r.path,o=r.value,s=wt(i,e);return o=o.updateChild(s,n),new tn(t.writeTree_.set(i,o))}var a=new Ze(n),u=t.writeTree_.setTree(e,a);return new tn(u)}function nn(t,e,n){var r=t;return P(n,function(t,n){r=en(r,bt(e,t),n)}),r}function rn(t,e){if(_t(e))return tn.empty();var n=t.writeTree_.setTree(e,new Ze(null));return new tn(n)}function on(t,e){return null!=sn(t,e)}function sn(t,e){var n=t.writeTree_.findRootMostValueAndPath(e);return null!=n?t.writeTree_.get(n.path).getChild(wt(n.path,e)):null}function an(t){var e=[],n=t.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(Jt,function(t,n){e.push(new Pt(t,n))}):t.writeTree_.children.inorderTraversal(function(t,n){null!=n.value&&e.push(new Pt(t,n.value))}),e}function un(t,e){if(_t(e))return t;var n=sn(t,e);return new tn(null!=n?new Ze(n):t.writeTree_.subtree(e))}function cn(t){return t.writeTree_.isEmpty()}function ln(t,e){return hn(ht(),t.writeTree_,e)}function hn(t,e,n){if(null!=e.value)return n.updateChild(t,e.value);var r=null;return e.children.inorderTraversal(function(e,i){".priority"===e?(Object(o.d)(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=hn(bt(t,e),i,n)}),n.getChild(t).isEmpty()||null===r||(n=n.updateChild(bt(t,".priority"),r)),n}function dn(t,e){return Sn(e,t)}function fn(t,e){if(t.snap)return Ct(t.path,e);for(var n in t.children)if(t.children.hasOwnProperty(n)&&Ct(bt(t.path,n),e))return!0;return!1}function pn(t){return t.visible}function gn(t,e,n){for(var r=tn.empty(),i=0;i<t.length;++i){var s=t[i];if(e(s)){var a=s.path,u=void 0;if(s.snap)Ct(n,a)?r=en(r,u=wt(n,a),s.snap):Ct(a,n)&&(u=wt(a,n),r=en(r,ht(),s.snap.getChild(u)));else{if(!s.children)throw Object(o.e)("WriteRecord should have .snap or .children");if(Ct(n,a))r=nn(r,u=wt(n,a),s.children);else if(Ct(a,n))if(_t(u=wt(a,n)))r=nn(r,ht(),s.children);else{var c=Object(o.D)(s.children,dt(u));if(c){var l=c.getChild(pt(u));r=en(r,ht(),l)}}}}}return r}function mn(t,e,n,r,i){if(r||i){var o=un(t.visibleWrites,e);return!i&&cn(o)?n:i||null!=n||on(o,ht())?ln(gn(t.allWrites,function(t){return(t.visible||i)&&(!r||!~r.indexOf(t.writeId))&&(Ct(t.path,e)||Ct(e,t.path))},e),n||re.EMPTY_NODE):null}var s=sn(t.visibleWrites,e);if(null!=s)return s;var a=un(t.visibleWrites,e);return cn(a)?n:null!=n||on(a,ht())?ln(a,n||re.EMPTY_NODE):null}function yn(t,e,n,r){return mn(t.writeTree,t.treePath,e,n,r)}function vn(t,e){return function(t,e,n){var r=re.EMPTY_NODE,i=sn(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Jt,function(t,e){r=r.updateImmediateChild(t,e)}),r;if(n){var o=un(t.visibleWrites,e);return n.forEachChild(Jt,function(t,e){var n=ln(un(o,new lt(t)),e);r=r.updateImmediateChild(t,n)}),an(o).forEach(function(t){r=r.updateImmediateChild(t.name,t.node)}),r}return an(un(t.visibleWrites,e)).forEach(function(t){r=r.updateImmediateChild(t.name,t.node)}),r}(t.writeTree,t.treePath,e)}function bn(t,e,n,r){return function(t,e,n,r,i){Object(o.d)(r||i,"Either existingEventSnap or existingServerSnap must exist");var s=bt(e,n);if(on(t.visibleWrites,s))return null;var a=un(t.visibleWrites,s);return cn(a)?i.getChild(n):ln(a,i.getChild(n))}(t.writeTree,t.treePath,e,n,r)}function _n(t,e){return function(t,e){return sn(t.visibleWrites,e)}(t.writeTree,bt(t.treePath,e))}function wn(t,e,n){return function(t,e,n,r){var i=bt(e,n),o=sn(t.visibleWrites,i);return null!=o?o:r.isCompleteForChild(n)?ln(un(t.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(t.writeTree,t.treePath,e,n)}function On(t,e){return Sn(bt(t.treePath,e),t.writeTree)}function Sn(t,e){return{treePath:t,writeTree:e}}var Cn=function(){function t(){this.changeMap=new Map}return t.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;Object(o.d)("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),Object(o.d)(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===e&&"child_removed"===i)this.changeMap.set(n,ye(n,t.snapshotNode,r.snapshotNode));else if("child_removed"===e&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===e&&"child_changed"===i)this.changeMap.set(n,me(n,r.oldSnap));else if("child_changed"===e&&"child_added"===i)this.changeMap.set(n,ge(n,t.snapshotNode));else{if("child_changed"!==e||"child_changed"!==i)throw Object(o.e)("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(n,ye(n,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,t)},t.prototype.getChanges=function(){return Array.from(this.changeMap.values())},t}(),En=new(function(){function t(){}return t.prototype.getCompleteChild=function(t){return null},t.prototype.getChildAfterChild=function(t,e,n){return null},t}()),Tn=function(){function t(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}return t.prototype.getCompleteChild=function(t){var e=this.viewCache_.eventCache;if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);var n=null!=this.optCompleteServerCache_?new Ke(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return wn(this.writes_,t,n)},t.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Xe(this.viewCache_),i=function(t,e,n,r,i,o){return function(t,e,n,r,i,o,s){var a,u=un(t.visibleWrites,e),c=sn(u,ht());if(null!=c)a=c;else{if(null==n)return[];a=ln(u,n)}if((a=a.withIndex(s)).isEmpty()||a.isLeafNode())return[];for(var l=[],h=s.getCompare(),d=o?a.getReverseIteratorFrom(r,s):a.getIteratorFrom(r,s),f=d.getNext();f&&l.length<1;)0!==h(f,r)&&l.push(f),f=d.getNext();return l}(t.writeTree,t.treePath,e,n,0,i,o)}(this.writes_,r,e,0,n,t);return 0===i.length?null:i[0]},t}();function In(t,e,n,r,i,s){var a=e.eventCache;if(null!=_n(r,n))return e;var u=void 0,c=void 0;if(_t(n))if(Object(o.d)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){var l=Xe(e),h=vn(r,l instanceof re?l:re.EMPTY_NODE);u=t.filter.updateFullNode(e.eventCache.getNode(),h,s)}else{var d=yn(r,Xe(e));u=t.filter.updateFullNode(e.eventCache.getNode(),d,s)}else{var f=dt(n);if(".priority"===f){Object(o.d)(1===ft(n),"Can't have a priority with additional path components");var p=a.getNode(),g=bn(r,n,p,c=e.serverCache.getNode());u=null!=g?t.filter.updatePriority(p,g):a.getNode()}else{var m=pt(n),y=void 0;if(a.isCompleteForChild(f)){c=e.serverCache.getNode();var v=bn(r,n,a.getNode(),c);y=null!=v?a.getNode().getImmediateChild(f).updateChild(m,v):a.getNode().getImmediateChild(f)}else y=wn(r,f,e.serverCache);u=null!=y?t.filter.updateChild(a.getNode(),f,y,m,i,s):a.getNode()}}return $e(e,u,a.isFullyInitialized()||_t(n),t.filter.filtersNodes())}function xn(t,e,n,r,i,o,s,a){var u,c=e.serverCache,l=s?t.filter:t.filter.getIndexedFilter();if(_t(n))u=l.updateFullNode(c.getNode(),r,null);else if(l.filtersNodes()&&!c.isFiltered()){var h=c.getNode().updateChild(n,r);u=l.updateFullNode(c.getNode(),h,null)}else{var d=dt(n);if(!c.isCompleteForPath(n)&&ft(n)>1)return e;var f=pt(n),p=c.getNode().getImmediateChild(d).updateChild(f,r);u=".priority"===d?l.updatePriority(c.getNode(),p):l.updateChild(c.getNode(),d,p,f,En,null)}var g=Ye(e,u,c.isFullyInitialized()||_t(n),l.filtersNodes());return In(t,g,n,i,new Tn(i,g,o),a)}function kn(t,e,n,r,i,o,s){var a,u,c=e.eventCache,l=new Tn(i,e,o);if(_t(n))u=t.filter.updateFullNode(e.eventCache.getNode(),r,s),a=$e(e,u,!0,t.filter.filtersNodes());else{var h=dt(n);if(".priority"===h)u=t.filter.updatePriority(e.eventCache.getNode(),r),a=$e(e,u,c.isFullyInitialized(),c.isFiltered());else{var d=pt(n),f=c.getNode().getImmediateChild(h),p=void 0;if(_t(d))p=r;else{var g=l.getCompleteChild(h);p=null!=g?".priority"===gt(d)&&g.getChild(vt(d)).isEmpty()?g:g.updateChild(d,r):re.EMPTY_NODE}a=f.equals(p)?e:$e(e,t.filter.updateChild(c.getNode(),h,p,d,l,s),c.isFullyInitialized(),t.filter.filtersNodes())}}return a}function Nn(t,e){return t.eventCache.isCompleteForChild(e)}function An(t,e,n){return n.foreach(function(t,n){e=e.updateChild(t,n)}),e}function jn(t,e,n,r,i,o,s,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;var u,c=e;u=_t(n)?r:new Ze(null).setTree(n,r);var l=e.serverCache.getNode();return u.children.inorderTraversal(function(n,r){if(l.hasChild(n)){var u=An(0,e.serverCache.getNode().getImmediateChild(n),r);c=xn(t,c,new lt(n),u,i,o,s,a)}}),u.children.inorderTraversal(function(n,r){var u=!e.serverCache.isCompleteForChild(n)&&void 0===r.value;if(!l.hasChild(n)&&!u){var h=An(0,e.serverCache.getNode().getImmediateChild(n),r);c=xn(t,c,new lt(n),h,i,o,s,a)}}),c}var Pn,Rn=function(){function t(t,e){this.query_=t,this.eventRegistrations_=[];var n,r=this.query_.getQueryParams(),i=new ve(r.getIndex()),o=(n=r).loadsAllData()?new ve(n.getIndex()):n.hasLimit()?new _e(n):new be(n);this.processor_=function(t){return{filter:t}}(o);var s=e.serverCache,a=e.eventCache,u=i.updateFullNode(re.EMPTY_NODE,s.getNode(),null),c=o.updateFullNode(re.EMPTY_NODE,a.getNode(),null),l=new Ke(u,s.isFullyInitialized(),i.filtersNodes()),h=new Ke(c,a.isFullyInitialized(),o.filtersNodes());this.viewCache_=Ge(h,l),this.eventGenerator_=new We(this.query_)}return Object.defineProperty(t.prototype,"query",{get:function(){return this.query_},enumerable:!1,configurable:!0}),t}();function Dn(t,e){var n=Xe(t.viewCache_);return n&&(t.query.getQueryParams().loadsAllData()||!_t(e)&&!n.getImmediateChild(dt(e)).isEmpty())?n.getChild(e):null}function Ln(t){return 0===t.eventRegistrations_.length}function Mn(t,e,n){var r=[];if(n){Object(o.d)(null==e,"A cancel should cancel all event registrations.");var i=t.query.path;t.eventRegistrations_.forEach(function(t){var e=t.createCancelEvent(n,i);e&&r.push(e)})}if(e){for(var s=[],a=0;a<t.eventRegistrations_.length;++a){var u=t.eventRegistrations_[a];if(u.matches(e)){if(e.hasAnyCallback()){s=s.concat(t.eventRegistrations_.slice(a+1));break}}else s.push(u)}t.eventRegistrations_=s}else t.eventRegistrations_=[];return r}function Fn(t,e,n,r){e.type===Fe.MERGE&&null!==e.source.queryId&&(Object(o.d)(Xe(t.viewCache_),"We should always have a full cache before handling merges"),Object(o.d)(Je(t.viewCache_),"Missing event cache, even though we have a server cache"));var i,s,a=t.viewCache_,u=function(t,e,n,r,i){var s,a,u=new Cn;if(n.type===Fe.OVERWRITE){var c=n;c.source.fromUser?s=kn(t,e,c.path,c.snap,r,i,u):(Object(o.d)(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!_t(c.path),s=xn(t,e,c.path,c.snap,r,i,a,u))}else if(n.type===Fe.MERGE){var l=n;l.source.fromUser?s=function(t,e,n,r,i,o,s){var a=e;return r.foreach(function(r,u){var c=bt(n,r);Nn(e,dt(c))&&(a=kn(t,a,c,u,i,o,s))}),r.foreach(function(r,u){var c=bt(n,r);Nn(e,dt(c))||(a=kn(t,a,c,u,i,o,s))}),a}(t,e,l.path,l.children,r,i,u):(Object(o.d)(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),s=jn(t,e,l.path,l.children,r,i,a,u))}else if(n.type===Fe.ACK_USER_WRITE){var h=n;s=h.revert?function(t,e,n,r,i,s){var a;if(null!=_n(r,n))return e;var u=new Tn(r,e,i),c=e.eventCache.getNode(),l=void 0;if(_t(n)||".priority"===dt(n)){var h=void 0;if(e.serverCache.isFullyInitialized())h=yn(r,Xe(e));else{var d=e.serverCache.getNode();Object(o.d)(d instanceof re,"serverChildren would be complete if leaf node"),h=vn(r,d)}l=t.filter.updateFullNode(c,h=h,s)}else{var f=dt(n),p=wn(r,f,e.serverCache);null==p&&e.serverCache.isCompleteForChild(f)&&(p=c.getImmediateChild(f)),(l=null!=p?t.filter.updateChild(c,f,p,pt(n),u,s):e.eventCache.getNode().hasChild(f)?t.filter.updateChild(c,f,re.EMPTY_NODE,pt(n),u,s):c).isEmpty()&&e.serverCache.isFullyInitialized()&&(a=yn(r,Xe(e))).isLeafNode()&&(l=t.filter.updateFullNode(l,a,s))}return a=e.serverCache.isFullyInitialized()||null!=_n(r,ht()),$e(e,l,a,t.filter.filtersNodes())}(t,e,h.path,r,i,u):function(t,e,n,r,i,o,s){if(null!=_n(i,n))return e;var a=e.serverCache.isFiltered(),u=e.serverCache;if(null!=r.value){if(_t(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return xn(t,e,n,u.getNode().getChild(n),i,o,a,s);if(_t(n)){var c=new Ze(null);return u.getNode().forEachChild(Lt,function(t,e){c=c.set(new lt(t),e)}),jn(t,e,n,c,i,o,a,s)}return e}var l=new Ze(null);return r.foreach(function(t,e){var r=bt(n,t);u.isCompleteForPath(r)&&(l=l.set(t,u.getNode().getChild(r)))}),jn(t,e,n,l,i,o,a,s)}(t,e,h.path,h.affectedTree,r,i,u)}else{if(n.type!==Fe.LISTEN_COMPLETE)throw Object(o.e)("Unknown operation type: "+n.type);s=function(t,e,n,r,i){var o=e.serverCache;return In(t,Ye(e,o.getNode(),o.isFullyInitialized()||_t(n),o.isFiltered()),n,r,En,i)}(t,e,n.path,r,u)}var d=u.getChanges();return function(t,e,n){var r=e.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=Je(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(pe(Je(e)))}}(e,s,d),{viewCache:s,changes:d}}(t.processor_,a,e,n,r);return i=t.processor_,s=u.viewCache,Object(o.d)(s.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),Object(o.d)(s.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed"),Object(o.d)(u.viewCache.serverCache.isFullyInitialized()||!a.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=u.viewCache,Vn(t,u.changes,u.viewCache.eventCache.getNode(),null)}function Vn(t,e,n,r){return function(t,e,n,r){var i=[],o=[];return e.forEach(function(e){"child_changed"===e.type&&t.index_.indexedValueChanged(e.oldSnap,e.snapshotNode)&&o.push({type:"child_moved",snapshotNode:e.snapshotNode,childName:e.childName})}),Qe(t,i,"child_removed",e,r,n),Qe(t,i,"child_added",e,r,n),Qe(t,i,"child_moved",o,r,n),Qe(t,i,"child_changed",e,r,n),Qe(t,i,"value",e,r,n),i}(t.eventGenerator_,e,n,r?[r]:t.eventRegistrations_)}var Un=function(){return function(){this.views=new Map}}();function qn(t,e,n,r){var i,a,u=e.source.queryId;if(null!==u){var c=t.views.get(u);return Object(o.d)(null!=c,"SyncTree gave us an op for an invalid query."),Fn(c,e,n,r)}var l=[];try{for(var h=Object(s.g)(t.views.values()),d=h.next();!d.done;d=h.next())l=l.concat(Fn(c=d.value,e,n,r))}catch(f){i={error:f}}finally{try{d&&!d.done&&(a=h.return)&&a.call(h)}finally{if(i)throw i.error}}return l}function Bn(t,e,n,r,i){var o=e.queryIdentifier(),s=t.views.get(o);if(!s){var a=yn(n,i?r:null),u=!1;a?u=!0:r instanceof re?(a=vn(n,r),u=!1):(a=re.EMPTY_NODE,u=!1);var c=Ge(new Ke(a,u,!1),new Ke(r,i,!1));return new Rn(e,c)}return s}function Hn(t){var e,n,r=[];try{for(var i=Object(s.g)(t.views.values()),o=i.next();!o.done;o=i.next()){var a=o.value;a.query.getQueryParams().loadsAllData()||r.push(a)}}catch(u){e={error:u}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}function zn(t,e){var n,r,i=null;try{for(var o=Object(s.g)(t.views.values()),a=o.next();!a.done;a=o.next())i=i||Dn(a.value,e)}catch(u){n={error:u}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return i}function Kn(t,e){if(e.getQueryParams().loadsAllData())return Gn(t);var n=e.queryIdentifier();return t.views.get(n)}function Wn(t,e){return null!=Kn(t,e)}function Qn(t){return null!=Gn(t)}function Gn(t){var e,n;try{for(var r=Object(s.g)(t.views.values()),i=r.next();!i.done;i=r.next()){var o=i.value;if(o.query.getQueryParams().loadsAllData())return o}}catch(a){e={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return null}var $n=1,Yn=function(){return function(t){this.listenProvider_=t,this.syncPointTree_=new Ze(null),this.pendingWriteTree_={visibleWrites:tn.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}();function Jn(t,e,n,r,i){return function(t,e,n,r,i){Object(o.d)(r>t.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=en(t.visibleWrites,e,n)),t.lastWriteId=r}(t.pendingWriteTree_,e,n,r,i),i?rr(t,new He({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,n)):[]}function Xn(t,e,n){void 0===n&&(n=!1);var r=function(t,e){for(var n=0;n<t.allWrites.length;n++){var r=t.allWrites[n];if(r.writeId===e)return r}return null}(t.pendingWriteTree_,e);if(function(t,e){var n=t.allWrites.findIndex(function(t){return t.writeId===e});Object(o.d)(n>=0,"removeWrite called with nonexistent writeId.");var r=t.allWrites[n];t.allWrites.splice(n,1);for(var i=r.visible,s=!1,a=t.allWrites.length-1;i&&a>=0;){var u=t.allWrites[a];u.visible&&(a>=n&&fn(u,r.path)?i=!1:Ct(r.path,u.path)&&(s=!0)),a--}return!!i&&(s?(function(t){t.visibleWrites=gn(t.allWrites,pn,ht()),t.lastWriteId=t.allWrites.length>0?t.allWrites[t.allWrites.length-1].writeId:-1}(t),!0):(r.snap?t.visibleWrites=rn(t.visibleWrites,r.path):P(r.children,function(e){t.visibleWrites=rn(t.visibleWrites,bt(r.path,e))}),!0))}(t.pendingWriteTree_,e)){var i=new Ze(null);return null!=r.snap?i=i.set(ht(),!0):P(r.children,function(t){i=i.set(new lt(t),!0)}),rr(t,new qe(r.path,i,n))}return[]}function Zn(t,e,n){return rr(t,new He({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,n))}function tr(t,e,n,r){var i=e.path,a=t.syncPointTree_.get(i),u=[];if(a&&("default"===e.queryIdentifier()||Wn(a,e))){var c=function(t,e,n,r){var i,a,u=e.queryIdentifier(),c=[],l=[],h=Qn(t);if("default"===u)try{for(var d=Object(s.g)(t.views.entries()),f=d.next();!f.done;f=d.next()){var p,g=Object(s.e)(f.value,2),m=g[0];l=l.concat(Mn(p=g[1],n,r)),Ln(p)&&(t.views.delete(m),p.query.getQueryParams().loadsAllData()||c.push(p.query))}}catch(y){i={error:y}}finally{try{f&&!f.done&&(a=d.return)&&a.call(d)}finally{if(i)throw i.error}}else(p=t.views.get(u))&&(l=l.concat(Mn(p,n,r)),Ln(p)&&(t.views.delete(u),p.query.getQueryParams().loadsAllData()||c.push(p.query)));return h&&!Qn(t)&&c.push(new(Object(o.d)(Pn,"Reference.ts has not been loaded"),Pn)(e.database,e.path)),{removed:c,events:l}}(a,e,n,r);0===a.views.size&&(t.syncPointTree_=t.syncPointTree_.remove(i));var l=c.removed;u=c.events;var h=-1!==l.findIndex(function(t){return t.getQueryParams().loadsAllData()}),d=t.syncPointTree_.findOnPath(i,function(t,e){return Qn(e)});if(h&&!d){var f=t.syncPointTree_.subtree(i);if(!f.isEmpty())for(var p=function(t){return t.fold(function(t,e,n){if(e&&Qn(e))return[Gn(e)];var r=[];return e&&(r=Hn(e)),P(n,function(t,e){r=r.concat(e)}),r})}(f),g=0;g<p.length;++g){var m=p[g],y=m.query,v=sr(t,m);t.listenProvider_.startListening(dr(y),ar(t,y),v.hashFn,v.onComplete)}}!d&&l.length>0&&!r&&(h?t.listenProvider_.stopListening(dr(e),null):l.forEach(function(e){var n=t.queryToTagMap.get(ur(e));t.listenProvider_.stopListening(dr(e),n)})),function(t,e){for(var n=0;n<e.length;++n){var r=e[n];if(!r.getQueryParams().loadsAllData()){var i=ur(r),o=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(o)}}}(t,l)}return u}function er(t,e,n){var r=e.path,i=null,s=!1;t.syncPointTree_.foreachOnPath(r,function(t,e){var n=wt(t,r);i=i||zn(e,n),s=s||Qn(e)});var a,u=t.syncPointTree_.get(r);u?(s=s||Qn(u),i=i||zn(u,ht())):(u=new Un,t.syncPointTree_=t.syncPointTree_.set(r,u)),null!=i?a=!0:(a=!1,i=re.EMPTY_NODE,t.syncPointTree_.subtree(r).foreachChild(function(t,e){var n=zn(e,ht());n&&(i=i.updateImmediateChild(t,n))}));var c=Wn(u,e);if(!c&&!e.getQueryParams().loadsAllData()){var l=ur(e);Object(o.d)(!t.queryToTagMap.has(l),"View does not exist, but we have a tag");var h=$n++;t.queryToTagMap.set(l,h),t.tagToQueryMap.set(h,l)}var d=function(t,e,n,r,i,o){var s=Bn(t,e,r,i,o);return t.views.has(e.queryIdentifier())||t.views.set(e.queryIdentifier(),s),function(t,e){t.eventRegistrations_.push(e)}(s,n),function(t,e){var n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Jt,function(t,e){r.push(ge(t,e))}),n.isFullyInitialized()&&r.push(pe(n.getNode())),Vn(t,r,n.getNode(),e)}(s,n)}(u,e,n,dn(t.pendingWriteTree_,r),i,a);if(!c&&!s){var f=Kn(u,e);d=d.concat(function(t,e,n){var r=e.path,i=ar(t,e),s=sr(t,n),a=t.listenProvider_.startListening(dr(e),i,s.hashFn,s.onComplete),u=t.syncPointTree_.subtree(r);if(i)Object(o.d)(!Qn(u.value),"If we're adding a query, it shouldn't be shadowed");else for(var c=u.fold(function(t,e,n){if(!_t(t)&&e&&Qn(e))return[Gn(e).query];var r=[];return e&&(r=r.concat(Hn(e).map(function(t){return t.query}))),P(n,function(t,e){r=r.concat(e)}),r}),l=0;l<c.length;++l){var h=c[l];t.listenProvider_.stopListening(dr(h),ar(t,h))}return a}(t,e,f))}return d}function nr(t,e,n){var r=t.pendingWriteTree_,i=t.syncPointTree_.findOnPath(e,function(t,n){var r=zn(n,wt(t,e));if(r)return r});return mn(r,e,i,n,!0)}function rr(t,e){return ir(e,t.syncPointTree_,null,dn(t.pendingWriteTree_,ht()))}function ir(t,e,n,r){if(_t(t.path))return or(t,e,n,r);var i=e.get(ht());null==n&&null!=i&&(n=zn(i,ht()));var o=[],s=dt(t.path),a=t.operationForChild(s),u=e.children.get(s);if(u&&a){var c=n?n.getImmediateChild(s):null,l=On(r,s);o=o.concat(ir(a,u,c,l))}return i&&(o=o.concat(qn(i,t,r,n))),o}function or(t,e,n,r){var i=e.get(ht());null==n&&null!=i&&(n=zn(i,ht()));var o=[];return e.children.inorderTraversal(function(e,i){var s=n?n.getImmediateChild(e):null,a=On(r,e),u=t.operationForChild(e);u&&(o=o.concat(or(u,i,s,a)))}),i&&(o=o.concat(qn(i,t,r,n))),o}function sr(t,e){var n=e.query,r=ar(t,n);return{hashFn:function(){return(function(t){return t.viewCache_.serverCache.getNode()}(e)||re.EMPTY_NODE).hash()},onComplete:function(e){if("ok"===e)return r?function(t,e,n){var r=cr(t,n);if(r){var i=lr(r),o=i.path,s=i.queryId,a=wt(o,e);return hr(t,o,new Be(Ve(s),a))}return[]}(t,n.path,r):function(t,e){return rr(t,new Be({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(t,n.path);var i=function(t,e){var n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?n="Client doesn't have permission to access the desired data.":"unavailable"===t&&(n="The service is unavailable");var r=new Error(t+" at "+e.path.toString()+": "+n);return r.code=t.toUpperCase(),r}(e,n);return tr(t,n,null,i)}}}function ar(t,e){var n=ur(e);return t.queryToTagMap.get(n)}function ur(t){return t.path.toString()+"$"+t.queryIdentifier()}function cr(t,e){return t.tagToQueryMap.get(e)}function lr(t){var e=t.indexOf("$");return Object(o.d)(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new lt(t.substr(0,e))}}function hr(t,e,n){var r=t.syncPointTree_.get(e);return Object(o.d)(r,"Missing sync point for query tag that we're tracking"),qn(r,n,dn(t.pendingWriteTree_,e),null)}function dr(t){return t.getQueryParams().loadsAllData()&&!t.getQueryParams().isDefault()?t.getRef():t}var fr=function(){function t(t){this.node_=t}return t.prototype.getImmediateChild=function(e){return new t(this.node_.getImmediateChild(e))},t.prototype.node=function(){return this.node_},t}(),pr=function(){function t(t,e){this.syncTree_=t,this.path_=e}return t.prototype.getImmediateChild=function(e){var n=bt(this.path_,e);return new t(this.syncTree_,n)},t.prototype.node=function(){return nr(this.syncTree_,this.path_)},t}(),gr=function(t,e,n){return t&&"object"==typeof t?(Object(o.d)(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?mr(t[".sv"],e,n):"object"==typeof t[".sv"]?yr(t[".sv"],e):void Object(o.d)(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},mr=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:Object(o.d)(!1,"Unexpected server value: "+t)}},yr=function(t,e,n){t.hasOwnProperty("increment")||Object(o.d)(!1,"Unexpected server value: "+JSON.stringify(t,null,2));var r=t.increment;"number"!=typeof r&&Object(o.d)(!1,"Unexpected increment value: "+r);var i=e.node();if(Object(o.d)(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var s=i.getValue();return"number"!=typeof s?r:s+r},vr=function(t,e,n,r){return _r(e,new pr(n,t),r)},br=function(t,e,n){return _r(t,new fr(e),n)};function _r(t,e,n){var r,i=t.getPriority().val(),o=gr(i,e.getImmediateChild(".priority"),n);if(t.isLeafNode()){var s=t,a=gr(s.getValue(),e,n);return a!==s.getValue()||o!==s.getPriority().val()?new Yt(a,oe(o)):t}var u=t;return r=u,o!==u.getPriority().val()&&(r=r.updatePriority(new Yt(o))),u.forEachChild(Jt,function(t,i){var o=_r(i,e.getImmediateChild(t),n);o!==i&&(r=r.updateImmediateChild(t,o))}),r}var wr=function(){return function(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n={children:{},childCount:0}),this.name=t,this.parent=e,this.node=n}}();function Or(t,e){for(var n=e instanceof lt?e:new lt(e),r=t,i=dt(n);null!==i;){var s=Object(o.D)(r.node.children,i)||{children:{},childCount:0};r=new wr(i,r,s),i=dt(n=pt(n))}return r}function Sr(t){return t.node.value}function Cr(t,e){t.node.value=e,kr(t)}function Er(t){return t.node.childCount>0}function Tr(t,e){P(t.node.children,function(n,r){e(new wr(n,t,r))})}function Ir(t,e,n,r){n&&!r&&e(t),Tr(t,function(t){Ir(t,e,!0,r)}),n&&r&&e(t)}function xr(t){return new lt(null===t.parent?t.name:xr(t.parent)+"/"+t.name)}function kr(t){null!==t.parent&&function(t,e,n){var r=function(t){return void 0===Sr(t)&&!Er(t)}(n),i=Object(o.h)(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,kr(t)):r||i||(t.node.children[e]=n.node,t.node.childCount++,kr(t))}(t.parent,t.name,t)}var Nr=/[\[\].#$\/\u0000-\u001F\u007F]/,Ar=/[\[\].#$\u0000-\u001F\u007F]/,jr=10485760,Pr=function(t){return"string"==typeof t&&0!==t.length&&!Nr.test(t)},Rr=function(t){return"string"==typeof t&&0!==t.length&&!Ar.test(t)},Dr=function(t){return null===t||"string"==typeof t||"number"==typeof t&&!E(t)||t&&"object"==typeof t&&Object(o.h)(t,".sv")},Lr=function(t,e,n,r,i){i&&void 0===n||Mr(Object(o.l)(t,e,i),n,r)},Mr=function(t,e,n){var r=n instanceof lt?new Et(n,t):n;if(void 0===e)throw new Error(t+"contains undefined "+It(r));if("function"==typeof e)throw new Error(t+"contains a function "+It(r)+" with contents = "+e.toString());if(E(e))throw new Error(t+"contains "+e.toString()+" "+It(r));if("string"==typeof e&&e.length>jr/3&&Object(o.E)(e)>jr)throw new Error(t+"contains a string greater than 10485760 utf8 bytes "+It(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){var i=!1,s=!1;if(P(e,function(e,n){if(".value"===e)i=!0;else if(".priority"!==e&&".sv"!==e&&(s=!0,!Pr(e)))throw new Error(t+" contains an invalid key ("+e+") "+It(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');var a,u;u=e,(a=r).parts_.length>0&&(a.byteLength_+=1),a.parts_.push(u),a.byteLength_+=Object(o.E)(u),Tt(a),Mr(t,n,r),function(t){var e=t.parts_.pop();t.byteLength_-=Object(o.E)(e),t.parts_.length>0&&(t.byteLength_-=1)}(r)}),i&&s)throw new Error(t+' contains ".value" child '+It(r)+" in addition to actual children.")}},Fr=function(t,e,n,r,i){if(!i||void 0!==n){var s=Object(o.l)(t,e,i);if(!n||"object"!=typeof n||Array.isArray(n))throw new Error(s+" must be an object containing the children to replace.");var a=[];P(n,function(t,e){var n=new lt(t);if(Mr(s,e,bt(r,n)),".priority"===gt(n)&&!Dr(e))throw new Error(s+"contains an invalid value for '"+n.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(n)}),function(t,e){var n,r;for(n=0;n<e.length;n++)for(var i=yt(r=e[n]),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!Pr(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort(Ot);var s=null;for(n=0;n<e.length;n++){if(r=e[n],null!==s&&Ct(s,r))throw new Error(t+"contains a path "+s.toString()+" that is ancestor of another path "+r.toString());s=r}}(s,a)}},Vr=function(t,e,n,r){if(!r||void 0!==n){if(E(n))throw new Error(Object(o.l)(t,e,r)+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Dr(n))throw new Error(Object(o.l)(t,e,r)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Ur=function(t,e,n,r){if(!r||void 0!==n)switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Object(o.l)(t,e,r)+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},qr=function(t,e,n,r){if(!(r&&void 0===n||Pr(n)))throw new Error(Object(o.l)(t,e,r)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Br=function(t,e,n,r){if(!(r&&void 0===n||Rr(n)))throw new Error(Object(o.l)(t,e,r)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Hr=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Br(t,e,n,r)},zr=function(t,e){if(".info"===dt(e))throw new Error(t+" failed = Can't modify data under /.info/")},Kr=function(t,e,n){var r=n.path.toString();if("string"!=typeof n.repoInfo.host||0===n.repoInfo.host.length||!Pr(n.repoInfo.namespace)&&"localhost"!==n.repoInfo.host.split(":")[0]||0!==r.length&&!function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Rr(t)}(r))throw new Error(Object(o.l)(t,e,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},Wr=function(t,e,n,r){if((!r||void 0!==n)&&"boolean"!=typeof n)throw new Error(Object(o.l)(t,e,r)+"must be a boolean.")},Qr=function(){return function(){this.eventLists_=[],this.recursionDepth_=0}}();function Gr(t,e){for(var n=null,r=0;r<e.length;r++){var i=e[r],o=i.getPath();null===n||St(o,n.path)||(t.eventLists_.push(n),n=null),null===n&&(n={events:[],path:o}),n.events.push(i)}n&&t.eventLists_.push(n)}function $r(t,e,n){Gr(t,n),Jr(t,function(t){return St(t,e)})}function Yr(t,e,n){Gr(t,n),Jr(t,function(t){return Ct(t,e)||Ct(e,t)})}function Jr(t,e){t.recursionDepth_++;for(var n=!0,r=0;r<t.eventLists_.length;r++){var i=t.eventLists_[r];i&&(e(i.path)?(Xr(t.eventLists_[r]),t.eventLists_[r]=null):n=!1)}n&&(t.eventLists_=[]),t.recursionDepth_--}function Xr(t){for(var e=0;e<t.events.length;e++){var n=t.events[e];if(null!==n){t.events[e]=null;var r=n.getEventRunner();y&&_("event: "+n.toString()),M(r)}}}var Zr="repo_interrupt",ti=function(){function t(t,e,n,r){this.repoInfo_=t,this.forceRestClient_=e,this.app=n,this.authTokenProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Qr,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=je(),this.transactionQueueTree_=new wr,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return t.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},t}();function ei(t){var e=t.infoData_.getNode(new lt(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+e}function ni(t){return(e=(e={timestamp:ei(t)})||{}).timestamp=e.timestamp||(new Date).getTime(),e;var e}function ri(t,e,n,r,i){t.dataUpdateCount++;var s=new lt(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;var a=[];if(i)if(r){var u=Object(o.B)(n,function(t){return oe(t)});a=function(t,e,n,r){var i=cr(t,r);if(i){var o=lr(i),s=o.path,a=o.queryId,u=wt(s,e),c=Ze.fromObject(n);return hr(t,s,new ze(Ve(a),u,c))}return[]}(t.serverSyncTree_,s,u,i)}else{var c=oe(n);a=function(t,e,n,r){var i=cr(t,r);if(null!=i){var o=lr(i),s=o.path,a=o.queryId,u=wt(s,e);return hr(t,s,new He(Ve(a),u,n))}return[]}(t.serverSyncTree_,s,c,i)}else if(r){var l=Object(o.B)(n,function(t){return oe(t)});a=function(t,e,n){var r=Ze.fromObject(n);return rr(t,new ze({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(t.serverSyncTree_,s,l)}else{var h=oe(n);a=Zn(t.serverSyncTree_,s,h)}var d=s;a.length>0&&(d=Oi(t,s)),Yr(t.eventQueue_,d,a)}function ii(t,e){oi(t,"connected",e),!1===e&&function(t){yi(t,"onDisconnectEvents");var e=ni(t),n=je();De(t.onDisconnect_,ht(),function(r,i){var o=vr(r,i,t.serverSyncTree_,e);Pe(n,r,o)});var r=[];De(n,ht(),function(e,n){r=r.concat(Zn(t.serverSyncTree_,e,n));var i=Ii(t,e);Oi(t,i)}),t.onDisconnect_=je(),Yr(t.eventQueue_,ht(),r)}(t)}function oi(t,e,n){var r=new lt("/.info/"+e),i=oe(n);t.infoData_.updateSnapshot(r,i);var o=Zn(t.infoSyncTree_,r,i);Yr(t.eventQueue_,r,o)}function si(t){return t.nextWriteId_++}function ai(t,e,n,r,i){yi(t,"set",{path:e.toString(),value:n,priority:r});var o=ni(t),s=oe(n,r),a=nr(t.serverSyncTree_,e),u=br(s,a,o),c=si(t),l=Jn(t.serverSyncTree_,e,u,c,!0);Gr(t.eventQueue_,l),t.server_.put(e.toString(),s.val(!0),function(n,r){var o="ok"===n;o||C("set at "+e+" failed: "+n);var s=Xn(t.serverSyncTree_,c,!o);Yr(t.eventQueue_,e,s),vi(0,i,n,r)});var h=Ii(t,e);Oi(t,h),Yr(t.eventQueue_,h,[])}function ui(t,e,n,r){yi(t,"update",{path:e.toString(),value:n});var i=!0,s=ni(t),a={};if(P(n,function(n,r){i=!1,a[n]=vr(bt(e,n),oe(r),t.serverSyncTree_,s)}),i)_("update() called with empty data.  Don't do anything."),vi(0,r,"ok",void 0);else{var u=si(t),c=function(t,e,n,r){!function(t,e,n,r){Object(o.d)(r>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:r,visible:!0}),t.visibleWrites=nn(t.visibleWrites,e,n),t.lastWriteId=r}(t.pendingWriteTree_,e,n,r);var i=Ze.fromObject(n);return rr(t,new ze({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(t.serverSyncTree_,e,a,u);Gr(t.eventQueue_,c),t.server_.merge(e.toString(),n,function(n,i){var o="ok"===n;o||C("update at "+e+" failed: "+n);var s=Xn(t.serverSyncTree_,u,!o),a=s.length>0?Oi(t,e):e;Yr(t.eventQueue_,a,s),vi(0,r,n,i)}),P(n,function(n){var r=Ii(t,bt(e,n));Oi(t,r)}),Yr(t.eventQueue_,e,[])}}function ci(t,e,n){t.server_.onDisconnectCancel(e.toString(),function(r,i){"ok"===r&&Re(t.onDisconnect_,e),vi(0,n,r,i)})}function li(t,e,n,r){var i=oe(n);t.server_.onDisconnectPut(e.toString(),i.val(!0),function(n,o){"ok"===n&&Pe(t.onDisconnect_,e,i),vi(0,r,n,o)})}function hi(t,e,n,r,i){var o=oe(n,r);t.server_.onDisconnectPut(e.toString(),o.val(!0),function(n,r){"ok"===n&&Pe(t.onDisconnect_,e,o),vi(0,i,n,r)})}function di(t,e,n,r){if(Object(o.s)(n))return _("onDisconnect().update() called with empty data.  Don't do anything."),void vi(0,r,"ok",void 0);t.server_.onDisconnectMerge(e.toString(),n,function(i,o){"ok"===i&&P(n,function(n,r){var i=oe(r);Pe(t.onDisconnect_,bt(e,n),i)}),vi(0,r,i,o)})}function fi(t,e,n){var r;r=".info"===dt(e.path)?er(t.infoSyncTree_,e,n):er(t.serverSyncTree_,e,n),$r(t.eventQueue_,e.path,r)}function pi(t,e,n){var r;r=".info"===dt(e.path)?tr(t.infoSyncTree_,e,n):tr(t.serverSyncTree_,e,n),$r(t.eventQueue_,e.path,r)}function gi(t){t.persistentConnection_&&t.persistentConnection_.interrupt(Zr)}function mi(t){t.persistentConnection_&&t.persistentConnection_.resume(Zr)}function yi(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r="";t.persistentConnection_&&(r=t.persistentConnection_.id+":"),_.apply(void 0,Object(s.f)([r],Object(s.e)(e)))}function vi(t,e,n,r){e&&M(function(){if("ok"===n)e(null);else{var t=(n||"error").toUpperCase(),i=t;r&&(i+=": "+r);var o=new Error(i);o.code=t,e(o)}})}function bi(t,e,n,r,i,s){yi(t,"transaction on "+e);var a={path:e,update:n,onComplete:r,status:null,order:p(),applyLocally:s,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},u=_i(t,e,void 0);a.currentInputSnapshot=u;var c=a.update(u.val());if(void 0===c)a.unwatcher(),a.currentOutputSnapshotRaw=null,a.currentOutputSnapshotResolved=null,a.onComplete&&a.onComplete(null,!1,a.currentInputSnapshot);else{Mr("transaction failed: Data returned ",c,a.path),a.status=0;var l=Or(t.transactionQueueTree_,e),h=Sr(l)||[];h.push(a),Cr(l,h);var d=void 0;"object"==typeof c&&null!==c&&Object(o.h)(c,".priority")?(d=Object(o.D)(c,".priority"),Object(o.d)(Dr(d),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):d=(nr(t.serverSyncTree_,e)||re.EMPTY_NODE).getPriority().val();var f=ni(t),g=oe(c,d),m=br(g,u,f);a.currentOutputSnapshotRaw=g,a.currentOutputSnapshotResolved=m,a.currentWriteId=si(t);var y=Jn(t.serverSyncTree_,e,m,a.currentWriteId,a.applyLocally);Yr(t.eventQueue_,e,y),wi(t,t.transactionQueueTree_)}}function _i(t,e,n){return nr(t.serverSyncTree_,e,n)||re.EMPTY_NODE}function wi(t,e){if(void 0===e&&(e=t.transactionQueueTree_),e||Ti(t,e),Sr(e)){var n=Ci(t,e);Object(o.d)(n.length>0,"Sending zero length transaction queue"),n.every(function(t){return 0===t.status})&&function(t,e,n){for(var r=n.map(function(t){return t.currentWriteId}),i=_i(t,e,r),s=i,a=i.hash(),u=0;u<n.length;u++){var c=n[u];Object(o.d)(0===c.status,"tryToSendTransactionQueue_: items in queue should all be run."),c.status=1,c.retryCount++;var l=wt(e,c.path);s=s.updateChild(l,c.currentOutputSnapshotRaw)}var h=s.val(!0),d=e;t.server_.put(d.toString(),h,function(r){yi(t,"transaction put response",{path:d.toString(),status:r});var i=[];if("ok"===r){for(var o=[],s=function(e){n[e].status=2,i=i.concat(Xn(t.serverSyncTree_,n[e].currentWriteId)),n[e].onComplete&&o.push(function(){return n[e].onComplete(null,!0,n[e].currentOutputSnapshotResolved)}),n[e].unwatcher()},a=0;a<n.length;a++)s(a);for(Ti(t,Or(t.transactionQueueTree_,e)),wi(t,t.transactionQueueTree_),Yr(t.eventQueue_,e,i),a=0;a<o.length;a++)M(o[a])}else{if("datastale"===r)for(a=0;a<n.length;a++)n[a].status=3===n[a].status?4:0;else for(C("transaction at "+d.toString()+" failed: "+r),a=0;a<n.length;a++)n[a].status=4,n[a].abortReason=r;Oi(t,e)}},a)}(t,xr(e),n)}else Er(e)&&Tr(e,function(e){wi(t,e)})}function Oi(t,e){var n=Si(t,e),r=xr(n);return function(t,e,n){if(0!==e.length){for(var r=[],i=[],s=e.filter(function(t){return 0===t.status}).map(function(t){return t.currentWriteId}),a=function(a){var u,c=e[a],l=wt(n,c.path),h=!1;if(Object(o.d)(null!==l,"rerunTransactionsUnderNode_: relativePath should not be null."),4===c.status)h=!0,u=c.abortReason,i=i.concat(Xn(t.serverSyncTree_,c.currentWriteId,!0));else if(0===c.status)if(c.retryCount>=25)h=!0,u="maxretry",i=i.concat(Xn(t.serverSyncTree_,c.currentWriteId,!0));else{var d=_i(t,c.path,s);c.currentInputSnapshot=d;var f=e[a].update(d.val());if(void 0!==f){Mr("transaction failed: Data returned ",f,c.path);var p=oe(f);"object"==typeof f&&null!=f&&Object(o.h)(f,".priority")||(p=p.updatePriority(d.getPriority()));var g=c.currentWriteId,m=ni(t),y=br(p,d,m);c.currentOutputSnapshotRaw=p,c.currentOutputSnapshotResolved=y,c.currentWriteId=si(t),s.splice(s.indexOf(g),1),i=(i=i.concat(Jn(t.serverSyncTree_,c.path,y,c.currentWriteId,c.applyLocally))).concat(Xn(t.serverSyncTree_,g,!0))}else h=!0,u="nodata",i=i.concat(Xn(t.serverSyncTree_,c.currentWriteId,!0))}Yr(t.eventQueue_,n,i),i=[],h&&(e[a].status=2,setTimeout(e[a].unwatcher,Math.floor(0)),e[a].onComplete&&r.push("nodata"===u?function(){return e[a].onComplete(null,!1,e[a].currentInputSnapshot)}:function(){return e[a].onComplete(new Error(u),!1,null)}))},u=0;u<e.length;u++)a(u);for(Ti(t,t.transactionQueueTree_),u=0;u<r.length;u++)M(r[u]);wi(t,t.transactionQueueTree_)}}(t,Ci(t,n),r),r}function Si(t,e){var n,r=t.transactionQueueTree_;for(n=dt(e);null!==n&&void 0===Sr(r);)r=Or(r,n),n=dt(e=pt(e));return r}function Ci(t,e){var n=[];return Ei(t,e,n),n.sort(function(t,e){return t.order-e.order}),n}function Ei(t,e,n){var r=Sr(e);if(r)for(var i=0;i<r.length;i++)n.push(r[i]);Tr(e,function(e){Ei(t,e,n)})}function Ti(t,e){var n=Sr(e);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,Cr(e,n.length>0?n:void 0)}Tr(e,function(e){Ti(t,e)})}function Ii(t,e){var n=xr(Si(t,e)),r=Or(t.transactionQueueTree_,e);return function(t,e,n){for(var r=t.parent;null!==r;){if(e(r))return!0;r=r.parent}}(r,function(e){xi(t,e)}),xi(t,r),Ir(r,function(e){xi(t,e)}),n}function xi(t,e){var n=Sr(e);if(n){for(var r=[],i=[],s=-1,a=0;a<n.length;a++)3===n[a].status||(1===n[a].status?(Object(o.d)(s===a-1,"All SENT items should be at beginning of queue."),s=a,n[a].status=3,n[a].abortReason="set"):(Object(o.d)(0===n[a].status,"Unexpected transaction status in abort"),n[a].unwatcher(),i=i.concat(Xn(t.serverSyncTree_,n[a].currentWriteId,!0)),n[a].onComplete&&r.push(n[a].onComplete.bind(null,new Error("set"),!1,null))));for(-1===s?Cr(e,void 0):n.length=s+1,Yr(t.eventQueue_,xr(e),i),a=0;a<r.length;a++)M(r[a])}}var ki,Ni=function(t,e){var n=Ai(t),r=n.namespace;return"firebase.com"===n.domain&&S(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||S("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&C("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new z(n.host,n.secure,r,e,"ws"===n.scheme||"wss"===n.scheme,"",r!==n.subdomain),path:new lt(n.pathString)}},Ai=function(t){var e="",n="",r="",i="",o="",a=!0,u="https",c=443;if("string"==typeof t){var l=t.indexOf("//");l>=0&&(u=t.substring(0,l-1),t=t.substring(l+2));var h=t.indexOf("/");-1===h&&(h=t.length);var d=t.indexOf("?");-1===d&&(d=t.length),e=t.substring(0,Math.min(h,d)),h<d&&(i=function(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(o){}e+="/"+i}return e}(t.substring(h,d)));var f=function(t){var e,n,r={};"?"===t.charAt(0)&&(t=t.substring(1));try{for(var i=Object(s.g)(t.split("&")),o=i.next();!o.done;o=i.next()){var a=o.value;if(0!==a.length){var u=a.split("=");2===u.length?r[decodeURIComponent(u[0])]=decodeURIComponent(u[1]):C("Invalid query segment '"+a+"' in query '"+t+"'")}}}catch(c){e={error:c}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}(t.substring(Math.min(t.length,d)));(l=e.indexOf(":"))>=0?(a="https"===u||"wss"===u,c=parseInt(e.substring(l+1),10)):l=e.length;var p=e.slice(0,l);if("localhost"===p.toLowerCase())n="localhost";else if(p.split(".").length<=2)n=p;else{var g=e.indexOf(".");r=e.substring(0,g).toLowerCase(),n=e.substring(g+1),o=r}"ns"in f&&(o=f.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:a,scheme:u,pathString:i,namespace:o}},ji=function(){function t(t,e,n){this.node_=t,this.ref_=e,this.index_=n}return t.prototype.val=function(){return Object(o.H)("DataSnapshot.val",0,0,arguments.length),this.node_.val()},t.prototype.exportVal=function(){return Object(o.H)("DataSnapshot.exportVal",0,0,arguments.length),this.node_.val(!0)},t.prototype.toJSON=function(){return Object(o.H)("DataSnapshot.toJSON",0,1,arguments.length),this.exportVal()},t.prototype.exists=function(){return Object(o.H)("DataSnapshot.exists",0,0,arguments.length),!this.node_.isEmpty()},t.prototype.child=function(e){Object(o.H)("DataSnapshot.child",0,1,arguments.length),e=String(e),Br("DataSnapshot.child",1,e,!1);var n=new lt(e),r=this.ref_.child(n);return new t(this.node_.getChild(n),r,Jt)},t.prototype.hasChild=function(t){Object(o.H)("DataSnapshot.hasChild",1,1,arguments.length),Br("DataSnapshot.hasChild",1,t,!1);var e=new lt(t);return!this.node_.getChild(e).isEmpty()},t.prototype.getPriority=function(){return Object(o.H)("DataSnapshot.getPriority",0,0,arguments.length),this.node_.getPriority().val()},t.prototype.forEach=function(e){var n=this;if(Object(o.H)("DataSnapshot.forEach",1,1,arguments.length),Object(o.I)("DataSnapshot.forEach",1,e,!1),this.node_.isLeafNode())return!1;var r=this.node_;return!!r.forEachChild(this.index_,function(r,i){return e(new t(i,n.ref_.child(r),Jt))})},t.prototype.hasChildren=function(){return Object(o.H)("DataSnapshot.hasChildren",0,0,arguments.length),!this.node_.isLeafNode()&&!this.node_.isEmpty()},Object.defineProperty(t.prototype,"key",{get:function(){return this.ref_.getKey()},enumerable:!1,configurable:!0}),t.prototype.numChildren=function(){return Object(o.H)("DataSnapshot.numChildren",0,0,arguments.length),this.node_.numChildren()},t.prototype.getRef=function(){return Object(o.H)("DataSnapshot.ref",0,0,arguments.length),this.ref_},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),Pi=function(){function t(t,e){this.repo_=t,this.path_=e}return t.prototype.cancel=function(t){Object(o.H)("OnDisconnect.cancel",0,1,arguments.length),Object(o.I)("OnDisconnect.cancel",1,t,!0);var e=new o.a;return ci(this.repo_,this.path_,e.wrapCallback(t)),e.promise},t.prototype.remove=function(t){Object(o.H)("OnDisconnect.remove",0,1,arguments.length),zr("OnDisconnect.remove",this.path_),Object(o.I)("OnDisconnect.remove",1,t,!0);var e=new o.a;return li(this.repo_,this.path_,null,e.wrapCallback(t)),e.promise},t.prototype.set=function(t,e){Object(o.H)("OnDisconnect.set",1,2,arguments.length),zr("OnDisconnect.set",this.path_),Lr("OnDisconnect.set",1,t,this.path_,!1),Object(o.I)("OnDisconnect.set",2,e,!0);var n=new o.a;return li(this.repo_,this.path_,t,n.wrapCallback(e)),n.promise},t.prototype.setWithPriority=function(t,e,n){Object(o.H)("OnDisconnect.setWithPriority",2,3,arguments.length),zr("OnDisconnect.setWithPriority",this.path_),Lr("OnDisconnect.setWithPriority",1,t,this.path_,!1),Vr("OnDisconnect.setWithPriority",2,e,!1),Object(o.I)("OnDisconnect.setWithPriority",3,n,!0);var r=new o.a;return hi(this.repo_,this.path_,t,e,r.wrapCallback(n)),r.promise},t.prototype.update=function(t,e){if(Object(o.H)("OnDisconnect.update",1,2,arguments.length),zr("OnDisconnect.update",this.path_),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,C("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Fr("OnDisconnect.update",1,t,this.path_,!1),Object(o.I)("OnDisconnect.update",2,e,!0);var i=new o.a;return di(this.repo_,this.path_,t,i.wrapCallback(e)),i.promise},t}(),Ri=function(){function t(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}return t.prototype.getPath=function(){var t=this.snapshot.getRef();return"value"===this.eventType?t.path:t.getParent().path},t.prototype.getEventType=function(){return this.eventType},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+Object(o.G)(this.snapshot.exportVal())},t}(),Di=function(){function t(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}return t.prototype.getPath=function(){return this.path},t.prototype.getEventType=function(){return"cancel"},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.path.toString()+":cancel"},t}(),Li=function(){function t(t,e,n){this.callback_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){return"value"===t},t.prototype.createEvent=function(t,e){var n=e.getQueryParams().getIndex();return new Ri("value",this,new ji(t.snapshotNode,e.getRef(),n))},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){Object(o.d)(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callback_;return function(){r.call(e,t.snapshot)}},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new Di(this,t,e):null},t.prototype.matches=function(e){return e instanceof t&&(!e.callback_||!this.callback_||e.callback_===this.callback_&&e.context_===this.context_)},t.prototype.hasAnyCallback=function(){return null!==this.callback_},t}(),Mi=function(){function t(t,e,n){this.callbacks_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){var e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,Object(o.h)(this.callbacks_,e)},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new Di(this,t,e):null},t.prototype.createEvent=function(t,e){Object(o.d)(null!=t.childName,"Child events should have a childName.");var n=e.getRef().child(t.childName),r=e.getQueryParams().getIndex();return new Ri(t.type,this,new ji(t.snapshotNode,n,r),t.prevName)},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){Object(o.d)(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callbacks_[t.eventType];return function(){r.call(e,t.snapshot,t.prevName)}},t.prototype.matches=function(e){var n=this;if(e instanceof t){if(!this.callbacks_||!e.callbacks_)return!0;if(this.context_===e.context_){var r=Object.keys(e.callbacks_),i=Object.keys(this.callbacks_),o=r.length;if(o===i.length){if(1===o){var s=r[0],a=i[0];return!(a!==s||e.callbacks_[s]&&this.callbacks_[a]&&e.callbacks_[s]!==this.callbacks_[a])}return i.every(function(t){return e.callbacks_[t]===n.callbacks_[t]})}}}return!1},t.prototype.hasAnyCallback=function(){return null!==this.callbacks_},t}(),Fi=function(){function t(t,e,n,r){this.database=t,this.path=e,this.queryParams_=n,this.orderByCalled_=r,this.repo=t.repo_}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return Object(o.d)(ki,"Reference.ts has not been loaded"),ki},set:function(t){ki=t},enumerable:!1,configurable:!0}),t.validateQueryEndpoints_=function(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===Lt){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==T)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==I)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(t.getIndex()===Jt){if(null!=e&&!Dr(e)||null!=n&&!Dr(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(Object(o.d)(t.getIndex()instanceof ue||t.getIndex()===ce,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")},t.validateLimit_=function(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")},t.prototype.validateNoPreviousOrderByCall_=function(t){if(!0===this.orderByCalled_)throw new Error(t+": You can't combine multiple orderBy calls.")},t.prototype.getQueryParams=function(){return this.queryParams_},t.prototype.getRef=function(){return Object(o.H)("Query.ref",0,0,arguments.length),new t.__referenceConstructor(this.database,this.path)},t.prototype.on=function(e,n,r,i){Object(o.H)("Query.on",2,4,arguments.length),Ur("Query.on",1,e,!1),Object(o.I)("Query.on",2,n,!1);var s=t.getCancelAndContextArgs_("Query.on",r,i);if("value"===e)this.onValueEvent(n,s.cancel,s.context);else{var a={};a[e]=n,this.onChildEvent(a,s.cancel,s.context)}return n},t.prototype.onValueEvent=function(t,e,n){var r=new Li(t,e||null,n||null);fi(this.repo,this,r)},t.prototype.onChildEvent=function(t,e,n){var r=new Mi(t,e,n);fi(this.repo,this,r)},t.prototype.off=function(t,e,n){Object(o.H)("Query.off",0,3,arguments.length),Ur("Query.off",1,t,!0),Object(o.I)("Query.off",2,e,!0),Object(o.J)("Query.off",3,n,!0);var r=null,i=null;if("value"===t){var s=e||null;r=new Li(s,null,n||null)}else t&&(e&&((i={})[t]=e),r=new Mi(i,null,n||null));pi(this.repo,this,r)},t.prototype.get=function(){var t,e,n,r=this;return(t=this.repo,e=this,n=function(t,e){var n=e.path,r=null;t.syncPointTree_.foreachOnPath(n,function(t,e){var i=wt(t,n);r=r||zn(e,i)});var i=t.syncPointTree_.get(n);i?r=r||zn(i,ht()):(i=new Un,t.syncPointTree_=t.syncPointTree_.set(n,i));var o=null!=r,s=o?new Ke(r,!0,!1):null;return Je(Bn(i,e,dn(t.pendingWriteTree_,e.path),o?s.getNode():re.EMPTY_NODE,o).viewCache_)}(t.serverSyncTree_,e),null!=n?Promise.resolve(n):t.server_.get(e).then(function(n){var r=oe(n),i=Zn(t.serverSyncTree_,e.path,r);return $r(t.eventQueue_,e.path,i),Promise.resolve(r)},function(n){return yi(t,"get for query "+Object(o.G)(e)+" failed: "+n),Promise.reject(new Error(n))})).then(function(t){return new ji(t,r.getRef(),r.getQueryParams().getIndex())})},t.prototype.once=function(e,n,r,i){var s=this;Object(o.H)("Query.once",1,4,arguments.length),Ur("Query.once",1,e,!1),Object(o.I)("Query.once",2,n,!0);var a=t.getCancelAndContextArgs_("Query.once",r,i),u=!0,c=new o.a;c.promise.catch(function(){});var l=function(t){u&&(u=!1,s.off(e,l),n&&n.bind(a.context)(t),c.resolve(t))};return this.on(e,l,function(t){s.off(e,l),a.cancel&&a.cancel.bind(a.context)(t),c.reject(t)}),c.promise},t.prototype.limitToFirst=function(e){if(Object(o.H)("Query.limitToFirst",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToFirst: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.database,this.path,Oe(this.queryParams_,e),this.orderByCalled_)},t.prototype.limitToLast=function(e){if(Object(o.H)("Query.limitToLast",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToLast: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.database,this.path,Se(this.queryParams_,e),this.orderByCalled_)},t.prototype.orderByChild=function(e){if(Object(o.H)("Query.orderByChild",1,1,arguments.length),"$key"===e)throw new Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===e)throw new Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===e)throw new Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');Br("Query.orderByChild",1,e,!1),this.validateNoPreviousOrderByCall_("Query.orderByChild");var n=new lt(e);if(_t(n))throw new Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");var r=new ue(n),i=xe(this.queryParams_,r);return t.validateQueryEndpoints_(i),new t(this.database,this.path,i,!0)},t.prototype.orderByKey=function(){Object(o.H)("Query.orderByKey",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByKey");var e=xe(this.queryParams_,Lt);return t.validateQueryEndpoints_(e),new t(this.database,this.path,e,!0)},t.prototype.orderByPriority=function(){Object(o.H)("Query.orderByPriority",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByPriority");var e=xe(this.queryParams_,Jt);return t.validateQueryEndpoints_(e),new t(this.database,this.path,e,!0)},t.prototype.orderByValue=function(){Object(o.H)("Query.orderByValue",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByValue");var e=xe(this.queryParams_,ce);return t.validateQueryEndpoints_(e),new t(this.database,this.path,e,!0)},t.prototype.startAt=function(e,n){void 0===e&&(e=null),Object(o.H)("Query.startAt",0,2,arguments.length),Lr("Query.startAt",1,e,this.path,!0),qr("Query.startAt",2,n,!0);var r=Ce(this.queryParams_,e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasStart())throw new Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return void 0===e&&(e=null,n=null),new t(this.database,this.path,r,this.orderByCalled_)},t.prototype.startAfter=function(e,n){void 0===e&&(e=null),Object(o.H)("Query.startAfter",0,2,arguments.length),Lr("Query.startAfter",1,e,this.path,!1),qr("Query.startAfter",2,n,!0);var r=Ee(this.queryParams_,e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasStart())throw new Error("Query.startAfter: Starting point was already set (by another call to startAt, startAfter or equalTo).");return new t(this.database,this.path,r,this.orderByCalled_)},t.prototype.endAt=function(e,n){void 0===e&&(e=null),Object(o.H)("Query.endAt",0,2,arguments.length),Lr("Query.endAt",1,e,this.path,!0),qr("Query.endAt",2,n,!0);var r=Te(this.queryParams_,e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasEnd())throw new Error("Query.endAt: Ending point was already set (by another call to endAt, endBefore, or equalTo).");return new t(this.database,this.path,r,this.orderByCalled_)},t.prototype.endBefore=function(e,n){void 0===e&&(e=null),Object(o.H)("Query.endBefore",0,2,arguments.length),Lr("Query.endBefore",1,e,this.path,!1),qr("Query.endBefore",2,n,!0);var r=Ie(this.queryParams_,e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasEnd())throw new Error("Query.endBefore: Ending point was already set (by another call to endAt, endBefore, or equalTo).");return new t(this.database,this.path,r,this.orderByCalled_)},t.prototype.equalTo=function(t,e){if(Object(o.H)("Query.equalTo",1,2,arguments.length),Lr("Query.equalTo",1,t,this.path,!1),qr("Query.equalTo",2,e,!0),this.queryParams_.hasStart())throw new Error("Query.equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(this.queryParams_.hasEnd())throw new Error("Query.equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return this.startAt(t,e).endAt(t,e)},t.prototype.toString=function(){return Object(o.H)("Query.toString",0,0,arguments.length),this.repo.toString()+mt(this.path)},t.prototype.toJSON=function(){return Object(o.H)("Query.toJSON",0,1,arguments.length),this.toString()},t.prototype.queryObject=function(){return function(t){var e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_)),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_)),t.limitSet_){e.l=t.limit_;var n=t.viewFrom_;""===n&&(n=t.isViewFromLeft()?"l":"r"),e.vf=n}return t.index_!==Jt&&(e.i=t.index_.toString()),e}(this.queryParams_)},t.prototype.queryIdentifier=function(){var t=this.queryObject(),e=A(t);return"{}"===e?"default":e},t.prototype.isEqual=function(e){if(Object(o.H)("Query.isEqual",1,1,arguments.length),!(e instanceof t)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}var r=this.repo===e.repo,i=St(this.path,e.path),s=this.queryIdentifier()===e.queryIdentifier();return r&&i&&s},t.getCancelAndContextArgs_=function(t,e,n){var r={cancel:null,context:null};if(e&&n)r.cancel=e,Object(o.I)(t,3,r.cancel,!0),r.context=n,Object(o.J)(t,4,r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error(Object(o.l)(t,3,!0)+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),Vi=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return Object(o.H)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}(),Ui=function(t){function e(e,n){return t.call(this,e,n,new we,!1)||this}return Object(s.c)(e,t),e.prototype.getKey=function(){return Object(o.H)("Reference.key",0,0,arguments.length),_t(this.path)?null:gt(this.path)},e.prototype.child=function(t){return Object(o.H)("Reference.child",1,1,arguments.length),"number"==typeof t?t=String(t):t instanceof lt||(null===dt(this.path)?Hr("Reference.child",1,t,!1):Br("Reference.child",1,t,!1)),new e(this.database,bt(this.path,t))},e.prototype.getParent=function(){Object(o.H)("Reference.parent",0,0,arguments.length);var t=vt(this.path);return null===t?null:new e(this.database,t)},e.prototype.getRoot=function(){Object(o.H)("Reference.root",0,0,arguments.length);for(var t=this;null!==t.getParent();)t=t.getParent();return t},e.prototype.set=function(t,e){Object(o.H)("Reference.set",1,2,arguments.length),zr("Reference.set",this.path),Lr("Reference.set",1,t,this.path,!1),Object(o.I)("Reference.set",2,e,!0);var n=new o.a;return ai(this.repo,this.path,t,null,n.wrapCallback(e)),n.promise},e.prototype.update=function(t,e){if(Object(o.H)("Reference.update",1,2,arguments.length),zr("Reference.update",this.path),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,C("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Fr("Reference.update",1,t,this.path,!1),Object(o.I)("Reference.update",2,e,!0);var i=new o.a;return ui(this.repo,this.path,t,i.wrapCallback(e)),i.promise},e.prototype.setWithPriority=function(t,e,n){if(Object(o.H)("Reference.setWithPriority",2,3,arguments.length),zr("Reference.setWithPriority",this.path),Lr("Reference.setWithPriority",1,t,this.path,!1),Vr("Reference.setWithPriority",2,e,!1),Object(o.I)("Reference.setWithPriority",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.setWithPriority failed: "+this.getKey()+" is a read-only object.";var r=new o.a;return ai(this.repo,this.path,t,e,r.wrapCallback(n)),r.promise},e.prototype.remove=function(t){return Object(o.H)("Reference.remove",0,1,arguments.length),zr("Reference.remove",this.path),Object(o.I)("Reference.remove",1,t,!0),this.set(null,t)},e.prototype.transaction=function(t,n,r){var i=this;if(Object(o.H)("Reference.transaction",1,3,arguments.length),zr("Reference.transaction",this.path),Object(o.I)("Reference.transaction",1,t,!1),Object(o.I)("Reference.transaction",2,n,!0),Wr("Reference.transaction",3,r,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.transaction failed: "+this.getKey()+" is a read-only object.";void 0===r&&(r=!0);var s=new o.a;"function"==typeof n&&s.promise.catch(function(){});var a=function(t,r,o){if(t)s.reject(t),"function"==typeof n&&n(t,r,null);else{var a=new ji(o,new e(i.database,i.path),Jt);s.resolve(new Vi(r,a)),"function"==typeof n&&n(null,r,a)}},u=function(){},c=new e(this.database,this.path);c.on("value",u);var l=function(){c.off("value",u)};return bi(this.repo,this.path,t,a,l,r),s.promise},e.prototype.setPriority=function(t,e){Object(o.H)("Reference.setPriority",1,2,arguments.length),zr("Reference.setPriority",this.path),Vr("Reference.setPriority",1,t,!1),Object(o.I)("Reference.setPriority",2,e,!0);var n=new o.a;return ai(this.repo,bt(this.path,".priority"),t,null,n.wrapCallback(e)),n.promise},e.prototype.push=function(t,e){Object(o.H)("Reference.push",0,2,arguments.length),zr("Reference.push",this.path),Lr("Reference.push",1,t,this.path,!0),Object(o.I)("Reference.push",2,e,!0);var n,r=ei(this.repo),i=he(r),s=this.child(i),a=this.child(i);return n=null!=t?s.set(t,e).then(function(){return a}):Promise.resolve(a),s.then=n.then.bind(n),s.catch=n.then.bind(n,void 0),"function"==typeof e&&n.catch(function(){}),s},e.prototype.onDisconnect=function(){return zr("Reference.onDisconnect",this.path),new Pi(this.repo,this.path)},Object.defineProperty(e.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),e}(Fi);Fi.__referenceConstructor=Ui,function(t){Object(o.d)(!Pn,"__referenceConstructor has already been defined"),Pn=t}(Ui);var qi={},Bi=!1;function Hi(t,e,n,r){var i=n||t.options.databaseURL;void 0===i&&(t.options.projectId||S("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),_("Using default host for project ",t.options.projectId),i=t.options.projectId+"-default-rtdb.firebaseio.com");var s,a=Ni(i,r),u=a.repoInfo,c=void 0;"undefined"!=typeof process&&(c=process.env.FIREBASE_DATABASE_EMULATOR_HOST),c?(s=!0,u=(a=Ni(i="http://"+c+"?ns="+u.namespace,r)).repoInfo):s=!a.repoInfo.secure;var l=r&&s?new U:new V(t,e);Kr("Invalid Firebase Database URL",1,a),_t(a.path)||S("Database URL must point to the root of a Firebase Database (not including a child path).");var h=function(t,e,n){var r=Object(o.D)(qi,e.name);r||(qi[e.name]=r={});var i=Object(o.D)(r,t.toURLString());return i&&S("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new ti(t,Bi,e,n),r[t.toURLString()]=i,i}(u,t,l);return new zi(h)}var zi=function(){function t(t){var e=this;this.repoInternal_=t,this.instanceStarted_=!1,this.INTERNAL={delete:function(){return Object(s.b)(e,void 0,void 0,function(){return Object(s.d)(this,function(t){var e,n;return this.checkDeleted_("delete"),e=this.repo_,(n=Object(o.D)(qi,e.app.name))&&Object(o.D)(n,e.key)===e||S("Database "+e.app.name+"("+e.repoInfo_+") has already been deleted."),gi(e),delete n[e.key],this.repoInternal_=null,this.rootInternal_=null,[2]})})}},t instanceof ti||S("Don't call new Database() directly - please use firebase.database().")}return Object.defineProperty(t.prototype,"repo_",{get:function(){return this.instanceStarted_||(function(t){if(t.stats_=$(t.repoInfo_),t.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)t.server_=new Ne(t.repoInfo_,function(e,n,r,i){ri(t,e,n,r,i)},t.authTokenProvider_),setTimeout(function(){return ii(t,!0)},0);else{var e=t.app.options.databaseAuthVariableOverride;if(null!=e){if("object"!=typeof e)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Object(o.G)(e)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}t.persistentConnection_=new jt(t.repoInfo_,t.app.options.appId,function(e,n,r,i){ri(t,e,n,r,i)},function(e){ii(t,e)},function(e){!function(t,e){P(e,function(e,n){oi(t,e,n)})}(t,e)},t.authTokenProvider_,e),t.server_=t.persistentConnection_}var n,r;t.authTokenProvider_.addTokenChangeListener(function(e){t.server_.refreshAuthToken(e)}),t.statsReporter_=(n=function(){return new Me(t.stats_,t.server_)},r=t.repoInfo_.toString(),G[r]||(G[r]=n()),G[r]),t.infoData_=new Ae,t.infoSyncTree_=new Yn({startListening:function(e,n,r,i){var o=[],s=t.infoData_.getNode(e.path);return s.isEmpty()||(o=Zn(t.infoSyncTree_,e.path,s),setTimeout(function(){i("ok")},0)),o},stopListening:function(){}}),oi(t,"connected",!1),t.serverSyncTree_=new Yn({startListening:function(e,n,r,i){return t.server_.listen(e,r,n,function(n,r){var o=i(n,r);Yr(t.eventQueue_,e.path,o)}),[]},stopListening:function(e,n){t.server_.unlisten(e,n)}})}(this.repoInternal_),this.instanceStarted_=!0),this.repoInternal_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"root_",{get:function(){return this.rootInternal_||(this.rootInternal_=new Ui(this,ht())),this.rootInternal_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"app",{get:function(){return this.repo_.app},enumerable:!1,configurable:!0}),t.prototype.useEmulator=function(t,e){this.checkDeleted_("useEmulator"),this.instanceStarted_?S("Cannot call useEmulator() after instance has already been initialized."):function(t,e,n){t.repoInfo_=new z(e+":"+n,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams),t.repoInfo_.nodeAdmin&&(t.authTokenProvider_=new U)}(this.repoInternal_,t,e)},t.prototype.ref=function(t){return this.checkDeleted_("ref"),Object(o.H)("database.ref",0,1,arguments.length),t instanceof Ui?this.refFromURL(t.toString()):void 0!==t?this.root_.child(t):this.root_},t.prototype.refFromURL=function(t){var e="database.refFromURL";this.checkDeleted_(e),Object(o.H)(e,1,1,arguments.length);var n=Ni(t,this.repo_.repoInfo_.nodeAdmin);Kr(e,1,n);var r=n.repoInfo;return this.repo_.repoInfo_.isCustomHost()||r.host===this.repo_.repoInfo_.host||S(e+": Host name does not match the current database: (found "+r.host+" but expected "+this.repo_.repoInfo_.host+")"),this.ref(n.path.toString())},t.prototype.checkDeleted_=function(t){null===this.repoInternal_&&S("Cannot call "+t+" on a deleted database.")},t.prototype.goOffline=function(){Object(o.H)("database.goOffline",0,0,arguments.length),this.checkDeleted_("goOffline"),gi(this.repo_)},t.prototype.goOnline=function(){Object(o.H)("database.goOnline",0,0,arguments.length),this.checkDeleted_("goOnline"),mi(this.repo_)},t.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:function(t){return{".sv":{increment:t}}}},t}(),Ki=Object.freeze({__proto__:null,forceLongPolling:function(){it.forceDisallow(),Z.forceAllow()},forceWebSockets:function(){Z.forceDisallow()},isWebSocketsAvailable:function(){return it.isAvailable()},setSecurityDebugCallback:function(t,e){t.repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){!function(t,e){if(void 0===e&&(e=!1),"undefined"!=typeof console){var n;e?(t.statsListener_||(t.statsListener_=new Le(t.stats_)),n=t.statsListener_.get()):n=t.stats_.get();var r=Object.keys(n).reduce(function(t,e){return Math.max(e.length,t)},0);P(n,function(t,e){for(var n=t,i=t.length;i<r+2;i++)n+=" ";console.log(n+e)})}}(t.repo,e)},statsIncrementCounter:function(t,e){!function(t,e){t.stats_.incrementCounter(e),t.statsReporter_.statsToReport_[e]=!0}(t.repo,e)},dataUpdateCount:function(t){return t.repo.dataUpdateCount},interceptServerData:function(t,e){return function(t,e){t.interceptServerDataCallback_=e}(t.repo,e)},initStandalone:function(t){var e=t.app,n=t.url,r=t.customAuthImpl,o=t.namespace,s=t.nodeAdmin,a=void 0!==s&&s;nt(t.version);var u=new i.c("auth-internal",new i.b("database-standalone"));return u.setComponent(new i.a("auth-internal",function(){return r},"PRIVATE")),{instance:Hi(e,u,n,a),namespace:o}}}),Wi=jt;jt.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},jt.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var Qi=Object.freeze({__proto__:null,DataConnection:Wi,RealTimeConnection:st,hijackHash:function(t){var e=jt.prototype.put;return jt.prototype.put=function(n,r,i,o){void 0!==o&&(o=t()),e.call(this,n,r,i,o)},function(){jt.prototype.put=e}},ConnectionTarget:z,queryIdentifier:function(t){return t.queryIdentifier()},forceRestClient:function(t){!function(t){Bi=t}(t)}}),Gi=zi.ServerValue;!function(e){nt(e.SDK_VERSION);var n=e.INTERNAL.registerComponent(new i.a("database",function(t,e){var n=e.instanceIdentifier;return Hi(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"),n,void 0)},"PUBLIC").setServiceProps({Reference:Ui,Query:Fi,Database:zi,DataSnapshot:ji,enableLogging:b,INTERNAL:Ki,ServerValue:Gi,TEST_ACCESS:Qi}).setMultipleInstances(!0));e.registerVersion("@firebase/database","0.9.7"),Object(o.w)()&&(t.exports=n)}(r.a)}).call(this,n("3UD+")(t))},"7o/Q":function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n("n6bG"),i=n("gRHU"),o=n("quSY"),s=n("2QA8"),a=n("2fFW"),u=n("NJ4a");class c extends o.a{constructor(t,e,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=i.a;break;case 1:if(!t){this.destination=i.a;break}if("object"==typeof t){t instanceof c?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new l(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new l(this,t,e,n)}}[s.a](){return this}static create(t,e,n){const r=new c(t,e,n);return r.syncErrorThrowable=!1,r}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class l extends c{constructor(t,e,n,o){let s;super(),this._parentSubscriber=t;let a=this;Object(r.a)(e)?s=e:e&&(s=e.next,n=e.error,o=e.complete,e!==i.a&&(a=Object.create(e),Object(r.a)(a.unsubscribe)&&this.add(a.unsubscribe.bind(a)),a.unsubscribe=this.unsubscribe.bind(this))),this._context=a,this._next=s,this._error=n,this._complete=o}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;a.a.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:n}=a.a;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):Object(u.a)(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;Object(u.a)(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);a.a.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),a.a.useDeprecatedSynchronousErrorHandling)throw n;Object(u.a)(n)}}__tryOrSetError(t,e,n){if(!a.a.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(r){return a.a.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):(Object(u.a)(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}},"9ppp":function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})()},Cfvw:function(t,e,n){"use strict";n.d(e,"a",function(){return h});var r=n("HDdC"),i=n("SeVD"),o=n("quSY"),s=n("kJWO"),a=n("jZKg"),u=n("Lhse"),c=n("c2HN"),l=n("I55L");function h(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[s.a]}(t))return function(t,e){return new r.a(n=>{const r=new o.a;return r.add(e.schedule(()=>{const i=t[s.a]();r.add(i.subscribe({next(t){r.add(e.schedule(()=>n.next(t)))},error(t){r.add(e.schedule(()=>n.error(t)))},complete(){r.add(e.schedule(()=>n.complete()))}}))})),r})}(t,e);if(Object(c.a)(t))return function(t,e){return new r.a(n=>{const r=new o.a;return r.add(e.schedule(()=>t.then(t=>{r.add(e.schedule(()=>{n.next(t),r.add(e.schedule(()=>n.complete()))}))},t=>{r.add(e.schedule(()=>n.error(t)))}))),r})}(t,e);if(Object(l.a)(t))return Object(a.a)(t,e);if(function(t){return t&&"function"==typeof t[u.a]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new r.a(n=>{const r=new o.a;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(e.schedule(()=>{i=t[u.a](),r.add(e.schedule(function(){if(n.closed)return;let t,e;try{const n=i.next();t=n.value,e=n.done}catch(r){return void n.error(r)}e?n.complete():(n.next(t),this.schedule())}))})),r})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof r.a?t:new r.a(Object(i.a)(t))}},D0XW:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("3N8a");const i=new(n("IjjT").a)(r.a)},DH7j:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>Array.isArray||(t=>t&&"number"==typeof t.length))()},EY2u:function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return o});var r=n("HDdC");const i=new r.a(t=>t.complete());function o(t){return t?function(t){return new r.a(e=>t.schedule(()=>e.complete()))}(t):i}},HDdC:function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n("7o/Q"),i=n("2QA8"),o=n("gRHU"),s=n("kJWO"),a=n("SpAZ"),u=n("2fFW");let c=(()=>{class t{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(e){const n=new t;return n.source=this,n.operator=e,n}subscribe(t,e,n){const{operator:s}=this,a=function(t,e,n){if(t){if(t instanceof r.a)return t;if(t[i.a])return t[i.a]()}return t||e||n?new r.a(t,e,n):new r.a(o.a)}(t,e,n);if(a.add(s?s.call(a,this.source):this.source||u.a.useDeprecatedSynchronousErrorHandling&&!a.syncErrorThrowable?this._subscribe(a):this._trySubscribe(a)),u.a.useDeprecatedSynchronousErrorHandling&&a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a}_trySubscribe(t){try{return this._subscribe(t)}catch(e){u.a.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){const{closed:e,destination:n,isStopped:i}=t;if(e||i)return!1;t=n&&n instanceof r.a?n:null}return!0}(t)?t.error(e):console.warn(e)}}forEach(t,e){return new(e=l(e))((e,n)=>{let r;r=this.subscribe(e=>{try{t(e)}catch(i){n(i),r&&r.unsubscribe()}},n,e)})}_subscribe(t){const{source:e}=this;return e&&e.subscribe(t)}[s.a](){return this}pipe(...t){return 0===t.length?this:(0===(e=t).length?a.a:1===e.length?e[0]:function(t){return e.reduce((t,e)=>e(t),t)})(this);var e}toPromise(t){return new(t=l(t))((t,e)=>{let n;this.subscribe(t=>n=t,t=>e(t),()=>t(n))})}}return t.create=e=>new t(e),t})();function l(t){if(t||(t=u.a.Promise||Promise),!t)throw new Error("no Promise impl found");return t}},I55L:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=t=>t&&"number"==typeof t.length&&"function"!=typeof t},IjjT:function(t,e,n){"use strict";n.d(e,"a",function(){return i});let r=(()=>{class t{constructor(e,n=t.now){this.SchedulerAction=e,this.now=n}schedule(t,e=0,n){return new this.SchedulerAction(this,t).schedule(n,e)}}return t.now=()=>Date.now(),t})();class i extends r{constructor(t,e=r.now){super(t,()=>i.delegate&&i.delegate!==this?i.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,e=0,n){return i.delegate&&i.delegate!==this?i.delegate.schedule(t,e,n):super.schedule(t,e,n)}flush(t){const{actions:e}=this;if(this.active)return void e.push(t);let n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}},Jgta:function(t,e,n){"use strict";var r=n("zIRd");n.d(e,"a",function(){return r.a}),r.a.registerVersion("firebase","8.3.2","app")},LRne:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("z+Ro"),i=n("yCtX"),o=n("jZKg");function s(...t){let e=t[t.length-1];return Object(r.a)(e)?(t.pop(),Object(o.a)(t,e)):Object(i.a)(t)}},Lhse:function(t,e,n){"use strict";function r(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}n.d(e,"a",function(){return i});const i=r()},NJ4a:function(t,e,n){"use strict";function r(t){setTimeout(()=>{throw t},0)}n.d(e,"a",function(){return r})},SeVD:function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r=n("ngJS"),i=n("NJ4a"),o=n("Lhse"),s=n("kJWO"),a=n("I55L"),u=n("c2HN"),c=n("XoHu");const l=t=>{if(t&&"function"==typeof t[s.a])return l=t,t=>{const e=l[s.a]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if(Object(a.a)(t))return Object(r.a)(t);if(Object(u.a)(t))return n=t,t=>(n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,i.a),t);if(t&&"function"==typeof t[o.a])return e=t,t=>{const n=e[o.a]();for(;;){let e;try{e=n.next()}catch(r){return t.error(r),t}if(e.done){t.complete();break}if(t.next(e.value),t.closed)break}return"function"==typeof n.return&&t.add(()=>{n.return&&n.return()}),t};{const e=Object(c.a)(t)?"an invalid object":`'${t}'`;throw new TypeError(`You provided ${e} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}var e,n,l}},SpAZ:function(t,e,n){"use strict";function r(t){return t}n.d(e,"a",function(){return r})},VRyK:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("HDdC"),i=n("z+Ro"),o=n("bHdf"),s=n("yCtX");function a(...t){let e=Number.POSITIVE_INFINITY,n=null,a=t[t.length-1];return Object(i.a)(a)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof a&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof r.a?t[0]:Object(o.a)(e)(Object(s.a)(t,n))}},XNiG:function(t,e,n){"use strict";n.d(e,"b",function(){return c}),n.d(e,"a",function(){return l});var r=n("HDdC"),i=n("7o/Q"),o=n("quSY"),s=n("9ppp"),a=n("Ylt2"),u=n("2QA8");class c extends i.a{constructor(t){super(t),this.destination=t}}let l=(()=>{class t extends r.a{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[u.a](){return new c(this)}lift(t){const e=new h(this,this);return e.operator=t,e}next(t){if(this.closed)throw new s.a;if(!this.isStopped){const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].next(t)}}error(t){if(this.closed)throw new s.a;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].error(t);this.observers.length=0}complete(){if(this.closed)throw new s.a;this.isStopped=!0;const{observers:t}=this,e=t.length,n=t.slice();for(let r=0;r<e;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new s.a;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new s.a;return this.hasError?(t.error(this.thrownError),o.a.EMPTY):this.isStopped?(t.complete(),o.a.EMPTY):(this.observers.push(t),new a.a(this,t))}asObservable(){const t=new r.a;return t.source=this,t}}return t.create=(t,e)=>new h(t,e),t})();class h extends l{constructor(t,e){super(),this.destination=t,this.source=e}next(t){const{destination:e}=this;e&&e.next&&e.next(t)}error(t){const{destination:e}=this;e&&e.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:e}=this;return e?this.source.subscribe(t):o.a.EMPTY}}},XoHu:function(t,e,n){"use strict";function r(t){return null!==t&&"object"==typeof t}n.d(e,"a",function(){return r})},Ylt2:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("quSY");class i extends r.a{constructor(t,e){super(),this.subject=t,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,e=t.observers;if(this.subject=null,!e||0===e.length||t.isStopped||t.closed)return;const n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},bHdf:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("5+tZ"),i=n("SpAZ");function o(t=Number.POSITIVE_INFINITY){return Object(r.a)(i.a,t)}},c2HN:function(t,e,n){"use strict";function r(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}n.d(e,"a",function(){return r})},fXoL:function(t,e,n){"use strict";n.d(e,"a",function(){return sn}),n.d(e,"b",function(){return Nu}),n.d(e,"c",function(){return Eu}),n.d(e,"d",function(){return Su}),n.d(e,"e",function(){return Cu}),n.d(e,"f",function(){return Sc}),n.d(e,"g",function(){return fc}),n.d(e,"h",function(){return Oa}),n.d(e,"i",function(){return qu}),n.d(e,"j",function(){return $s}),n.d(e,"k",function(){return Pu}),n.d(e,"l",function(){return Zs}),n.d(e,"m",function(){return wr}),n.d(e,"n",function(){return ru}),n.d(e,"o",function(){return ro}),n.d(e,"p",function(){return gn}),n.d(e,"q",function(){return on}),n.d(e,"r",function(){return _o}),n.d(e,"s",function(){return ma}),n.d(e,"t",function(){return ya}),n.d(e,"u",function(){return ju}),n.d(e,"v",function(){return Pa}),n.d(e,"w",function(){return gc}),n.d(e,"x",function(){return ja}),n.d(e,"y",function(){return uc}),n.d(e,"z",function(){return zu}),n.d(e,"A",function(){return mn}),n.d(e,"B",function(){return ku}),n.d(e,"C",function(){return xu}),n.d(e,"D",function(){return ea}),n.d(e,"E",function(){return ta}),n.d(e,"F",function(){return Er}),n.d(e,"G",function(){return ra}),n.d(e,"H",function(){return pr}),n.d(e,"I",function(){return vn}),n.d(e,"J",function(){return vc}),n.d(e,"K",function(){return xa}),n.d(e,"L",function(){return Ju}),n.d(e,"M",function(){return an}),n.d(e,"N",function(){return oa}),n.d(e,"O",function(){return ia}),n.d(e,"P",function(){return Da}),n.d(e,"Q",function(){return A}),n.d(e,"R",function(){return cc}),n.d(e,"S",function(){return sc}),n.d(e,"T",function(){return f}),n.d(e,"U",function(){return oc}),n.d(e,"V",function(){return wc}),n.d(e,"W",function(){return tc}),n.d(e,"X",function(){return Au}),n.d(e,"Y",function(){return oo}),n.d(e,"Z",function(){return Ds}),n.d(e,"ab",function(){return dr}),n.d(e,"bb",function(){return $n}),n.d(e,"cb",function(){return Fn}),n.d(e,"db",function(){return Un}),n.d(e,"eb",function(){return zn}),n.d(e,"fb",function(){return Bn}),n.d(e,"gb",function(){return qn}),n.d(e,"hb",function(){return Hn}),n.d(e,"ib",function(){return As}),n.d(e,"jb",function(){return _c}),n.d(e,"kb",function(){return js}),n.d(e,"lb",function(){return Ps}),n.d(e,"mb",function(){return Vn}),n.d(e,"nb",function(){return L}),n.d(e,"ob",function(){return No}),n.d(e,"pb",function(){return $o}),n.d(e,"qb",function(){return Go}),n.d(e,"rb",function(){return Ns}),n.d(e,"sb",function(){return Ct}),n.d(e,"tb",function(){return l}),n.d(e,"ub",function(){return Mn}),n.d(e,"vb",function(){return Oo}),n.d(e,"wb",function(){return vt}),n.d(e,"xb",function(){return Ws}),n.d(e,"yb",function(){return ai}),n.d(e,"zb",function(){return Do}),n.d(e,"Ab",function(){return ls}),n.d(e,"Bb",function(){return cs}),n.d(e,"Cb",function(){return yu}),n.d(e,"Db",function(){return Q}),n.d(e,"Eb",function(){return tt}),n.d(e,"Fb",function(){return m}),n.d(e,"Gb",function(){return y}),n.d(e,"Hb",function(){return J}),n.d(e,"Ib",function(){return et}),n.d(e,"Jb",function(){return Vo}),n.d(e,"Kb",function(){return zo}),n.d(e,"Lb",function(){return Wo}),n.d(e,"Mb",function(){return Ko}),n.d(e,"Nb",function(){return Ho}),n.d(e,"Ob",function(){return Bo}),n.d(e,"Pb",function(){return Qo}),n.d(e,"Qb",function(){return tn}),n.d(e,"Rb",function(){return Es}),n.d(e,"Sb",function(){return xn}),n.d(e,"Tb",function(){return en}),n.d(e,"Ub",function(){return Ou}),n.d(e,"Vb",function(){return Yo}),n.d(e,"Wb",function(){return vu}),n.d(e,"Xb",function(){return Zo}),n.d(e,"Yb",function(){return Xa}),n.d(e,"Zb",function(){return Za}),n.d(e,"ac",function(){return tu}),n.d(e,"bc",function(){return Uo}),n.d(e,"cc",function(){return ts}),n.d(e,"dc",function(){return Ya}),n.d(e,"ec",function(){return gu}),n.d(e,"fc",function(){return Fo}),n.d(e,"gc",function(){return zt}),n.d(e,"hc",function(){return gr}),n.d(e,"ic",function(){return mr}),n.d(e,"jc",function(){return X}),n.d(e,"kc",function(){return us}),n.d(e,"lc",function(){return Ts}),n.d(e,"mc",function(){return Mo}),n.d(e,"nc",function(){return ws}),n.d(e,"oc",function(){return Os}),n.d(e,"pc",function(){return Ss}),n.d(e,"qc",function(){return Cs}),n.d(e,"rc",function(){return mu});var r=n("XNiG"),i=n("quSY"),o=n("HDdC"),s=n("VRyK"),a=n("w1tV");function u(t){for(let e in t)if(t[e]===u)return e;throw Error("Could not find renamed property on target object.")}function c(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function l(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(l).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return""+t.overriddenName;if(t.name)return""+t.name;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function h(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const d=u({__forward_ref__:u});function f(t){return t.__forward_ref__=f,t.toString=function(){return l(this())},t}function p(t){return g(t)?t():t}function g(t){return"function"==typeof t&&t.hasOwnProperty(d)&&t.__forward_ref__===f}function m(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function y(t){return{factory:t.factory,providers:t.providers||[],imports:t.imports||[]}}function v(t){return b(t,w)||b(t,S)}function b(t,e){return t.hasOwnProperty(e)?t[e]:null}function _(t){return t&&(t.hasOwnProperty(O)||t.hasOwnProperty(C))?t[O]:null}const w=u({"\u0275prov":u}),O=u({"\u0275inj":u}),S=u({ngInjectableDef:u}),C=u({ngInjectorDef:u});var E=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}({});let T;function I(t){const e=T;return T=t,e}function x(t,e,n){const r=v(t);if(r&&"root"==r.providedIn)return void 0===r.value?r.value=r.factory():r.value;if(n&E.Optional)return null;if(void 0!==e)return e;throw new Error(`Injector: NOT_FOUND [${l(t)}]`)}function k(t){return{toString:t}.toString()}var N=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}({}),A=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}({});const j="undefined"!=typeof globalThis&&globalThis,P="undefined"!=typeof window&&window,R="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,D="undefined"!=typeof global&&global,L=j||D||P||R,M={},F=[],V=u({"\u0275cmp":u}),U=u({"\u0275dir":u}),q=u({"\u0275pipe":u}),B=u({"\u0275mod":u}),H=u({"\u0275loc":u}),z=u({"\u0275fac":u}),K=u({__NG_ELEMENT_ID__:u});let W=0;function Q(t){return k(()=>{const e={},n={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===N.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||F,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||A.Emulated,id:"c",styles:t.styles||F,_:null,setInput:null,schemas:t.schemas||null,tView:null},r=t.directives,i=t.features,o=t.pipes;return n.id+=W++,n.inputs=Z(t.inputs,e),n.outputs=Z(t.outputs),i&&i.forEach(t=>t(n)),n.directiveDefs=r?()=>("function"==typeof r?r():r).map(G):null,n.pipeDefs=o?()=>("function"==typeof o?o():o).map($):null,n})}function G(t){return nt(t)||function(t){return t[U]||null}(t)}function $(t){return function(t){return t[q]||null}(t)}const Y={};function J(t){const e={type:t.type,bootstrap:t.bootstrap||F,declarations:t.declarations||F,imports:t.imports||F,exports:t.exports||F,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&k(()=>{Y[t.id]=t.type}),e}function X(t,e){return k(()=>{const n=rt(t,!0);n.declarations=e.declarations||F,n.imports=e.imports||F,n.exports=e.exports||F})}function Z(t,e){if(null==t)return M;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,e&&(e[i]=o)}return n}const tt=Q;function et(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function nt(t){return t[V]||null}function rt(t,e){const n=t[B]||null;if(!n&&!0===e)throw new Error(`Type ${l(t)} does not have '\u0275mod' property.`);return n}const it=20,ot=10;function st(t){return Array.isArray(t)&&"object"==typeof t[1]}function at(t){return Array.isArray(t)&&!0===t[1]}function ut(t){return 0!=(8&t.flags)}function ct(t){return 2==(2&t.flags)}function lt(t){return 1==(1&t.flags)}function ht(t){return null!==t.template}function dt(t,e){return t.hasOwnProperty(z)?t[z]:null}class ft extends Error{constructor(t,e){super(function(t,e){return`${t?`NG0${t}: `:""}${e}`}(t,e)),this.code=t}}function pt(t){return"string"==typeof t?t:null==t?"":String(t)}function gt(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():pt(t)}function mt(t,e){const n=e?" in "+e:"";throw new ft("201",`No provider for ${gt(t)} found${n}`)}class yt{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function vt(){return bt}function bt(t){return t.type.prototype.ngOnChanges&&(t.setInput=wt),_t}function _t(){const t=Ot(this),e=null==t?void 0:t.current;if(e){const n=t.previous;if(n===M)t.previous=e;else for(let t in e)n[t]=e[t];t.current=null,this.ngOnChanges(e)}}function wt(t,e,n,r){const i=Ot(t)||function(t,e){return t.__ngSimpleChanges__=e}(t,{previous:M,current:null}),o=i.current||(i.current={}),s=i.previous,a=this.declaredInputs[n],u=s[a];o[a]=new yt(u&&u.currentValue,e,s===M),t[r]=e}function Ot(t){return t.__ngSimpleChanges__||null}vt.ngInherit=!0;let St=void 0;function Ct(t){St=t}function Et(){return void 0!==St?St:"undefined"!=typeof document?document:void 0}function Tt(t){return!!t.listen}const It={createRenderer:(t,e)=>Et()};function xt(t){for(;Array.isArray(t);)t=t[0];return t}function kt(t,e){return xt(e[t])}function Nt(t,e){return xt(e[t.index])}function At(t,e){return t.data[e]}function jt(t,e){return t[e]}function Pt(t,e){const n=e[t];return st(n)?n:n[0]}function Rt(t){const e=function(t){return t.__ngContext__||null}(t);return e?Array.isArray(e)?e:e.lView:null}function Dt(t){return 4==(4&t[2])}function Lt(t){return 128==(128&t[2])}function Mt(t,e){return null==e?null:t[e]}function Ft(t){t[18]=0}function Vt(t,e){t[5]+=e;let n=t,r=t[3];for(;null!==r&&(1===e&&1===n[5]||-1===e&&0===n[5]);)r[5]+=e,n=r,r=r[3]}const Ut={lFrame:he(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function qt(){return Ut.bindingsEnabled}function Bt(){return Ut.lFrame.lView}function Ht(){return Ut.lFrame.tView}function zt(t){Ut.lFrame.contextLView=t}function Kt(){let t=Wt();for(;null!==t&&64===t.type;)t=t.parent;return t}function Wt(){return Ut.lFrame.currentTNode}function Qt(t,e){const n=Ut.lFrame;n.currentTNode=t,n.isParent=e}function Gt(){return Ut.lFrame.isParent}function $t(){Ut.lFrame.isParent=!1}function Yt(){return Ut.isInCheckNoChangesMode}function Jt(t){Ut.isInCheckNoChangesMode=t}function Xt(){const t=Ut.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function Zt(){return Ut.lFrame.bindingIndex}function te(){return Ut.lFrame.bindingIndex++}function ee(t){const e=Ut.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function ne(t,e){const n=Ut.lFrame;n.bindingIndex=n.bindingRootIndex=t,re(e)}function re(t){Ut.lFrame.currentDirectiveIndex=t}function ie(t){const e=Ut.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}function oe(){return Ut.lFrame.currentQueryIndex}function se(t){Ut.lFrame.currentQueryIndex=t}function ae(t){const e=t[1];return 2===e.type?e.declTNode:1===e.type?t[6]:null}function ue(t,e,n){if(n&E.SkipSelf){let r=e,i=t;for(;r=r.parent,!(null!==r||n&E.Host||(r=ae(i),null===r)||(i=i[15],10&r.type)););if(null===r)return!1;e=r,t=i}const r=Ut.lFrame=le();return r.currentTNode=e,r.lView=t,!0}function ce(t){const e=le(),n=t[1];Ut.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function le(){const t=Ut.lFrame,e=null===t?null:t.child;return null===e?he(t):e}function he(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function de(){const t=Ut.lFrame;return Ut.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const fe=de;function pe(){const t=de();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function ge(){return Ut.lFrame.selectedIndex}function me(t){Ut.lFrame.selectedIndex=t}function ye(){const t=Ut.lFrame;return At(t.tView,t.selectedIndex)}function ve(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const e=t.data[n].type.prototype,{ngAfterContentInit:r,ngAfterContentChecked:i,ngAfterViewInit:o,ngAfterViewChecked:s,ngOnDestroy:a}=e;r&&(t.contentHooks||(t.contentHooks=[])).push(-n,r),i&&((t.contentHooks||(t.contentHooks=[])).push(n,i),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,i)),o&&(t.viewHooks||(t.viewHooks=[])).push(-n,o),s&&((t.viewHooks||(t.viewHooks=[])).push(n,s),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,s)),null!=a&&(t.destroyHooks||(t.destroyHooks=[])).push(n,a)}}function be(t,e,n){Oe(t,e,3,n)}function _e(t,e,n,r){(3&t[2])===n&&Oe(t,e,n,r)}function we(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function Oe(t,e,n,r){const i=null!=r?r:-1,o=e.length-1;let s=0;for(let a=void 0!==r?65535&t[18]:0;a<o;a++)if("number"==typeof e[a+1]){if(s=e[a],null!=r&&s>=r)break}else e[a]<0&&(t[18]+=65536),(s<i||-1==i)&&(Se(t,n,e,a),t[18]=(4294901760&t[18])+a+2),a++}function Se(t,e,n,r){const i=n[r]<0,o=n[r+1],s=t[i?-n[r]:n[r]];i?t[2]>>11<t[18]>>16&&(3&t[2])===e&&(t[2]+=2048,o.call(s)):o.call(s)}const Ce=-1;class Ee{constructor(t,e,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}function Te(t,e,n){const r=Tt(t);let i=0;for(;i<n.length;){const o=n[i];if("number"==typeof o){if(0!==o)break;i++;const s=n[i++],a=n[i++],u=n[i++];r?t.setAttribute(e,a,u,s):e.setAttributeNS(s,a,u)}else{const s=o,a=n[++i];xe(s)?r&&t.setProperty(e,s,a):r?t.setAttribute(e,s,a):e.setAttribute(s,a),i++}}return i}function Ie(t){return 3===t||4===t||6===t}function xe(t){return 64===t.charCodeAt(0)}function ke(t,e){if(null===e||0===e.length);else if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||Ne(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function Ne(t,e,n,r,i){let o=0,s=t.length;if(-1===e)s=-1;else for(;o<t.length;){const n=t[o++];if("number"==typeof n){if(n===e){s=-1;break}if(n>e){s=o-1;break}}}for(;o<t.length;){const e=t[o];if("number"==typeof e)break;if(e===n){if(null===r)return void(null!==i&&(t[o+1]=i));if(r===t[o+1])return void(t[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),null!==r&&t.splice(o++,0,r),null!==i&&t.splice(o++,0,i)}function Ae(t){return t!==Ce}function je(t){return 32767&t}function Pe(t,e){let n=t>>16,r=e;for(;n>0;)r=r[15],n--;return r}let Re=!0;function De(t){const e=Re;return Re=t,e}let Le=0;function Me(t,e){const n=Ve(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,Fe(r.data,t),Fe(e,null),Fe(r.blueprint,null));const i=Ue(t,e),o=t.injectorIndex;if(Ae(i)){const t=je(i),n=Pe(i,e),r=n[1].data;for(let i=0;i<8;i++)e[o+i]=n[t+i]|r[t+i]}return e[o+8]=i,o}function Fe(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Ve(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function Ue(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){const t=i[1],e=t.type;if(r=2===e?t.declTNode:1===e?i[6]:null,null===r)return Ce;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return Ce}function qe(t,e,n){!function(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(K)&&(r=n[K]),null==r&&(r=n[K]=Le++);const i=255&r,o=1<<i,s=64&i,a=32&i,u=e.data;128&i?s?a?u[t+7]|=o:u[t+6]|=o:a?u[t+5]|=o:u[t+4]|=o:s?a?u[t+3]|=o:u[t+2]|=o:a?u[t+1]|=o:u[t]|=o}(t,e,n)}function Be(t,e,n){if(n&E.Optional)return t;mt(e,"NodeInjector")}function He(t,e,n,r){if(n&E.Optional&&void 0===r&&(r=null),0==(n&(E.Self|E.Host))){const i=t[9],o=I(void 0);try{return i?i.get(e,r,n&E.Optional):x(e,r,n&E.Optional)}finally{I(o)}}return Be(r,e,n)}function ze(t,e,n,r=E.Default,i){if(null!==t){const o=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(K)?t[K]:void 0;return"number"==typeof e?e>=0?255&e:We:e}(n);if("function"==typeof o){if(!ue(e,t,r))return r&E.Host?Be(i,n,r):He(e,n,r,i);try{const t=o();if(null!=t||r&E.Optional)return t;mt(n)}finally{fe()}}else if("number"==typeof o){let i=null,s=Ve(t,e),a=Ce,u=r&E.Host?e[16][6]:null;for((-1===s||r&E.SkipSelf)&&(a=-1===s?Ue(t,e):e[s+8],a!==Ce&&Je(r,!1)?(i=e[1],s=je(a),e=Pe(a,e)):s=-1);-1!==s;){const t=e[1];if(Ye(o,s,t.data)){const t=Qe(s,e,n,i,r,u);if(t!==Ke)return t}a=e[s+8],a!==Ce&&Je(r,e[1].data[s+8]===u)&&Ye(o,s,e)?(i=t,s=je(a),e=Pe(a,e)):s=-1}}}return He(e,n,r,i)}const Ke={};function We(){return new Xe(Kt(),Bt())}function Qe(t,e,n,r,i,o){const s=e[1],a=s.data[t+8],u=Ge(a,s,n,null==r?ct(a)&&Re:r!=s&&0!=(3&a.type),i&E.Host&&o===a);return null!==u?$e(e,s,u,a):Ke}function Ge(t,e,n,r,i){const o=t.providerIndexes,s=e.data,a=1048575&o,u=t.directiveStart,c=o>>20,l=i?a+c:t.directiveEnd;for(let h=r?a:a+c;h<l;h++){const t=s[h];if(h<u&&n===t||h>=u&&t.type===n)return h}if(i){const t=s[u];if(t&&ht(t)&&t.type===n)return u}return null}function $e(t,e,n,r){let i=t[n];const o=e.data;if(i instanceof Ee){const s=i;s.resolving&&function(t,e){throw new ft("200","Circular dependency in DI detected for "+t)}(gt(o[n]));const a=De(s.canSeeViewProviders);s.resolving=!0;const u=s.injectImpl?I(s.injectImpl):null;ue(t,r,E.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&function(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){const r=bt(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,r)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,i),o&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,o))}(n,o[n],e)}finally{null!==u&&I(u),De(a),s.resolving=!1,fe()}}return i}function Ye(t,e,n){const r=64&t,i=32&t;let o;return o=128&t?r?i?n[e+7]:n[e+6]:i?n[e+5]:n[e+4]:r?i?n[e+3]:n[e+2]:i?n[e+1]:n[e],!!(o&1<<t)}function Je(t,e){return!(t&E.Self||t&E.Host&&e)}class Xe{constructor(t,e){this._tNode=t,this._lView=e}get(t,e){return ze(this._tNode,this._lView,t,void 0,e)}}function Ze(t){const e=t;if(g(t))return()=>{const t=Ze(p(e));return t?t():null};let n=dt(e);if(null===n){const t=_(e);n=t&&t.factory}return n||null}function tn(t){return k(()=>{const e=t.prototype.constructor,n=e[z]||Ze(e),r=Object.prototype;let i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){const t=i[z]||Ze(i);if(t&&t!==n)return t;i=Object.getPrototypeOf(i)}return t=>new t})}function en(t){return function(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const t=n.length;let r=0;for(;r<t;){const i=n[r];if(Ie(i))break;if(0===i)r+=2;else if("number"==typeof i)for(r++;r<t&&"string"==typeof n[r];)r++;else{if(i===e)return n[r+1];r+=2}}}return null}(Kt(),t)}const nn="__parameters__";function rn(t,e,n){return k(()=>{const r=function(t){return function(...e){if(t){const n=t(...e);for(const t in n)this[t]=n[t]}}}(e);function i(...t){if(this instanceof i)return r.apply(this,t),this;const e=new i(...t);return n.annotation=e,n;function n(t,n,r){const i=t.hasOwnProperty(nn)?t[nn]:Object.defineProperty(t,nn,{value:[]})[nn];for(;i.length<=r;)i.push(null);return(i[r]=i[r]||[]).push(e),t}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}class on{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=m({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return"InjectionToken "+this._desc}}const sn=new on("AnalyzeForEntryComponents"),an=Function;function un(t,e){void 0===e&&(e=t);for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)?(e===t&&(e=t.slice(0,n)),un(r,e)):e!==t&&e.push(r)}return e}function cn(t,e){t.forEach(t=>Array.isArray(t)?cn(t,e):e(t))}function ln(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function hn(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function dn(t,e,n){let r=pn(t,e);return r>=0?t[1|r]=n:(r=~r,function(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function fn(t,e){const n=pn(t,e);if(n>=0)return t[1|n]}function pn(t,e){return function(t,e,n){let r=0,i=t.length>>1;for(;i!==r;){const n=r+(i-r>>1),o=t[n<<1];if(e===o)return n<<1;o>e?i=n:r=n+1}return~(i<<1)}(t,e)}const gn=rn("Inject",t=>({token:t})),mn=rn("Optional"),yn=rn("Self"),vn=rn("SkipSelf"),bn=rn("Host"),_n={},wn=/\n/gm,On="__source",Sn=u({provide:String,useValue:u});let Cn,En=void 0;function Tn(t){const e=En;return En=t,e}function In(t,e=E.Default){if(void 0===En)throw new Error("inject() must be called from an injection context");return null===En?x(t,void 0,e):En.get(t,e&E.Optional?null:void 0,e)}function xn(t,e=E.Default){return(T||In)(p(t),e)}function kn(t){const e=[];for(let n=0;n<t.length;n++){const r=p(t[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let t=void 0,n=E.Default;for(let e=0;e<r.length;e++){const i=r[e];i instanceof mn||"Optional"===i.ngMetadataName||i===mn?n|=E.Optional:i instanceof vn||"SkipSelf"===i.ngMetadataName||i===vn?n|=E.SkipSelf:i instanceof yn||"Self"===i.ngMetadataName||i===yn?n|=E.Self:i instanceof bn||"Host"===i.ngMetadataName||i===bn?n|=E.Host:t=i instanceof gn||i===gn?i.token:i}e.push(xn(t,n))}else e.push(xn(r))}return e}function Nn(t){var e;return(null===(e=function(){if(void 0===Cn&&(Cn=null,L.trustedTypes))try{Cn=L.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(e){}return Cn}())||void 0===e?void 0:e.createHTML(t))||t}class An{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return"SafeValue must use [property]=binding: "+this.changingThisBreaksApplicationSecurity+" (see https://g.co/ng/security#xss)"}}class jn extends An{getTypeName(){return"HTML"}}class Pn extends An{getTypeName(){return"Style"}}class Rn extends An{getTypeName(){return"Script"}}class Dn extends An{getTypeName(){return"URL"}}class Ln extends An{getTypeName(){return"ResourceURL"}}function Mn(t){return t instanceof An?t.changingThisBreaksApplicationSecurity:t}function Fn(t,e){const n=Vn(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see https://g.co/ng/security#xss)`)}return n===e}function Vn(t){return t instanceof An&&t.getTypeName()||null}function Un(t){return new jn(t)}function qn(t){return new Pn(t)}function Bn(t){return new Rn(t)}function Hn(t){return new Dn(t)}function zn(t){return new Ln(t)}class Kn{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{const e=(new window.DOMParser).parseFromString(Nn(t),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(t):(e.removeChild(e.firstChild),e)}catch(e){return null}}}class Wn{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const e=this.inertDocument.createElement("body");t.appendChild(e)}}getInertBodyElement(t){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=Nn(t),e;const n=this.inertDocument.createElement("body");return n.innerHTML=Nn(t),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(t){const e=t.attributes;for(let r=e.length-1;0<r;r--){const n=e.item(r).name;"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||t.removeAttribute(n)}let n=t.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const Qn=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Gn=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function $n(t){return(t=String(t)).match(Qn)||t.match(Gn)?t:"unsafe:"+t}function Yn(t){const e={};for(const n of t.split(","))e[n]=!0;return e}function Jn(...t){const e={};for(const n of t)for(const t in n)n.hasOwnProperty(t)&&(e[t]=!0);return e}const Xn=Yn("area,br,col,hr,img,wbr"),Zn=Yn("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),tr=Yn("rp,rt"),er=Jn(tr,Zn),nr=Jn(Xn,Jn(Zn,Yn("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Jn(tr,Yn("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),er),rr=Yn("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),ir=Yn("srcset"),or=Jn(rr,ir,Yn("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Yn("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),sr=Yn("script,style,template");class ar{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,n=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let t=this.checkClobberedElement(e,e.nextSibling);if(t){e=t;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!nr.hasOwnProperty(e))return this.sanitizedSomething=!0,!sr.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const n=t.attributes;for(let i=0;i<n.length;i++){const t=n.item(i),e=t.name,o=e.toLowerCase();if(!or.hasOwnProperty(o)){this.sanitizedSomething=!0;continue}let s=t.value;rr[o]&&(s=$n(s)),ir[o]&&(r=s,s=(r=String(r)).split(",").map(t=>$n(t.trim())).join(", ")),this.buf.push(" ",e,'="',lr(s),'"')}var r;return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();nr.hasOwnProperty(e)&&!Xn.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(lr(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error("Failed to sanitize html because the element is clobbered: "+t.outerHTML);return e}}const ur=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,cr=/([^\#-~ |!])/g;function lr(t){return t.replace(/&/g,"&amp;").replace(ur,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(cr,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let hr;function dr(t,e){let n=null;try{hr=hr||function(t){const e=new Wn(t);return function(){try{return!!(new window.DOMParser).parseFromString(Nn(""),"text/html")}catch(t){return!1}}()?new Kn(e):e}(t);let r=e?String(e):"";n=hr.getInertBodyElement(r);let i=5,o=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=hr.getInertBodyElement(r)}while(r!==o);return(new ar).sanitizeChildren(fr(n)||n)}finally{if(n){const t=fr(n)||n;for(;t.firstChild;)t.removeChild(t.firstChild)}}}function fr(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var pr=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}({});function gr(t){const e=yr();return e?e.sanitize(pr.HTML,t)||"":Fn(t,"HTML")?Mn(t):dr(Et(),pt(t))}function mr(t){const e=yr();return e?e.sanitize(pr.URL,t)||"":Fn(t,"URL")?Mn(t):$n(pt(t))}function yr(){const t=Bt();return t&&t[12]}function vr(t){return t.ngDebugContext}function br(t){return t.ngOriginalError}function _r(t,...e){t.error(...e)}class wr{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t.ngErrorLogger||_r}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(t){return t?vr(t)?vr(t):this._findContext(br(t)):null}_findOriginalError(t){let e=br(t);for(;e&&br(e);)e=br(e);return e}}function Or(t,e){t.__ngContext__=e}const Sr=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(L))();function Cr(t){return t instanceof Function?t():t}var Er=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}({});function Tr(t,e){return(void 0)(t,e)}function Ir(t){const e=t[3];return at(e)?e[3]:e}function xr(t){return Nr(t[13])}function kr(t){return Nr(t[4])}function Nr(t){for(;null!==t&&!at(t);)t=t[4];return t}function Ar(t,e,n,r,i){if(null!=r){let o,s=!1;at(r)?o=r:st(r)&&(s=!0,r=r[0]);const a=xt(r);0===t&&null!==n?null==i?Fr(e,n,a):Mr(e,n,a,i||null,!0):1===t&&null!==n?Mr(e,n,a,i||null,!0):2===t?function(t,e,n){const r=Ur(t,e);r&&function(t,e,n,r){Tt(t)?t.removeChild(e,n,r):e.removeChild(n)}(t,r,e,n)}(e,a,s):3===t&&e.destroyNode(a),null!=o&&function(t,e,n,r,i){const o=n[7];o!==xt(n)&&Ar(e,t,r,o,i);for(let s=ot;s<n.length;s++){const i=n[s];Kr(i[1],i,t,e,r,o)}}(e,t,o,n,i)}}function jr(t,e,n){return Tt(t)?t.createElement(e,n):null===n?t.createElement(e):t.createElementNS(n,e)}function Pr(t,e){const n=t[9],r=n.indexOf(e),i=e[3];1024&e[2]&&(e[2]&=-1025,Vt(i,-1)),n.splice(r,1)}function Rr(t,e){if(t.length<=ot)return;const n=ot+e,r=t[n];if(r){const o=r[17];null!==o&&o!==t&&Pr(o,r),e>0&&(t[n-1][4]=r[4]);const s=hn(t,ot+e);Kr(r[1],i=r,i[11],2,null,null),i[0]=null,i[6]=null;const a=s[19];null!==a&&a.detachView(s[1]),r[3]=null,r[4]=null,r[2]&=-129}var i;return r}function Dr(t,e){if(!(256&e[2])){const n=e[11];Tt(n)&&n.destroyNode&&Kr(t,e,n,3,null,null),function(t){let e=t[13];if(!e)return Lr(t[1],t);for(;e;){let n=null;if(st(e))n=e[13];else{const t=e[10];t&&(n=t)}if(!n){for(;e&&!e[4]&&e!==t;)st(e)&&Lr(e[1],e),e=e[3];null===e&&(e=t),st(e)&&Lr(e[1],e),n=e&&e[4]}e=n}}(e)}}function Lr(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const t=e[n[r]];if(!(t instanceof Ee)){const e=n[r+1];if(Array.isArray(e))for(let n=0;n<e.length;n+=2)e[n+1].call(t[e[n]]);else e.call(t)}}}(t,e),function(t,e){const n=t.cleanup,r=e[7];let i=-1;if(null!==n)for(let o=0;o<n.length-1;o+=2)if("string"==typeof n[o]){const t=n[o+1],s="function"==typeof t?t(e):xt(e[t]),a=r[i=n[o+2]],u=n[o+3];"boolean"==typeof u?s.removeEventListener(n[o],a,u):u>=0?r[i=u]():r[i=-u].unsubscribe(),o+=2}else{const t=r[i=n[o+1]];n[o].call(t)}if(null!==r){for(let t=i+1;t<r.length;t++)(0,r[t])();e[7]=null}}(t,e),1===e[1].type&&Tt(e[11])&&e[11].destroy();const n=e[17];if(null!==n&&at(e[3])){n!==e[3]&&Pr(n,e);const r=e[19];null!==r&&r.detachView(t)}}}function Mr(t,e,n,r,i){Tt(t)?t.insertBefore(e,n,r,i):e.insertBefore(n,r,i)}function Fr(t,e,n){Tt(t)?t.appendChild(e,n):e.appendChild(n)}function Vr(t,e,n,r,i){null!==r?Mr(t,e,n,r,i):Fr(t,e,n)}function Ur(t,e){return Tt(t)?t.parentNode(e):e.parentNode}function qr(t,e,n,r){const i=function(t,e,n){return function(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[0];if(2&r.flags){const e=t.data[r.directiveStart].encapsulation;if(e===A.None||e===A.Emulated)return null}return Nt(r,n)}(t,e.parent,n)}(t,r,e),o=e[11],s=function(t,e,n){return function(t,e,n){return 40&t.type?Nt(t,n):null}(t,0,n)}(r.parent||e[6],0,e);if(null!=i)if(Array.isArray(n))for(let a=0;a<n.length;a++)Vr(o,i,n[a],s,!1);else Vr(o,i,n,s,!1)}function Br(t,e){if(null!==e){const n=e.type;if(3&n)return Nt(e,t);if(4&n)return Hr(-1,t[e.index]);if(8&n){const n=e.child;if(null!==n)return Br(t,n);{const n=t[e.index];return at(n)?Hr(-1,n):xt(n)}}if(32&n)return Tr(e,t)()||xt(t[e.index]);{const n=t[16],r=n[6],i=Ir(n),o=r.projection[e.projection];return null!=o?Br(i,o):Br(t,e.next)}}return null}function Hr(t,e){const n=ot+t+1;if(n<e.length){const t=e[n],r=t[1].firstChild;if(null!==r)return Br(t,r)}return e[7]}function zr(t,e,n,r,i,o,s){for(;null!=n;){const a=r[n.index],u=n.type;if(s&&0===e&&(a&&Or(xt(a),r),n.flags|=4),64!=(64&n.flags))if(8&u)zr(t,e,n.child,r,i,o,!1),Ar(e,t,i,a,o);else if(32&u){const s=Tr(n,r);let u;for(;u=s();)Ar(e,t,i,u,o);Ar(e,t,i,a,o)}else 16&u?Wr(t,e,r,n,i,o):Ar(e,t,i,a,o);n=s?n.projectionNext:n.next}}function Kr(t,e,n,r,i,o){zr(n,r,t.firstChild,e,i,o,!1)}function Wr(t,e,n,r,i,o){const s=n[16],a=s[6].projection[r.projection];if(Array.isArray(a))for(let u=0;u<a.length;u++)Ar(e,t,i,a[u],o);else zr(t,e,a,s[3],i,o,!0)}function Qr(t,e,n){Tt(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function Gr(t,e,n){Tt(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}function $r(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const n=e.length;if(i+n===r||t.charCodeAt(i+n)<=32)return i}n=i+1}}const Yr="ng-template";function Jr(t,e,n){let r=0;for(;r<t.length;){let i=t[r++];if(n&&"class"===i){if(i=t[r],-1!==$r(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function Xr(t){return 4===t.type&&t.value!==Yr}function Zr(t,e,n){return e===(4!==t.type||n?t.value:Yr)}function ti(t,e,n){let r=4;const i=t.attrs||[],o=function(t){for(let e=0;e<t.length;e++)if(Ie(t[e]))return e;return t.length}(i);let s=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!s)if(4&r){if(r=2|1&r,""!==u&&!Zr(t,u,n)||""===u&&1===e.length){if(ei(r))return!1;s=!0}}else{const c=8&r?u:e[++a];if(8&r&&null!==t.attrs){if(!Jr(t.attrs,c,n)){if(ei(r))return!1;s=!0}continue}const l=ni(8&r?"class":u,i,Xr(t),n);if(-1===l){if(ei(r))return!1;s=!0;continue}if(""!==c){let t;t=l>o?"":i[l+1].toLowerCase();const e=8&r?t:null;if(e&&-1!==$r(e,c,0)||2&r&&c!==t){if(ei(r))return!1;s=!0}}}}else{if(!s&&!ei(r)&&!ei(u))return!1;if(s&&ei(u))continue;s=!1,r=u|1&r}}return ei(r)||s}function ei(t){return 0==(1&t)}function ni(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let n=!1;for(;i<e.length;){const r=e[i];if(r===t)return i;if(3===r||6===r)n=!0;else{if(1===r||2===r){let t=e[++i];for(;"string"==typeof t;)t=e[++i];continue}if(4===r)break;if(0===r){i+=4;continue}}i+=n?1:2}return-1}return function(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function ri(t,e,n=!1){for(let r=0;r<e.length;r++)if(ti(t,e[r],n))return!0;return!1}function ii(t,e){return t?":not("+e.trim()+")":e}function oi(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if("string"==typeof s)if(2&r){const e=t[++n];i+="["+s+(e.length>0?'="'+e+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""===i||ei(s)||(e+=ii(o,i),i=""),r=s,o=o||!ei(r);n++}return""!==i&&(e+=ii(o,i)),e}const si={};function ai(t){ui(Ht(),Bt(),ge()+t,Yt())}function ui(t,e,n,r){if(!r)if(3==(3&e[2])){const r=t.preOrderCheckHooks;null!==r&&be(e,r,n)}else{const r=t.preOrderHooks;null!==r&&_e(e,r,0,n)}me(n)}function ci(t,e){return t<<17|e<<2}function li(t){return t>>17&32767}function hi(t){return 2|t}function di(t){return(131068&t)>>2}function fi(t,e){return-131069&t|e<<2}function pi(t){return 1|t}function gi(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],o=n[r+1];if(-1!==o){const n=t.data[o];se(i),n.contentQueries(2,e[o],o)}}}function mi(t,e,n,r,i,o,s,a,u,c){const l=e.blueprint.slice();return l[0]=i,l[2]=140|r,Ft(l),l[3]=l[15]=t,l[8]=n,l[10]=s||t&&t[10],l[11]=a||t&&t[11],l[12]=u||t&&t[12]||null,l[9]=c||t&&t[9]||null,l[6]=o,l[16]=2==e.type?t[16]:l,l}function yi(t,e,n,r,i){let o=t.data[e];if(null===o)o=function(t,e,n,r,i){const o=Wt(),s=Gt(),a=t.data[e]=function(t,e,n,r,i,o){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=a),null!==o&&(s?null==o.child&&null!==a.parent&&(o.child=a):null===o.next&&(o.next=a)),a}(t,e,n,r,i),Ut.lFrame.inI18n&&(o.flags|=64);else if(64&o.type){o.type=n,o.value=r,o.attrs=i;const t=function(){const t=Ut.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();o.injectorIndex=null===t?-1:t.injectorIndex}return Qt(o,!0),o}function vi(t,e,n,r){if(0===n)return-1;const i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function bi(t,e,n){ce(e);try{const r=t.viewQuery;null!==r&&$i(1,r,n);const i=t.template;null!==i&&Oi(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&gi(t,e),t.staticViewQueries&&$i(2,t.viewQuery,n);const o=t.components;null!==o&&function(t,e){for(let n=0;n<e.length;n++)zi(t,e[n])}(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0),r}finally{e[2]&=-5,pe()}}function _i(t,e,n,r){const i=e[2];if(256==(256&i))return;ce(e);const o=Yt();try{Ft(e),Ut.lFrame.bindingIndex=t.bindingStartIndex,null!==n&&Oi(t,e,n,2,r);const s=3==(3&i);if(!o)if(s){const n=t.preOrderCheckHooks;null!==n&&be(e,n,null)}else{const n=t.preOrderHooks;null!==n&&_e(e,n,0,null),we(e,0)}if(function(t){for(let e=xr(t);null!==e;e=kr(e)){if(!e[2])continue;const t=e[9];for(let e=0;e<t.length;e++){const n=t[e],r=n[3];0==(1024&n[2])&&Vt(r,1),n[2]|=1024}}}(e),function(t){for(let e=xr(t);null!==e;e=kr(e))for(let t=ot;t<e.length;t++){const n=e[t],r=n[1];Lt(n)&&_i(r,n,r.template,n[8])}}(e),null!==t.contentQueries&&gi(t,e),!o)if(s){const n=t.contentCheckHooks;null!==n&&be(e,n)}else{const n=t.contentHooks;null!==n&&_e(e,n,1),we(e,1)}!function(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let t=0;t<n.length;t++){const r=n[t];if(r<0)me(~r);else{const i=r,o=n[++t],s=n[++t];ne(o,i),s(2,e[i])}}}finally{me(-1)}}(t,e);const a=t.components;null!==a&&function(t,e){for(let n=0;n<e.length;n++)Bi(t,e[n])}(e,a);const u=t.viewQuery;if(null!==u&&$i(2,u,r),!o)if(s){const n=t.viewCheckHooks;null!==n&&be(e,n)}else{const n=t.viewHooks;null!==n&&_e(e,n,2),we(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),o||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,Vt(e[3],-1))}finally{pe()}}function wi(t,e,n,r){const i=e[10],o=!Yt(),s=Dt(e);try{o&&!s&&i.begin&&i.begin(),s&&bi(t,e,r),_i(t,e,n,r)}finally{o&&!s&&i.end&&i.end()}}function Oi(t,e,n,r,i){const o=ge();try{me(-1),2&r&&e.length>it&&ui(t,e,it,Yt()),n(r,i)}finally{me(o)}}function Si(t,e,n){if(ut(e)){const r=e.directiveEnd;for(let i=e.directiveStart;i<r;i++){const e=t.data[i];e.contentQueries&&e.contentQueries(1,n[i],i)}}}function Ci(t,e,n){qt()&&(function(t,e,n,r){const i=n.directiveStart,o=n.directiveEnd;t.firstCreatePass||Me(n,e),Or(r,e);const s=n.initialInputs;for(let a=i;a<o;a++){const r=t.data[a],o=ht(r);o&&Fi(e,n,r);const u=$e(e,t,a,n);Or(u,e),null!==s&&Vi(0,a-i,u,r,0,s),o&&(Pt(n.index,e)[8]=u)}}(t,e,n,Nt(n,e)),128==(128&n.flags)&&function(t,e,n){const r=n.directiveStart,i=n.directiveEnd,o=n.index,s=Ut.lFrame.currentDirectiveIndex;try{me(o);for(let n=r;n<i;n++){const r=t.data[n],i=e[n];re(n),null===r.hostBindings&&0===r.hostVars&&null===r.hostAttrs||Pi(r,i)}}finally{me(-1),re(s)}}(t,e,n))}function Ei(t,e,n=Nt){const r=e.localNames;if(null!==r){let i=e.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?n(e,t):t[s];t[i++]=a}}}function Ti(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=Ii(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function Ii(t,e,n,r,i,o,s,a,u,c){const l=it+r,h=l+i,d=function(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:si);return n}(l,h),f="function"==typeof c?c():c;return d[1]={type:t,blueprint:d,template:n,queries:null,viewQuery:a,declTNode:e,data:d.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:u,consts:f,incompleteFirstPass:!1}}function xi(t,e,n,r){const i=Ji(e);null===n?i.push(r):(i.push(n),t.firstCreatePass&&Xi(t).push(r,i.length-1))}function ki(t,e,n){for(let r in t)if(t.hasOwnProperty(r)){const i=t[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(e,i):n[r]=[e,i]}return n}function Ni(t,e,n,r,i,o,s,a){const u=Nt(e,n);let c,l=e.inputs;var h;!a&&null!=l&&(c=l[r])?(to(t,n,c,r,i),ct(e)&&function(t,e){const n=Pt(e,t);16&n[2]||(n[2]|=64)}(n,e.index)):3&e.type&&(r="class"===(h=r)?"className":"for"===h?"htmlFor":"formaction"===h?"formAction":"innerHtml"===h?"innerHTML":"readonly"===h?"readOnly":"tabindex"===h?"tabIndex":h,i=null!=s?s(i,e.value||"",r):i,Tt(o)?o.setProperty(u,r,i):xe(r)||(u.setProperty?u.setProperty(r,i):u[r]=i))}function Ai(t,e,n,r){let i=!1;if(qt()){const o=function(t,e,n){const r=t.directiveRegistry;let i=null;if(r)for(let o=0;o<r.length;o++){const s=r[o];ri(n,s.selectors,!1)&&(i||(i=[]),qe(Me(n,e),t,s.type),ht(s)?(Ri(t,n),i.unshift(s)):i.push(s))}return i}(t,e,n),s=null===r?null:{"":-1};if(null!==o){i=!0,Li(n,t.data.length,o.length);for(let t=0;t<o.length;t++){const e=o[t];e.providersResolver&&e.providersResolver(e)}let r=!1,a=!1,u=vi(t,e,o.length,null);for(let i=0;i<o.length;i++){const c=o[i];n.mergedAttrs=ke(n.mergedAttrs,c.hostAttrs),Mi(t,n,e,u,c),Di(u,c,s),null!==c.contentQueries&&(n.flags|=8),null===c.hostBindings&&null===c.hostAttrs&&0===c.hostVars||(n.flags|=128);const l=c.type.prototype;!r&&(l.ngOnChanges||l.ngOnInit||l.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index),r=!0),a||!l.ngOnChanges&&!l.ngDoCheck||((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index),a=!0),u++}!function(t,e){const n=e.directiveEnd,r=t.data,i=e.attrs,o=[];let s=null,a=null;for(let u=e.directiveStart;u<n;u++){const t=r[u],n=t.inputs,c=null===i||Xr(e)?null:Ui(n,i);o.push(c),s=ki(n,u,s),a=ki(t.outputs,u,a)}null!==s&&(s.hasOwnProperty("class")&&(e.flags|=16),s.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=s,e.outputs=a}(t,n)}s&&function(t,e,n){if(e){const r=t.localNames=[];for(let t=0;t<e.length;t+=2){const i=n[e[t+1]];if(null==i)throw new ft("301",`Export of name '${e[t+1]}' not found!`);r.push(e[t],i)}}}(n,r,s)}return n.mergedAttrs=ke(n.mergedAttrs,n.attrs),i}function ji(t,e,n,r,i,o){const s=o.hostBindings;if(s){let n=t.hostBindingOpCodes;null===n&&(n=t.hostBindingOpCodes=[]);const o=~e.index;(function(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(n)!=o&&n.push(o),n.push(r,i,s)}}function Pi(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function Ri(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function Di(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;ht(e)&&(n[""]=t)}}function Li(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function Mi(t,e,n,r,i){t.data[r]=i;const o=i.factory||(i.factory=dt(i.type)),s=new Ee(o,ht(i),null);t.blueprint[r]=s,n[r]=s,ji(t,e,0,r,vi(t,n,i.hostVars,si),i)}function Fi(t,e,n){const r=Nt(e,t),i=Ti(n),o=t[10],s=Ki(t,mi(t,i,null,n.onPush?64:16,r,e,o,o.createRenderer(r,n),null,null));t[e.index]=s}function Vi(t,e,n,r,i,o){const s=o[e];if(null!==s){const t=r.setInput;for(let e=0;e<s.length;){const i=s[e++],o=s[e++],a=s[e++];null!==t?r.setInput(n,a,i,o):n[o]=a}}}function Ui(t,e){let n=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;t.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,t[i],e[r+1])),r+=2}else r+=2;else r+=4}return n}function qi(t,e,n,r){return new Array(t,!0,!1,e,null,0,r,n,null,null)}function Bi(t,e){const n=Pt(e,t);if(Lt(n)){const t=n[1];80&n[2]?_i(t,n,t.template,n[8]):n[5]>0&&Hi(n)}}function Hi(t){for(let n=xr(t);null!==n;n=kr(n))for(let t=ot;t<n.length;t++){const e=n[t];if(1024&e[2]){const t=e[1];_i(t,e,t.template,e[8])}else e[5]>0&&Hi(e)}const e=t[1].components;if(null!==e)for(let n=0;n<e.length;n++){const r=Pt(e[n],t);Lt(r)&&r[5]>0&&Hi(r)}}function zi(t,e){const n=Pt(e,t),r=n[1];!function(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n),bi(r,n,n[8])}function Ki(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function Wi(t){for(;t;){t[2]|=64;const e=Ir(t);if(0!=(512&t[2])&&!e)return t;t=e}return null}function Qi(t,e,n){const r=e[10];r.begin&&r.begin();try{_i(t,e,t.template,n)}catch(i){throw Zi(e,i),i}finally{r.end&&r.end()}}function Gi(t){!function(t){for(let e=0;e<t.components.length;e++){const n=t.components[e],r=Rt(n),i=r[1];wi(i,r,i.template,n)}}(t[8])}function $i(t,e,n){se(0),e(t,n)}const Yi=(()=>Promise.resolve(null))();function Ji(t){return t[7]||(t[7]=[])}function Xi(t){return t.cleanup||(t.cleanup=[])}function Zi(t,e){const n=t[9],r=n?n.get(wr,null):null;r&&r.handleError(e)}function to(t,e,n,r,i){for(let o=0;o<n.length;){const s=n[o++],a=n[o++],u=e[s],c=t.data[s];null!==c.setInput?c.setInput(u,i,r,a):u[a]=i}}function eo(t,e,n){const r=kt(e,t);!function(t,e,n){Tt(t)?t.setValue(e,n):e.textContent=n}(t[11],r,n)}function no(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const t=e[s];"number"==typeof t?o=t:1==o?i=h(i,t):2==o&&(r=h(r,t+": "+e[++s]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}const ro=new on("INJECTOR",-1);class io{get(t,e=_n){if(e===_n){const e=new Error(`NullInjectorError: No provider for ${l(t)}!`);throw e.name="NullInjectorError",e}return e}}const oo=new on("Set Injector scope."),so={},ao={},uo=[];let co=void 0;function lo(){return void 0===co&&(co=new io),co}function ho(t,e=null,n=null,r){return new fo(t,n,e||lo(),r)}class fo{constructor(t,e,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const i=[];e&&cn(e,n=>this.processProvider(n,t,e)),cn([t],t=>this.processInjectorType(t,[],i)),this.records.set(ro,mo(void 0,this));const o=this.records.get(oo);this.scope=null!=o?o.value:null,this.source=r||("object"==typeof t?null:l(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,e=_n,n=E.Default){this.assertNotDestroyed();const r=Tn(this);try{if(!(n&E.SkipSelf)){let e=this.records.get(t);if(void 0===e){const n=("function"==typeof(i=t)||"object"==typeof i&&i instanceof on)&&v(t);e=n&&this.injectableDefInScope(n)?mo(po(t),so):null,this.records.set(t,e)}if(null!=e)return this.hydrate(t,e)}return(n&E.Self?lo():this.parent).get(t,e=n&E.Optional&&e===_n?null:e)}catch(o){if("NullInjectorError"===o.name){if((o.ngTempTokenPath=o.ngTempTokenPath||[]).unshift(l(t)),r)throw o;return function(t,e,n,r){const i=t.ngTempTokenPath;throw e[On]&&i.unshift(e[On]),t.message=function(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let i=l(e);if(Array.isArray(e))i=e.map(l).join(" -> ");else if("object"==typeof e){let t=[];for(let n in e)if(e.hasOwnProperty(n)){let r=e[n];t.push(n+":"+("string"==typeof r?JSON.stringify(r):l(r)))}i=`{${t.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(wn,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t.ngTempTokenPath=null,t}(o,t,"R3InjectorError",this.source)}throw o}finally{Tn(r)}var i}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((e,n)=>t.push(l(n))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,e,n){if(!(t=p(t)))return!1;let r=_(t);const i=null==r&&t.ngModule||void 0,o=void 0===i?t:i,s=-1!==n.indexOf(o);if(void 0!==i&&(r=_(i)),null==r)return!1;if(null!=r.imports&&!s){let t;n.push(o);try{cn(r.imports,r=>{this.processInjectorType(r,e,n)&&(void 0===t&&(t=[]),t.push(r))})}finally{}if(void 0!==t)for(let e=0;e<t.length;e++){const{ngModule:n,providers:r}=t[e];cn(r,t=>this.processProvider(t,n,r||uo))}}this.injectorDefTypes.add(o),this.records.set(o,mo(r.factory,so));const a=r.providers;if(null!=a&&!s){const e=t;cn(a,t=>this.processProvider(t,e,a))}return void 0!==i&&void 0!==t.providers}processProvider(t,e,n){let r=vo(t=p(t))?t:p(t&&t.provide);const i=function(t,e,n){return yo(t)?mo(void 0,t.useValue):mo(go(t),so)}(t);if(vo(t)||!0!==t.multi)this.records.get(r);else{let e=this.records.get(r);e||(e=mo(void 0,so,!0),e.factory=()=>kn(e.multi),this.records.set(r,e)),r=t,e.multi.push(t)}this.records.set(r,i)}hydrate(t,e){var n;return e.value===so&&(e.value=ao,e.value=e.factory()),"object"==typeof e.value&&e.value&&null!==(n=e.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(e.value),e.value}injectableDefInScope(t){return!!t.providedIn&&("string"==typeof t.providedIn?"any"===t.providedIn||t.providedIn===this.scope:this.injectorDefTypes.has(t.providedIn))}}function po(t){const e=v(t),n=null!==e?e.factory:dt(t);if(null!==n)return n;const r=_(t);if(null!==r)return r.factory;if(t instanceof on)throw new Error(`Token ${l(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const e=t.length;if(e>0){const n=function(t,e){const n=[];for(let r=0;r<t;r++)n.push("?");return n}(e);throw new Error(`Can't resolve all parameters for ${l(t)}: (${n.join(", ")}).`)}const n=function(t){const e=t&&(t[w]||t[S]);if(e){const n=function(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Error("unreachable")}function go(t,e,n){let r=void 0;if(vo(t)){const e=p(t);return dt(e)||po(e)}if(yo(t))r=()=>p(t.useValue);else if((i=t)&&i.useFactory)r=()=>t.useFactory(...kn(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))r=()=>xn(p(t.useExisting));else{const e=p(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return dt(e)||po(e);r=()=>new e(...kn(t.deps))}var i;return r}function mo(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function yo(t){return null!==t&&"object"==typeof t&&Sn in t}function vo(t){return"function"==typeof t}const bo=function(t,e,n){return function(t,e=null,n=null,r){const i=ho(t,e,n,r);return i._resolveInjectorDefTypes(),i}({name:n},e,t,n)};let _o=(()=>{class t{static create(t,e){return Array.isArray(t)?bo(t,e,""):bo(t.providers,t.parent,t.name||"")}}return t.THROW_IF_NOT_FOUND=_n,t.NULL=new io,t.\u0275prov=m({token:t,providedIn:"any",factory:()=>xn(ro)}),t.__NG_ELEMENT_ID__=-1,t})();function wo(t,e){ve(Rt(t)[1],Kt())}function Oo(t){let e=Object.getPrototypeOf(t.type.prototype).constructor,n=!0;const r=[t];for(;e;){let i=void 0;if(ht(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Error("Directives cannot inherit Components");i=e.\u0275dir}if(i){if(n){r.push(i);const e=t;e.inputs=So(t.inputs),e.declaredInputs=So(t.declaredInputs),e.outputs=So(t.outputs);const n=i.hostBindings;n&&To(t,n);const o=i.viewQuery,s=i.contentQueries;if(o&&Co(t,o),s&&Eo(t,s),c(t.inputs,i.inputs),c(t.declaredInputs,i.declaredInputs),c(t.outputs,i.outputs),ht(i)&&i.data.animation){const e=t.data;e.animation=(e.animation||[]).concat(i.data.animation)}}const e=i.features;if(e)for(let r=0;r<e.length;r++){const i=e[r];i&&i.ngInherit&&i(t),i===Oo&&(n=!1)}}e=Object.getPrototypeOf(e)}!function(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=ke(i.hostAttrs,n=ke(n,i.hostAttrs))}}(r)}function So(t){return t===M?{}:t===F?[]:t}function Co(t,e){const n=t.viewQuery;t.viewQuery=n?(t,r)=>{e(t,r),n(t,r)}:e}function Eo(t,e){const n=t.contentQueries;t.contentQueries=n?(t,r,i)=>{e(t,r,i),n(t,r,i)}:e}function To(t,e){const n=t.hostBindings;t.hostBindings=n?(t,r)=>{e(t,r),n(t,r)}:e}let Io=null;function xo(){if(!Io){const t=L.Symbol;if(t&&t.iterator)Io=t.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(Io=n)}}}return Io}class ko{constructor(t){this.wrapped=t}static wrap(t){return new ko(t)}static unwrap(t){return ko.isWrapped(t)?t.wrapped:t}static isWrapped(t){return t instanceof ko}}function No(t){return!!Ao(t)&&(Array.isArray(t)||!(t instanceof Map)&&xo()in t)}function Ao(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function jo(t,e,n){return t[e]=n}function Po(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function Ro(t,e,n,r){const i=Po(t,e,n);return Po(t,e+1,r)||i}function Do(t,e,n,r){const i=Bt();return Po(i,te(),e)&&(Ht(),function(t,e,n,r,i,o){const s=Nt(t,e);!function(t,e,n,r,i,o,s){if(null==o)Tt(t)?t.removeAttribute(e,i,n):e.removeAttribute(i);else{const a=null==s?pt(o):s(o,r||"",i);Tt(t)?t.setAttribute(e,i,a,n):n?e.setAttributeNS(n,i,a):e.setAttribute(i,a)}}(e[11],s,o,t.value,n,r,i)}(ye(),i,t,e,n,r)),Do}function Lo(t,e,n,r){return Po(t,te(),n)?e+pt(n)+r:si}function Mo(t,e,n,r,i,o,s,a){const u=Bt(),c=Ht(),l=t+it,h=c.firstCreatePass?function(t,e,n,r,i,o,s,a,u){const c=e.consts,l=yi(e,t,4,s||null,Mt(c,a));Ai(e,n,l,Mt(c,u)),ve(e,l);const h=l.tViews=Ii(2,l,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c);return null!==e.queries&&(e.queries.template(e,l),h.queries=e.queries.embeddedTView(l)),l}(l,c,u,e,n,r,i,o,s):c.data[l];Qt(h,!1);const d=u[11].createComment("");qr(c,u,d,h),Or(d,u),Ki(u,u[l]=qi(d,u,d,h)),lt(h)&&Ci(c,u,h),null!=s&&Ei(u,h,a)}function Fo(t){return jt(Ut.lFrame.contextLView,it+t)}function Vo(t,e=E.Default){const n=Bt();return null===n?xn(t,e):ze(Kt(),n,p(t),e)}function Uo(t,e,n){const r=Bt();return Po(r,te(),e)&&Ni(Ht(),ye(),r,t,e,r[11],n,!1),Uo}function qo(t,e,n,r,i){const o=i?"class":"style";to(t,n,e.inputs[o],o,r)}function Bo(t,e,n,r){const i=Bt(),o=Ht(),s=it+t,a=i[11],u=i[s]=jr(a,e,Ut.lFrame.currentNamespace),c=o.firstCreatePass?function(t,e,n,r,i,o,s){const a=e.consts,u=yi(e,t,2,i,Mt(a,o));return Ai(e,n,u,Mt(a,s)),null!==u.attrs&&no(u,u.attrs,!1),null!==u.mergedAttrs&&no(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(s,o,i,0,e,n,r):o.data[s];Qt(c,!0);const l=c.mergedAttrs;null!==l&&Te(a,u,l);const h=c.classes;null!==h&&Gr(a,u,h);const d=c.styles;null!==d&&Qr(a,u,d),64!=(64&c.flags)&&qr(o,i,u,c),0===Ut.lFrame.elementDepthCount&&Or(u,i),Ut.lFrame.elementDepthCount++,lt(c)&&(Ci(o,i,c),Si(o,c,i)),null!==r&&Ei(i,c)}function Ho(){let t=Kt();Gt()?$t():(t=t.parent,Qt(t,!1));const e=t;Ut.lFrame.elementDepthCount--;const n=Ht();n.firstCreatePass&&(ve(n,t),ut(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(e)&&qo(n,e,Bt(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(e)&&qo(n,e,Bt(),e.stylesWithoutHost,!1)}function zo(t,e,n,r){Bo(t,e,n,r),Ho()}function Ko(t,e,n){const r=Bt(),i=Ht(),o=t+it,s=i.firstCreatePass?function(t,e,n,r,i){const o=e.consts,s=Mt(o,r),a=yi(e,t,8,"ng-container",s);return null!==s&&no(a,s,!0),Ai(e,n,a,Mt(o,i)),null!==e.queries&&e.queries.elementStart(e,a),a}(o,i,r,e,n):i.data[o];Qt(s,!0);const a=r[o]=r[11].createComment("");qr(i,r,a,s),Or(a,r),lt(s)&&(Ci(i,r,s),Si(i,s,r)),null!=n&&Ei(r,s)}function Wo(){let t=Kt();const e=Ht();Gt()?$t():(t=t.parent,Qt(t,!1)),e.firstCreatePass&&(ve(e,t),ut(t)&&e.queries.elementEnd(t))}function Qo(){return Bt()}function Go(t){return!!t&&"function"==typeof t.then}function $o(t){return!!t&&"function"==typeof t.subscribe}function Yo(t,e,n=!1,r){const i=Bt(),o=Ht(),s=Kt();return function(t,e,n,r,i,o,s=!1,a){const u=lt(r),c=t.firstCreatePass&&Xi(t),l=Ji(e);let h=!0;if(3&r.type){const d=Nt(r,e),f=a?a(d):M,p=f.target||d,g=l.length,m=a?t=>a(xt(t[r.index])).target:r.index;if(Tt(n)){let s=null;if(!a&&u&&(s=function(t,e,n,r){const i=t.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const t=i[o];if(t===n&&i[o+1]===r){const t=e[7],n=i[o+2];return t.length>n?t[n]:null}"string"==typeof t&&(o+=2)}return null}(t,e,i,r.index)),null!==s)(s.__ngLastListenerFn__||s).__ngNextListenerFn__=o,s.__ngLastListenerFn__=o,h=!1;else{o=Xo(r,e,o,!1);const t=n.listen(f.name||p,i,o);l.push(o,t),c&&c.push(i,m,g,g+1)}}else o=Xo(r,e,o,!0),p.addEventListener(i,o,s),l.push(o),c&&c.push(i,m,g,s)}else o=Xo(r,e,o,!1);const d=r.outputs;let f;if(h&&null!==d&&(f=d[i])){const t=f.length;if(t)for(let n=0;n<t;n+=2){const t=e[f[n]][f[n+1]].subscribe(o),s=l.length;l.push(o,t),c&&c.push(i,r.index,s,-(s+1))}}}(o,i,i[11],s,t,e,n,r),Yo}function Jo(t,e,n){try{return!1!==e(n)}catch(r){return Zi(t,r),!1}}function Xo(t,e,n,r){return function i(o){if(o===Function)return n;const s=2&t.flags?Pt(t.index,e):e;0==(32&e[2])&&Wi(s);let a=Jo(e,n,o),u=i.__ngNextListenerFn__;for(;u;)a=Jo(e,u,o)&&a,u=u.__ngNextListenerFn__;return r&&!1===a&&(o.preventDefault(),o.returnValue=!1),a}}function Zo(t=1){return function(t){return(Ut.lFrame.contextLView=function(t,e){for(;t>0;)e=e[15],t--;return e}(t,Ut.lFrame.contextLView))[8]}(t)}function ts(t,e,n,r,i){const o=Bt(),s=Lo(o,e,n,r);return s!==si&&Ni(Ht(),ye(),o,t,s,o[11],i,!1),ts}const es=[];function ns(t,e,n,r,i){const o=t[n+1],s=null===e;let a=r?li(o):di(o),u=!1;for(;0!==a&&(!1===u||s);){const n=t[a+1];rs(t[a],e)&&(u=!0,t[a+1]=r?pi(n):hi(n)),a=r?li(n):di(n)}u&&(t[n+1]=r?hi(o):pi(o))}function rs(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&pn(t,e)>=0}const is={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function os(t){return t.substring(is.key,is.keyEnd)}function ss(t,e){const n=is.textEnd;return n===e?-1:(e=is.keyEnd=function(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}(t,is.key=e,n),as(t,e,n))}function as(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function us(t,e,n){return ds(t,e,n,!1),us}function cs(t,e){return ds(t,e,null,!0),cs}function ls(t){!function(t,e,n,r){const i=Ht(),o=ee(2);i.firstUpdatePass&&ps(i,null,o,r);const s=Bt();if(n!==si&&Po(s,o,n)){const a=i.data[ge()];if(_s(a,r)&&!fs(i,o)){let t=a.classesWithoutHost;null!==t&&(n=h(t,n||"")),qo(i,a,s,n,r)}else!function(t,e,n,r,i,o,s,a){i===si&&(i=es);let u=0,c=0,l=0<i.length?i[0]:null,h=0<o.length?o[0]:null;for(;null!==l||null!==h;){const s=u<i.length?i[u+1]:void 0,d=c<o.length?o[c+1]:void 0;let f=null,p=void 0;l===h?(u+=2,c+=2,s!==d&&(f=h,p=d)):null===h||null!==l&&l<h?(u+=2,f=l):(c+=2,f=h,p=d),null!==f&&ys(t,e,n,r,f,p,true,a),l=u<i.length?i[u]:null,h=c<o.length?o[c]:null}}(i,a,s,s[11],s[o+1],s[o+1]=function(t,e,n){if(null==n||""===n)return es;const r=[],i=Mn(n);if(Array.isArray(i))for(let o=0;o<i.length;o++)t(r,i[o],!0);else if("object"==typeof i)for(const o in i)i.hasOwnProperty(o)&&t(r,o,i[o]);else"string"==typeof i&&e(r,i);return r}(t,e,n),0,o)}}(dn,hs,t,!0)}function hs(t,e){for(let n=function(t){return function(t){is.key=0,is.keyEnd=0,is.value=0,is.valueEnd=0,is.textEnd=t.length}(t),ss(t,as(t,0,is.textEnd))}(e);n>=0;n=ss(e,n))dn(t,os(e),!0)}function ds(t,e,n,r){const i=Bt(),o=Ht(),s=ee(2);o.firstUpdatePass&&ps(o,t,s,r),e!==si&&Po(i,s,e)&&ys(o,o.data[ge()],i,i[11],t,i[s+1]=function(t,e){return null==t||("string"==typeof e?t+=e:"object"==typeof t&&(t=l(Mn(t)))),t}(e,n),r,s)}function fs(t,e){return e>=t.expandoStartIndex}function ps(t,e,n,r){const i=t.data;if(null===i[n+1]){const o=i[ge()],s=fs(t,n);_s(o,r)&&null===e&&!s&&(e=!1),e=function(t,e,n,r){const i=ie(t);let o=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(n=ms(n=gs(null,t,e,n,r),e.attrs,r),o=null);else{const s=e.directiveStylingLast;if(-1===s||t[s]!==i)if(n=gs(i,t,e,n,r),null===o){let n=function(t,e,n){const r=n?e.classBindings:e.styleBindings;if(0!==di(r))return t[li(r)]}(t,e,r);void 0!==n&&Array.isArray(n)&&(n=gs(null,t,e,n[1],r),n=ms(n,e.attrs,r),function(t,e,n,r){t[li(n?e.classBindings:e.styleBindings)]=r}(t,e,r,n))}else o=function(t,e,n){let r=void 0;const i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++)r=ms(r,t[o].hostAttrs,n);return ms(r,e.attrs,n)}(t,e,r)}return void 0!==o&&(r?e.residualClasses=o:e.residualStyles=o),n}(i,o,e,r),function(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=li(s),u=di(s);t[r]=n;let c,l=!1;if(Array.isArray(n)){const t=n;c=t[1],(null===c||pn(t,c)>0)&&(l=!0)}else c=n;if(i)if(0!==u){const e=li(t[a+1]);t[r+1]=ci(e,a),0!==e&&(t[e+1]=fi(t[e+1],r)),t[a+1]=131071&t[a+1]|r<<17}else t[r+1]=ci(a,0),0!==a&&(t[a+1]=fi(t[a+1],r)),a=r;else t[r+1]=ci(u,0),0===a?a=r:t[u+1]=fi(t[u+1],r),u=r;l&&(t[r+1]=hi(t[r+1])),ns(t,c,r,!0),ns(t,c,r,!1),function(t,e,n,r,i){const o=i?t.residualClasses:t.residualStyles;null!=o&&"string"==typeof e&&pn(o,e)>=0&&(n[r+1]=pi(n[r+1]))}(e,c,t,r,o),s=ci(a,u),o?e.classBindings=s:e.styleBindings=s}(i,o,e,n,s,r)}}function gs(t,e,n,r,i){let o=null;const s=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<s&&(o=e[a],r=ms(r,o.hostAttrs,i),o!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function ms(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let o=0;o<e.length;o++){const s=e[o];"number"==typeof s?i=s:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),dn(t,s,!!n||e[++o]))}return void 0===t?null:t}function ys(t,e,n,r,i,o,s,a){if(!(3&e.type))return;const u=t.data,c=u[a+1];bs(1==(1&c)?vs(u,e,n,i,di(c),s):void 0)||(bs(o)||2==(2&c)&&(o=vs(u,null,n,i,a,s)),function(t,e,n,r,i){const o=Tt(t);if(e)i?o?t.addClass(n,r):n.classList.add(r):o?t.removeClass(n,r):n.classList.remove(r);else{let e=-1===r.indexOf("-")?void 0:Er.DashCase;if(null==i)o?t.removeStyle(n,r,e):n.style.removeProperty(r);else{const s="string"==typeof i&&i.endsWith("!important");s&&(i=i.slice(0,-10),e|=Er.Important),o?t.setStyle(n,r,i,e):n.style.setProperty(r,i,s?"important":"")}}}(r,s,kt(ge(),n),i,o))}function vs(t,e,n,r,i,o){const s=null===e;let a=void 0;for(;i>0;){const e=t[i],o=Array.isArray(e),u=o?e[1]:e,c=null===u;let l=n[i+1];l===si&&(l=c?es:void 0);let h=c?fn(l,r):u===r?l:void 0;if(o&&!bs(h)&&(h=fn(e,r)),bs(h)&&(a=h,s))return a;const d=t[i+1];i=s?li(d):di(d)}if(null!==e){let t=o?e.residualClasses:e.residualStyles;null!=t&&(a=fn(t,r))}return a}function bs(t){return void 0!==t}function _s(t,e){return 0!=(t.flags&(e?16:32))}function ws(t,e=""){const n=Bt(),r=Ht(),i=t+it,o=r.firstCreatePass?yi(r,i,1,e,null):r.data[i],s=n[i]=function(t,e){return Tt(t)?t.createText(e):t.createTextNode(e)}(n[11],e);qr(r,n,s,o),Qt(o,!1)}function Os(t){return Ss("",t,""),Os}function Ss(t,e,n){const r=Bt(),i=Lo(r,t,e,n);return i!==si&&eo(r,ge(),i),Ss}function Cs(t,e,n,r,i){const o=Bt(),s=function(t,e,n,r,i,o){const s=Ro(t,Zt(),n,i);return ee(2),s?e+pt(n)+r+pt(i)+o:si}(o,t,e,n,r,i);return s!==si&&eo(o,ge(),s),Cs}function Es(t,e,n){const r=Bt();return Po(r,te(),e)&&Ni(Ht(),ye(),r,t,e,r[11],n,!0),Es}function Ts(t,e,n){const r=Bt();if(Po(r,te(),e)){const i=Ht(),o=ye();Ni(i,o,r,t,e,function(t,e,n){return(null===t||ht(t))&&(n=function(t){for(;Array.isArray(t);){if("object"==typeof t[1])return t;t=t[0]}return null}(n[e.index])),n[11]}(ie(i.data),o,r),n,!0)}return Ts}const Is=void 0;var xs=["en",[["a","p"],["AM","PM"],Is],[["AM","PM"],Is,Is],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Is,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Is,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Is,"{1} 'at' {0}",Is],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let ks={};function Ns(t,e,n){"string"!=typeof e&&(n=e,e=t[Ds.LocaleId]),e=e.toLowerCase().replace(/_/g,"-"),ks[e]=t,n&&(ks[e][Ds.ExtraData]=n)}function As(t){const e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=Rs(e);if(n)return n;const r=e.split("-")[0];if(n=Rs(r),n)return n;if("en"===r)return xs;throw new Error(`Missing locale data for the locale "${t}".`)}function js(t){return As(t)[Ds.CurrencyCode]||null}function Ps(t){return As(t)[Ds.PluralCase]}function Rs(t){return t in ks||(ks[t]=L.ng&&L.ng.common&&L.ng.common.locales&&L.ng.common.locales[t]),ks[t]}var Ds=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}({});const Ls="en-US";let Ms=Ls;function Fs(t){var e,n;n="Expected localeId to be defined",null==(e=t)&&function(t,e,n,r){throw new Error("ASSERTION ERROR: "+t+` [Expected=> null != ${e} <=Actual]`)}(n,e),"string"==typeof t&&(Ms=t.toLowerCase().replace(/_/g,"-"))}function Vs(t,e,n,r,i){if(t=p(t),Array.isArray(t))for(let o=0;o<t.length;o++)Vs(t[o],e,n,r,i);else{const o=Ht(),s=Bt();let a=vo(t)?t:p(t.provide),u=go(t);const c=Kt(),l=1048575&c.providerIndexes,h=c.directiveStart,d=c.providerIndexes>>20;if(vo(t)||!t.multi){const r=new Ee(u,i,Vo),f=Bs(a,e,i?l:l+d,h);-1===f?(qe(Me(c,s),o,a),Us(o,t,e.length),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(r),s.push(r)):(n[f]=r,s[f]=r)}else{const f=Bs(a,e,l+d,h),p=Bs(a,e,l,l+d),g=f>=0&&n[f],m=p>=0&&n[p];if(i&&!m||!i&&!g){qe(Me(c,s),o,a);const l=function(t,e,n,r,i){const o=new Ee(t,n,Vo);return o.multi=[],o.index=e,o.componentProviders=0,qs(o,i,r&&!n),o}(i?zs:Hs,n.length,i,r,u);!i&&m&&(n[p].providerFactory=l),Us(o,t,e.length,0),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(l),s.push(l)}else Us(o,t,f>-1?f:p,qs(n[i?p:f],u,!i&&r));!i&&r&&m&&n[p].componentProviders++}}}function Us(t,e,n,r){const i=vo(e);if(i||e.useClass){const o=(e.useClass||e).prototype.ngOnDestroy;if(o){const s=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){const t=s.indexOf(n);-1===t?s.push(n,[r,o]):s[t+1].push(r,o)}else s.push(n,o)}}}function qs(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Bs(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function Hs(t,e,n,r){return Ks(this.multi,[])}function zs(t,e,n,r){const i=this.multi;let o;if(this.providerFactory){const t=this.providerFactory.componentProviders,e=$e(n,n[1],this.providerFactory.index,r);o=e.slice(0,t),Ks(i,o);for(let n=t;n<e.length;n++)o.push(e[n])}else o=[],Ks(i,o);return o}function Ks(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function Ws(t,e=[]){return n=>{n.providersResolver=(n,r)=>function(t,e,n){const r=Ht();if(r.firstCreatePass){const i=ht(t);Vs(n,r.data,r.blueprint,i,!0),Vs(e,r.data,r.blueprint,i,!1)}}(n,r?r(t):t,e)}}class Qs{}class Gs{resolveComponentFactory(t){throw function(t){const e=Error(`No component factory found for ${l(t)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=t,e}(t)}}let $s=(()=>{class t{}return t.NULL=new Gs,t})();function Ys(...t){}function Js(t,e){return new Zs(Nt(t,e))}const Xs=function(){return Js(Kt(),Bt())};let Zs=(()=>{class t{constructor(t){this.nativeElement=t}}return t.__NG_ELEMENT_ID__=Xs,t})();class ta{}let ea=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>na(),t})();const na=function(){const t=Bt(),e=Pt(Kt().index,t);return function(t){return t[11]}(st(e)?e:t)};let ra=(()=>{class t{}return t.\u0275prov=m({token:t,providedIn:"root",factory:()=>null}),t})();class ia{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const oa=new ia("11.0.9");class sa{constructor(){}supports(t){return No(t)}create(t){return new ua(t)}}const aa=(t,e)=>e;class ua{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||aa}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,r=0,i=null;for(;e||n;){const o=!n||e&&e.currentIndex<da(n,r,i)?e:n,s=da(o,r,i),a=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(e=e._next,null==o.previousIndex)r++;else{i||(i=[]);const t=s-r,e=a-r;if(t!=e){for(let n=0;n<t;n++){const r=n<i.length?i[n]:i[n]=0,o=r+n;e<=o&&o<t&&(i[n]=r+1)}i[o.previousIndex]=e-t}}s!==a&&t(o,s,a)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!No(t))throw new Error(`Error trying to diff '${l(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e,n,r,i=this._itHead,o=!1;if(Array.isArray(t)){this.length=t.length;for(let e=0;e<this.length;e++)n=t[e],r=this._trackByFn(e,n),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,n,r,e)),Object.is(i.item,n)||this._addIdentityChange(i,n)):(i=this._mismatch(i,n,r,e),o=!0),i=i._next}else e=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[xo()]();let r;for(;!(r=n.next()).done;)e(r.value)}}(t,t=>{r=this._trackByFn(e,t),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,t,r,e)),Object.is(i.item,t)||this._addIdentityChange(i,t)):(i=this._mismatch(i,t,r,e),o=!0),i=i._next,e++}),this.length=e;return this._truncate(i),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,r){let i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,r)):null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,r)):t=this._addAfter(new ca(e,n),i,r),t}_verifyReinsertion(t,e,n,r){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?t=this._reinsertAfter(i,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,i=t._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new ha),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new ha),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class ca{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class la{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class ha{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new la,this.map.set(e,n)),n.add(t)}get(t,e){const n=this.map.get(t);return n?n.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function da(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}class fa{constructor(){}supports(t){return t instanceof Map||Ao(t)}create(){return new pa}}class pa{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||Ao(t)))throw new Error(`Error trying to diff '${l(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(t,n)=>{if(e&&e.key===n)this._maybeAddToChanges(e,t),this._appendAfter=e,e=e._next;else{const r=this._getOrCreateRecordForKey(n,t);e=this._insertBeforeOrAppend(e,r)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let t=e;null!==t;t=t._nextRemoved)t===this._mapHead&&(this._mapHead=null),this._records.delete(t.key),t._nextRemoved=t._next,t.previousValue=t.currentValue,t.currentValue=null,t._prev=null,t._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const n=this._records.get(t);this._maybeAddToChanges(n,e);const r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}const n=new ga(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class ga{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}let ma=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(null!=n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>{if(!n)throw new Error("Cannot extend IterableDiffers without a parent injector");return t.create(e,n)},deps:[[t,new vn,new mn]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(null!=e)return e;throw new Error(`Cannot find a differ supporting object '${t}' of type '${n=t,n.name||typeof n}'`);var n}}return t.\u0275prov=m({token:t,providedIn:"root",factory:()=>new t([new sa])}),t})(),ya=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>{if(!n)throw new Error("Cannot extend KeyValueDiffers without a parent injector");return t.create(e,n)},deps:[[t,new vn,new mn]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(e)return e;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return t.\u0275prov=m({token:t,providedIn:"root",factory:()=>new t([new fa])}),t})();function va(t,e,n,r,i=!1){for(;null!==n;){const o=e[n.index];if(null!==o&&r.push(xt(o)),at(o))for(let t=ot;t<o.length;t++){const e=o[t],n=e[1].firstChild;null!==n&&va(e[1],e,n,r)}const s=n.type;if(8&s)va(t,e,n.child,r);else if(32&s){const t=Tr(n,e);let i;for(;i=t();)r.push(i)}else if(16&s){const t=e[16],i=t[6].projection[n.projection];if(Array.isArray(i))r.push(...i);else{const e=Ir(t);va(e[1],e,i,r,!0)}}n=i?n.projectionNext:n.next}return r}class ba{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,e=t[1];return va(e,t,e.firstChild,[])}get context(){return this._lView[8]}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(at(t)){const e=t[8],n=e?e.indexOf(this):-1;n>-1&&(Rr(t,n),hn(e,n))}this._attachedToViewContainer=!1}Dr(this._lView[1],this._lView)}onDestroy(t){xi(this._lView[1],this._lView,null,t)}markForCheck(){Wi(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Qi(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,e,n){Jt(!0);try{Qi(t,e,n)}finally{Jt(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var t;this._appRef=null,Kr(this._lView[1],t=this._lView,t[11],2,null,null)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}class _a extends ba{constructor(t){super(t),this._view=t}detectChanges(){Gi(this._view)}checkNoChanges(){!function(t){Jt(!0);try{Gi(t)}finally{Jt(!1)}}(this._view)}get context(){return null}}const wa=Sa;let Oa=(()=>{class t{}return t.__NG_ELEMENT_ID__=wa,t.__ChangeDetectorRef__=!0,t})();function Sa(t=!1){return function(t,e,n){if(!n&&ct(t)){const n=Pt(t.index,e);return new ba(n,n)}return 47&t.type?new ba(e[16],e):null}(Kt(),Bt(),t)}const Ca=[new fa],Ea=new ma([new sa]),Ta=new ya(Ca),Ia=function(){return Aa(Kt(),Bt())};let xa=(()=>{class t{}return t.__NG_ELEMENT_ID__=Ia,t})();const ka=xa,Na=class extends ka{constructor(t,e,n){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=n}createEmbeddedView(t){const e=this._declarationTContainer.tViews,n=mi(this._declarationLView,e,t,16,null,e.declTNode,null,null,null,null);n[17]=this._declarationLView[this._declarationTContainer.index];const r=this._declarationLView[19];return null!==r&&(n[19]=r.createEmbeddedView(e)),bi(e,n,t),new ba(n)}};function Aa(t,e){return 4&t.type?new Na(e,t,Js(t,e)):null}class ja{}class Pa{}const Ra=function(){return Ua(Kt(),Bt())};let Da=(()=>{class t{}return t.__NG_ELEMENT_ID__=Ra,t})();const La=Da,Ma=class extends La{constructor(t,e,n){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=n}get element(){return Js(this._hostTNode,this._hostLView)}get injector(){return new Xe(this._hostTNode,this._hostLView)}get parentInjector(){const t=Ue(this._hostTNode,this._hostLView);if(Ae(t)){const e=Pe(t,this._hostLView),n=je(t);return new Xe(e[1].data[n+8],e)}return new Xe(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const e=Fa(this._lContainer);return null!==e&&e[t]||null}get length(){return this._lContainer.length-ot}createEmbeddedView(t,e,n){const r=t.createEmbeddedView(e||{});return this.insert(r,n),r}createComponent(t,e,n,r,i){const o=n||this.parentInjector;if(!i&&null==t.ngModule&&o){const t=o.get(ja,null);t&&(i=t)}const s=t.create(o,r,void 0,i);return this.insert(s.hostView,e),s}insert(t,e){const n=t._lView,r=n[1];if(at(n[3])){const e=this.indexOf(t);if(-1!==e)this.detach(e);else{const e=n[3],r=new Ma(e,e[6],e[3]);r.detach(r.indexOf(t))}}const i=this._adjustIndex(e),o=this._lContainer;!function(t,e,n,r){const i=ot+r,o=n.length;r>0&&(n[i-1][4]=e),r<o-ot?(e[4]=n[i],ln(n,ot+r,e)):(n.push(e),e[4]=null),e[3]=n;const s=e[17];null!==s&&n!==s&&function(t,e){const n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(s,e);const a=e[19];null!==a&&a.insertView(t),e[2]|=128}(r,n,o,i);const s=Hr(i,o),a=n[11],u=Ur(a,o[7]);return null!==u&&function(t,e,n,r,i,o){r[0]=i,r[6]=e,Kr(t,r,n,1,i,o)}(r,o[6],a,n,u,s),t.attachToViewContainerRef(),ln(Va(o),i,t),t}move(t,e){return this.insert(t,e)}indexOf(t){const e=Fa(this._lContainer);return null!==e?e.indexOf(t):-1}remove(t){const e=this._adjustIndex(t,-1),n=Rr(this._lContainer,e);n&&(hn(Va(this._lContainer),e),Dr(n[1],n))}detach(t){const e=this._adjustIndex(t,-1),n=Rr(this._lContainer,e);return n&&null!=hn(Va(this._lContainer),e)?new ba(n):null}_adjustIndex(t,e=0){return null==t?this.length+e:t}};function Fa(t){return t[8]}function Va(t){return t[8]||(t[8]=[])}function Ua(t,e){let n;const r=e[t.index];if(at(r))n=r;else{let i;if(8&t.type)i=xt(r);else{const n=e[11];i=n.createComment("");const r=Nt(t,e);Mr(n,Ur(n,r),i,function(t,e){return Tt(t)?t.nextSibling(e):e.nextSibling}(n,r),!1)}e[t.index]=n=qi(r,e,i,t),Ki(e,n)}return new Ma(n,t,e)}const qa={};class Ba extends $s{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=nt(t);return new Ka(e,this.ngModule)}}function Ha(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}const za=new on("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Sr});class Ka extends Qs{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=t.selectors.map(oi).join(","),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return Ha(this.componentDef.inputs)}get outputs(){return Ha(this.componentDef.outputs)}create(t,e,n,r){const i=(r=r||this.ngModule)?function(t,e){return{get:(n,r,i)=>{const o=t.get(n,qa,i);return o!==qa||r===qa?o:e.get(n,r,i)}}}(t,r.injector):t,o=i.get(ta,It),s=i.get(ra,null),a=o.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",c=n?function(t,e,n){if(Tt(t))return t.selectRootElement(e,n===A.ShadowDom);let r="string"==typeof e?t.querySelector(e):e;return r.textContent="",r}(a,n,this.componentDef.encapsulation):jr(o.createRenderer(null,this.componentDef),u,function(t){const e=t.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(u)),l=this.componentDef.onPush?576:528,h={components:[],scheduler:Sr,clean:Yi,playerHandler:null,flags:0},d=Ii(0,null,null,1,0,null,null,null,null,null),f=mi(null,d,h,l,null,null,o,a,s,i);let p,g;ce(f);try{const t=function(t,e,n,r,i,o){const s=n[1];n[20]=t;const a=yi(s,20,2,"#host",null),u=a.mergedAttrs=e.hostAttrs;null!==u&&(no(a,u,!0),null!==t&&(Te(i,t,u),null!==a.classes&&Gr(i,t,a.classes),null!==a.styles&&Qr(i,t,a.styles)));const c=r.createRenderer(t,e),l=mi(n,Ti(e),null,e.onPush?64:16,n[20],a,r,c,null,null);return s.firstCreatePass&&(qe(Me(a,n),s,e.type),Ri(s,a),Li(a,n.length,1)),Ki(n,l),n[20]=l}(c,this.componentDef,f,o,a);if(c)if(n)Te(a,c,["ng-version",oa.full]);else{const{attrs:t,classes:e}=function(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let o=t[r];if("string"==typeof o)2===i?""!==o&&e.push(o,t[++r]):8===i&&n.push(o);else{if(!ei(i))break;i=o}r++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]);t&&Te(a,c,t),e&&e.length>0&&Gr(a,c,e.join(" "))}if(g=At(d,it),void 0!==e){const t=g.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const r=e[n];t.push(null!=r?Array.from(r):null)}}p=function(t,e,n,r,i){const o=n[1],s=function(t,e,n){const r=Kt();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),Mi(t,r,e,vi(t,e,1,null),n));const i=$e(e,t,r.directiveStart,r);Or(i,e);const o=Nt(r,e);return o&&Or(o,e),i}(o,n,e);if(r.components.push(s),t[8]=s,i&&i.forEach(t=>t(s,e)),e.contentQueries){const t=Kt();e.contentQueries(1,s,t.directiveStart)}const a=Kt();return!o.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(me(a.index),ji(n[1],a,0,a.directiveStart,a.directiveEnd,e),Pi(e,s)),s}(t,this.componentDef,f,h,[wo]),bi(d,f,null)}finally{pe()}return new Wa(this.componentType,p,Js(g,f),f,g)}}class Wa extends class{}{constructor(t,e,n,r,i){super(),this.location=n,this._rootLView=r,this._tNode=i,this.instance=e,this.hostView=this.changeDetectorRef=new _a(r),this.componentType=t}get injector(){return new Xe(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}const Qa=new Map;class Ga extends ja{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Ba(this);const n=rt(t),r=t[H]||null;r&&Fs(r),this._bootstrapComponents=Cr(n.bootstrap),this._r3Injector=ho(t,e,[{provide:ja,useValue:this},{provide:$s,useValue:this.componentFactoryResolver}],l(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,e=_o.THROW_IF_NOT_FOUND,n=E.Default){return t===_o||t===ja||t===ro?this:this._r3Injector.get(t,e,n)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class $a extends Pa{constructor(t){super(),this.moduleType=t,null!==rt(t)&&function(t){const e=new Set;!function t(n){const r=rt(n,!0),i=r.id;null!==i&&(function(t,e,n){if(e&&e!==n)throw new Error(`Duplicate module registered for ${t} - ${l(e)} vs ${l(e.name)}`)}(i,Qa.get(i),n),Qa.set(i,n));const o=Cr(r.imports);for(const s of o)e.has(s)||(e.add(s),t(s))}(t)}(t)}create(t){return new Ga(this.moduleType,t)}}function Ya(t,e,n){const r=Xt()+t,i=Bt();return i[r]===si?jo(i,r,n?e.call(n):e()):function(t,e){return t[e]}(i,r)}function Ja(t,e){const n=t[e];return n===si?void 0:n}function Xa(t,e){const n=Ht();let r;const i=t+it;n.firstCreatePass?(r=function(t,e){if(e)for(let n=e.length-1;n>=0;n--){const r=e[n];if(t===r.name)return r}throw new ft("302",`The pipe '${t}' could not be found!`)}(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks||(n.destroyHooks=[])).push(i,r.onDestroy)):r=n.data[i];const o=r.factory||(r.factory=dt(r.type)),s=I(Vo);try{const t=De(!1),e=o();return De(t),function(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}(n,Bt(),i,e),e}finally{I(s)}}function Za(t,e,n){const r=t+it,i=Bt(),o=jt(i,r);return nu(i,eu(i,r)?function(t,e,n,r,i,o){const s=e+n;return Po(t,s,i)?jo(t,s+1,o?r.call(o,i):r(i)):Ja(t,s+1)}(i,Xt(),e,o.transform,n,o):o.transform(n))}function tu(t,e,n,r,i){const o=t+it,s=Bt(),a=jt(s,o);return nu(s,eu(s,o)?function(t,e,n,r,i,o,s,a){const u=e+n;return function(t,e,n,r,i){const o=Ro(t,e,n,r);return Po(t,e+2,i)||o}(t,u,i,o,s)?jo(t,u+3,a?r.call(a,i,o,s):r(i,o,s)):Ja(t,u+3)}(s,Xt(),e,a.transform,n,r,i,a):a.transform(n,r,i))}function eu(t,e){return t[1].data[e].pure}function nu(t,e){return ko.isWrapped(e)&&(e=ko.unwrap(e),t[Zt()]=si),e}const ru=class extends r.a{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){let r,o=t=>null,s=()=>null;t&&"object"==typeof t?(r=this.__isAsync?e=>{setTimeout(()=>t.next(e))}:e=>{t.next(e)},t.error&&(o=this.__isAsync?e=>{setTimeout(()=>t.error(e))}:e=>{t.error(e)}),t.complete&&(s=this.__isAsync?()=>{setTimeout(()=>t.complete())}:()=>{t.complete()})):(r=this.__isAsync?e=>{setTimeout(()=>t(e))}:e=>{t(e)},e&&(o=this.__isAsync?t=>{setTimeout(()=>e(t))}:t=>{e(t)}),n&&(s=this.__isAsync?()=>{setTimeout(()=>n())}:()=>{n()}));const a=super.subscribe(r,o,s);return t instanceof i.a&&t.add(a),a}};function iu(){return this._results[xo()]()}class ou{constructor(){this.dirty=!0,this._results=[],this.changes=new ru,this.length=0;const t=xo(),e=ou.prototype;e[t]||(e[t]=iu)}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t){this._results=un(t),this.dirty=!1,this.length=this._results.length,this.last=this._results[this.length-1],this.first=this._results[0]}notifyOnChanges(){this.changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}class su{constructor(t){this.queryList=t,this.matches=null}clone(){return new su(this.queryList)}setDirty(){this.queryList.setDirty()}}class au{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const n=null!==t.contentQueries?t.contentQueries[0]:e.length,r=[];for(let t=0;t<n;t++){const n=e.getByIndex(t);r.push(this.queries[n.indexInDeclarationView].clone())}return new au(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==wu(t,e).matches&&this.queries[e].setDirty()}}class uu{constructor(t,e,n,r=null){this.predicate=t,this.descendants=e,this.isStatic=n,this.read=r}}class cu{constructor(t=[]){this.queries=t}elementStart(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let n=0;n<this.length;n++){const r=null!==e?e.length:0,i=this.getByIndex(n).embeddedTView(t,r);i&&(i.indexInDeclarationView=n,null!==e?e.push(i):e=[i])}return null!==e?new cu(e):null}template(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class lu{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new lu(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&!1===this.metadata.descendants){const e=this._declarationNodeIndex;let n=t.parent;for(;null!==n&&8&n.type&&n.index!==e;)n=n.parent;return e===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){const i=n[r];this.matchTNodeWithReadOption(t,e,hu(e,i)),this.matchTNodeWithReadOption(t,e,Ge(e,t,i,!1,!1))}else n===xa?4&e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,Ge(e,t,n,!1,!1))}matchTNodeWithReadOption(t,e,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===Zs||r===Da||r===xa&&4&e.type)this.addMatch(e.index,-2);else{const n=Ge(e,t,r,!1,!1);null!==n&&this.addMatch(e.index,n)}else this.addMatch(e.index,n)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function hu(t,e){const n=t.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1];return null}function du(t,e,n,r){return-1===n?function(t,e){return 11&t.type?Js(t,e):4&t.type?Aa(t,e):null}(e,t):-2===n?function(t,e,n){return n===Zs?Js(e,t):n===xa?Aa(e,t):n===Da?Ua(e,t):void 0}(t,e,r):$e(t,t[1],n,e)}function fu(t,e,n,r){const i=e[19].queries[r];if(null===i.matches){const r=t.data,o=n.matches,s=[];for(let t=0;t<o.length;t+=2){const i=o[t];s.push(i<0?null:du(e,r[i],o[t+1],n.metadata.read))}i.matches=s}return i.matches}function pu(t,e,n,r){const i=t.queries.getByIndex(n),o=i.matches;if(null!==o){const s=fu(t,e,i,n);for(let t=0;t<o.length;t+=2){const n=o[t];if(n>0)r.push(s[t/2]);else{const i=o[t+1],s=e[-n];for(let t=ot;t<s.length;t++){const e=s[t];e[17]===e[3]&&pu(e[1],e,i,r)}if(null!==s[9]){const t=s[9];for(let e=0;e<t.length;e++){const n=t[e];pu(n[1],n,i,r)}}}}}return r}function gu(t){const e=Bt(),n=Ht(),r=oe();se(r+1);const i=wu(n,r);if(t.dirty&&Dt(e)===i.metadata.isStatic){if(null===i.matches)t.reset([]);else{const o=i.crossesNgTemplate?pu(n,e,r,[]):fu(n,e,i,r);t.reset(o),t.notifyOnChanges()}return!0}return!1}function mu(t,e,n){!function(t,e,n,r,i,o){t.firstCreatePass&&_u(t,new uu(n,r,false,i),-1),bu(t,e)}(Ht(),Bt(),t,e,n)}function yu(t,e,n,r){!function(t,e,n,r,i,o,s,a){t.firstCreatePass&&(_u(t,new uu(n,r,false,i),s.index),function(t,e){const n=t.contentQueries||(t.contentQueries=[]);e!==(n.length?n[n.length-1]:-1)&&n.push(t.queries.length-1,e)}(t,a)),bu(t,e)}(Ht(),Bt(),e,n,r,0,Kt(),t)}function vu(){return t=Bt(),e=oe(),t[19].queries[e].queryList;var t,e}function bu(t,e){const n=new ou;xi(t,e,n,n.destroy),null===e[19]&&(e[19]=new au),e[19].queries.push(new su(n))}function _u(t,e,n){null===t.queries&&(t.queries=new cu),t.queries.track(new lu(e,n))}function wu(t,e){return t.queries.getByIndex(e)}function Ou(t=E.Default){const e=Sa(!0);if(null!=e||t&E.Optional)return e;mt("ChangeDetectorRef")}const Su=new on("Application Initializer");let Cu=(()=>{class t{constructor(t){this.appInits=t,this.resolve=Ys,this.reject=Ys,this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}runInitializers(){if(this.initialized)return;const t=[],e=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const e=this.appInits[n]();Go(e)&&t.push(e)}Promise.all(t).then(()=>{e()}).catch(t=>{this.reject(t)}),0===t.length&&e(),this.initialized=!0}}return t.\u0275fac=function(e){return new(e||t)(xn(Su,8))},t.\u0275prov=m({token:t,factory:t.\u0275fac}),t})();const Eu=new on("AppId"),Tu={provide:Eu,useFactory:function(){return`${Iu()}${Iu()}${Iu()}`},deps:[]};function Iu(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const xu=new on("Platform Initializer"),ku=new on("Platform ID"),Nu=new on("appBootstrapListener");let Au=(()=>{class t{log(t){console.log(t)}warn(t){console.warn(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=m({token:t,factory:t.\u0275fac}),t})();const ju=new on("LocaleId"),Pu=new on("DefaultCurrencyCode");class Ru{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}const Du=function(t){return new $a(t)},Lu=Du,Mu=function(t){return Promise.resolve(Du(t))},Fu=function(t){const e=Du(t),n=Cr(rt(t).declarations).reduce((t,e)=>{const n=nt(e);return n&&t.push(new Ka(n)),t},[]);return new Ru(e,n)},Vu=Fu,Uu=function(t){return Promise.resolve(Fu(t))};let qu=(()=>{class t{constructor(){this.compileModuleSync=Lu,this.compileModuleAsync=Mu,this.compileModuleAndAllComponentsSync=Vu,this.compileModuleAndAllComponentsAsync=Uu}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=m({token:t,factory:t.\u0275fac}),t})();const Bu=(()=>Promise.resolve(0))();function Hu(t){"undefined"==typeof Zone?Bu.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class zu{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ru(!1),this.onMicrotaskEmpty=new ru(!1),this.onStable=new ru(!1),this.onError=new ru(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const n=this;n._nesting=0,n._outer=n._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(n._inner=n._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(n._inner=n._inner.fork(Zone.longStackTraceZoneSpec)),n.shouldCoalesceEventChangeDetection=e,n.lastRequestAnimationFrameId=-1,n.nativeRequestAnimationFrame=function(){let t=L.requestAnimationFrame,e=L.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(t){const e=!!t.shouldCoalesceEventChangeDetection&&t.nativeRequestAnimationFrame&&(()=>{!function(t){-1===t.lastRequestAnimationFrameId&&(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(L,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,Qu(t),Wu(t)},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),Qu(t))}(t)});t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0,maybeDelayChangeDetection:e},onInvokeTask:(n,r,i,o,s,a)=>{try{return Gu(t),n.invokeTask(i,o,s,a)}finally{e&&"eventTask"===o.type&&e(),$u(t)}},onInvoke:(e,n,r,i,o,s,a)=>{try{return Gu(t),e.invoke(r,i,o,s,a)}finally{$u(t)}},onHasTask:(e,n,r,i)=>{e.hasTask(r,i),n===r&&("microTask"==i.change?(t._hasPendingMicrotasks=i.microTask,Qu(t),Wu(t)):"macroTask"==i.change&&(t.hasPendingMacrotasks=i.macroTask))},onHandleError:(e,n,r,i)=>(e.handleError(r,i),t.runOutsideAngular(()=>t.onError.emit(i)),!1)})}(n)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!zu.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(zu.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,r){const i=this._inner,o=i.scheduleEventTask("NgZoneEvent: "+r,t,Ku,Ys,Ys);try{return i.runTask(o,e,n)}finally{i.cancelTask(o)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}const Ku={};function Wu(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function Qu(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||t.shouldCoalesceEventChangeDetection&&-1!==t.lastRequestAnimationFrameId)}function Gu(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function $u(t){t._nesting--,Wu(t)}class Yu{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ru,this.onMicrotaskEmpty=new ru,this.onStable=new ru,this.onError=new ru}run(t,e,n){return t.apply(e,n)}runGuarded(t,e,n){return t.apply(e,n)}runOutsideAngular(t){return t()}runTask(t,e,n,r){return t.apply(e,n)}}let Ju=(()=>{class t{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{zu.assertNotInAngularZone(),Hu(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Hu(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(e=>!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,e,n){let r=-1;e&&e>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(t=>t.timeoutId!==r),t(this._didWork,this.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:r,updateCb:n})}whenStable(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,e,n){return[]}}return t.\u0275fac=function(e){return new(e||t)(xn(zu))},t.\u0275prov=m({token:t,factory:t.\u0275fac}),t})(),Xu=(()=>{class t{constructor(){this._applications=new Map,nc.addToWindow(this)}registerApplication(t,e){this._applications.set(t,e)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,e=!0){return nc.findTestabilityInTree(this,t,e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=m({token:t,factory:t.\u0275fac}),t})();class Zu{addToWindow(t){}findTestabilityInTree(t,e,n){return null}}function tc(t){nc=t}let ec,nc=new Zu,rc=!0,ic=!1;function oc(){return ic=!0,rc}function sc(){if(ic)throw new Error("Cannot enable prod mode after platform setup.");rc=!1}const ac=new on("AllowMultipleToken");class uc{constructor(t,e){this.name=t,this.token=e}}function cc(t,e,n=[]){const r="Platform: "+e,i=new on(r);return(e=[])=>{let o=lc();if(!o||o.injector.get(ac,!1))if(t)t(n.concat(e).concat({provide:i,useValue:!0}));else{const t=n.concat(e).concat({provide:i,useValue:!0},{provide:oo,useValue:"platform"});!function(t){if(ec&&!ec.destroyed&&!ec.injector.get(ac,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");ec=t.get(hc);const e=t.get(xu,null);e&&e.forEach(t=>t())}(_o.create({providers:t,name:r}))}return function(t){const e=lc();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function lc(){return ec&&!ec.destroyed?ec:null}let hc=(()=>{class t{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,e){const n=function(t,e){let n;return n="noop"===t?new Yu:("zone.js"===t?void 0:t)||new zu({enableLongStackTrace:oc(),shouldCoalesceEventChangeDetection:e}),n}(e?e.ngZone:void 0,e&&e.ngZoneEventCoalescing||!1),r=[{provide:zu,useValue:n}];return n.run(()=>{const e=_o.create({providers:r,parent:this.injector,name:t.moduleType.name}),i=t.create(e),o=i.injector.get(wr,null);if(!o)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.runOutsideAngular(()=>{const t=n.onError.subscribe({next:t=>{o.handleError(t)}});i.onDestroy(()=>{pc(this._modules,i),t.unsubscribe()})}),function(t,e,n){try{const r=n();return Go(r)?r.catch(n=>{throw e.runOutsideAngular(()=>t.handleError(n)),n}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(o,n,()=>{const t=i.injector.get(Cu);return t.runInitializers(),t.donePromise.then(()=>(Fs(i.injector.get(ju,Ls)||Ls),this._moduleDoBootstrap(i),i))})})}bootstrapModule(t,e=[]){const n=dc({},e);return function(t,e,n){const r=new $a(n);return Promise.resolve(r)}(0,0,t).then(t=>this.bootstrapModuleFactory(t,n))}_moduleDoBootstrap(t){const e=t.injector.get(fc);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(t=>e.bootstrap(t));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${l(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);t.instance.ngDoBootstrap(e)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)(xn(_o))},t.\u0275prov=m({token:t,factory:t.\u0275fac}),t})();function dc(t,e){return Array.isArray(e)?e.reduce(dc,t):Object.assign(Object.assign({},t),e)}let fc=(()=>{class t{constructor(t,e,n,r,i,u){this._zone=t,this._console=e,this._injector=n,this._exceptionHandler=r,this._componentFactoryResolver=i,this._initStatus=u,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const c=new o.a(t=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{t.next(this._stable),t.complete()})}),l=new o.a(t=>{let e;this._zone.runOutsideAngular(()=>{e=this._zone.onStable.subscribe(()=>{zu.assertNotInAngularZone(),Hu(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,t.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{zu.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{t.next(!1)}))});return()=>{e.unsubscribe(),n.unsubscribe()}});this.isStable=Object(s.a)(c,l.pipe(Object(a.a)()))}bootstrap(t,e){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=t instanceof Qs?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);const r=n.isBoundToModule?void 0:this._injector.get(ja),i=n.create(_o.NULL,[],e||n.selector,r),o=i.location.nativeElement,s=i.injector.get(Ju,null),a=s&&i.injector.get(Xu);return s&&a&&a.registerApplication(o,s),i.onDestroy(()=>{this.detachView(i.hostView),pc(this.components,i),a&&a.unregisterApplication(o)}),this._loadComponent(i),oc()&&this._console.log("Angular is running in development mode. Call enableProdMode() to enable production mode."),i}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const e=t;this._views.push(e),e.attachToAppRef(this)}detachView(t){const e=t;pc(this._views,e),e.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(Nu,[]).concat(this._bootstrapListeners).forEach(e=>e(t))}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return t.\u0275fac=function(e){return new(e||t)(xn(zu),xn(Au),xn(_o),xn(wr),xn($s),xn(Cu))},t.\u0275prov=m({token:t,factory:t.\u0275fac}),t})();function pc(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class gc{}class mc{}const yc={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let vc=(()=>{class t{constructor(t,e){this._compiler=t,this._config=e||yc}load(t){return this.loadAndCompile(t)}loadAndCompile(t){let[e,r]=t.split("#");return void 0===r&&(r="default"),n("zn8P")(e).then(t=>t[r]).then(t=>bc(t,e,r)).then(t=>this._compiler.compileModuleAsync(t))}loadFactory(t){let[e,r]=t.split("#"),i="NgFactory";return void 0===r&&(r="default",i=""),n("zn8P")(this._config.factoryPathPrefix+e+this._config.factoryPathSuffix).then(t=>t[r+i]).then(t=>bc(t,e,r))}}return t.\u0275fac=function(e){return new(e||t)(xn(qu),xn(mc,8))},t.\u0275prov=m({token:t,factory:t.\u0275fac}),t})();function bc(t,e,n){if(!t)throw new Error(`Cannot find '${n}' in '${e}'`);return t}const _c=function(t){return null},wc=cc(null,"core",[{provide:ku,useValue:"unknown"},{provide:hc,deps:[_o]},{provide:Xu,deps:[]},{provide:Au,deps:[]}]),Oc=[{provide:fc,useClass:fc,deps:[zu,Au,_o,wr,$s,Cu]},{provide:za,deps:[zu],useFactory:function(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:Cu,useClass:Cu,deps:[[new mn,Su]]},{provide:qu,useClass:qu,deps:[]},Tu,{provide:ma,useFactory:function(){return Ea},deps:[]},{provide:ya,useFactory:function(){return Ta},deps:[]},{provide:ju,useFactory:function(t){return Fs(t=t||"undefined"!=typeof $localize&&$localize.locale||Ls),t},deps:[[new gn(ju),new mn,new vn]]},{provide:Pu,useValue:"USD"}];let Sc=(()=>{class t{constructor(t){}}return t.\u0275mod=J({type:t}),t.\u0275inj=y({factory:function(e){return new(e||t)(xn(fc))},providers:Oc}),t})()},gRHU:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("2fFW"),i=n("NJ4a");const o={closed:!0,next(t){},error(t){if(r.a.useDeprecatedSynchronousErrorHandling)throw t;Object(i.a)(t)},complete(){}}},jZKg:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("HDdC"),i=n("quSY");function o(t,e){return new r.a(n=>{const r=new i.a;let o=0;return r.add(e.schedule(function(){o!==t.length?(n.next(t[o++]),n.closed||r.add(this.schedule())):n.complete()})),r})}},kJWO:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")()},lJxs:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q");function i(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new o(t,e))}}class o{constructor(t,e){this.project=t,this.thisArg=e}call(t,e){return e.subscribe(new s(t,this.project,this.thisArg))}}class s extends r.a{constructor(t,e,n){super(t),this.project=e,this.count=0,this.thisArg=n||this}_next(t){let e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}},mrSG:function(t,e,n){"use strict";n.d(e,"c",function(){return i}),n.d(e,"a",function(){return o}),n.d(e,"b",function(){return s}),n.d(e,"d",function(){return a}),n.d(e,"g",function(){return u}),n.d(e,"e",function(){return c}),n.d(e,"f",function(){return l});var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function s(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(s,a)}u((r=r.apply(t,e||[])).next())})}function a(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function u(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function c(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function l(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t}},n6bG:function(t,e,n){"use strict";function r(t){return"function"==typeof t}n.d(e,"a",function(){return r})},ngJS:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=t=>e=>{for(let n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()}},pxpQ:function(t,e,n){"use strict";n.d(e,"b",function(){return u}),n.d(e,"a",function(){return l});var r=n("7o/Q"),i=n("EY2u"),o=n("LRne"),s=n("HDdC");let a=(()=>{class t{constructor(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}observe(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}do(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}}accept(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)}toObservable(){switch(this.kind){case"N":return Object(o.a)(this.value);case"E":return t=this.error,new s.a(e=>e.error(t));case"C":return Object(i.b)()}var t;throw new Error("unexpected notification kind value")}static createNext(e){return void 0!==e?new t("N",e):t.undefinedValueNotification}static createError(e){return new t("E",void 0,e)}static createComplete(){return t.completeNotification}}return t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t})();function u(t,e=0){return function(n){return n.lift(new c(t,e))}}class c{constructor(t,e=0){this.scheduler=t,this.delay=e}call(t,e){return e.subscribe(new l(t,this.scheduler,this.delay))}}class l extends r.a{constructor(t,e,n=0){super(t),this.scheduler=e,this.delay=n}static dispatch(t){const{notification:e,destination:n}=t;e.observe(n),this.unsubscribe()}scheduleMessage(t){this.destination.add(this.scheduler.schedule(l.dispatch,this.delay,new h(t,this.destination)))}_next(t){this.scheduleMessage(a.createNext(t))}_error(t){this.scheduleMessage(a.createError(t)),this.unsubscribe()}_complete(){this.scheduleMessage(a.createComplete()),this.unsubscribe()}}class h{constructor(t,e){this.notification=t,this.destination=e}}},"q/0M":function(t,e,n){"use strict";function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var i;n.d(e,"a",function(){return s}),n.d(e,"b",function(){return h}),n.d(e,"c",function(){return d}),n.d(e,"d",function(){return f});var o=[],s=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}({}),a={debug:s.DEBUG,verbose:s.VERBOSE,info:s.INFO,warn:s.WARN,error:s.ERROR,silent:s.SILENT},u=s.INFO,c=((i={})[s.DEBUG]="log",i[s.VERBOSE]="log",i[s.INFO]="info",i[s.WARN]="warn",i[s.ERROR]="error",i),l=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var o=(new Date).toISOString(),s=c[e];if(!s)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[s].apply(console,r(["["+o+"]  "+t.name+":"],n))}},h=function(){function t(t){this.name=t,this._logLevel=u,this._logHandler=l,this._userLogHandler=null,o.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in s))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?a[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.DEBUG],t)),this._logHandler.apply(this,r([this,s.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.VERBOSE],t)),this._logHandler.apply(this,r([this,s.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.INFO],t)),this._logHandler.apply(this,r([this,s.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.WARN],t)),this._logHandler.apply(this,r([this,s.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.ERROR],t)),this._logHandler.apply(this,r([this,s.ERROR],t))},t}();function d(t){o.forEach(function(e){e.setLogLevel(t)})}function f(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=a[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var a=i.map(function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}}).filter(function(t){return t}).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:s[n].toLowerCase(),message:a,args:i,type:e.name})}},r=0,i=o;r<i.length;r++)n(i[r])}},qOnz:function(t,e,n){"use strict";n.d(e,"a",function(){return d}),n.d(e,"b",function(){return C}),n.d(e,"c",function(){return M}),n.d(e,"d",function(){return i}),n.d(e,"e",function(){return o}),n.d(e,"f",function(){return a}),n.d(e,"g",function(){return u}),n.d(e,"h",function(){return j}),n.d(e,"i",function(){return F}),n.d(e,"j",function(){return l}),n.d(e,"k",function(){return h}),n.d(e,"l",function(){return B}),n.d(e,"m",function(){return Q}),n.d(e,"n",function(){return f}),n.d(e,"o",function(){return A}),n.d(e,"p",function(){return m}),n.d(e,"q",function(){return y}),n.d(e,"r",function(){return b}),n.d(e,"s",function(){return R}),n.d(e,"t",function(){return _}),n.d(e,"u",function(){return p}),n.d(e,"v",function(){return g}),n.d(e,"w",function(){return O}),n.d(e,"x",function(){return v}),n.d(e,"y",function(){return w}),n.d(e,"z",function(){return N}),n.d(e,"A",function(){return I}),n.d(e,"B",function(){return D}),n.d(e,"C",function(){return L}),n.d(e,"D",function(){return P}),n.d(e,"E",function(){return W}),n.d(e,"F",function(){return K}),n.d(e,"G",function(){return x}),n.d(e,"H",function(){return q}),n.d(e,"I",function(){return H}),n.d(e,"J",function(){return z});var r=n("mrSG"),i=function(t,e){if(!t)throw o(e)},o=function(t){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+t)},s=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},a={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=(15&a)<<2|c>>6,h=63&c;u||(h=64,s||(l=64)),r.push(n[o>>2],n[(3&o)<<4|a>>4],n[l],n[h])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(s(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var s=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(s>>10)),e[r++]=String.fromCharCode(56320+(1023&s))}else{o=t[n++];var a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==u)throw Error();r.push(o<<2|s>>4),64!==a&&(r.push(s<<4&240|a>>2),64!==u&&r.push(a<<6&192|u))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},u=function(t){var e=s(t);return a.encodeByteArray(e,!0)},c=function(t){try{return a.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function l(t){return h(void 0,t)}function h(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=h(t[n],e[n]));return t}var d=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch(function(){}),1===t.length?t(n):t(n,r))}},t}();function f(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function p(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(f())}function g(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}function m(){return"object"==typeof self&&self.self===self}function y(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function v(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function b(){return f().indexOf("Electron/")>=0}function _(){var t=f();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function w(){return f().indexOf("MSAppHost/")>=0}function O(){return!1}var S=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,C.prototype.create),o}return Object(r.c)(e,t),e}(Error),C=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?E(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",u=new S(i,a,r);return u},t}();function E(t,e){return t.replace(T,function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"})}var T=/\{\$([^}]+)}/g;function I(t){return JSON.parse(t)}function x(t){return JSON.stringify(t)}var k=function(t){var e={},n={},r={},i="";try{var o=t.split(".");e=I(c(o[0])||""),n=I(c(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(s){}return{header:e,claims:n,data:r,signature:i}},N=function(t){var e=k(t).claims;return!!e&&"object"==typeof e&&e.hasOwnProperty("iat")},A=function(t){var e=k(t).claims;return"object"==typeof e&&!0===e.admin};function j(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function P(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0}function R(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function D(t,e,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function L(t){for(var e=[],n=function(t,n){Array.isArray(n)?n.forEach(function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))},r=0,i=Object.entries(t);r<i.length;r++){var o=i[r];n(o[0],o[1])}return e.length?"&"+e.join("&"):""}var M=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++)n[r]=4294967295&((h=n[r-3]^n[r-8]^n[r-14]^n[r-16])<<1|h>>>31);var i,o,s=this.chain_[0],a=this.chain_[1],u=this.chain_[2],c=this.chain_[3],l=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(i=c^a&(u^c),o=1518500249):(i=a^u^c,o=1859775393):r<60?(i=a&u|c&(a|u),o=2400959708):(i=a^u^c,o=3395469782);var h=(s<<5|s>>>27)+i+l+o+n[r]&4294967295;l=c,c=u,u=4294967295&(a<<30|a>>>2),a=s,s=h}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},t}();function F(t,e){var n=new V(t,e);return n.subscribe.bind(n)}var V=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(n)}).catch(function(t){n.error(t)})}return t.prototype.next=function(t){this.forEachObserver(function(e){e.next(t)})},t.prototype.error=function(t){this.forEachObserver(function(e){e.error(t)}),this.close(t)},t.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=U),void 0===r.error&&(r.error=U),void 0===r.complete&&(r.complete=U);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}}),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}})},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},t}();function U(){}var q=function(t,e,n,r){var i;if(r<e?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function B(t,e,n){var r="";switch(e){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}return t+" failed: "+r+" argument "}function H(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(B(t,e,r)+"must be a valid function.")}function z(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(B(t,e,r)+"must be a valid context object.")}var K=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var o=t.charCodeAt(r);if(o>=55296&&o<=56319){var s=o-55296;r++,i(r<t.length,"Surrogate pair missing trail surrogate."),o=65536+(s<<10)+(t.charCodeAt(r)-56320)}o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=63&o|128):o<65536?(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=63&o|128):(e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=63&o|128)}return e},W=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};function Q(t){return t&&t._delegate?t._delegate:t}},qgXg:function(t,e,n){"use strict";n.d(e,"b",function(){return a}),n.d(e,"a",function(){return u});var r=n("3N8a");class i extends r.a{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}schedule(t,e=0){return e>0?super.schedule(t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}execute(t,e){return e>0||this.closed?super.execute(t,e):this._execute(t,e)}requestAsyncId(t,e,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(t,e,n):t.flush(this)}}var o=n("IjjT");class s extends o.a{}const a=new s(i),u=a},quSY:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("DH7j"),i=n("XoHu"),o=n("n6bG");const s=(()=>{function t(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((t,e)=>`${e+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t})();let a=(()=>{class t{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:n,_ctorUnsubscribe:a,_unsubscribe:c,_subscriptions:l}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(null!==n)for(let t=0;t<n.length;++t)n[t].remove(this);if(Object(o.a)(c)){a&&(this._unsubscribe=void 0);try{c.call(this)}catch(h){e=h instanceof s?u(h.errors):[h]}}if(Object(r.a)(l)){let t=-1,n=l.length;for(;++t<n;){const n=l[t];if(Object(i.a)(n))try{n.unsubscribe()}catch(h){e=e||[],h instanceof s?e=e.concat(u(h.errors)):e.push(h)}}}if(e)throw new s(e)}add(e){let n=e;if(!e)return t.EMPTY;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){const e=n;n=new t,n._subscriptions=[e]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:r}=n;if(null===r)n._parentOrParents=this;else if(r instanceof t){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}const i=this._subscriptions;return null===i?this._subscriptions=[n]:i.push(n),n}remove(t){const e=this._subscriptions;if(e){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}}}var e;return t.EMPTY=((e=new t).closed=!0,e),t})();function u(t){return t.reduce((t,e)=>t.concat(e instanceof s?e.errors:e),[])}},spgP:function(t,e,n){"use strict";(function(t){n.d(e,"a",function(){return T}),n.d(e,"b",function(){return b}),n.d(e,"c",function(){return v}),n.d(e,"d",function(){return f}),n.d(e,"e",function(){return y}),n.d(e,"f",function(){return C}),n.d(e,"g",function(){return w}),n.d(e,"h",function(){return p}),n.d(e,"i",function(){return m}),n.d(e,"j",function(){return O});var r=n("qgXg"),i=n("D0XW"),o=n("vkgz"),s=n("tf+s"),a=n("pxpQ"),u=n("fXoL"),c=n("Jgta");function l(){}class h{constructor(t,e=r.b){this.zone=t,this.delegate=e}now(){return this.delegate.now()}schedule(t,e,n){const r=this.zone;return this.delegate.schedule(function(e){r.runGuarded(()=>{t.apply(this,[e])})},e,n)}}class d{constructor(t){this.zone=t,this.task=null}call(t,e){const n=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",l,{},l,l)),e.pipe(Object(o.a)({next:n,complete:n,error:n})).subscribe(t).add(n)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}class f{constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new h(Zone.current)),this.insideAngular=t.run(()=>new h(Zone.current,i.a))}}function p(t){return function(e){return(e=e.lift(new d(t.ngZone))).pipe(Object(s.a)(t.outsideAngular),Object(a.b)(t.insideAngular))}}const g=["ngOnDestroy"],m=(t,e,n,r={})=>new Proxy(t,{get:(i,o)=>n.runOutsideAngular(()=>{var i;if(t[o])return(null===(i=null==r?void 0:r.spy)||void 0===i?void 0:i.get)&&r.spy.get(o,t[o]),t[o];if(g.indexOf(o)>-1)return()=>{};const s=e.toPromise().then(t=>{const e=t&&t[o];return"function"==typeof e?e.bind(t):e&&e.then?e.then(t=>n.run(()=>t)):n.run(()=>e)});return new Proxy(()=>{},{get:(t,e)=>s[e],apply:(t,e,n)=>s.then(t=>{var e;const i=t&&t(...n);return(null===(e=null==r?void 0:r.spy)||void 0===e?void 0:e.apply)&&r.spy.apply(o,n,i),i})})})}),y=(t,e)=>{e.forEach(e=>{Object.getOwnPropertyNames(e.prototype||e).forEach(n=>{Object.defineProperty(t.prototype,n,Object.getOwnPropertyDescriptor(e.prototype||e,n))})})},v=new u.q("angularfire2.app.options"),b=new u.q("angularfire2.app.nameOrConfig"),_=new u.O("6.1.4");function w(e,n,r){const i="object"==typeof r&&r||{};i.name=i.name||"string"==typeof r&&r||"[DEFAULT]";const o=c.a.apps.filter(t=>t&&t.name===i.name)[0]||n.runOutsideAngular(()=>c.a.initializeApp(e,i));try{JSON.stringify(e)!==JSON.stringify(o.options)&&S("error",`${o.name} Firebase App already initialized with different options${t.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(s){}return o}const O=()=>{S("warn","You may need to import 'firebase/auth' manually in your component rather than rely on AngularFireAuth's dynamic import, when using the emulator suite https://github.com/angular/angularfire/issues/2656")},S=(t,...e)=>{Object(u.U)()&&"undefined"!=typeof console&&console[t](...e)};function C(e,n,r,i,o){const[s,...a]=globalThis.\u0275AngularfireInstanceCache.get(e)||[];if(s){try{o.some((t,e)=>{const n=a[e];return t&&"object"==typeof t?JSON.stringify(t)!==JSON.stringify(n):t!==n})&&S("error",`${n} was already initialized on the ${r.name} Firebase App instance with different settings.${t.hot?" You may need to reload as Firebase is not HMR aware.":""}`)}catch(u){}return s}{const t=i();return globalThis.\u0275AngularfireInstanceCache.set(e,[t,...o]),t}}globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=new Map);const E={provide:class{},useFactory:w,deps:[v,u.z,[new u.A,b]]};let T=(()=>{class t{constructor(t){c.a.registerVersion("angularfire",_.full,t.toString()),c.a.registerVersion("angular",u.N.full)}static initializeApp(e,n){return{ngModule:t,providers:[{provide:v,useValue:e},{provide:b,useValue:n}]}}}return t.\u0275mod=u.Hb({type:t}),t.\u0275inj=u.Gb({factory:function(e){return new(e||t)(u.Sb(u.B))},providers:[E]}),t})()}).call(this,n("3UD+")(t))},"tf+s":function(t,e,n){"use strict";n.d(e,"a",function(){return m});var r=n("HDdC");let i=1;const o=(()=>Promise.resolve())(),s={};function a(t){return t in s&&(delete s[t],!0)}const u={setImmediate(t){const e=i++;return s[e]=!0,o.then(()=>a(e)&&t()),e},clearImmediate(t){a(t)}};var c=n("3N8a");class l extends c.a{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t.scheduled||(t.scheduled=u.setImmediate(t.flush.bind(t,null))))}recycleAsyncId(t,e,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(t,e,n);0===t.actions.length&&(u.clearImmediate(e),t.scheduled=void 0)}}var h=n("IjjT");class d extends h.a{flush(t){this.active=!0,this.scheduled=void 0;const{actions:e}=this;let n,r=-1,i=e.length;t=t||e.shift();do{if(n=t.execute(t.state,t.delay))break}while(++r<i&&(t=e.shift()));if(this.active=!1,n){for(;++r<i&&(t=e.shift());)t.unsubscribe();throw n}}}const f=new d(l);var p=n("DH7j");class g extends r.a{constructor(t,e=0,n=f){var r;super(),this.source=t,this.delayTime=e,this.scheduler=n,r=e,(Object(p.a)(r)||!(r-parseFloat(r)+1>=0)||e<0)&&(this.delayTime=0),n&&"function"==typeof n.schedule||(this.scheduler=f)}static create(t,e=0,n=f){return new g(t,e,n)}static dispatch(t){const{source:e,subscriber:n}=t;return this.add(e.subscribe(n))}_subscribe(t){return this.scheduler.schedule(g.dispatch,this.delayTime,{source:this.source,subscriber:t})}}function m(t,e=0){return function(n){return n.lift(new y(t,e))}}class y{constructor(t,e){this.scheduler=t,this.delay=e}call(t,e){return new g(e,this.delay,this.scheduler).subscribe(t)}}},vkgz:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("7o/Q");function i(){}var o=n("n6bG");function s(t,e,n){return function(r){return r.lift(new a(t,e,n))}}class a{constructor(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}call(t,e){return e.subscribe(new u(t,this.nextOrObserver,this.error,this.complete))}}class u extends r.a{constructor(t,e,n,r){super(t),this._tapNext=i,this._tapError=i,this._tapComplete=i,this._tapError=n||i,this._tapComplete=r||i,Object(o.a)(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||i,this._tapError=e.error||i,this._tapComplete=e.complete||i)}_next(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}},w1tV:function(t,e,n){"use strict";n.d(e,"a",function(){return p});var r=n("XNiG"),i=n("HDdC"),o=n("7o/Q"),s=n("quSY");function a(){return function(t){return t.lift(new u(t))}}class u{constructor(t){this.connectable=t}call(t,e){const{connectable:n}=this;n._refCount++;const r=new c(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i}}class c extends o.a{constructor(t,e){super(t),this.connectable=e}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);const{connection:n}=this,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}class l extends i.a{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,t=this._connection=new s.a,t.add(this.source.subscribe(new d(this.getSubject(),this))),t.closed&&(this._connection=null,t=s.a.EMPTY)),t}refCount(){return a()(this)}}const h=(()=>{const t=l.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class d extends r.b{constructor(t,e){super(t),this.connectable=e}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}function f(){return new r.a}function p(){return t=>{return a()((e=f,function(t){let n;n="function"==typeof e?e:function(){return e};const r=Object.create(t,h);return r.source=t,r.subjectFactory=n,r})(t));var e}}},yCtX:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("HDdC"),i=n("ngJS"),o=n("jZKg");function s(t,e){return e?Object(o.a)(t,e):new r.a(Object(i.a)(t))}},"z+Ro":function(t,e,n){"use strict";function r(t){return t&&"function"==typeof t.schedule}n.d(e,"a",function(){return r})},zIRd:function(t,e,n){"use strict";var r,i,o=n("mrSG"),s=n("qOnz"),a=n("/6Yf"),u=n("q/0M"),c=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),l=new s.b("app","Firebase",c),h="@firebase/app",d="[DEFAULT]",f=((i={})[h]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),p=new u.b("@firebase/app"),g=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=Object(s.j)(t),this.container=new a.b(e.name),this._addComponent(new a.a("app",function(){return r},"PUBLIC")),this.firebase_.INTERNAL.components.forEach(function(t){return r._addComponent(t)})}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise(function(e){t.checkDestroyed_(),e()}).then(function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map(function(t){return t.delete()}))}).then(function(){t.isDeleted_=!0})},t.prototype._getService=function(t,e){return void 0===e&&(e=d),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=d),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){p.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},t}();g.prototype.name&&g.prototype.options||g.prototype.delete||console.log("dc");var m=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var o=i;void 0===o.name&&(o.name=d);var a=o.name;if("string"!=typeof a||!a)throw l.create("bad-app-name",{appName:String(a)});if(Object(s.h)(e,a))throw l.create("duplicate-app",{appName:a});var u=new t(n,o,r);return e[a]=u,u},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=f[t])&&void 0!==r?r:t;n&&(i+="-"+n);var s=i.match(/\s|\//),u=e.match(/\s|\//);if(s||u){var c=['Unable to register library "'+i+'" with version "'+e+'":'];return s&&c.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),s&&u&&c.push("and"),u&&c.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void p.warn(c.join(" "))}o(new a.a(i+"-version",function(){return{library:i,version:e}},"VERSION"))},setLogLevel:u.c,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw l.create("invalid-log-argument");Object(u.d)(t,e)},apps:null,SDK_VERSION:"8.3.2",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(t=t||d,!Object(s.h)(e,t))throw l.create("no-app",{appName:t});return e[t]}function o(o){var a=o.name;if(n.has(a))return p.debug("There were multiple attempts to register component "+a+"."),"PUBLIC"===o.type?r[a]:null;if(n.set(a,o),"PUBLIC"===o.type){var u=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[a])throw l.create("invalid-app-argument",{appName:a});return t[a]()};void 0!==o.serviceProps&&Object(s.k)(u,o.serviceProps),r[a]=u,t.prototype[a]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,a).apply(this,o.multipleInstances?t:[])}}for(var c=0,h=Object.keys(e);c<h.length;c++)e[h[c]]._addComponent(o);return"PUBLIC"===o.type?r[a]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map(function(t){return e[t]})}}),i.App=t,r}(g);return e.INTERNAL=Object(o.a)(Object(o.a)({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){Object(s.k)(e,t)},createSubscribe:s.i,ErrorFactory:s.b,deepExtend:s.k}),e}(),y=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null}).filter(function(t){return t}).join(" ")},t}();if(Object(s.p)()&&void 0!==self.firebase){p.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var v=self.firebase.SDK_VERSION;v&&v.indexOf("LITE")>=0&&p.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var b=m.initializeApp;m.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Object(s.v)()&&p.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),b.apply(void 0,t)};var _=m;!function(t,e){t.INTERNAL.registerComponent(new a.a("platform-logger",function(t){return new y(t)},"PRIVATE")),t.registerVersion(h,"0.6.18",void 0),t.registerVersion("fire-js","")}(_),e.a=_},zUnb:function(t,e,n){"use strict";n.r(e);var r=n("fXoL");const i={apiKey:"AIzaSyDL9bwG8BghlGZCbLcNaJS1YQ_4OP-LPUY",authDomain:"movieapp-92c95.firebaseapp.com",projectId:"movieapp-92c95",storageBucket:"movieapp-92c95.appspot.com",messagingSenderId:"683529852271",appId:"1:683529852271:web:1c9933a3b339dce738449a"};let o=null;function s(){return o}const a=new r.q("DocumentToken");let u=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Fb)({factory:c,token:t,providedIn:"platform"}),t})();function c(){return Object(r.Sb)(h)}const l=new r.q("Location Initialized");let h=(()=>{class t extends u{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=s().getLocation(),this._history=s().getHistory()}getBaseHrefFromDOM(){return s().getBaseHref(this._doc)}onPopState(t){s().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",t,!1)}onHashChange(t){s().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",t,!1)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,e,n){d()?this._history.pushState(t,e,n):this.location.hash=n}replaceState(t,e,n){d()?this._history.replaceState(t,e,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}getState(){return this._history.state}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(a))},t.\u0275prov=Object(r.Fb)({factory:f,token:t,providedIn:"platform"}),t})();function d(){return!!window.history.pushState}function f(){return new h(Object(r.Sb)(a))}function p(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function g(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function m(t){return t&&"?"!==t[0]?"?"+t:t}let y=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Fb)({factory:v,token:t,providedIn:"root"}),t})();function v(t){const e=Object(r.Sb)(a).location;return new _(Object(r.Sb)(u),e&&e.origin||"")}const b=new r.q("appBaseHref");let _=(()=>{class t extends y{constructor(t,e){if(super(),this._platformLocation=t,null==e&&(e=this._platformLocation.getBaseHrefFromDOM()),null==e)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=e}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return p(this._baseHref,t)}path(t=!1){const e=this._platformLocation.pathname+m(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?`${e}${n}`:e}pushState(t,e,n,r){const i=this.prepareExternalUrl(n+m(r));this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){const i=this.prepareExternalUrl(n+m(r));this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(u),r.Sb(b,8))},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac}),t})(),w=(()=>{class t extends y{constructor(t,e){super(),this._platformLocation=t,this._baseHref="",null!=e&&(this._baseHref=e)}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}path(t=!1){let e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e}prepareExternalUrl(t){const e=p(this._baseHref,t);return e.length>0?"#"+e:e}pushState(t,e,n,r){let i=this.prepareExternalUrl(n+m(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){let i=this.prepareExternalUrl(n+m(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(u),r.Sb(b,8))},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac}),t})(),O=(()=>{class t{constructor(t,e){this._subject=new r.n,this._urlChangeListeners=[],this._platformStrategy=t;const n=this._platformStrategy.getBaseHref();this._platformLocation=e,this._baseHref=g(C(n)),this._platformStrategy.onPopState(t=>{this._subject.emit({url:this.path(!0),pop:!0,state:t.state,type:t.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,e=""){return this.path()==this.normalize(t+m(e))}normalize(e){return t.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,C(e)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,e="",n=null){this._platformStrategy.pushState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+m(e)),n)}replaceState(t,e="",n=null){this._platformStrategy.replaceState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+m(e)),n)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(t=>{this._notifyUrlChangeListeners(t.url,t.state)}))}_notifyUrlChangeListeners(t="",e){this._urlChangeListeners.forEach(n=>n(t,e))}subscribe(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(y),r.Sb(u))},t.normalizeQueryParams=m,t.joinWithSlash=p,t.stripTrailingSlash=g,t.\u0275prov=Object(r.Fb)({factory:S,token:t,providedIn:"root"}),t})();function S(){return new O(Object(r.Sb)(y),Object(r.Sb)(u))}function C(t){return t.replace(/\/index.html$/,"")}var E=function(t){return t[t.Zero=0]="Zero",t[t.One=1]="One",t[t.Two=2]="Two",t[t.Few=3]="Few",t[t.Many=4]="Many",t[t.Other=5]="Other",t}({});const T=r.lb;class I{}let x=(()=>{class t extends I{constructor(t){super(),this.locale=t}getPluralCategory(t,e){switch(T(e||this.locale)(t)){case E.Zero:return"zero";case E.One:return"one";case E.Two:return"two";case E.Few:return"few";case E.Many:return"many";default:return"other"}}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(r.u))},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac}),t})();function k(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const t=n.indexOf("="),[r,i]=-1==t?[n,""]:[n.slice(0,t),n.slice(t+1)];if(r.trim()===e)return decodeURIComponent(i)}return null}class N{constructor(t,e,n,r){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let A=(()=>{class t{constructor(t,e,n){this._viewContainer=t,this._template=e,this._differs=n,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;if(!this._differ&&n)try{this._differ=this._differs.find(n).create(this.ngForTrackBy)}catch(e){throw new Error(`Cannot find a differ supporting object '${n}' of type '${t=n,t.name||typeof t}'. NgFor only supports binding to Iterables such as Arrays.`)}}var t;if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const e=[];t.forEachOperation((t,n,r)=>{if(null==t.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new N(null,this._ngForOf,-1,-1),null===r?void 0:r),i=new j(t,n);e.push(i)}else if(null==r)this._viewContainer.remove(null===n?void 0:n);else if(null!==n){const i=this._viewContainer.get(n);this._viewContainer.move(i,r);const o=new j(t,i);e.push(o)}});for(let n=0;n<e.length;n++)this._perViewChange(e[n].view,e[n].record);for(let n=0,r=this._viewContainer.length;n<r;n++){const t=this._viewContainer.get(n);t.context.index=n,t.context.count=r,t.context.ngForOf=this._ngForOf}t.forEachIdentityChange(t=>{this._viewContainer.get(t.currentIndex).context.$implicit=t.item})}_perViewChange(t,e){t.context.$implicit=e.item}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(r.P),r.Jb(r.K),r.Jb(r.s))},t.\u0275dir=r.Eb({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),t})();class j{constructor(t,e){this.record=t,this.view=e}}let P=(()=>{class t{constructor(t,e){this._viewContainer=t,this._context=new R,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=e}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){D("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){D("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(r.P),r.Jb(r.K))},t.\u0275dir=r.Eb({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),t})();class R{constructor(){this.$implicit=null,this.ngIf=null}}function D(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${Object(r.tb)(e)}'.`)}function L(t,e){return Error(`InvalidPipeArgument: '${e}' for pipe '${Object(r.tb)(t)}'`)}let M=(()=>{class t{transform(e){if(null==e)return null;if("string"!=typeof e)throw L(t,e);return e.toUpperCase()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=r.Ib({name:"uppercase",type:t,pure:!0}),t})(),F=(()=>{class t{transform(e,n,r){if(null==e)return null;if(!this.supports(e))throw L(t,e);return e.slice(n,r)}supports(t){return"string"==typeof t||Array.isArray(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=r.Ib({name:"slice",type:t,pure:!1}),t})(),V=(()=>{class t{}return t.\u0275mod=r.Hb({type:t}),t.\u0275inj=r.Gb({factory:function(e){return new(e||t)},providers:[{provide:I,useClass:x}]}),t})();function U(t){return"server"===t}let q=(()=>{class t{}return t.\u0275prov=Object(r.Fb)({token:t,providedIn:"root",factory:()=>new B(Object(r.Sb)(a),window)}),t})();class B{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){var e;if(!this.supportsScrolling())return;const n=null!==(e=this.document.getElementById(t))&&void 0!==e?e:this.document.getElementsByName(t)[0];void 0!==n&&(this.scrollToElement(n),this.attemptFocus(n))}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}attemptFocus(t){return t.focus(),this.document.activeElement===t}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=H(this.window.history)||H(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(t){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(t){return!1}}}function H(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class z extends class extends class{}{constructor(){super()}supportsDOMEvents(){return!0}}{static makeCurrent(){var t;t=new z,o||(o=t)}getProperty(t,e){return t[e]}log(t){window.console&&window.console.log&&window.console.log(t)}logGroup(t){window.console&&window.console.group&&window.console.group(t)}logGroupEnd(){window.console&&window.console.groupEnd&&window.console.groupEnd()}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){return t.parentNode&&t.parentNode.removeChild(t),t}getValue(t){return t.value}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getHistory(){return window.history}getLocation(){return window.location}getBaseHref(t){const e=W||(W=document.querySelector("base"),W)?W.getAttribute("href"):null;return null==e?null:(n=e,K||(K=document.createElement("a")),K.setAttribute("href",n),"/"===K.pathname.charAt(0)?K.pathname:"/"+K.pathname);var n}resetBaseElement(){W=null}getUserAgent(){return window.navigator.userAgent}performanceNow(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}supportsCookies(){return!0}getCookie(t){return k(document.cookie,t)}}let K,W=null;const Q=new r.q("TRANSITION_ID"),G=[{provide:r.d,useFactory:function(t,e,n){return()=>{n.get(r.e).donePromise.then(()=>{const n=s();Array.prototype.slice.apply(e.querySelectorAll("style[ng-transition]")).filter(e=>e.getAttribute("ng-transition")===t).forEach(t=>n.remove(t))})}},deps:[Q,a,r.r],multi:!0}];class ${static init(){Object(r.W)(new $)}addToWindow(t){r.nb.getAngularTestability=(e,n=!0)=>{const r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},r.nb.getAllAngularTestabilities=()=>t.getAllTestabilities(),r.nb.getAllAngularRootElements=()=>t.getAllRootElements(),r.nb.frameworkStabilizers||(r.nb.frameworkStabilizers=[]),r.nb.frameworkStabilizers.push(t=>{const e=r.nb.getAllAngularTestabilities();let n=e.length,i=!1;const o=function(e){i=i||e,n--,0==n&&t(i)};e.forEach(function(t){t.whenStable(o)})})}findTestabilityInTree(t,e,n){if(null==e)return null;const r=t.getTestability(e);return null!=r?r:n?s().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}const Y=new r.q("EventManagerPlugins");let J=(()=>{class t{constructor(t,e){this._zone=e,this._eventNameToPlugin=new Map,t.forEach(t=>t.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}addGlobalEventListener(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}getZone(){return this._zone}_findPluginFor(t){const e=this._eventNameToPlugin.get(t);if(e)return e;const n=this._plugins;for(let r=0;r<n.length;r++){const e=n[r];if(e.supports(t))return this._eventNameToPlugin.set(t,e),e}throw new Error("No event manager plugin found for event "+t)}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(Y),r.Sb(r.z))},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac}),t})();class X{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const r=s().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,n)}}let Z=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(t){const e=new Set;t.forEach(t=>{this._stylesSet.has(t)||(this._stylesSet.add(t),e.add(t))}),this.onStylesAdded(e)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac}),t})(),tt=(()=>{class t extends Z{constructor(t){super(),this._doc=t,this._hostNodes=new Set,this._styleNodes=new Set,this._hostNodes.add(t.head)}_addStylesToHost(t,e){t.forEach(t=>{const n=this._doc.createElement("style");n.textContent=t,this._styleNodes.add(e.appendChild(n))})}addHost(t){this._addStylesToHost(this._stylesSet,t),this._hostNodes.add(t)}removeHost(t){this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach(e=>this._addStylesToHost(t,e))}ngOnDestroy(){this._styleNodes.forEach(t=>s().remove(t))}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(a))},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac}),t})();const et={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},nt=/%COMP%/g;function rt(t,e,n){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?rt(t,i,n):(i=i.replace(nt,t),n.push(i))}return n}function it(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let ot=(()=>{class t{constructor(t,e,n){this.eventManager=t,this.sharedStylesHost=e,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new st(t)}createRenderer(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case r.Q.Emulated:{let n=this.rendererByCompId.get(e.id);return n||(n=new at(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n}case 1:case r.Q.ShadowDom:return new ut(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){const t=rt(e.id,e.styles,[]);this.sharedStylesHost.addStyles(t),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(J),r.Sb(tt),r.Sb(r.c))},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac}),t})();class st{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(et[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,n){t&&t.insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,r){if(r){e=r+":"+e;const i=et[r];i?t.setAttributeNS(i,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const r=et[n];r?t.removeAttributeNS(r,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,i){i&(r.F.DashCase|r.F.Important)?t.style.setProperty(e,n,i&r.F.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&r.F.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,it(n)):this.eventManager.addEventListener(t,e,it(n))}}class at extends st{constructor(t,e,n,r){super(t),this.component=n;const i=rt(r+"-"+n.id,n.styles,[]);e.addStyles(i),this.contentAttr="_ngcontent-%COMP%".replace(nt,r+"-"+n.id),this.hostAttr="_nghost-%COMP%".replace(nt,r+"-"+n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class ut extends st{constructor(t,e,n,r){super(t),this.sharedStylesHost=e,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const i=rt(r.id,r.styles,[]);for(let o=0;o<i.length;o++){const t=document.createElement("style");t.textContent=i[o],this.shadowRoot.appendChild(t)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let ct=(()=>{class t extends X{constructor(t){super(t)}supports(t){return!0}addEventListener(t,e,n){return t.addEventListener(e,n,!1),()=>this.removeEventListener(t,e,n)}removeEventListener(t,e,n){return t.removeEventListener(e,n)}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(a))},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac}),t})();const lt=["alt","control","meta","shift"],ht={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},dt={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},ft={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let pt=(()=>{class t extends X{constructor(t){super(t)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,n,r){const i=t.parseEventName(n),o=t.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>s().onAndCancel(e,i.domEventName,o))}static parseEventName(e){const n=e.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const i=t._normalizeKey(n.pop());let o="";if(lt.forEach(t=>{const e=n.indexOf(t);e>-1&&(n.splice(e,1),o+=t+".")}),o+=i,0!=n.length||0===i.length)return null;const s={};return s.domEventName=r,s.fullKey=o,s}static getEventFullKey(t){let e="",n=function(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&dt.hasOwnProperty(e)&&(e=dt[e]))}return ht[e]||e}(t);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),lt.forEach(r=>{r!=n&&(0,ft[r])(t)&&(e+=r+".")}),e+=n,e}static eventCallback(e,n,r){return i=>{t.getEventFullKey(i)===e&&r.runGuarded(()=>n(i))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(a))},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac}),t})(),gt=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Fb)({factory:function(){return Object(r.Sb)(mt)},token:t,providedIn:"root"}),t})(),mt=(()=>{class t extends gt{constructor(t){super(),this._doc=t}sanitize(t,e){if(null==e)return null;switch(t){case r.H.NONE:return e;case r.H.HTML:return Object(r.cb)(e,"HTML")?Object(r.ub)(e):Object(r.ab)(this._doc,String(e));case r.H.STYLE:return Object(r.cb)(e,"Style")?Object(r.ub)(e):e;case r.H.SCRIPT:if(Object(r.cb)(e,"Script"))return Object(r.ub)(e);throw new Error("unsafe value used in a script context");case r.H.URL:return Object(r.mb)(e),Object(r.cb)(e,"URL")?Object(r.ub)(e):Object(r.bb)(String(e));case r.H.RESOURCE_URL:if(Object(r.cb)(e,"ResourceURL"))return Object(r.ub)(e);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(t){return Object(r.db)(t)}bypassSecurityTrustStyle(t){return Object(r.gb)(t)}bypassSecurityTrustScript(t){return Object(r.fb)(t)}bypassSecurityTrustUrl(t){return Object(r.hb)(t)}bypassSecurityTrustResourceUrl(t){return Object(r.eb)(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(a))},t.\u0275prov=Object(r.Fb)({factory:function(){return t=Object(r.Sb)(r.o),new mt(t.get(a));var t},token:t,providedIn:"root"}),t})();const yt=[{provide:r.B,useValue:"browser"},{provide:r.C,useValue:function(){z.makeCurrent(),$.init()},multi:!0},{provide:a,useFactory:function(){return Object(r.sb)(document),document},deps:[]}],vt=Object(r.R)(r.V,"browser",yt),bt=[[],{provide:r.Y,useValue:"root"},{provide:r.m,useFactory:function(){return new r.m},deps:[]},{provide:Y,useClass:ct,multi:!0,deps:[a,r.z,r.B]},{provide:Y,useClass:pt,multi:!0,deps:[a]},[],{provide:ot,useClass:ot,deps:[J,tt,r.c]},{provide:r.E,useExisting:ot},{provide:Z,useExisting:tt},{provide:tt,useClass:tt,deps:[a]},{provide:r.L,useClass:r.L,deps:[r.z]},{provide:J,useClass:J,deps:[Y,r.z]},[]];let _t=(()=>{class t{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:t,providers:[{provide:r.c,useValue:e.appId},{provide:Q,useExisting:r.c},G]}}}return t.\u0275mod=r.Hb({type:t}),t.\u0275inj=r.Gb({factory:function(e){return new(e||t)(r.Sb(t,12))},providers:bt,imports:[V,r.f]}),t})();"undefined"!=typeof window&&window;var wt=n("Cfvw"),Ot=n("LRne"),St=n("XNiG"),Ct=n("9ppp");class Et extends St.a{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return e&&!e.closed&&t.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new Ct.a;return this._value}next(t){super.next(this._value=t)}}var Tt=n("z+Ro"),It=n("DH7j"),xt=n("7o/Q");class kt extends xt.a{notifyNext(t,e,n,r,i){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}class Nt extends xt.a{constructor(t,e,n){super(),this.parent=t,this.outerValue=e,this.outerIndex=n,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var At=n("SeVD"),jt=n("HDdC");function Pt(t,e,n,r,i=new Nt(t,n,r)){if(!i.closed)return e instanceof jt.a?e.subscribe(i):Object(At.a)(e)(i)}var Rt=n("yCtX");const Dt={};class Lt{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new Mt(t,this.resultSelector))}}class Mt extends kt{constructor(t,e){super(t),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push(Dt),this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let n=0;n<e;n++)this.add(Pt(this,t[n],void 0,n))}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,e,n){const r=this.values,i=this.toRespond?r[n]===Dt?--this.toRespond:this.toRespond:0;r[n]=e,0===i&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))}_tryResultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}const Ft=(()=>{function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t})();var Vt=n("bHdf");function Ut(...t){return Object(Vt.a)(1)(Object(Ot.a)(...t))}var qt=n("EY2u");function Bt(t){return new jt.a(e=>{let n;try{n=t()}catch(r){return void e.error(r)}return(n?Object(wt.a)(n):Object(qt.b)()).subscribe(e)})}var Ht=n("lJxs"),zt=n("zx2A");function Kt(t,e){return"function"==typeof e?n=>n.pipe(Kt((n,r)=>Object(wt.a)(t(n,r)).pipe(Object(Ht.a)((t,i)=>e(n,t,r,i))))):e=>e.lift(new Wt(t))}class Wt{constructor(t){this.project=t}call(t,e){return e.subscribe(new Qt(t,this.project))}}class Qt extends zt.b{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this._innerSub(e)}_innerSub(t){const e=this.innerSubscription;e&&e.unsubscribe();const n=new zt.a(this),r=this.destination;r.add(n),this.innerSubscription=Object(zt.c)(t,n),this.innerSubscription!==n&&r.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;t&&!t.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(t){this.destination.next(t)}}const Gt=(()=>{function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t})();function $t(t){return e=>0===t?Object(qt.b)():e.lift(new Yt(t))}class Yt{constructor(t){if(this.total=t,this.total<0)throw new Gt}call(t,e){return e.subscribe(new Jt(t,this.total))}}class Jt extends xt.a{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}function Xt(...t){const e=t[t.length-1];return Object(Tt.a)(e)?(t.pop(),n=>Ut(t,n,e)):e=>Ut(t,e)}function Zt(t,e){let n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new te(t,e,n))}}class te{constructor(t,e,n=!1){this.accumulator=t,this.seed=e,this.hasSeed=n}call(t,e){return e.subscribe(new ee(t,this.accumulator,this.seed,this.hasSeed))}}class ee extends xt.a{constructor(t,e,n,r){super(t),this.accumulator=e,this._seed=n,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let n;try{n=this.accumulator(this.seed,t,e)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)}}function ne(t,e){return function(n){return n.lift(new re(t,e))}}class re{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new ie(t,this.predicate,this.thisArg))}}class ie extends xt.a{constructor(t,e,n){super(t),this.predicate=e,this.thisArg=n,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}function oe(t){return function(e){const n=new se(t),r=e.lift(n);return n.caught=r}}class se{constructor(t){this.selector=t}call(t,e){return e.subscribe(new ae(t,this.selector,this.caught))}}class ae extends zt.b{constructor(t,e,n){super(t),this.selector=e,this.caught=n}error(t){if(!this.isStopped){let n;try{n=this.selector(t,this.caught)}catch(e){return void super.error(e)}this._unsubscribeAndRecycle();const r=new zt.a(this);this.add(r);const i=Object(zt.c)(n,r);i!==r&&this.add(i)}}}var ue=n("5+tZ");function ce(t,e){return Object(ue.a)(t,e,1)}function le(t){return function(e){return 0===t?Object(qt.b)():e.lift(new he(t))}}class he{constructor(t){if(this.total=t,this.total<0)throw new Gt}call(t,e){return e.subscribe(new de(t,this.total))}}class de extends xt.a{constructor(t,e){super(t),this.total=e,this.ring=new Array,this.count=0}_next(t){const e=this.ring,n=this.total,r=this.count++;e.length<n?e.push(t):e[r%n]=t}_complete(){const t=this.destination;let e=this.count;if(e>0){const n=this.count>=this.total?this.total:this.count,r=this.ring;for(let i=0;i<n;i++){const i=e++%n;t.next(r[i])}}t.complete()}}function fe(t=me){return e=>e.lift(new pe(t))}class pe{constructor(t){this.errorFactory=t}call(t,e){return e.subscribe(new ge(t,this.errorFactory))}}class ge extends xt.a{constructor(t,e){super(t),this.errorFactory=e,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let t;try{t=this.errorFactory()}catch(Y_){t=Y_}this.destination.error(t)}}}function me(){return new Ft}function ye(t=null){return e=>e.lift(new ve(t))}class ve{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new be(t,this.defaultValue))}}class be extends xt.a{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}var _e=n("SpAZ");function we(t,e){const n=arguments.length>=2;return r=>r.pipe(t?ne((e,n)=>t(e,n,r)):_e.a,$t(1),n?ye(e):fe(()=>new Ft))}var Oe=n("vkgz"),Se=n("quSY");class Ce{constructor(t){this.callback=t}call(t,e){return e.subscribe(new Ee(t,this.callback))}}class Ee extends xt.a{constructor(t,e){super(t),this.add(new Se.a(e))}}class Te{constructor(t,e){this.id=t,this.url=e}}class Ie extends Te{constructor(t,e,n="imperative",r=null){super(t,e),this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class xe extends Te{constructor(t,e,n){super(t,e),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class ke extends Te{constructor(t,e,n){super(t,e),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Ne extends Te{constructor(t,e,n){super(t,e),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Ae extends Te{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class je extends Te{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Pe extends Te{constructor(t,e,n,r,i){super(t,e),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Re extends Te{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class De extends Te{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Le{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Me{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Fe{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ve{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ue{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class qe{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Be{constructor(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const He="primary";class ze{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function Ke(t){return new ze(t)}function We(t){const e=Error("NavigationCancelingError: "+t);return e.ngNavigationCancelingError=!0,e}function Qe(t,e,n){const r=n.path.split("/");if(r.length>t.length)return null;if("full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let o=0;o<r.length;o++){const e=r[o],n=t[o];if(e.startsWith(":"))i[e.substring(1)]=n;else if(e!==n.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function Ge(t,e){const n=Object.keys(t),r=Object.keys(e);if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!$e(t[i],e[i]))return!1;return!0}function $e(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((t,e)=>r[e]===t)}return t===e}function Ye(t){return Array.prototype.concat.apply([],t)}function Je(t){return t.length>0?t[t.length-1]:null}function Xe(t,e){for(const n in t)t.hasOwnProperty(n)&&e(t[n],n)}function Ze(t){return Object(r.pb)(t)?t:Object(r.qb)(t)?Object(wt.a)(Promise.resolve(t)):Object(Ot.a)(t)}function tn(t,e,n){return n?function(t,e){return Ge(t,e)}(t.queryParams,e.queryParams)&&en(t.root,e.root):function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>$e(t[n],e[n]))}(t.queryParams,e.queryParams)&&nn(t.root,e.root)}function en(t,e){if(!un(t.segments,e.segments))return!1;if(t.numberOfChildren!==e.numberOfChildren)return!1;for(const n in e.children){if(!t.children[n])return!1;if(!en(t.children[n],e.children[n]))return!1}return!0}function nn(t,e){return rn(t,e,e.segments)}function rn(t,e,n){if(t.segments.length>n.length)return!!un(t.segments.slice(0,n.length),n)&&!e.hasChildren();if(t.segments.length===n.length){if(!un(t.segments,n))return!1;for(const n in e.children){if(!t.children[n])return!1;if(!nn(t.children[n],e.children[n]))return!1}return!0}{const r=n.slice(0,t.segments.length),i=n.slice(t.segments.length);return!!un(t.segments,r)&&!!t.children.primary&&rn(t.children.primary,e,i)}}class on{constructor(t,e,n){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ke(this.queryParams)),this._queryParamMap}toString(){return hn.serialize(this)}}class sn{constructor(t,e){this.segments=t,this.children=e,this.parent=null,Xe(e,(t,e)=>t.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return dn(this)}}class an{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=Ke(this.parameters)),this._parameterMap}toString(){return bn(this)}}function un(t,e){return t.length===e.length&&t.every((t,n)=>t.path===e[n].path)}class cn{}class ln{parse(t){const e=new Cn(t);return new on(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){return`${"/"+fn(t.root,!0)}${function(t){const e=Object.keys(t).map(e=>{const n=t[e];return Array.isArray(n)?n.map(t=>`${gn(e)}=${gn(t)}`).join("&"):`${gn(e)}=${gn(n)}`});return e.length?"?"+e.join("&"):""}(t.queryParams)}${"string"==typeof t.fragment?"#"+encodeURI(t.fragment):""}`}}const hn=new ln;function dn(t){return t.segments.map(t=>bn(t)).join("/")}function fn(t,e){if(!t.hasChildren())return dn(t);if(e){const e=t.children.primary?fn(t.children.primary,!1):"",n=[];return Xe(t.children,(t,e)=>{e!==He&&n.push(`${e}:${fn(t,!1)}`)}),n.length>0?`${e}(${n.join("//")})`:e}{const e=function(t,e){let n=[];return Xe(t.children,(t,r)=>{r===He&&(n=n.concat(e(t,r)))}),Xe(t.children,(t,r)=>{r!==He&&(n=n.concat(e(t,r)))}),n}(t,(e,n)=>n===He?[fn(t.children.primary,!1)]:[`${n}:${fn(e,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children.primary?`${dn(t)}/${e[0]}`:`${dn(t)}/(${e.join("//")})`}}function pn(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function gn(t){return pn(t).replace(/%3B/gi,";")}function mn(t){return pn(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function yn(t){return decodeURIComponent(t)}function vn(t){return yn(t.replace(/\+/g,"%20"))}function bn(t){return`${mn(t.path)}${e=t.parameters,Object.keys(e).map(t=>`;${mn(t)}=${mn(e[t])}`).join("")}`;var e}const _n=/^[^\/()?;=#]+/;function wn(t){const e=t.match(_n);return e?e[0]:""}const On=/^[^=?&#]+/,Sn=/^[^?&#]+/;class Cn{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new sn([],{}):new sn([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n.primary=new sn(t,e)),n}parseSegment(){const t=wn(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new an(yn(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=wn(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=wn(this.remaining);t&&(n=t,this.capture(n))}t[yn(e)]=yn(n)}parseQueryParam(t){const e=function(t){const e=t.match(On);return e?e[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=function(t){const e=t.match(Sn);return e?e[0]:""}(this.remaining);t&&(n=t,this.capture(n))}const r=vn(e),i=vn(n);if(t.hasOwnProperty(r)){let e=t[r];Array.isArray(e)||(e=[e],t[r]=e),e.push(i)}else t[r]=i}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=wn(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let i=void 0;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):t&&(i=He);const o=this.parseChildren();e[i]=1===Object.keys(o).length?o.primary:new sn([],o),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class En{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=Tn(t,this._root);return e?e.children.map(t=>t.value):[]}firstChild(t){const e=Tn(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=In(t,this._root);return e.length<2?[]:e[e.length-2].children.map(t=>t.value).filter(e=>e!==t)}pathFromRoot(t){return In(t,this._root).map(t=>t.value)}}function Tn(t,e){if(t===e.value)return e;for(const n of e.children){const e=Tn(t,n);if(e)return e}return null}function In(t,e){if(t===e.value)return[e];for(const n of e.children){const r=In(t,n);if(r.length)return r.unshift(e),r}return[]}class xn{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function kn(t){const e={};return t&&t.children.forEach(t=>e[t.value.outlet]=t),e}class Nn extends En{constructor(t,e){super(t),this.snapshot=e,Ln(this,t)}toString(){return this.snapshot.toString()}}function An(t,e){const n=function(t,e){const n=new Rn([],{},{},"",{},He,e,null,t.root,-1,{});return new Dn("",new xn(n,[]))}(t,e),r=new Et([new an("",{})]),i=new Et({}),o=new Et({}),s=new Et({}),a=new Et(""),u=new jn(r,i,s,a,o,He,e,n.root);return u.snapshot=n.root,new Nn(new xn(u,[]),n)}class jn{constructor(t,e,n,r,i,o,s,a){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this._futureSnapshot=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Object(Ht.a)(t=>Ke(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Object(Ht.a)(t=>Ke(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Pn(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const t=n[r],e=n[r-1];if(t.routeConfig&&""===t.routeConfig.path)r--;else{if(e.component)break;r--}}return function(t){return t.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(r))}class Rn{constructor(t,e,n,r,i,o,s,a,u,c,l){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this.routeConfig=a,this._urlSegment=u,this._lastPathIndex=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Ke(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ke(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(t=>t.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Dn extends En{constructor(t,e){super(e),this.url=t,Ln(this,e)}toString(){return Mn(this._root)}}function Ln(t,e){e.value._routerState=t,e.children.forEach(e=>Ln(t,e))}function Mn(t){const e=t.children.length>0?` { ${t.children.map(Mn).join(", ")} } `:"";return`${t.value}${e}`}function Fn(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Ge(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),Ge(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Ge(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),Ge(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function Vn(t,e){return Ge(t.params,e.params)&&function(t,e){return un(t,e)&&t.every((t,n)=>Ge(t.parameters,e[n].parameters))}(t.url,e.url)&&!(!t.parent!=!e.parent)&&(!t.parent||Vn(t.parent,e.parent))}function Un(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=e.value;const i=function(t,e,n){return e.children.map(e=>{for(const r of n.children)if(t.shouldReuseRoute(e.value,r.value.snapshot))return Un(t,e,r);return Un(t,e)})}(t,e,n);return new xn(r,i)}{const n=t.retrieve(e.value);if(n){const t=n.route;return qn(e,t),t}{const n=new jn(new Et((r=e.value).url),new Et(r.params),new Et(r.queryParams),new Et(r.fragment),new Et(r.data),r.outlet,r.component,r),i=e.children.map(e=>Un(t,e));return new xn(n,i)}}var r}function qn(t,e){if(t.value.routeConfig!==e.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(t.children.length!==e.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");e.value._futureSnapshot=t.value;for(let n=0;n<t.children.length;++n)qn(t.children[n],e.children[n])}function Bn(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function Hn(t){return"object"==typeof t&&null!=t&&t.outlets}function zn(t,e,n,r,i){let o={};return r&&Xe(r,(t,e)=>{o[e]=Array.isArray(t)?t.map(t=>""+t):""+t}),new on(n.root===t?e:Kn(n.root,t,e),o,i)}function Kn(t,e,n){const r={};return Xe(t.children,(t,i)=>{r[i]=t===e?n:Kn(t,e,n)}),new sn(t.segments,r)}class Wn{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&Bn(n[0]))throw new Error("Root segment cannot have matrix parameters");const r=n.find(Hn);if(r&&r!==Je(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Qn{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}}function Gn(t,e,n){if(t||(t=new sn([],{})),0===t.segments.length&&t.hasChildren())return $n(t,e,n);const r=function(t,e,n){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;const e=t.segments[i],s=n[r];if(Hn(s))break;const a=""+s,u=r<n.length-1?n[r+1]:null;if(i>0&&void 0===a)break;if(a&&u&&"object"==typeof u&&void 0===u.outlets){if(!Zn(a,u,e))return o;r+=2}else{if(!Zn(a,{},e))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const e=new sn(t.segments.slice(0,r.pathIndex),{});return e.children.primary=new sn(t.segments.slice(r.pathIndex),t.children),$n(e,0,i)}return r.match&&0===i.length?new sn(t.segments,{}):r.match&&!t.hasChildren()?Yn(t,e,n):r.match?$n(t,0,i):Yn(t,e,n)}function $n(t,e,n){if(0===n.length)return new sn(t.segments,{});{const r=function(t){return Hn(t[0])?t[0].outlets:{[He]:t}}(n),i={};return Xe(r,(n,r)=>{"string"==typeof n&&(n=[n]),null!==n&&(i[r]=Gn(t.children[r],e,n))}),Xe(t.children,(t,e)=>{void 0===r[e]&&(i[e]=t)}),new sn(t.segments,i)}}function Yn(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){const o=n[i];if(Hn(o)){const t=Jn(o.outlets);return new sn(r,t)}if(0===i&&Bn(n[0])){r.push(new an(t.segments[e].path,n[0])),i++;continue}const s=Hn(o)?o.outlets.primary:""+o,a=i<n.length-1?n[i+1]:null;s&&a&&Bn(a)?(r.push(new an(s,Xn(a))),i+=2):(r.push(new an(s,{})),i++)}return new sn(r,{})}function Jn(t){const e={};return Xe(t,(t,n)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[n]=Yn(new sn([],{}),0,t))}),e}function Xn(t){const e={};return Xe(t,(t,n)=>e[n]=""+t),e}function Zn(t,e,n){return t==n.path&&Ge(e,n.parameters)}class tr{constructor(t,e,n,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=r}activate(t){const e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),Fn(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){const r=kn(e);t.children.forEach(t=>{const e=t.value.outlet;this.deactivateRoutes(t,r[e],n),delete r[e]}),Xe(r,(t,e)=>{this.deactivateRouteAndItsChildren(t,n)})}deactivateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(r===i)if(r.component){const i=n.getContext(r.outlet);i&&this.deactivateChildRoutes(t,e,i.children)}else this.deactivateChildRoutes(t,e,n);else i&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const n=e.getContext(t.value.outlet);if(n&&n.outlet){const e=n.outlet.detach(),r=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:e,route:t,contexts:r})}}deactivateRouteAndOutlet(t,e){const n=e.getContext(t.value.outlet),r=n&&t.value.component?n.children:e,i=kn(t);for(const o of Object.keys(i))this.deactivateRouteAndItsChildren(i[o],r);n&&n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated())}activateChildRoutes(t,e,n){const r=kn(e);t.children.forEach(t=>{this.activateRoutes(t,r[t.value.outlet],n),this.forwardEvent(new qe(t.value.snapshot))}),t.children.length&&this.forwardEvent(new Ve(t.value.snapshot))}activateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(Fn(r),r===i)if(r.component){const i=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,i.children)}else this.activateChildRoutes(t,e,n);else if(r.component){const e=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const t=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),e.children.onOutletReAttached(t.contexts),e.attachRef=t.componentRef,e.route=t.route.value,e.outlet&&e.outlet.attach(t.componentRef,t.route.value),er(t.route)}else{const n=function(t){for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(r.snapshot),i=n?n.module.componentFactoryResolver:null;e.attachRef=null,e.route=r,e.resolver=i,e.outlet&&e.outlet.activateWith(r,i),this.activateChildRoutes(t,null,e.children)}}else this.activateChildRoutes(t,null,n)}}function er(t){Fn(t.value),t.children.forEach(er)}class nr{constructor(t,e){this.routes=t,this.module=e}}function rr(t){return"function"==typeof t}function ir(t){return t instanceof on}const or=Symbol("INITIAL_VALUE");function sr(){return Kt(t=>function(...t){let e=void 0,n=void 0;return Object(Tt.a)(t[t.length-1])&&(n=t.pop()),"function"==typeof t[t.length-1]&&(e=t.pop()),1===t.length&&Object(It.a)(t[0])&&(t=t[0]),Object(Rt.a)(t,n).lift(new Lt(e))}(t.map(t=>t.pipe($t(1),Xt(or)))).pipe(Zt((t,e)=>{let n=!1;return e.reduce((t,r,i)=>{if(t!==or)return t;if(r===or&&(n=!0),!n){if(!1===r)return r;if(i===e.length-1||ir(r))return r}return t},t)},or),ne(t=>t!==or),Object(Ht.a)(t=>ir(t)?t:!0===t),$t(1)))}let ar=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Db({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,e){1&t&&r.Kb(0,"router-outlet")},directives:function(){return[ni]},encapsulation:2}),t})();function ur(t,e=""){for(let n=0;n<t.length;n++){const r=t[n];cr(r,lr(e,r))}}function cr(t,e){t.children&&ur(t.children,e)}function lr(t,e){return e?t||e.path?t&&!e.path?t+"/":!t&&e.path?e.path:`${t}/${e.path}`:"":t}function hr(t){const e=t.children&&t.children.map(hr),n=e?Object.assign(Object.assign({},t),{children:e}):Object.assign({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&n.outlet!==He&&(n.component=ar),n}function dr(t){return t.outlet||He}function fr(t,e){const n=t.filter(t=>dr(t)===e);return n.push(...t.filter(t=>dr(t)!==e)),n}const pr={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function gr(t,e,n){var r;if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?Object.assign({},pr):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const i=(e.matcher||Qe)(n,t,e);if(!i)return Object.assign({},pr);const o={};Xe(i.posParams,(t,e)=>{o[e]=t.path});const s=i.consumed.length>0?Object.assign(Object.assign({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,lastChild:i.consumed.length,parameters:s,positionalParamSegments:null!==(r=i.posParams)&&void 0!==r?r:{}}}function mr(t,e,n,r,i="corrected"){if(n.length>0&&function(t,e,n){return n.some(n=>yr(t,e,n)&&dr(n)!==He)}(t,n,r)){const i=new sn(e,function(t,e,n,r){const i={};i.primary=r,r._sourceSegment=t,r._segmentIndexShift=e.length;for(const o of n)if(""===o.path&&dr(o)!==He){const n=new sn([],{});n._sourceSegment=t,n._segmentIndexShift=e.length,i[dr(o)]=n}return i}(t,e,r,new sn(n,t.children)));return i._sourceSegment=t,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return n.some(n=>yr(t,e,n))}(t,n,r)){const o=new sn(t.segments,function(t,e,n,r,i,o){const s={};for(const a of r)if(yr(t,n,a)&&!i[dr(a)]){const n=new sn([],{});n._sourceSegment=t,n._segmentIndexShift="legacy"===o?t.segments.length:e.length,s[dr(a)]=n}return Object.assign(Object.assign({},i),s)}(t,e,n,r,t.children,i));return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}const o=new sn(t.segments,t.children);return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}function yr(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}function vr(t,e,n,r){return!!(dr(t)===r||r!==He&&yr(e,n,t))&&("**"===t.path||gr(e,t,n).matched)}function br(t,e,n){return 0===e.length&&!t.children[n]}class _r{constructor(t){this.segmentGroup=t||null}}class wr{constructor(t){this.urlTree=t}}function Or(t){return new jt.a(e=>e.error(new _r(t)))}function Sr(t){return new jt.a(e=>e.error(new wr(t)))}function Cr(t){return new jt.a(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t}'`)))}class Er{constructor(t,e,n,i,o){this.configLoader=e,this.urlSerializer=n,this.urlTree=i,this.config=o,this.allowRedirects=!0,this.ngModule=t.get(r.x)}apply(){const t=mr(this.urlTree.root,[],[],this.config).segmentGroup,e=new sn(t.segments,t.children);return this.expandSegmentGroup(this.ngModule,this.config,e,He).pipe(Object(Ht.a)(t=>this.createUrlTree(Tr(t),this.urlTree.queryParams,this.urlTree.fragment))).pipe(oe(t=>{if(t instanceof wr)return this.allowRedirects=!1,this.match(t.urlTree);if(t instanceof _r)throw this.noMatchError(t);throw t}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,He).pipe(Object(Ht.a)(e=>this.createUrlTree(Tr(e),t.queryParams,t.fragment))).pipe(oe(t=>{if(t instanceof _r)throw this.noMatchError(t);throw t}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,n){const r=t.segments.length>0?new sn([],{[He]:t}):t;return new on(r,e,n)}expandSegmentGroup(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe(Object(Ht.a)(t=>new sn([],t))):this.expandSegment(t,n,e,n.segments,r,!0)}expandChildren(t,e,n){const r=[];for(const i of Object.keys(n.children))"primary"===i?r.unshift(i):r.push(i);return Object(wt.a)(r).pipe(ce(r=>{const i=n.children[r],o=fr(e,r);return this.expandSegmentGroup(t,o,i,r).pipe(Object(Ht.a)(t=>({segment:t,outlet:r})))}),Zt((t,e)=>(t[e.outlet]=e.segment,t),{}),function(t,e){const n=arguments.length>=2;return r=>r.pipe(t?ne((e,n)=>t(e,n,r)):_e.a,le(1),n?ye(e):fe(()=>new Ft))}())}expandSegment(t,e,n,r,i,o){return Object(wt.a)(n).pipe(ce(s=>this.expandSegmentAgainstRoute(t,e,n,s,r,i,o).pipe(oe(t=>{if(t instanceof _r)return Object(Ot.a)(null);throw t}))),we(t=>!!t),oe((t,n)=>{if(t instanceof Ft||"EmptyError"===t.name){if(br(e,r,i))return Object(Ot.a)(new sn([],{}));throw new _r(e)}throw t}))}expandSegmentAgainstRoute(t,e,n,r,i,o,s){return vr(r,e,i,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,i,o):s&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o):Or(e):Or(e)}expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,n,r){const i=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?Sr(i):this.lineralizeSegments(n,i).pipe(Object(ue.a)(n=>{const i=new sn(n,{});return this.expandSegment(t,i,e,n,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){const{matched:s,consumedSegments:a,lastChild:u,positionalParamSegments:c}=gr(e,r,i);if(!s)return Or(e);const l=this.applyRedirectCommands(a,r.redirectTo,c);return r.redirectTo.startsWith("/")?Sr(l):this.lineralizeSegments(r,l).pipe(Object(ue.a)(r=>this.expandSegment(t,e,n,r.concat(i.slice(u)),o,!1)))}matchSegmentAgainstRoute(t,e,n,r,i){if("**"===n.path)return n.loadChildren?this.configLoader.load(t.injector,n).pipe(Object(Ht.a)(t=>(n._loadedConfig=t,new sn(r,{})))):Object(Ot.a)(new sn(r,{}));const{matched:o,consumedSegments:s,lastChild:a}=gr(e,n,r);if(!o)return Or(e);const u=r.slice(a);return this.getChildConfig(t,n,r).pipe(Object(ue.a)(t=>{const r=t.module,o=t.routes,{segmentGroup:a,slicedSegments:c}=mr(e,s,u,o),l=new sn(a.segments,a.children);if(0===c.length&&l.hasChildren())return this.expandChildren(r,o,l).pipe(Object(Ht.a)(t=>new sn(s,t)));if(0===o.length&&0===c.length)return Object(Ot.a)(new sn(s,{}));const h=dr(n)===i;return this.expandSegment(r,l,o,c,h?He:i,!0).pipe(Object(Ht.a)(t=>new sn(s.concat(t.segments),t.children)))}))}getChildConfig(t,e,n){return e.children?Object(Ot.a)(new nr(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?Object(Ot.a)(e._loadedConfig):this.runCanLoadGuards(t.injector,e,n).pipe(Object(ue.a)(n=>n?this.configLoader.load(t.injector,e).pipe(Object(Ht.a)(t=>(e._loadedConfig=t,t))):function(t){return new jt.a(e=>e.error(We(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`)))}(e))):Object(Ot.a)(new nr([],t))}runCanLoadGuards(t,e,n){const r=e.canLoad;if(!r||0===r.length)return Object(Ot.a)(!0);const i=r.map(r=>{const i=t.get(r);let o;if(function(t){return t&&rr(t.canLoad)}(i))o=i.canLoad(e,n);else{if(!rr(i))throw new Error("Invalid CanLoad guard");o=i(e,n)}return Ze(o)});return Object(Ot.a)(i).pipe(sr(),Object(Oe.a)(t=>{if(!ir(t))return;const e=We(`Redirecting to "${this.urlSerializer.serialize(t)}"`);throw e.url=t,e}),Object(Ht.a)(t=>!0===t))}lineralizeSegments(t,e){let n=[],r=e.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return Object(Ot.a)(n);if(r.numberOfChildren>1||!r.children.primary)return Cr(t.redirectTo);r=r.children.primary}}applyRedirectCommands(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)}applyRedirectCreatreUrlTree(t,e,n,r){const i=this.createSegmentGroup(t,e.root,n,r);return new on(i,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const n={};return Xe(t,(t,r)=>{if("string"==typeof t&&t.startsWith(":")){const i=t.substring(1);n[r]=e[i]}else n[r]=t}),n}createSegmentGroup(t,e,n,r){const i=this.createSegments(t,e.segments,n,r);let o={};return Xe(e.children,(e,i)=>{o[i]=this.createSegmentGroup(t,e,n,r)}),new sn(i,o)}createSegments(t,e,n,r){return e.map(e=>e.path.startsWith(":")?this.findPosParam(t,e,r):this.findOrReturn(e,n))}findPosParam(t,e,n){const r=n[e.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return r}findOrReturn(t,e){let n=0;for(const r of e){if(r.path===t.path)return e.splice(n),r;n++}return t}}function Tr(t){const e={};for(const n of Object.keys(t.children)){const r=Tr(t.children[n]);(r.segments.length>0||r.hasChildren())&&(e[n]=r)}return function(t){if(1===t.numberOfChildren&&t.children.primary){const e=t.children.primary;return new sn(t.segments.concat(e.segments),e.children)}return t}(new sn(t.segments,e))}class Ir{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class xr{constructor(t,e){this.component=t,this.route=e}}function kr(t,e,n){const r=t._root;return Ar(r,e?e._root:null,n,[r.value])}function Nr(t,e,n){const r=function(t){if(!t)return null;for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:n).get(t)}function Ar(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=kn(e);return t.children.forEach(t=>{!function(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){const u=function(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!un(t.url,e.url);case"pathParamsOrQueryParamsChange":return!un(t.url,e.url)||!Ge(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Vn(t,e)||!Ge(t.queryParams,e.queryParams);case"paramsChange":default:return!Vn(t,e)}}(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new Ir(r)):(o.data=s.data,o._resolvedData=s._resolvedData),Ar(t,e,o.component?a?a.children:null:n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new xr(a.outlet.component,s))}else s&&jr(e,a,i),i.canActivateChecks.push(new Ir(r)),Ar(t,null,o.component?a?a.children:null:n,r,i)}(t,o[t.value.outlet],n,r.concat([t.value]),i),delete o[t.value.outlet]}),Xe(o,(t,e)=>jr(t,n.getContext(e),i)),i}function jr(t,e,n){const r=kn(t),i=t.value;Xe(r,(t,r)=>{jr(t,i.component?e?e.children.getContext(r):null:e,n)}),n.canDeactivateChecks.push(new xr(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class Pr{}function Rr(t){return new jt.a(e=>e.error(t))}class Dr{constructor(t,e,n,r,i,o){this.rootComponentType=t,this.config=e,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=i,this.relativeLinkResolution=o}recognize(){const t=mr(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,He);if(null===e)return null;const n=new Rn([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},He,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new xn(n,e),i=new Dn(this.url,r);return this.inheritParamsAndData(i._root),i}inheritParamsAndData(t){const e=t.value,n=Pn(e,this.paramsInheritanceStrategy);e.params=Object.freeze(n.params),e.data=Object.freeze(n.data),t.children.forEach(t=>this.inheritParamsAndData(t))}processSegmentGroup(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)}processChildren(t,e){const n=[];for(const i of Object.keys(e.children)){const r=e.children[i],o=fr(t,i),s=this.processSegmentGroup(o,r,i);if(null===s)return null;n.push(...s)}const r=function(t){const e=[];for(const n of t){if(!Lr(n)){e.push(n);continue}const t=e.find(t=>n.value.routeConfig===t.value.routeConfig);void 0!==t?t.children.push(...n.children):e.push(n)}return e}(n);return r.sort((t,e)=>t.value.outlet===He?-1:e.value.outlet===He?1:t.value.outlet.localeCompare(e.value.outlet)),r}processSegment(t,e,n,r){for(const i of t){const t=this.processSegmentAgainstRoute(i,e,n,r);if(null!==t)return t}return br(e,n,r)?[]:null}processSegmentAgainstRoute(t,e,n,r){if(t.redirectTo||!vr(t,e,n,r))return null;let i,o=[],s=[];if("**"===t.path){const r=n.length>0?Je(n).parameters:{};i=new Rn(n,r,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Vr(t),dr(t),t.component,t,Mr(e),Fr(e)+n.length,Ur(t))}else{const r=gr(e,t,n);if(!r.matched)return null;o=r.consumedSegments,s=n.slice(r.lastChild),i=new Rn(o,r.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Vr(t),dr(t),t.component,t,Mr(e),Fr(e)+o.length,Ur(t))}const a=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),{segmentGroup:u,slicedSegments:c}=mr(e,o,s,a.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution);if(0===c.length&&u.hasChildren()){const t=this.processChildren(a,u);return null===t?null:[new xn(i,t)]}if(0===a.length&&0===c.length)return[new xn(i,[])];const l=dr(t)===r,h=this.processSegment(a,u,c,l?He:r);return null===h?null:[new xn(i,h)]}}function Lr(t){const e=t.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Mr(t){let e=t;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Fr(t){let e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,n+=e._segmentIndexShift?e._segmentIndexShift:0;return n-1}function Vr(t){return t.data||{}}function Ur(t){return t.resolve||{}}function qr(t){return Kt(e=>{const n=t(e);return n?Object(wt.a)(n).pipe(Object(Ht.a)(()=>e)):Object(Ot.a)(e)})}class Br extends class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const Hr=new r.q("ROUTES");class zr{constructor(t,e,n,r){this.loader=t,this.compiler=e,this.onLoadStartListener=n,this.onLoadEndListener=r}load(t,e){return this.onLoadStartListener&&this.onLoadStartListener(e),this.loadModuleFactory(e.loadChildren).pipe(Object(Ht.a)(n=>{this.onLoadEndListener&&this.onLoadEndListener(e);const r=n.create(t);return new nr(Ye(r.injector.get(Hr)).map(hr),r)}))}loadModuleFactory(t){return"string"==typeof t?Object(wt.a)(this.loader.load(t)):Ze(t()).pipe(Object(ue.a)(t=>t instanceof r.v?Object(Ot.a)(t):Object(wt.a)(this.compiler.compileModuleAsync(t))))}}class Kr{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Wr,this.attachRef=null}}class Wr{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new Kr,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}class Qr{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function Gr(t){throw t}function $r(t,e,n){return e.parse("/")}function Yr(t,e){return Object(Ot.a)(null)}let Jr=(()=>{class t{constructor(t,e,n,i,o,s,a,u){this.rootComponentType=t,this.urlSerializer=e,this.rootContexts=n,this.location=i,this.config=u,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.lastLocationChangeInfo=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new St.a,this.errorHandler=Gr,this.malformedUriErrorHandler=$r,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Yr,afterPreactivation:Yr},this.urlHandlingStrategy=new Qr,this.routeReuseStrategy=new Br,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.ngModule=o.get(r.x),this.console=o.get(r.X);const c=o.get(r.z);this.isNgZoneEnabled=c instanceof r.z&&r.z.isInAngularZone(),this.resetConfig(u),this.currentUrlTree=new on(new sn([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new zr(s,a,t=>this.triggerEvent(new Le(t)),t=>this.triggerEvent(new Me(t))),this.routerState=An(this.currentUrlTree,this.rootComponentType),this.transitions=new Et({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}setupNavigations(t){const e=this.events;return t.pipe(ne(t=>0!==t.id),Object(Ht.a)(t=>Object.assign(Object.assign({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl)})),Kt(t=>{let n=!1,r=!1;return Object(Ot.a)(t).pipe(Object(Oe.a)(t=>{this.currentNavigation={id:t.id,initialUrl:t.currentRawUrl,extractedUrl:t.extractedUrl,trigger:t.source,extras:t.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Kt(t=>{const n=!this.navigated||t.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||n)&&this.urlHandlingStrategy.shouldProcessUrl(t.rawUrl))return Object(Ot.a)(t).pipe(Kt(t=>{const n=this.transitions.getValue();return e.next(new Ie(t.id,this.serializeUrl(t.extractedUrl),t.source,t.restoredState)),n!==this.transitions.getValue()?qt.a:Promise.resolve(t)}),(r=this.ngModule.injector,i=this.configLoader,o=this.urlSerializer,s=this.config,Kt(t=>function(t,e,n,r,i){return new Er(t,e,n,r,i).apply()}(r,i,o,t.extractedUrl,s).pipe(Object(Ht.a)(e=>Object.assign(Object.assign({},t),{urlAfterRedirects:e}))))),Object(Oe.a)(t=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:t.urlAfterRedirects})}),function(t,e,n,r,i){return Object(ue.a)(o=>function(t,e,n,r,i="emptyOnly",o="legacy"){try{const s=new Dr(t,e,n,r,i,o).recognize();return null===s?Rr(new Pr):Object(Ot.a)(s)}catch(Y_){return Rr(Y_)}}(t,e,o.urlAfterRedirects,n(o.urlAfterRedirects),r,i).pipe(Object(Ht.a)(t=>Object.assign(Object.assign({},o),{targetSnapshot:t}))))}(this.rootComponentType,this.config,t=>this.serializeUrl(t),this.paramsInheritanceStrategy,this.relativeLinkResolution),Object(Oe.a)(t=>{"eager"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(t.urlAfterRedirects,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects);const n=new Ae(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.next(n)}));var r,i,o,s;if(n&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:r,source:i,restoredState:o,extras:s}=t,a=new Ie(n,this.serializeUrl(r),i,o);e.next(a);const u=An(r,this.rootComponentType).snapshot;return Object(Ot.a)(Object.assign(Object.assign({},t),{targetSnapshot:u,urlAfterRedirects:r,extras:Object.assign(Object.assign({},s),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=t.rawUrl,this.browserUrlTree=t.urlAfterRedirects,t.resolve(null),qt.a}),qr(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.beforePreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),Object(Oe.a)(t=>{const e=new je(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),Object(Ht.a)(t=>Object.assign(Object.assign({},t),{guards:kr(t.targetSnapshot,t.currentSnapshot,this.rootContexts)})),function(t,e){return Object(ue.a)(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return 0===s.length&&0===o.length?Object(Ot.a)(Object.assign(Object.assign({},n),{guardsResult:!0})):function(t,e,n,r){return Object(wt.a)(t).pipe(Object(ue.a)(t=>function(t,e,n,r,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||0===o.length)return Object(Ot.a)(!0);const s=o.map(o=>{const s=Nr(o,e,i);let a;if(function(t){return t&&rr(t.canDeactivate)}(s))a=Ze(s.canDeactivate(t,e,n,r));else{if(!rr(s))throw new Error("Invalid CanDeactivate guard");a=Ze(s(t,e,n,r))}return a.pipe(we())});return Object(Ot.a)(s).pipe(sr())}(t.component,t.route,n,e,r)),we(t=>!0!==t,!0))}(s,r,i,t).pipe(Object(ue.a)(n=>n&&"boolean"==typeof n?function(t,e,n,r){return Object(wt.a)(e).pipe(ce(e=>Ut(function(t,e){return null!==t&&e&&e(new Fe(t)),Object(Ot.a)(!0)}(e.route.parent,r),function(t,e){return null!==t&&e&&e(new Ue(t)),Object(Ot.a)(!0)}(e.route,r),function(t,e,n){const r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(t=>function(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(t)).filter(t=>null!==t).map(e=>Bt(()=>{const i=e.guards.map(i=>{const o=Nr(i,e.node,n);let s;if(function(t){return t&&rr(t.canActivateChild)}(o))s=Ze(o.canActivateChild(r,t));else{if(!rr(o))throw new Error("Invalid CanActivateChild guard");s=Ze(o(r,t))}return s.pipe(we())});return Object(Ot.a)(i).pipe(sr())}));return Object(Ot.a)(i).pipe(sr())}(t,e.path,n),function(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Object(Ot.a)(!0);const i=r.map(r=>Bt(()=>{const i=Nr(r,e,n);let o;if(function(t){return t&&rr(t.canActivate)}(i))o=Ze(i.canActivate(e,t));else{if(!rr(i))throw new Error("Invalid CanActivate guard");o=Ze(i(e,t))}return o.pipe(we())}));return Object(Ot.a)(i).pipe(sr())}(t,e.route,n))),we(t=>!0!==t,!0))}(r,o,t,e):Object(Ot.a)(n)),Object(Ht.a)(t=>Object.assign(Object.assign({},n),{guardsResult:t})))})}(this.ngModule.injector,t=>this.triggerEvent(t)),Object(Oe.a)(t=>{if(ir(t.guardsResult)){const e=We(`Redirecting to "${this.serializeUrl(t.guardsResult)}"`);throw e.url=t.guardsResult,e}const e=new Pe(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot,!!t.guardsResult);this.triggerEvent(e)}),ne(t=>{if(!t.guardsResult){this.resetUrlToCurrentUrlTree();const n=new ke(t.id,this.serializeUrl(t.extractedUrl),"");return e.next(n),t.resolve(!1),!1}return!0}),qr(t=>{if(t.guards.canActivateChecks.length)return Object(Ot.a)(t).pipe(Object(Oe.a)(t=>{const e=new Re(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),Kt(t=>{let n=!1;return Object(Ot.a)(t).pipe((r=this.paramsInheritanceStrategy,i=this.ngModule.injector,Object(ue.a)(t=>{const{targetSnapshot:e,guards:{canActivateChecks:n}}=t;if(!n.length)return Object(Ot.a)(t);let o=0;return Object(wt.a)(n).pipe(ce(t=>function(t,e,n,r){return function(t,e,n,r){const i=Object.keys(t);if(0===i.length)return Object(Ot.a)({});const o={};return Object(wt.a)(i).pipe(Object(ue.a)(i=>function(t,e,n,r){const i=Nr(t,e,r);return Ze(i.resolve?i.resolve(e,n):i(e,n))}(t[i],e,n,r).pipe(Object(Oe.a)(t=>{o[i]=t}))),le(1),Object(ue.a)(()=>Object.keys(o).length===i.length?Object(Ot.a)(o):qt.a))}(t._resolve,t,e,r).pipe(Object(Ht.a)(e=>(t._resolvedData=e,t.data=Object.assign(Object.assign({},t.data),Pn(t,n).resolve),null)))}(t.route,e,r,i)),Object(Oe.a)(()=>o++),le(1),Object(ue.a)(e=>o===n.length?Object(Ot.a)(t):qt.a))})),Object(Oe.a)({next:()=>n=!0,complete:()=>{if(!n){const n=new ke(t.id,this.serializeUrl(t.extractedUrl),"At least one route resolver didn't emit any value.");e.next(n),t.resolve(!1)}}}));var r,i}),Object(Oe.a)(t=>{const e=new De(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}))}),qr(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.afterPreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),Object(Ht.a)(t=>{const e=function(t,e,n){const r=Un(t,e._root,n?n._root:void 0);return new Nn(r,e)}(this.routeReuseStrategy,t.targetSnapshot,t.currentRouterState);return Object.assign(Object.assign({},t),{targetRouterState:e})}),Object(Oe.a)(t=>{this.currentUrlTree=t.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl),this.routerState=t.targetRouterState,"deferred"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects)}),(o=this.rootContexts,s=this.routeReuseStrategy,a=t=>this.triggerEvent(t),Object(Ht.a)(t=>(new tr(s,t.targetRouterState,t.currentRouterState,a).activate(o),t))),Object(Oe.a)({next(){n=!0},complete(){n=!0}}),(i=()=>{if(!n&&!r){this.resetUrlToCurrentUrlTree();const n=new ke(t.id,this.serializeUrl(t.extractedUrl),`Navigation ID ${t.id} is not equal to the current navigation id ${this.navigationId}`);e.next(n),t.resolve(!1)}this.currentNavigation=null},t=>t.lift(new Ce(i))),oe(n=>{if(r=!0,(i=n)&&i.ngNavigationCancelingError){const r=ir(n.url);r||(this.navigated=!0,this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl));const i=new ke(t.id,this.serializeUrl(t.extractedUrl),n.message);e.next(i),r?setTimeout(()=>{const e=this.urlHandlingStrategy.merge(n.url,this.rawUrlTree);this.scheduleNavigation(e,"imperative",null,{skipLocationChange:t.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy},{resolve:t.resolve,reject:t.reject,promise:t.promise})},0):t.resolve(!1)}else{this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl);const r=new Ne(t.id,this.serializeUrl(t.extractedUrl),n);e.next(r);try{t.resolve(this.errorHandler(n))}catch(Cd){t.reject(Cd)}}var i;return qt.a}));var i,o,s,a}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const e=this.extractLocationChangeInfoFromEvent(t);this.shouldScheduleNavigation(this.lastLocationChangeInfo,e)&&setTimeout(()=>{const{source:t,state:n,urlTree:r}=e,i={replaceUrl:!0};if(n){const t=Object.assign({},n);delete t.navigationId,0!==Object.keys(t).length&&(i.state=t)}this.scheduleNavigation(r,t,n,i)},0),this.lastLocationChangeInfo=e}))}extractLocationChangeInfoFromEvent(t){var e;return{source:"popstate"===t.type?"popstate":"hashchange",urlTree:this.parseUrl(t.url),state:(null===(e=t.state)||void 0===e?void 0:e.navigationId)?t.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(t,e){if(!t)return!0;const n=e.urlTree.toString()===t.urlTree.toString();return!(e.transitionId===t.transitionId&&n&&("hashchange"===e.source&&"popstate"===t.source||"popstate"===e.source&&"hashchange"===t.source))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){ur(t),this.config=t.map(hr),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0)}createUrlTree(t,e={}){const{relativeTo:n,queryParams:r,fragment:i,queryParamsHandling:o,preserveFragment:s}=e,a=n||this.routerState.root,u=s?this.currentUrlTree.fragment:i;let c=null;switch(o){case"merge":c=Object.assign(Object.assign({},this.currentUrlTree.queryParams),r);break;case"preserve":c=this.currentUrlTree.queryParams;break;default:c=r||null}return null!==c&&(c=this.removeEmptyProps(c)),function(t,e,n,r,i){if(0===n.length)return zn(e.root,e.root,e,r,i);const o=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new Wn(!0,0,t);let e=0,n=!1;const r=t.reduce((t,r,i)=>{if("object"==typeof r&&null!=r){if(r.outlets){const e={};return Xe(r.outlets,(t,n)=>{e[n]="string"==typeof t?t.split("/"):t}),[...t,{outlets:e}]}if(r.segmentPath)return[...t,r.segmentPath]}return"string"!=typeof r?[...t,r]:0===i?(r.split("/").forEach((r,i)=>{0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?e++:""!=r&&t.push(r))}),t):[...t,r]},[]);return new Wn(n,e,r)}(n);if(o.toRoot())return zn(e.root,new sn([],{}),e,r,i);const s=function(t,e,n){if(t.isAbsolute)return new Qn(e.root,!0,0);if(-1===n.snapshot._lastPathIndex){const t=n.snapshot._urlSegment;return new Qn(t,t===e.root,0)}const r=Bn(t.commands[0])?0:1;return function(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new Qn(r,!1,i-o)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,t.numberOfDoubleDots)}(o,e,t),a=s.processChildren?$n(s.segmentGroup,s.index,o.commands):Gn(s.segmentGroup,s.index,o.commands);return zn(s.segmentGroup,a,e,r,i)}(a,this.currentUrlTree,t,c,u)}navigateByUrl(t,e={skipLocationChange:!1}){const n=ir(t)?t:this.parseUrl(t),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",null,e)}navigate(t,e={skipLocationChange:!1}){return function(t){for(let e=0;e<t.length;e++){const n=t[e];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let e;try{e=this.urlSerializer.parse(t)}catch(Y_){e=this.malformedUriErrorHandler(Y_,this.urlSerializer,t)}return e}isActive(t,e){if(ir(t))return tn(this.currentUrlTree,t,e);const n=this.parseUrl(t);return tn(this.currentUrlTree,n,e)}removeEmptyProps(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return null!=r&&(e[n]=r),e},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.events.next(new xe(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.currentNavigation=null,t.resolve(!0)},t=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(t,e,n,r,i){const o=this.getTransition(),s="imperative"!==e&&"imperative"===(null==o?void 0:o.source),a=(this.lastSuccessfulId===o.id||this.currentNavigation?o.rawUrl:o.urlAfterRedirects).toString()===t.toString();if(s&&a)return Promise.resolve(!0);let u,c,l;i?(u=i.resolve,c=i.reject,l=i.promise):l=new Promise((t,e)=>{u=t,c=e});const h=++this.navigationId;return this.setTransition({id:h,source:e,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:r,resolve:u,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(t=>Promise.reject(t))}setBrowserUrl(t,e,n,r){const i=this.urlSerializer.serialize(t);r=r||{},this.location.isCurrentPathEqualTo(i)||e?this.location.replaceState(i,"",Object.assign(Object.assign({},r),{navigationId:n})):this.location.go(i,"",Object.assign(Object.assign({},r),{navigationId:n}))}resetStateAndUrl(t,e,n){this.routerState=t,this.currentUrlTree=e,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(r.M),r.Sb(cn),r.Sb(Wr),r.Sb(O),r.Sb(r.r),r.Sb(r.w),r.Sb(r.i),r.Sb(void 0))},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac}),t})(),Xr=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.route=e,this.commands=[],this.onChanges=new St.a,null==n&&r.setAttribute(i.nativeElement,"tabindex","0")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}onClick(){const t={skipLocationChange:ti(this.skipLocationChange),replaceUrl:ti(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:ti(this.preserveFragment)})}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(Jr),r.Jb(jn),r.Tb("tabindex"),r.Jb(r.D),r.Jb(r.l))},t.\u0275dir=r.Eb({type:t,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,e){1&t&&r.Vb("click",function(){return e.onClick()})},inputs:{routerLink:"routerLink",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state"},features:[r.wb]}),t})(),Zr=(()=>{class t{constructor(t,e,n){this.router=t,this.route=e,this.locationStrategy=n,this.commands=[],this.onChanges=new St.a,this.subscription=t.events.subscribe(t=>{t instanceof xe&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,e,n,r,i){if(0!==t||e||n||r||i)return!0;if("string"==typeof this.target&&"_self"!=this.target)return!0;const o={skipLocationChange:ti(this.skipLocationChange),replaceUrl:ti(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,o),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:ti(this.preserveFragment)})}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(Jr),r.Jb(jn),r.Jb(y))},t.\u0275dir=r.Eb({type:t,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,e){1&t&&r.Vb("click",function(t){return e.onClick(t.button,t.ctrlKey,t.shiftKey,t.altKey,t.metaKey)}),2&t&&(r.Rb("href",e.href,r.ic),r.zb("target",e.target))},inputs:{routerLink:"routerLink",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state"},features:[r.wb]}),t})();function ti(t){return""===t||!!t}let ei=(()=>{class t{constructor(t,e,n,r,i,o){this.router=t,this.element=e,this.renderer=n,this.cdr=r,this.link=i,this.linkWithHref=o,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.routerEventsSubscription=t.events.subscribe(t=>{t instanceof xe&&this.update()})}ngAfterContentInit(){Object(Ot.a)(this.links.changes,this.linksWithHrefs.changes,Object(Ot.a)(null)).pipe(Object(Vt.a)()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){var t;null===(t=this.linkInputChangesSubscription)||void 0===t||t.unsubscribe();const e=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(t=>!!t).map(t=>t.onChanges);this.linkInputChangesSubscription=Object(wt.a)(e).pipe(Object(Vt.a)()).subscribe(t=>{this.isActive!==this.isLinkActive(this.router)(t)&&this.update()})}set routerLinkActive(t){const e=Array.isArray(t)?t:t.split(" ");this.classes=e.filter(t=>!!t)}ngOnChanges(t){this.update()}ngOnDestroy(){var t;this.routerEventsSubscription.unsubscribe(),null===(t=this.linkInputChangesSubscription)||void 0===t||t.unsubscribe()}update(){this.links&&this.linksWithHrefs&&this.router.navigated&&Promise.resolve().then(()=>{const t=this.hasActiveLinks();this.isActive!==t&&(this.isActive=t,this.cdr.markForCheck(),this.classes.forEach(e=>{t?this.renderer.addClass(this.element.nativeElement,e):this.renderer.removeClass(this.element.nativeElement,e)}))})}isLinkActive(t){return e=>t.isActive(e.urlTree,this.routerLinkActiveOptions.exact)}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.linkWithHref&&t(this.linkWithHref)||this.links.some(t)||this.linksWithHrefs.some(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(Jr),r.Jb(r.l),r.Jb(r.D),r.Jb(r.h),r.Jb(Xr,8),r.Jb(Zr,8))},t.\u0275dir=r.Eb({type:t,selectors:[["","routerLinkActive",""]],contentQueries:function(t,e,n){if(1&t&&(r.Cb(n,Xr,!0),r.Cb(n,Zr,!0)),2&t){let t;r.ec(t=r.Wb())&&(e.links=t),r.ec(t=r.Wb())&&(e.linksWithHrefs=t)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",routerLinkActive:"routerLinkActive"},exportAs:["routerLinkActive"],features:[r.wb]}),t})(),ni=(()=>{class t{constructor(t,e,n,i,o){this.parentContexts=t,this.location=e,this.resolver=n,this.changeDetector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new r.n,this.deactivateEvents=new r.n,this.name=i||He,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const n=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new ri(t,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(Wr),r.Jb(r.P),r.Jb(r.j),r.Tb("name"),r.Jb(r.h))},t.\u0275dir=r.Eb({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),t})();class ri{constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===jn?this.route:t===Wr?this.childContexts:this.parent.get(t,e)}}class ii{}class oi{preload(t,e){return Object(Ot.a)(null)}}let si=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=new zr(e,n,e=>t.triggerEvent(new Le(e)),e=>t.triggerEvent(new Me(e)))}setUpPreloading(){this.subscription=this.router.events.pipe(ne(t=>t instanceof xe),ce(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(r.x);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,e){const n=[];for(const r of e)if(r.loadChildren&&!r.canLoad&&r._loadedConfig){const t=r._loadedConfig;n.push(this.processRoutes(t.module,t.routes))}else r.loadChildren&&!r.canLoad?n.push(this.preloadConfig(t,r)):r.children&&n.push(this.processRoutes(t,r.children));return Object(wt.a)(n).pipe(Object(Vt.a)(),Object(Ht.a)(t=>{}))}preloadConfig(t,e){return this.preloadingStrategy.preload(e,()=>this.loader.load(t.injector,e).pipe(Object(ue.a)(t=>(e._loadedConfig=t,this.processRoutes(t.module,t.routes)))))}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(Jr),r.Sb(r.w),r.Sb(r.i),r.Sb(r.r),r.Sb(ii))},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac}),t})(),ai=(()=>{class t{constructor(t,e,n={}){this.router=t,this.viewportScroller=e,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Ie?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof xe&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Be&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,e){this.router.triggerEvent(new Be(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,e))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(Jr),r.Sb(q),r.Sb(void 0))},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac}),t})();const ui=new r.q("ROUTER_CONFIGURATION"),ci=new r.q("ROUTER_FORROOT_GUARD"),li=[O,{provide:cn,useClass:ln},{provide:Jr,useFactory:function(t,e,n,r,i,o,a,u={},c,l){const h=new Jr(null,t,e,n,r,i,o,Ye(a));if(c&&(h.urlHandlingStrategy=c),l&&(h.routeReuseStrategy=l),function(t,e){t.errorHandler&&(e.errorHandler=t.errorHandler),t.malformedUriErrorHandler&&(e.malformedUriErrorHandler=t.malformedUriErrorHandler),t.onSameUrlNavigation&&(e.onSameUrlNavigation=t.onSameUrlNavigation),t.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=t.paramsInheritanceStrategy),t.relativeLinkResolution&&(e.relativeLinkResolution=t.relativeLinkResolution),t.urlUpdateStrategy&&(e.urlUpdateStrategy=t.urlUpdateStrategy)}(u,h),u.enableTracing){const t=s();h.events.subscribe(e=>{t.logGroup("Router Event: "+e.constructor.name),t.log(e.toString()),t.log(e),t.logGroupEnd()})}return h},deps:[cn,Wr,O,r.r,r.w,r.i,Hr,ui,[class{},new r.A],[class{},new r.A]]},Wr,{provide:jn,useFactory:function(t){return t.routerState.root},deps:[Jr]},{provide:r.w,useClass:r.J},si,oi,class{preload(t,e){return e().pipe(oe(()=>Object(Ot.a)(null)))}},{provide:ui,useValue:{enableTracing:!1}}];function hi(){return new r.y("Router",Jr)}let di=(()=>{class t{constructor(t,e){}static forRoot(e,n){return{ngModule:t,providers:[li,mi(e),{provide:ci,useFactory:gi,deps:[[Jr,new r.A,new r.I]]},{provide:ui,useValue:n||{}},{provide:y,useFactory:pi,deps:[u,[new r.p(b),new r.A],ui]},{provide:ai,useFactory:fi,deps:[Jr,q,ui]},{provide:ii,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:oi},{provide:r.y,multi:!0,useFactory:hi},[yi,{provide:r.d,multi:!0,useFactory:vi,deps:[yi]},{provide:_i,useFactory:bi,deps:[yi]},{provide:r.b,multi:!0,useExisting:_i}]]}}static forChild(e){return{ngModule:t,providers:[mi(e)]}}}return t.\u0275mod=r.Hb({type:t}),t.\u0275inj=r.Gb({factory:function(e){return new(e||t)(r.Sb(ci,8),r.Sb(Jr,8))}}),t})();function fi(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new ai(t,e,n)}function pi(t,e,n={}){return n.useHash?new w(t,e):new _(t,e)}function gi(t){return"guarded"}function mi(t){return[{provide:r.a,multi:!0,useValue:t},{provide:Hr,multi:!0,useValue:t}]}let yi=(()=>{class t{constructor(t){this.injector=t,this.initNavigation=!1,this.resultOfPreactivationDone=new St.a}appInitializer(){return this.injector.get(l,Promise.resolve(null)).then(()=>{let t=null;const e=new Promise(e=>t=e),n=this.injector.get(Jr),r=this.injector.get(ui);return"disabled"===r.initialNavigation?(n.setUpLocationChangeListener(),t(!0)):"enabled"===r.initialNavigation||"enabledBlocking"===r.initialNavigation?(n.hooks.afterPreactivation=()=>this.initNavigation?Object(Ot.a)(null):(this.initNavigation=!0,t(!0),this.resultOfPreactivationDone),n.initialNavigation()):t(!0),e})}bootstrapListener(t){const e=this.injector.get(ui),n=this.injector.get(si),i=this.injector.get(ai),o=this.injector.get(Jr),s=this.injector.get(r.g);t===s.components[0]&&("enabledNonBlocking"!==e.initialNavigation&&void 0!==e.initialNavigation||o.initialNavigation(),n.setUpPreloading(),i.init(),o.resetRootComponentType(s.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(r.r))},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac}),t})();function vi(t){return t.appInitializer.bind(t)}function bi(t){return t.bootstrapListener.bind(t)}const _i=new r.q("Router Initializer");let wi=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Db({type:t,selectors:[["app-user-list"]],decls:2,vars:0,template:function(t,e){1&t&&(r.Ob(0,"p"),r.nc(1," user-list works!\n"),r.Nb())},styles:[""]}),t})(),Oi=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Db({type:t,selectors:[["app-feed"]],decls:2,vars:0,template:function(t,e){1&t&&(r.Ob(0,"p"),r.nc(1," feed works!\n"),r.Nb())},styles:[""]}),t})();var Si=n("D0XW"),Ci=n("VRyK"),Ei=n("w1tV");function Ti(t,e){return n=>n.lift(new Ii(t,e))}class Ii{constructor(t,e){this.compare=t,this.keySelector=e}call(t,e){return e.subscribe(new xi(t,this.compare,this.keySelector))}}class xi extends xt.a{constructor(t,e,n){super(t),this.keySelector=n,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(t,e){return t===e}_next(t){let e;try{const{keySelector:n}=this;e=n?n(t):t}catch(r){return this.destination.error(r)}let n=!1;if(this.hasKey)try{const{compare:t}=this;n=t(this.key,e)}catch(r){return this.destination.error(r)}else this.hasKey=!0;n||(this.key=e,this.destination.next(t))}}class ki{constructor(t,e){this.observables=t,this.project=e}call(t,e){return e.subscribe(new Ni(t,this.observables,this.project))}}class Ni extends kt{constructor(t,e,n){super(t),this.observables=e,this.project=n,this.toRespond=[];const r=e.length;this.values=new Array(r);for(let i=0;i<r;i++)this.toRespond.push(i);for(let i=0;i<r;i++)this.add(Pt(this,e[i],void 0,i))}notifyNext(t,e,n){this.values[n]=e;const r=this.toRespond;if(r.length>0){const t=r.indexOf(n);-1!==t&&r.splice(t,1)}}notifyComplete(){}_next(t){if(0===this.toRespond.length){const e=[t,...this.values];this.project?this._tryProject(e):this.destination.next(e)}}_tryProject(t){let e;try{e=this.project.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}class Ai{constructor(t){this.predicate=t}call(t,e){return e.subscribe(new ji(t,this.predicate))}}class ji extends xt.a{constructor(t,e){super(t),this.predicate=e,this.skipping=!0,this.index=0}_next(t){const e=this.destination;this.skipping&&this.tryCallPredicate(t),this.skipping||e.next(t)}tryCallPredicate(t){try{const e=this.predicate(t,this.index++);this.skipping=Boolean(e)}catch(e){this.destination.error(e)}}}var Pi=n("spgP"),Ri=(n("6Uf2"),n("pxpQ")),Di=n("qgXg"),Li=n("Ylt2");class Mi extends St.a{constructor(t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,n){super(),this.scheduler=n,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=t<1?1:t,this._windowTime=e<1?1:e,e===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(t){if(!this.isStopped){const e=this._events;e.push(t),e.length>this._bufferSize&&e.shift()}super.next(t)}nextTimeWindow(t){this.isStopped||(this._events.push(new Fi(this._getNow(),t)),this._trimBufferThenGetEvents()),super.next(t)}_subscribe(t){const e=this._infiniteTimeWindow,n=e?this._events:this._trimBufferThenGetEvents(),r=this.scheduler,i=n.length;let o;if(this.closed)throw new Ct.a;if(this.isStopped||this.hasError?o=Se.a.EMPTY:(this.observers.push(t),o=new Li.a(this,t)),r&&t.add(t=new Ri.a(t,r)),e)for(let s=0;s<i&&!t.closed;s++)t.next(n[s]);else for(let s=0;s<i&&!t.closed;s++)t.next(n[s].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),o}_getNow(){return(this.scheduler||Di.a).now()}_trimBufferThenGetEvents(){const t=this._getNow(),e=this._bufferSize,n=this._windowTime,r=this._events,i=r.length;let o=0;for(;o<i&&!(t-r[o].time<n);)o++;return i>e&&(o=Math.max(o,i-e)),o>0&&r.splice(0,o),r}}class Fi{constructor(t,e){this.time=t,this.value=e}}function Vi(t,e,n){let r;return r=t&&"object"==typeof t?t:{bufferSize:t,windowTime:e,refCount:!1,scheduler:n},t=>t.lift(function({bufferSize:t=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:n,scheduler:r}){let i,o,s=0,a=!1,u=!1;return function(c){let l;s++,!i||a?(a=!1,i=new Mi(t,e,r),l=i.subscribe(this),o=c.subscribe({next(t){i.next(t)},error(t){a=!0,i.error(t)},complete(){u=!0,o=void 0,i.complete()}}),u&&(o=void 0)):l=i.subscribe(this),this.add(()=>{s--,l.unsubscribe(),l=void 0,o&&!u&&n&&0===s&&(o.unsubscribe(),o=void 0,i=void 0)})}}(r))}function Ui(t,e){return e?Kt(()=>t,e):Kt(()=>t)}var qi=n("tf+s");const Bi=new r.q("angularfire2.auth.use-emulator"),Hi=new r.q("angularfire2.auth.settings"),zi=new r.q("angularfire2.auth.tenant-id"),Ki=new r.q("angularfire2.auth.langugage-code"),Wi=new r.q("angularfire2.auth.use-device-language"),Qi=new r.q("angularfire.auth.persistence");let Gi=(()=>{class t{constructor(t,e,r,i,o,s,a,u,c,l){const h=new Pi.d(i),d=Object(Pi.h)(h),f=new St.a,p=Object(Ot.a)(void 0).pipe(Object(Ri.b)(h.outsideAngular),Kt(()=>i.runOutsideAngular(()=>n.e(4).then(n.bind(null,"6nsN")))),Object(Ht.a)(()=>Object(Pi.g)(t,i,e)),Object(Ht.a)(t=>i.runOutsideAngular(()=>{const e=o,n=s;return Object(Pi.f)(t.name+".auth","AngularFireAuth",t,()=>{const r=i.runOutsideAngular(()=>t.auth());return e&&r.useEmulator("http://"+e.join(":")),a&&(r.tenantId=a),r.languageCode=u,c&&r.useDeviceLanguage(),n&&(r.settings=n),l&&r.setPersistence(l),r},[e,a,u,c,n,l])})),Vi({bufferSize:1,refCount:!1}));if(U(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Object(Ot.a)(null);else{p.pipe(we()).subscribe();const t=p.pipe(Kt(t=>t.getRedirectResult().then(t=>t,()=>null)),d,Vi({bufferSize:1,refCount:!1})),e=t=>new jt.a(e=>({unsubscribe:i.runOutsideAngular(()=>t(e))})),n=p.pipe(Kt(t=>e(t.onAuthStateChanged.bind(t)))),r=p.pipe(Kt(t=>e(t.onIdTokenChanged.bind(t))));this.authState=t.pipe(Ui(n),Object(qi.a)(h.outsideAngular),Object(Ri.b)(h.insideAngular)),this.user=t.pipe(Ui(r),Object(qi.a)(h.outsideAngular),Object(Ri.b)(h.insideAngular)),this.idToken=this.user.pipe(Kt(t=>t?Object(wt.a)(t.getIdToken()):Object(Ot.a)(null))),this.idTokenResult=this.user.pipe(Kt(t=>t?Object(wt.a)(t.getIdTokenResult()):Object(Ot.a)(null))),this.credential=Object(Ci.a)(t,f,this.authState.pipe(ne(t=>!t))).pipe(Object(Ht.a)(t=>(null==t?void 0:t.user)?t:null),Object(qi.a)(h.outsideAngular),Object(Ri.b)(h.insideAngular))}return Object(Pi.i)(this,p,i,{spy:{apply:(t,e,n)=>{(t.startsWith("signIn")||t.startsWith("createUser"))&&n.then(t=>f.next(t))}}})}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(Pi.c),r.Sb(Pi.b,8),r.Sb(r.B),r.Sb(r.z),r.Sb(Bi,8),r.Sb(Hi,8),r.Sb(zi,8),r.Sb(Ki,8),r.Sb(Wi,8),r.Sb(Qi,8))},t.\u0275prov=Object(r.Fb)({factory:function(){return new t(Object(r.Sb)(Pi.c),Object(r.Sb)(Pi.b,8),Object(r.Sb)(r.B),Object(r.Sb)(r.z),Object(r.Sb)(Bi,8),Object(r.Sb)(Hi,8),Object(r.Sb)(zi,8),Object(r.Sb)(Ki,8),Object(r.Sb)(Wi,8),Object(r.Sb)(Qi,8))},token:t,providedIn:"any"}),t})();Object(Pi.e)(Gi,[{app:null,applyActionCode:null,checkActionCode:null,confirmPasswordReset:null,createUserWithEmailAndPassword:null,currentUser:null,fetchSignInMethodsForEmail:null,isSignInWithEmailLink:null,getRedirectResult:null,languageCode:null,settings:null,onAuthStateChanged:null,onIdTokenChanged:null,sendSignInLinkToEmail:null,sendPasswordResetEmail:null,setPersistence:null,signInAndRetrieveDataWithCredential:null,signInAnonymously:null,signInWithCredential:null,signInWithCustomToken:null,signInWithEmailAndPassword:null,signInWithPhoneNumber:null,signInWithEmailLink:null,signInWithPopup:null,signInWithRedirect:null,signOut:null,tenantId:null,updateCurrentUser:null,useDeviceLanguage:null,useEmulator:null,verifyPasswordResetCode:null}]);var $i=n("Jgta");function Yi(t){return null==t}function Ji(t){return"function"==typeof t.set}function Xi(t,e){return Ji(e)?e:t.ref(e)}function Zi(t,e){if("string"==typeof t)return e.stringCase();if(Ji(t))return e.firebaseCase();if("function"==typeof t.exportVal)return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof t)}function to(t,e,n="on",r=Si.a){return new jt.a(i=>{let o=null;return o=t[n](e,(t,e)=>{r.schedule(()=>{i.next({snapshot:t,prevKey:e})}),"once"===n&&r.schedule(()=>i.complete())},t=>{r.schedule(()=>i.error(t))}),"on"===n?{unsubscribe(){null!=o&&t.off(e,o)}}:{unsubscribe(){}}}).pipe(Object(Ht.a)(t=>{const{snapshot:n,prevKey:r}=t;let i=null;return n.exists()&&(i=n.key),{type:e,payload:n,prevKey:r,key:i}}),Object(Ei.a)())}function eo(t,e){const n=t.length;for(let r=0;r<n;r++)if(t[r].payload.key===e)return r;return-1}function no(t,e){const{payload:n,prevKey:r,key:i}=e,o=eo(t,i),s=function(t,e){if(Yi(e))return 0;{const n=eo(t,e);return-1===n?t.length:n+1}}(t,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let n=null;e.payload.forEach(e=>{const r={payload:e,type:"value",prevKey:n,key:e.key};return n=e.key,t=[...t,r],!1})}return t;case"child_added":if(o>-1){const i=t[o-1];(i&&i.key||null)!==r&&(t=t.filter(t=>t.payload.key!==n.key)).splice(s,0,e)}else{if(null==r)return[e,...t];(t=t.slice()).splice(s,0,e)}return t;case"child_removed":return t.filter(t=>t.payload.key!==n.key);case"child_changed":return t.map(t=>t.payload.key===i?e:t);case"child_moved":if(o>-1){const e=t.splice(o,1)[0];return(t=t.slice()).splice(s,0,e),t}return t;default:return t}}function ro(t){return(Yi(t)||0===t.length)&&(t=["child_added","child_removed","child_changed","child_moved"]),t}function io(t,e,n){return function(t,e,n){return to(t,"value","once",n).pipe(Kt(r=>{const i=[Object(Ot.a)(r)];return e.forEach(e=>i.push(to(t,e,"on",n))),Object(Ci.a)(...i).pipe(Zt(no,[]))}),Ti())}(t,e=ro(e),n)}function oo(t,e,n){const r=(e=ro(e)).map(e=>to(t,e,"on",n));return Object(Ci.a)(...r)}function so(t,e){return function(n,r){return Zi(n,{stringCase:()=>t.child(n)[e](r),firebaseCase:()=>n[e](r),snapshotCase:()=>n.ref[e](r)})}}function ao(t,e){return function(){return to(t,"value","on",e)}}const uo=new r.q("angularfire2.realtimeDatabaseURL"),co=new r.q("angularfire2.database.use-emulator");let lo=(()=>{class t{constructor(t,e,n,r,i,o,s){this.schedulers=new Pi.d(i),this.keepUnstableUntilFirst=Object(Pi.h)(this.schedulers);const a=o,u=Object(Pi.g)(t,i,e);!$i.a.auth&&s&&Object(Pi.j)(),this.database=Object(Pi.f)(`${u.name}.database.${n}`,"AngularFireDatabase",u,()=>{const t=i.runOutsideAngular(()=>u.database(n||void 0));return a&&t.useEmulator(...a),t},[a])}list(t,e){const n=this.schedulers.ngZone.runOutsideAngular(()=>Xi(this.database,t));let r=n;return e&&(r=e(n)),function(t,e){const n=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>t.ref);return{query:t,update:so(r,"update"),set:so(r,"set"),push:t=>r.push(t),remove:(i=r,function(t){return t?Zi(t,{stringCase:()=>i.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):i.remove()}),snapshotChanges:r=>io(t,r,n).pipe(e.keepUnstableUntilFirst),stateChanges:r=>oo(t,r,n).pipe(e.keepUnstableUntilFirst),auditTrail:r=>function(t,e,n){return function(t,e,n){return function(t,e){return to(t,"value","on",e).pipe(Object(Ht.a)(t=>{let e;return t.payload.forEach(t=>(e=t.key,!1)),{data:t,lastKeyToLoad:e}}))}(t,n).pipe(function(...t){return e=>{let n;return"function"==typeof t[t.length-1]&&(n=t.pop()),e.lift(new ki(t,n))}}(e),Object(Ht.a)(([t,e])=>{const n=t.lastKeyToLoad,r=e.map(t=>t.key);return{actions:e,lastKeyToLoad:n,loadedKeys:r}}),(r=t=>-1===t.loadedKeys.indexOf(t.lastKeyToLoad),t=>t.lift(new Ai(r))),Object(Ht.a)(t=>t.actions));var r}(t,oo(t,e).pipe(Zt((t,e)=>[...t,e],[])),n)}(t,r,n).pipe(e.keepUnstableUntilFirst),valueChanges:(r,i)=>io(t,r,n).pipe(Object(Ht.a)(t=>t.map(t=>i&&i.idField?Object.assign(Object.assign({},t.payload.val()),{[i.idField]:t.key}):t.payload.val())),e.keepUnstableUntilFirst)};var i}(r,this)}object(t){const e=this.schedulers.ngZone.runOutsideAngular(()=>Xi(this.database,t));return r=this,{query:n=e,snapshotChanges:()=>ao(n,r.schedulers.outsideAngular)().pipe(r.keepUnstableUntilFirst),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>ao(n,r.schedulers.outsideAngular)().pipe(r.keepUnstableUntilFirst,Object(Ht.a)(t=>t.payload.exists()?t.payload.val():null))};var n,r}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(Pi.c),r.Sb(Pi.b,8),r.Sb(uo,8),r.Sb(r.B),r.Sb(r.z),r.Sb(co,8),r.Sb(Bi,8))},t.\u0275prov=Object(r.Fb)({factory:function(){return new t(Object(r.Sb)(Pi.c),Object(r.Sb)(Pi.b,8),Object(r.Sb)(uo,8),Object(r.Sb)(r.B),Object(r.Sb)(r.z),Object(r.Sb)(co,8),Object(r.Sb)(Bi,8))},token:t,providedIn:"any"}),t})(),ho=(()=>{class t{}return t.\u0275mod=r.Hb({type:t}),t.\u0275inj=r.Gb({factory:function(e){return new(e||t)},providers:[lo]}),t})(),fo=(()=>{class t{constructor(t,e){this.db=t,this.afAuth=e}getUsers(){return this.db.list("/users")}sendMessage(t){}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(lo),r.Sb(Gi))},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var po=n("XoHu");function go(t,e){return new jt.a(n=>{const r=t.length;if(0===r)return void n.complete();const i=new Array(r);let o=0,s=0;for(let a=0;a<r;a++){const u=Object(wt.a)(t[a]);let c=!1;n.add(u.subscribe({next:t=>{c||(c=!0,s++),i[a]=t},error:t=>n.error(t),complete:()=>{o++,o!==r&&c||(s===r&&n.next(e?e.reduce((t,e,n)=>(t[e]=i[n],t),{}):i),n.complete())}}))}})}const mo=new r.q("NgValueAccessor"),yo={provide:mo,useExisting:Object(r.T)(()=>vo),multi:!0};let vo=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"checked",t)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(r.D),r.Jb(r.l))},t.\u0275dir=r.Eb({type:t,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(t,e){1&t&&r.Vb("change",function(t){return e.onChange(t.target.checked)})("blur",function(){return e.onTouched()})},features:[r.xb([yo])]}),t})();const bo={provide:mo,useExisting:Object(r.T)(()=>wo),multi:!0},_o=new r.q("CompositionEventMode");let wo=(()=>{class t{constructor(t,e,n){this._renderer=t,this._elementRef=e,this._compositionMode=n,this.onChange=t=>{},this.onTouched=()=>{},this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const t=s()?s().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(r.D),r.Jb(r.l),r.Jb(_o,8))},t.\u0275dir=r.Eb({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,e){1&t&&r.Vb("input",function(t){return e._handleInput(t.target.value)})("blur",function(){return e.onTouched()})("compositionstart",function(){return e._compositionStart()})("compositionend",function(t){return e._compositionEnd(t.target.value)})},features:[r.xb([bo])]}),t})();function Oo(t){return null==t||0===t.length}function So(t){return null!=t&&"number"==typeof t.length}const Co=new r.q("NgValidators"),Eo=new r.q("NgAsyncValidators"),To=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Io{static min(t){return e=>{if(Oo(e.value)||Oo(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}static max(t){return e=>{if(Oo(e.value)||Oo(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}static required(t){return Oo(t.value)?{required:!0}:null}static requiredTrue(t){return!0===t.value?null:{required:!0}}static email(t){return Oo(t.value)||To.test(t.value)?null:{email:!0}}static minLength(t){return e=>Oo(e.value)||!So(e.value)?null:e.value.length<t?{minlength:{requiredLength:t,actualLength:e.value.length}}:null}static maxLength(t){return e=>So(e.value)&&e.value.length>t?{maxlength:{requiredLength:t,actualLength:e.value.length}}:null}static pattern(t){if(!t)return Io.nullValidator;let e,n;return"string"==typeof t?(n="","^"!==t.charAt(0)&&(n+="^"),n+=t,"$"!==t.charAt(t.length-1)&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),t=>{if(Oo(t.value))return null;const r=t.value;return e.test(r)?null:{pattern:{requiredPattern:n,actualValue:r}}}}static nullValidator(t){return null}static compose(t){if(!t)return null;const e=t.filter(xo);return 0==e.length?null:function(t){return No(Ao(t,e))}}static composeAsync(t){if(!t)return null;const e=t.filter(xo);return 0==e.length?null:function(t){return function(...t){if(1===t.length){const e=t[0];if(Object(It.a)(e))return go(e,null);if(Object(po.a)(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return go(t.map(t=>e[t]),t)}}if("function"==typeof t[t.length-1]){const e=t.pop();return go(t=1===t.length&&Object(It.a)(t[0])?t[0]:t,null).pipe(Object(Ht.a)(t=>e(...t)))}return go(t,null)}(Ao(t,e).map(ko)).pipe(Object(Ht.a)(No))}}}function xo(t){return null!=t}function ko(t){const e=Object(r.qb)(t)?Object(wt.a)(t):t;return Object(r.pb)(e),e}function No(t){let e={};return t.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function Ao(t,e){return e.map(e=>e(t))}function jo(t){return t.map(t=>function(t){return!t.validate}(t)?t:e=>t.validate(e))}function Po(t){return null!=t?Io.compose(jo(t)):null}function Ro(t){return null!=t?Io.composeAsync(jo(t)):null}function Do(t,e){return null===t?[e]:Array.isArray(t)?[...t,e]:[t,e]}let Lo=(()=>{class t{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=Po(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=Ro(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.Eb({type:t}),t})(),Mo=(()=>{class t extends Lo{get formDirective(){return null}get path(){return null}}return t.\u0275fac=function(e){return Fo(e||t)},t.\u0275dir=r.Eb({type:t,features:[r.vb]}),t})();const Fo=r.Qb(Mo);class Vo extends Lo{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Uo{constructor(t){this._cd=t}get ngClassUntouched(){var t,e,n;return null!==(n=null===(e=null===(t=this._cd)||void 0===t?void 0:t.control)||void 0===e?void 0:e.untouched)&&void 0!==n&&n}get ngClassTouched(){var t,e,n;return null!==(n=null===(e=null===(t=this._cd)||void 0===t?void 0:t.control)||void 0===e?void 0:e.touched)&&void 0!==n&&n}get ngClassPristine(){var t,e,n;return null!==(n=null===(e=null===(t=this._cd)||void 0===t?void 0:t.control)||void 0===e?void 0:e.pristine)&&void 0!==n&&n}get ngClassDirty(){var t,e,n;return null!==(n=null===(e=null===(t=this._cd)||void 0===t?void 0:t.control)||void 0===e?void 0:e.dirty)&&void 0!==n&&n}get ngClassValid(){var t,e,n;return null!==(n=null===(e=null===(t=this._cd)||void 0===t?void 0:t.control)||void 0===e?void 0:e.valid)&&void 0!==n&&n}get ngClassInvalid(){var t,e,n;return null!==(n=null===(e=null===(t=this._cd)||void 0===t?void 0:t.control)||void 0===e?void 0:e.invalid)&&void 0!==n&&n}get ngClassPending(){var t,e,n;return null!==(n=null===(e=null===(t=this._cd)||void 0===t?void 0:t.control)||void 0===e?void 0:e.pending)&&void 0!==n&&n}}let qo=(()=>{class t extends Uo{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(Vo,2))},t.\u0275dir=r.Eb({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,e){2&t&&r.Bb("ng-untouched",e.ngClassUntouched)("ng-touched",e.ngClassTouched)("ng-pristine",e.ngClassPristine)("ng-dirty",e.ngClassDirty)("ng-valid",e.ngClassValid)("ng-invalid",e.ngClassInvalid)("ng-pending",e.ngClassPending)},features:[r.vb]}),t})(),Bo=(()=>{class t extends Uo{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(Mo,10))},t.\u0275dir=r.Eb({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:14,hostBindings:function(t,e){2&t&&r.Bb("ng-untouched",e.ngClassUntouched)("ng-touched",e.ngClassTouched)("ng-pristine",e.ngClassPristine)("ng-dirty",e.ngClassDirty)("ng-valid",e.ngClassValid)("ng-invalid",e.ngClassInvalid)("ng-pending",e.ngClassPending)},features:[r.vb]}),t})();const Ho={provide:mo,useExisting:Object(r.T)(()=>zo),multi:!0};let zo=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}registerOnChange(t){this.onChange=e=>{t(""==e?null:parseFloat(e))}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(r.D),r.Jb(r.l))},t.\u0275dir=r.Eb({type:t,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,e){1&t&&r.Vb("input",function(t){return e.onChange(t.target.value)})("blur",function(){return e.onTouched()})},features:[r.xb([Ho])]}),t})();const Ko={provide:mo,useExisting:Object(r.T)(()=>Qo),multi:!0};let Wo=(()=>{class t{constructor(){this._accessors=[]}add(t,e){this._accessors.push([t,e])}remove(t){for(let e=this._accessors.length-1;e>=0;--e)if(this._accessors[e][1]===t)return void this._accessors.splice(e,1)}select(t){this._accessors.forEach(e=>{this._isSameGroup(e,t)&&e[1]!==t&&e[1].fireUncheck(t.value)})}_isSameGroup(t,e){return!!t[0].control&&t[0]._parent===e._control._parent&&t[1].name===e.name}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac}),t})(),Qo=(()=>{class t{constructor(t,e,n,r){this._renderer=t,this._elementRef=e,this._registry=n,this._injector=r,this.onChange=()=>{},this.onTouched=()=>{}}ngOnInit(){this._control=this._injector.get(Vo),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(t){this._state=t===this.value,this._renderer.setProperty(this._elementRef.nativeElement,"checked",this._state)}registerOnChange(t){this._fn=t,this.onChange=()=>{t(this.value),this._registry.select(this)}}fireUncheck(t){this.writeValue(t)}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_checkName(){!this.name&&this.formControlName&&(this.name=this.formControlName)}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(r.D),r.Jb(r.l),r.Jb(Wo),r.Jb(r.r))},t.\u0275dir=r.Eb({type:t,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(t,e){1&t&&r.Vb("change",function(){return e.onChange()})("blur",function(){return e.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[r.xb([Ko])]}),t})();const Go={provide:mo,useExisting:Object(r.T)(()=>$o),multi:!0};let $o=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",parseFloat(t))}registerOnChange(t){this.onChange=e=>{t(""==e?null:parseFloat(e))}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(r.D),r.Jb(r.l))},t.\u0275dir=r.Eb({type:t,selectors:[["input","type","range","formControlName",""],["input","type","range","formControl",""],["input","type","range","ngModel",""]],hostBindings:function(t,e){1&t&&r.Vb("change",function(t){return e.onChange(t.target.value)})("input",function(t){return e.onChange(t.target.value)})("blur",function(){return e.onTouched()})},features:[r.xb([Go])]}),t})();const Yo={provide:mo,useExisting:Object(r.T)(()=>Jo),multi:!0};let Jo=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this._optionMap=new Map,this._idCounter=0,this.onChange=t=>{},this.onTouched=()=>{},this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const e=this._getOptionId(t);null==e&&this._renderer.setProperty(this._elementRef.nativeElement,"selectedIndex",-1);const n=function(t,e){return null==t?""+e:(e&&"object"==typeof e&&(e="Object"),`${t}: ${e}`.slice(0,50))}(e,t);this._renderer.setProperty(this._elementRef.nativeElement,"value",n)}registerOnChange(t){this.onChange=e=>{this.value=this._getOptionValue(e),t(this.value)}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const e of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(e),t))return e;return null}_getOptionValue(t){const e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e):t}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(r.D),r.Jb(r.l))},t.\u0275dir=r.Eb({type:t,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,e){1&t&&r.Vb("change",function(t){return e.onChange(t.target.value)})("blur",function(){return e.onTouched()})},inputs:{compareWith:"compareWith"},features:[r.xb([Yo])]}),t})();const Xo={provide:mo,useExisting:Object(r.T)(()=>Zo),multi:!0};let Zo=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this._optionMap=new Map,this._idCounter=0,this.onChange=t=>{},this.onTouched=()=>{},this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let e;if(this.value=t,Array.isArray(t)){const n=t.map(t=>this._getOptionId(t));e=(t,e)=>{t._setSelected(n.indexOf(e.toString())>-1)}}else e=(t,e)=>{t._setSelected(!1)};this._optionMap.forEach(e)}registerOnChange(t){this.onChange=e=>{const n=[];if(void 0!==e.selectedOptions){const t=e.selectedOptions;for(let e=0;e<t.length;e++){const r=t.item(e),i=this._getOptionValue(r.value);n.push(i)}}else{const t=e.options;for(let e=0;e<t.length;e++){const r=t.item(e);if(r.selected){const t=this._getOptionValue(r.value);n.push(t)}}}this.value=n,t(n)}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_registerOption(t){const e=(this._idCounter++).toString();return this._optionMap.set(e,t),e}_getOptionId(t){for(const e of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(e)._value,t))return e;return null}_getOptionValue(t){const e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e)._value:t}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(r.D),r.Jb(r.l))},t.\u0275dir=r.Eb({type:t,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,e){1&t&&r.Vb("change",function(t){return e.onChange(t.target)})("blur",function(){return e.onTouched()})},inputs:{compareWith:"compareWith"},features:[r.xb([Xo])]}),t})();function ts(t,e){ns(t,e,!0),e.valueAccessor.writeValue(t.value),function(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&rs(t,e)})}(t,e),function(t,e){const n=(t,n)=>{e.valueAccessor.writeValue(t),n&&e.viewToModelUpdate(t)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}(t,e),function(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&rs(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),function(t,e){if(e.valueAccessor.setDisabledState){const n=t=>{e.valueAccessor.setDisabledState(t)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}(t,e)}function es(t,e){t.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function ns(t,e,n){const r=function(t){return t._rawValidators}(t);null!==e.validator?t.setValidators(Do(r,e.validator)):"function"==typeof r&&t.setValidators([r]);const i=function(t){return t._rawAsyncValidators}(t);if(null!==e.asyncValidator?t.setAsyncValidators(Do(i,e.asyncValidator)):"function"==typeof i&&t.setAsyncValidators([i]),n){const n=()=>t.updateValueAndValidity();es(e._rawValidators,n),es(e._rawAsyncValidators,n)}}function rs(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}const is=[vo,$o,zo,Jo,Zo,Qo];function os(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const ss="VALID",as="INVALID",us="PENDING",cs="DISABLED";function ls(t){return(ps(t)?t.validators:t)||null}function hs(t){return Array.isArray(t)?Po(t):t||null}function ds(t,e){return(ps(e)?e.asyncValidators:t)||null}function fs(t){return Array.isArray(t)?Ro(t):t||null}function ps(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class gs{constructor(t,e){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=e,this._composedValidatorFn=hs(this._rawValidators),this._composedAsyncValidatorFn=fs(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===ss}get invalid(){return this.status===as}get pending(){return this.status==us}get disabled(){return this.status===cs}get enabled(){return this.status!==cs}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=hs(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=fs(t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=us,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=cs,this.errors=null,this._forEachChild(e=>{e.disable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=ss,this._forEachChild(e=>{e.enable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),this.status!==ss&&this.status!==us||this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?cs:ss}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=us,this._hasOwnPendingAsyncValidator=!0;const e=ko(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(e=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(e,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){return function(t,e,n){if(null==e)return null;if(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length)return null;let r=t;return e.forEach(t=>{r=r instanceof ys?r.controls.hasOwnProperty(t)?r.controls[t]:null:r instanceof vs&&r.at(t)||null}),r}(this,t)}getError(t,e){const n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new r.n,this.statusChanges=new r.n}_calculateStatus(){return this._allControlsDisabled()?cs:this.errors?as:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(us)?us:this._anyControlsHaveStatus(as)?as:ss}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){ps(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class ms extends gs{constructor(t=null,e,n){super(ls(e),ds(n,e)),this._onChange=[],this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(t=>t(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=null,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){os(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){os(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class ys extends gs{constructor(t,e,n){super(ls(e),ds(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e){this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}removeControl(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity(),this._onCollectionChange()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){this._checkAllValuesPresent(t),Object.keys(t).forEach(n=>{this._throwIfControlMissing(n),this.controls[n].setValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){Object.keys(t).forEach(n=>{this.controls[n]&&this.controls[n].patchValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}reset(t={},e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,n)=>(t[n]=e instanceof ms?e.value:e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(t,e)=>!!e._syncPendingControls()||t);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error(`Cannot find form control with name: ${t}.`)}_forEachChild(t){Object.keys(this.controls).forEach(e=>t(this.controls[e],e))}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const e of Object.keys(this.controls)){const n=this.controls[e];if(this.contains(e)&&t(n))return!0}return!1}_reduceValue(){return this._reduceChildren({},(t,e,n)=>((e.enabled||this.disabled)&&(t[n]=e.value),t))}_reduceChildren(t,e){let n=t;return this._forEachChild((t,r)=>{n=e(n,t,r)}),n}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control with name: '${n}'.`)})}}class vs extends gs{constructor(t,e,n){super(ls(e),ds(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}at(t){return this.controls[t]}push(t){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity(),this._onCollectionChange()}insert(t,e){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity()}removeAt(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity(),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){this._checkAllValuesPresent(t),t.forEach((t,n)=>{this._throwIfControlMissing(n),this.at(n).setValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t.forEach((t,n)=>{this.at(n)&&this.at(n).patchValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}reset(t=[],e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t instanceof ms?t.value:t.getRawValue())}clear(){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity())}_syncPendingControls(){let t=this.controls.reduce((t,e)=>!!e._syncPendingControls()||t,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error("Cannot find form control at index "+t)}_forEachChild(t){this.controls.forEach((e,n)=>{t(e,n)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control at index: ${n}.`)})}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}const bs={provide:Mo,useExisting:Object(r.T)(()=>ws)},_s=(()=>Promise.resolve(null))();let ws=(()=>{class t extends Mo{constructor(t,e){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new r.n,this.form=new ys({},Po(t),Ro(e))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){_s.then(()=>{const e=this._findContainer(t.path);t.control=e.registerControl(t.name,t.control),ts(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){_s.then(()=>{const e=this._findContainer(t.path);e&&e.removeControl(t.name),os(this._directives,t)})}addFormGroup(t){_s.then(()=>{const e=this._findContainer(t.path),n=new ys({});(function(t,e){ns(t,e,!1)})(n,t),e.registerControl(t.name,n),n.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){_s.then(()=>{const e=this._findContainer(t.path);e&&e.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,e){_s.then(()=>{this.form.get(t.path).setValue(e)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,e=this._directives,this.form._syncPendingControls(),e.forEach(t=>{const e=t.control;"submit"===e.updateOn&&e._pendingChange&&(t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1)}),this.ngSubmit.emit(t),!1;var e}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(Co,10),r.Jb(Eo,10))},t.\u0275dir=r.Eb({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,e){1&t&&r.Vb("submit",function(t){return e.onSubmit(t)})("reset",function(){return e.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[r.xb([bs]),r.vb]}),t})();const Os={provide:Vo,useExisting:Object(r.T)(()=>Cs)},Ss=(()=>Promise.resolve(null))();let Cs=(()=>{class t extends Vo{constructor(t,e,n,i){super(),this.control=new ms,this._registered=!1,this.update=new r.n,this._parent=t,this._setValidators(e),this._setAsyncValidators(n),this.valueAccessor=function(t,e){if(!e)return null;Array.isArray(e);let n=void 0,r=void 0,i=void 0;return e.forEach(t=>{var e;t.constructor===wo?n=t:(e=t,is.some(t=>e.constructor===t)?r=t:i=t)}),i||r||n||null}(0,i)}ngOnChanges(t){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in t&&this._updateDisabled(t),function(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?[...this._parent.path,this.name]:[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){ts(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){Ss.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1})})}_updateDisabled(t){const e=t.isDisabled.currentValue,n=""===e||e&&"false"!==e;Ss.then(()=>{n&&!this.control.disabled?this.control.disable():!n&&this.control.disabled&&this.control.enable()})}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(Mo,9),r.Jb(Co,10),r.Jb(Eo,10),r.Jb(mo,10))},t.\u0275dir=r.Eb({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[r.xb([Os]),r.vb,r.wb]}),t})(),Es=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.Eb({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),t})();const Ts={provide:Co,useExisting:Object(r.T)(()=>Is),multi:!0};let Is=(()=>{class t{constructor(){this._required=!1}get required(){return this._required}set required(t){this._required=null!=t&&!1!==t&&""+t!="false",this._onChange&&this._onChange()}validate(t){return this.required?Io.required(t):null}registerOnValidatorChange(t){this._onChange=t}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.Eb({type:t,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,e){2&t&&r.zb("required",e.required?"":null)},inputs:{required:"required"},features:[r.xb([Ts])]}),t})();const xs={provide:Co,useExisting:Object(r.T)(()=>ks),multi:!0};let ks=(()=>{class t{constructor(){this._enabled=!1}set email(t){this._enabled=""===t||!0===t||"true"===t,this._onChange&&this._onChange()}validate(t){return this._enabled?Io.email(t):null}registerOnValidatorChange(t){this._onChange=t}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.Eb({type:t,selectors:[["","email","","formControlName",""],["","email","","formControl",""],["","email","","ngModel",""]],inputs:{email:"email"},features:[r.xb([xs])]}),t})();const Ns={provide:Co,useExisting:Object(r.T)(()=>As),multi:!0};let As=(()=>{class t{constructor(){this._validator=Io.nullValidator}ngOnChanges(t){"minlength"in t&&(this._createValidator(),this._onChange&&this._onChange())}validate(t){return null==this.minlength?null:this._validator(t)}registerOnValidatorChange(t){this._onChange=t}_createValidator(){this._validator=Io.minLength("number"==typeof this.minlength?this.minlength:parseInt(this.minlength,10))}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.Eb({type:t,selectors:[["","minlength","","formControlName",""],["","minlength","","formControl",""],["","minlength","","ngModel",""]],hostVars:1,hostBindings:function(t,e){2&t&&r.zb("minlength",e.minlength?e.minlength:null)},inputs:{minlength:"minlength"},features:[r.xb([Ns]),r.wb]}),t})(),js=(()=>{class t{}return t.\u0275mod=r.Hb({type:t}),t.\u0275inj=r.Gb({factory:function(e){return new(e||t)}}),t})(),Ps=(()=>{class t{}return t.\u0275mod=r.Hb({type:t}),t.\u0275inj=r.Gb({factory:function(e){return new(e||t)},providers:[Wo],imports:[js]}),t})(),Rs=(()=>{class t{constructor(t){this.chat=t,this.message=""}ngOnInit(){}send(){}handleSubmit(t){13===t.keyCode&&this.send()}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(fo))},t.\u0275cmp=r.Db({type:t,selectors:[["app-chat-form"]],decls:3,vars:1,consts:[[1,"chatInput",3,"ngModel","ngModelChange","keydown"],[1,"chatButton",3,"click"]],template:function(t,e){1&t&&(r.Ob(0,"input",0),r.Vb("ngModelChange",function(t){return e.message=t})("keydown",function(t){return e.handleSubmit(t)}),r.Nb(),r.Ob(1,"button",1),r.Vb("click",function(){return e.send()}),r.nc(2,"Send"),r.Nb()),2&t&&r.bc("ngModel",e.message)},directives:[wo,qo,Cs],styles:[""]}),t})();const Ds=["scroller"];let Ls=(()=>{class t{constructor(){}ngOnInit(){}scrollToBottom(){this.feedContainer.nativeElement.scrollTop=this.feedContainer.nativeElement.scrollHeight}ngAfterViewChecked(){this.scrollToBottom()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Db({type:t,selectors:[["app-chatroom"]],viewQuery:function(t,e){if(1&t&&r.rc(Ds,!0),2&t){let t;r.ec(t=r.Wb())&&(e.feedContainer=t.first)}},decls:8,vars:0,consts:[[1,"mainContent"],[1,"userListWrapper"],[1,"feedWrapper"],["scroller",""],[1,"chatFormWrapper"]],template:function(t,e){1&t&&(r.Ob(0,"div",0),r.Ob(1,"div",1),r.Kb(2,"app-user-list"),r.Nb(),r.Ob(3,"div",2,3),r.Kb(5,"app-feed"),r.Nb(),r.Nb(),r.Ob(6,"div",4),r.Kb(7,"app-chat-form"),r.Nb())},directives:[wi,Oi,Rs],styles:[""]}),t})();function Ms(){return t=>t.lift(new Fs)}class Fs{call(t,e){return e.subscribe(new Vs(t))}}class Vs extends xt.a{constructor(t){super(t),this.hasPrev=!1}_next(t){let e;this.hasPrev?e=[this.prev,t]:this.hasPrev=!0,this.prev=t,e&&this.destination.next(e)}}var Us=n("zIRd"),qs=n("qOnz"),Bs=n("q/0M"),Hs=function(t,e){return(Hs=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function zs(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var Ks,Ws="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Qs=Qs||{},Gs=Ws||self;function $s(){}function Ys(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function Js(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var Xs="closure_uid_"+(1e9*Math.random()>>>0),Zs=0;function ta(t,e,n){return t.call.apply(t.bind,arguments)}function ea(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function na(t,e,n){return(na=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ta:ea).apply(null,arguments)}function ra(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function ia(){return Date.now()}function oa(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Kb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function sa(){this.j=this.j,this.i=this.i}sa.prototype.j=!1,sa.prototype.ja=function(){!this.j&&(this.j=!0,this.G(),0)&&function(t){Object.prototype.hasOwnProperty.call(t,Xs)&&t[Xs]||(t[Xs]=++Zs)}(this)},sa.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var aa=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},ua=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function ca(t){return Array.prototype.concat.apply([],arguments)}function la(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function ha(t){return/^[\s\xa0]*$/.test(t)}var da,fa=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function pa(t,e){return-1!=t.indexOf(e)}function ga(t,e){return t<e?-1:t>e?1:0}t:{var ma=Gs.navigator;if(ma){var ya=ma.userAgent;if(ya){da=ya;break t}}da=""}function va(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function ba(t){var e={};for(var n in t)e[n]=t[n];return e}var _a="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function wa(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<_a.length;o++)n=_a[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Oa(t){return Oa[" "](t),t}Oa[" "]=$s;var Sa,Ca,Ea=pa(da,"Opera"),Ta=pa(da,"Trident")||pa(da,"MSIE"),Ia=pa(da,"Edge"),xa=Ia||Ta,ka=pa(da,"Gecko")&&!(pa(da.toLowerCase(),"webkit")&&!pa(da,"Edge"))&&!(pa(da,"Trident")||pa(da,"MSIE"))&&!pa(da,"Edge"),Na=pa(da.toLowerCase(),"webkit")&&!pa(da,"Edge");function Aa(){var t=Gs.document;return t?t.documentMode:void 0}t:{var ja="",Pa=(Ca=da,ka?/rv:([^\);]+)(\)|;)/.exec(Ca):Ia?/Edge\/([\d\.]+)/.exec(Ca):Ta?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Ca):Na?/WebKit\/(\S+)/.exec(Ca):Ea?/(?:Version)[ \/]?(\S+)/.exec(Ca):void 0);if(Pa&&(ja=Pa?Pa[1]:""),Ta){var Ra=Aa();if(null!=Ra&&Ra>parseFloat(ja)){Sa=String(Ra);break t}}Sa=ja}var Da={};function La(t){return function(t,e){var n=Da;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,function(){for(var e=0,n=fa(String(Sa)).split("."),r=fa(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=ga(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||ga(0==s[2].length,0==a[2].length)||ga(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e})}var Ma=Gs.document&&Ta&&(Aa()||parseInt(Sa,10))||void 0,Fa=!Ta||9<=Number(Ma),Va=Ta&&!La("9"),Ua=function(){if(!Gs.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{Gs.addEventListener("test",$s,e),Gs.removeEventListener("test",$s,e)}catch(n){}return t}();function qa(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function Ba(t,e){if(qa.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(ka){t:{try{Oa(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Ha[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}qa.prototype.b=function(){this.defaultPrevented=!0},oa(Ba,qa);var Ha={2:"touch",3:"pen",4:"mouse"};Ba.prototype.b=function(){Ba.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Va)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}};var za="closure_listenable_"+(1e6*Math.random()|0),Ka=0;function Wa(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++Ka,this.Y=this.Z=!1}function Qa(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function Ga(t){this.src=t,this.a={},this.b=0}function $a(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=aa(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(Qa(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function Ya(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}Ga.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=Ya(t,e,r,i);return-1<s?(e=t[s],n||(e.Z=!1)):((e=new Wa(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var Ja="closure_lm_"+(1e6*Math.random()|0),Xa={};function Za(t,e,n,r,i){if(r&&r.once)return eu(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)Za(t,e[o],n,r,i);return null}return n=cu(n),t&&t[za]?t.va(e,n,Js(r)?!!r.capture:!!r,i):tu(t,e,n,!1,r,i)}function tu(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=Js(i)?!!i.capture:!!i;if(s&&!Fa)return null;var a=au(t);if(a||(t[Ja]=a=new Ga(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function(){var t=su,e=Fa?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Ua||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(iu(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function eu(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)eu(t,e[o],n,r,i);return null}return n=cu(n),t&&t[za]?t.wa(e,n,Js(r)?!!r.capture:!!r,i):tu(t,e,n,!0,r,i)}function nu(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)nu(t,e[o],n,r,i);else r=Js(r)?!!r.capture:!!r,n=cu(n),t&&t[za]?(t=t.c,(e=String(e).toString())in t.a&&-1<(n=Ya(o=t.a[e],n,r,i))&&(Qa(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):t&&(t=au(t))&&(e=t.a[e.toString()],t=-1,e&&(t=Ya(e,n,r,i)),(n=-1<t?e[t]:null)&&ru(n))}function ru(t){if("number"!=typeof t&&t&&!t.Y){var e=t.src;if(e&&e[za])$a(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(iu(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=au(e))?($a(n,t),0==n.b&&(n.src=null,e[Ja]=null)):Qa(t)}}}function iu(t){return t in Xa?Xa[t]:Xa[t]="on"+t}function ou(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&ru(t),n.call(r,e)}function su(t,e){if(t.Y)return!0;if(!Fa){if(!e)t:{e=["window","event"];for(var n=Gs,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return ou(t,e=new Ba(e,this))}return ou(t,new Ba(e,this))}function au(t){return(t=t[Ja])instanceof Ga?t:null}var uu="__closure_events_fn_"+(1e9*Math.random()>>>0);function cu(t){return"function"==typeof t?t:(t[uu]||(t[uu]=function(e){return t.handleEvent(e)}),t[uu])}function lu(){sa.call(this),this.c=new Ga(this),this.J=this,this.C=null}function hu(t,e){var n,r=t.C;if(r)for(n=[];r;r=r.C)n.push(r);if(t=t.J,r=e.type||e,"string"==typeof e)e=new qa(e,t);else if(e instanceof qa)e.target=e.target||t;else{var i=e;wa(e=new qa(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.a=n[o];i=du(s,r,!0,e)&&i}if(i=du(s=e.a=t,r,!0,e)&&i,i=du(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=du(s=e.a=n[o],r,!1,e)&&i}function du(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.Y&&s.capture==n){var a=s.listener,u=s.ca||s.src;s.Z&&$a(t.c,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}oa(lu,sa),lu.prototype[za]=!0,(Ks=lu.prototype).addEventListener=function(t,e,n,r){Za(this,t,e,n,r)},Ks.removeEventListener=function(t,e,n,r){nu(this,t,e,n,r)},Ks.G=function(){if(lu.X.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)Qa(n[r]);delete e.a[t],e.b--}}this.C=null},Ks.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},Ks.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var fu=Gs.JSON.stringify;function pu(){this.b=this.a=null}var gu,mu=new(function(){function t(t,e){this.c=t,this.f=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,this.a=(t=this.a).next,t.next=null):t=this.c(),t},t}())(function(){return new vu},function(t){t.reset()});function yu(){var t=Ou,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function vu(){this.next=this.b=this.a=null}function bu(t){Gs.setTimeout(function(){throw t},0)}function _u(t,e){gu||function(){var t=Gs.Promise.resolve(void 0);gu=function(){t.then(Su)}}(),wu||(gu(),wu=!0),Ou.add(t,e)}pu.prototype.add=function(t,e){var n=mu.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},vu.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},vu.prototype.reset=function(){this.next=this.b=this.a=null};var wu=!1,Ou=new pu;function Su(){for(var t;t=yu();){try{t.a.call(t.b)}catch(n){bu(n)}var e=mu;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}wu=!1}function Cu(t,e){lu.call(this),this.b=t||1,this.a=e||Gs,this.f=na(this.Za,this),this.g=ia()}function Eu(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function Tu(t,e,n){if("function"==typeof t)n&&(t=na(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=na(t.handleEvent,t)}return 2147483647<Number(e)?-1:Gs.setTimeout(t,e||0)}function Iu(t){t.a=Tu(function(){t.a=null,t.c&&(t.c=!1,Iu(t))},t.h);var e=t.b;t.b=null,t.g.apply(null,e)}oa(Cu,lu),(Ks=Cu.prototype).aa=!1,Ks.M=null,Ks.Za=function(){if(this.aa){var t=ia()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),hu(this,"tick"),this.aa&&(Eu(this),this.start()))}},Ks.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=ia())},Ks.G=function(){Cu.X.G.call(this),Eu(this),delete this.a};var xu=function(t){function e(e,n){var r=t.call(this)||this;return r.g=e,r.h=n,r.b=null,r.c=!1,r.a=null,r}return function(t,e){function n(){this.constructor=t}Hs(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:Iu(this)},e.prototype.G=function(){t.prototype.G.call(this),this.a&&(Gs.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(sa);function ku(t){sa.call(this),this.b=t,this.a={}}oa(ku,sa);var Nu=[];function Au(t,e,n,r){Array.isArray(n)||(n&&(Nu[0]=n.toString()),n=Nu);for(var i=0;i<n.length;i++){var o=Za(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function ju(t){va(t.a,function(t,e){this.a.hasOwnProperty(e)&&ru(t)},t),t.a={}}function Pu(){this.a=!0}function Ru(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return fu(n)}catch(a){return e}}(t,n)+(r?" "+r:"")})}ku.prototype.G=function(){ku.X.G.call(this),ju(this)},ku.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Pu.prototype.info=function(){};var Du={},Lu=null;function Mu(){return Lu=Lu||new lu}function Fu(t){qa.call(this,Du.Fa,t)}function Vu(t){var e=Mu();hu(e,new Fu(e,t))}function Uu(t,e){qa.call(this,Du.STAT_EVENT,t),this.stat=e}function qu(t){var e=Mu();hu(e,new Uu(e,t))}function Bu(t){qa.call(this,Du.Ga,t)}function Hu(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return Gs.setTimeout(function(){t()},e)}Du.Fa="serverreachability",oa(Fu,qa),Du.STAT_EVENT="statevent",oa(Uu,qa),Du.Ga="timingevent",oa(Bu,qa);var zu={NO_ERROR:0,$a:1,nb:2,mb:3,hb:4,lb:5,ob:6,Da:7,TIMEOUT:8,rb:9},Ku={fb:"complete",Bb:"success",Ea:"error",Da:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",ib:"downloadprogress",Jb:"uploadprogress"};function Wu(){}function Qu(){}Wu.prototype.a=null;var Gu,$u={OPEN:"a",eb:"b",Ea:"c",qb:"d"};function Yu(){qa.call(this,"d")}function Ju(){qa.call(this,"c")}function Xu(){}function Zu(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new ku(this),this.P=tc,this.R=new Cu(t=xa?125:void 0),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}oa(Yu,qa),oa(Ju,qa),oa(Xu,Wu),Gu=new Xu;var tc=45e3,ec={},nc={};function rc(t,e,n){t.H=1,t.i=Ec(bc(e)),t.j=n,t.I=!0,ic(t,null)}function ic(t,e){t.u=ia(),ac(t),t.l=bc(t.i);var n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),Fc(n.b,"t",r),t.D=0,t.a=jl(t.g,t.g.C?e:null),0<t.O&&(t.F=new xu(na(t.Ca,t,t.a),t.O)),Au(t.J,t.a,"readystatechange",t.Xa),e=t.B?ba(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),Vu(1),function(t,e,n,r,i,o){t.info(function(){if(t.a)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");s=2<=h.length&&"type"==h[1]?s+(l+"=")+c+"&":s+(l+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s})}(t.c,t.m,t.l,t.f,t.S,t.j)}function oc(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=sc(t,n);if(i==nc){4==e&&(t.h=4,qu(14),r=!1),Ru(t.c,t.f,null,"[Incomplete Response]");break}if(i==ec){t.h=4,qu(15),Ru(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}Ru(t.c,t.f,i,null),dc(t,i)}4==e&&0==n.length&&(t.h=1,qu(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.V&&(t.V=!0,(e=t.g).a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),Cl(e),e.F=!0,qu(11))):(Ru(t.c,t.f,n,"[Invalid Chunked Response]"),hc(t),lc(t))}function sc(t,e){var n=t.D,r=e.indexOf("\n",n);return-1==r?nc:(n=Number(e.substring(n,r)),isNaN(n)?ec:(r+=1)+n>e.length?nc:(e=e.substr(r,n),t.D=r+n,e))}function ac(t){t.T=ia()+t.P,uc(t,t.P)}function uc(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=Hu(na(t.Va,t),e)}function cc(t){t.o&&(Gs.clearTimeout(t.o),t.o=null)}function lc(t){0==t.g.v||t.A||Il(t.g,t)}function hc(t){cc(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,Eu(t.R),ju(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function dc(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||Kc(n.b,t)))if(n.I=t.N,!t.C&&Kc(n.b,t)&&3==n.v){try{var r=n.ka.a.parse(e)}catch(g_){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;Tl(n),gl(n)}Sl(n),qu(18)}}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&0==n.o&&!n.m&&(n.m=Hu(na(n.Sa,n),6e3));if(1>=zc(n.b)&&n.ea){try{n.ea()}catch(g_){}n.ea=void 0}}else kl(n,11)}else if((t.C||n.a==t)&&Tl(n),!ha(e))for(e=r=n.ka.a.parse(e),r=0;r<e.length;r++)if(n.P=(i=e[r])[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ga=i[2];var o=i[3];null!=o&&(n.ha=o,n.c.info("VER="+n.ha));var s=i[4];null!=s&&(n.pa=s,n.c.info("SVER="+n.pa));var a=i[5];if(null!=a&&"number"==typeof a&&0<a){var u=1.5*a;n.D=u,n.c.info("backChannelRequestTimeoutMs_="+u)}u=n;var c=t.a;if(c){var l=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=u.b;!h.a&&(pa(l,"spdy")||pa(l,"quic")||pa(l,"h2"))&&(h.f=h.g,h.a=new Set,h.b&&(Wc(h,h.b),h.b=null))}if(u.A){var d=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;d&&(u.na=d,Cc(u.B,u.A,d))}}n.v=3,n.f&&n.f.ta(),n.U&&(n.N=ia()-t.u,n.c.info("Handshake RTT: "+n.N+"ms"));var f=t;if((u=n).la=Al(u,u.C?u.ga:null,u.fa),f.C){Qc(u.b,f);var p=f,g=u.D;g&&p.setTimeout(g),p.o&&(cc(p),ac(p)),u.a=f}else Ol(u);0<n.g.length&&vl(n)}else"stop"!=i[0]&&"close"!=i[0]||kl(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?kl(n,7):pl(n):"noop"!=i[0]&&n.f&&n.f.sa(i),n.o=0);Vu(4)}catch(g_){}}function fc(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(Ys(t)||"string"==typeof t)ua(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(Ys(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(Ys(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function pc(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof pc)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function gc(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];mc(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)mc(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function mc(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(Ks=Zu.prototype).setTimeout=function(t){this.P=t},Ks.Xa=function(t){t=t.target;var e=this.F;e&&3==ll(t)?e.f():this.Ca(t)},Ks.Ca=function(t){try{if(t==this.a)t:{var e=ll(this.a),n=this.a.ua(),r=this.a.W();if(!(3>e||3==e&&!xa&&!this.a.$())){this.A||4!=e||7==n||Vu(8==n||0>=r?3:2),cc(this);var i=this.a.W();this.N=i;var o=this.a.$();if(this.b=200==i,function(t,e,n,r,i,o,s){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s})}(this.c,this.m,this.l,this.f,this.S,e,i),this.b){if(this.U&&!this.C){e:{if(this.a){var s,a=this.a;if((s=a.a?a.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ha(s)){var u=s;break e}}u=null}if(!u){this.b=!1,this.h=3,qu(12),hc(this),lc(this);break t}Ru(this.c,this.f,u,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,dc(this,u)}this.I?(oc(this,e,o),xa&&this.b&&3==e&&(Au(this.J,this.R,"tick",this.Wa),this.R.start())):(Ru(this.c,this.f,o,null),dc(this,o)),4==e&&hc(this),this.b&&!this.A&&(4==e?Il(this.g,this):(this.b=!1,ac(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,qu(12)):(this.h=0,qu(13)),hc(this),lc(this)}}}catch(c){}},Ks.Wa=function(){if(this.a){var t=ll(this.a),e=this.a.$();this.D<e.length&&(cc(this),oc(this,t,e),this.b&&4!=t&&ac(this))}},Ks.cancel=function(){this.A=!0,hc(this)},Ks.Va=function(){this.o=null;var t=ia();0<=t-this.T?(function(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.c,this.l),2!=this.H&&(Vu(3),qu(17)),hc(this),this.h=2,lc(this)):uc(this,this.T-t)},(Ks=pc.prototype).K=function(){gc(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},Ks.L=function(){return gc(this),this.a.concat()},Ks.get=function(t,e){return mc(this.b,t)?this.b[t]:e},Ks.set=function(t,e){mc(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},Ks.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var yc=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function vc(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof vc){this.a=void 0!==e?e:t.a,_c(this,t.f),this.j=t.j,wc(this,t.c),Oc(this,t.h),this.g=t.g,e=t.b;var n=new Rc;n.c=e.c,e.a&&(n.a=new pc(e.a),n.b=e.b),Sc(this,n),this.i=t.i}else t&&(n=String(t).match(yc))?(this.a=!!e,_c(this,n[1]||"",!0),this.j=Tc(n[2]||""),wc(this,n[3]||"",!0),Oc(this,n[4]),this.g=Tc(n[5]||"",!0),Sc(this,n[6]||"",!0),this.i=Tc(n[7]||"")):(this.a=!!e,this.b=new Rc(null,this.a))}function bc(t){return new vc(t)}function _c(t,e,n){t.f=n?Tc(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function wc(t,e,n){t.c=n?Tc(e,!0):e}function Oc(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function Sc(t,e,n){e instanceof Rc?(t.b=e,function(t,e){e&&!t.f&&(Dc(t),t.c=null,t.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(Lc(this,e),Fc(this,n,t))},t)),t.f=e}(t.b,t.a)):(n||(e=Ic(e,jc)),t.b=new Rc(e,t.a))}function Cc(t,e,n){t.b.set(e,n)}function Ec(t){return Cc(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^ia()).toString(36)),t}function Tc(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Ic(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,xc),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function xc(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}vc.prototype.toString=function(){var t=[],e=this.f;e&&t.push(Ic(e,kc,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(Ic(e,kc,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(Ic(n,"/"==n.charAt(0)?Ac:Nc,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",Ic(n,Pc)),t.join("")};var kc=/[#\/\?@]/g,Nc=/[#\?:]/g,Ac=/[#\?]/g,jc=/[#\?@]/g,Pc=/#/g;function Rc(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Dc(t){t.a||(t.a=new pc,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function Lc(t,e){Dc(t),e=Vc(t,e),mc(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,mc((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&gc(t)))}function Mc(t,e){return Dc(t),e=Vc(t,e),mc(t.a.b,e)}function Fc(t,e,n){Lc(t,e),0<n.length&&(t.c=null,t.a.set(Vc(t,e),la(n)),t.b+=n.length)}function Vc(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(Ks=Rc.prototype).add=function(t,e){Dc(this),this.c=null,t=Vc(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},Ks.forEach=function(t,e){Dc(this),this.a.forEach(function(n,r){ua(n,function(n){t.call(e,n,r,this)},this)},this)},Ks.L=function(){Dc(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},Ks.K=function(t){Dc(this);var e=[];if("string"==typeof t)Mc(this,t)&&(e=ca(e,this.a.get(Vc(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=ca(e,t[n])}return e},Ks.set=function(t,e){return Dc(this),this.c=null,Mc(this,t=Vc(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},Ks.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},Ks.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var Uc=function(){return function(t,e){this.b=t,this.a=e}}();function qc(t){this.g=t||Bc,t=Gs.PerformanceNavigationTiming?0<(t=Gs.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(Gs.ia&&Gs.ia.ya&&Gs.ia.ya()&&Gs.ia.ya().Lb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var Bc=10;function Hc(t){return!!t.b||!!t.a&&t.a.size>=t.f}function zc(t){return t.b?1:t.a?t.a.size:0}function Kc(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function Wc(t,e){t.a?t.a.add(e):t.b=e}function Qc(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function Gc(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var i=zs(t.a.values()),o=i.next();!o.done;o=i.next())r=r.concat(o.value.s)}catch(s){e={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return la(t.c)}function $c(){}function Yc(){this.a=new $c}function Jc(t,e,n){var r=n||"";try{fc(t,function(t,n){var i=t;Js(t)&&(i=fu(t)),e.push(r+n+"="+encodeURIComponent(i))})}catch(Y_){throw e.push(r+"type="+encodeURIComponent("_badmap")),Y_}}function Xc(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}qc.prototype.cancel=function(){var t,e;if(this.c=Gc(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=zs(this.a.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(i){t={error:i}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},$c.prototype.stringify=function(t){return Gs.JSON.stringify(t,void 0)},$c.prototype.parse=function(t){return Gs.JSON.parse(t,void 0)};var Zc=Gs.JSON.parse;function tl(t){lu.call(this),this.headers=new pc,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=el,this.D=this.F=!1}oa(tl,lu);var el="",nl=/^https?$/i,rl=["POST","PUT"];function il(t){return"content-type"==t.toLowerCase()}function ol(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,sl(t),ul(t)}function sl(t){t.u||(t.u=!0,hu(t,"complete"),hu(t,"error"))}function al(t){if(t.b&&void 0!==Qs&&(!t.s[1]||4!=ll(t)||2!=t.W()))if(t.l&&4==ll(t))Tu(t.za,0,t);else if(hu(t,"readystatechange"),4==ll(t)){t.b=!1;try{var e,n=t.W();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.B).match(yc)[1]||null;if(!o&&Gs.self&&Gs.self.location){var s=Gs.self.location.protocol;o=s.substr(0,s.length-1)}i=!nl.test(o?o.toLowerCase():"")}e=i}if(e)hu(t,"complete"),hu(t,"success");else{t.h=6;try{var a=2<ll(t)?t.a.statusText:""}catch(n){a=""}t.f=a+" ["+t.W()+"]",sl(t)}}finally{ul(t)}}}function ul(t,e){if(t.a){cl(t);var n=t.a,r=t.s[0]?$s:null;t.a=null,t.s=null,e||hu(t,"ready");try{n.onreadystatechange=r}catch(Y_){}}}function cl(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(Gs.clearTimeout(t.m),t.m=null)}function ll(t){return t.a?t.a.readyState:0}function hl(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return va(t,function(t,n){e+=n,e+=":",e+=t,e+="\r\n"}),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Cc(t,e,n))}function dl(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function fl(t){this.pa=0,this.g=[],this.c=new Pu,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Oa=this.R=0,this.La=dl("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Ha=dl("baseRetryDelayMs",5e3,t),this.Ra=dl("retryDelaySeedMs",1e4,t),this.Ma=dl("forwardChannelMaxRetries",2,t),this.ma=dl("forwardChannelRequestTimeoutMs",2e4,t),this.Na=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new qc(t&&t.concurrentRequestLimit),this.ka=new Yc,this.da=t&&t.fastHandshake||!1,this.Ia=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&t&&t.detectBufferingProxy||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ka=t&&t.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function pl(t){if(ml(t),3==t.v){var e=t.R++,n=bc(t.B);Cc(n,"SID",t.J),Cc(n,"RID",e),Cc(n,"TYPE","terminate"),_l(t,n),(e=new Zu(t,t.c,e,void 0)).H=2,e.i=Ec(bc(n)),n=!1,Gs.navigator&&Gs.navigator.sendBeacon&&(n=Gs.navigator.sendBeacon(e.i.toString(),"")),!n&&Gs.Image&&((new Image).src=e.i,n=!0),n||(e.a=jl(e.g,null),e.a.ba(e.i)),e.u=ia(),ac(e)}Nl(t)}function gl(t){t.a&&(Cl(t),t.a.cancel(),t.a=null)}function ml(t){gl(t),t.j&&(Gs.clearTimeout(t.j),t.j=null),Tl(t),t.b.cancel(),t.h&&("number"==typeof t.h&&Gs.clearTimeout(t.h),t.h=null)}function yl(t,e){t.g.push(new Uc(t.Oa++,e)),3==t.v&&vl(t)}function vl(t){Hc(t.b)||t.h||(t.h=!0,_u(t.Ba,t),t.u=0)}function bl(t,e){var n;n=e?e.f:t.R++;var r=bc(t.B);Cc(r,"SID",t.J),Cc(r,"RID",n),Cc(r,"AID",t.P),_l(t,r),t.i&&t.l&&hl(r,t.i,t.l),n=new Zu(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=wl(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),Wc(t.b,n),rc(n,r,e)}function _l(t,e){t.f&&fc({},function(t,n){Cc(e,n,t)})}function wl(t,e,n){n=Math.min(t.g.length,n);var r=t.f?na(t.f.Ja,t.f,t):null;t:for(var i=t.g,o=-1;;){var s=["count="+n];-1==o?0<n?s.push("ofs="+(o=i[0].b)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].b,l=i[u].a;if(0>(c-=o))o=Math.max(0,i[u].b-100),a=!1;else try{Jc(l,s,"req"+c+"_")}catch(lh){r&&r(l)}}if(a){r=s.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function Ol(t){t.a||t.j||(t.T=1,_u(t.Aa,t),t.o=0)}function Sl(t){return!(t.a||t.j||3<=t.o||(t.T++,t.j=Hu(na(t.Aa,t),xl(t,t.o)),t.o++,0))}function Cl(t){null!=t.s&&(Gs.clearTimeout(t.s),t.s=null)}function El(t){t.a=new Zu(t,t.c,"rpc",t.T),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=bc(t.la);Cc(e,"RID","rpc"),Cc(e,"SID",t.J),Cc(e,"CI",t.H?"0":"1"),Cc(e,"AID",t.P),_l(t,e),Cc(e,"TYPE","xmlhttp"),t.i&&t.l&&hl(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=Ec(bc(e)),n.j=null,n.I=!0,ic(n,t)}function Tl(t){null!=t.m&&(Gs.clearTimeout(t.m),t.m=null)}function Il(t,e){var n=null;if(t.a==e){Tl(t),Cl(t),t.a=null;var r=2}else{if(!Kc(t.b,e))return;n=e.s,Qc(t.b,e),r=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==r){n=e.j?e.j.length:0,e=ia()-e.u;var i=t.u;hu(r=Mu(),new Bu(r,n,e,i)),vl(t)}else Ol(t);else if(3==(i=e.h)||0==i&&0<t.I||!(1==r&&function(t,e){return!(zc(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.g=e.s.concat(t.g),0):1==t.v||2==t.v||t.u>=(t.La?0:t.Ma)||(t.h=Hu(na(t.Ba,t,e),xl(t,t.u)),t.u++,0)))}(t,e)||2==r&&Sl(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:kl(t,5);break;case 4:kl(t,10);break;case 3:kl(t,6);break;default:kl(t,2)}}function xl(t,e){var n=t.Ha+Math.floor(Math.random()*t.Ra);return t.f||(n*=2),n*e}function kl(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var r=na(t.Ya,t);n||(n=new vc("//www.google.com/images/cleardot.gif"),Gs.location&&"http"==Gs.location.protocol||_c(n,"https"),Ec(n)),function(t,e){var n=new Pu;if(Gs.Image){var r=new Image;r.onload=ra(Xc,n,r,"TestLoadImage: loaded",!0,e),r.onerror=ra(Xc,n,r,"TestLoadImage: error",!1,e),r.onabort=ra(Xc,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=ra(Xc,n,r,"TestLoadImage: timeout",!1,e),Gs.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else qu(2);t.v=0,t.f&&t.f.ra(e),Nl(t),ml(t)}function Nl(t){t.v=0,t.I=-1,t.f&&(0==Gc(t.b).length&&0==t.g.length||(t.b.c.length=0,la(t.g),t.g.length=0),t.f.qa())}function Al(t,e,n){var r=function(t){return t instanceof vc?bc(t):new vc(t,void 0)}(n);if(""!=r.c)e&&wc(r,e+"."+r.c),Oc(r,r.h);else{var i=Gs.location;r=function(t,e,n,r){var i=new vc(null,void 0);return t&&_c(i,t),e&&wc(i,e),n&&Oc(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.V&&va(t.V,function(t,e){Cc(r,e,t)}),n=t.na,(e=t.A)&&n&&Cc(r,e,n),Cc(r,"VER",t.ha),_l(t,r),r}function jl(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new tl(t.Na)).F=t.C,e}function Pl(){}function Rl(){if(Ta&&!(10<=Number(Ma)))throw Error("Environmental error: no available transport.")}function Dl(t,e){lu.call(this),this.a=new fl(e),this.o=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!ha(t)&&(this.a.i=t),this.m=e&&e.supportsCrossDomainXhr||!1,this.l=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!ha(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&e in(t=this.b)&&delete t[e]),this.f=new Fl(this)}function Ll(t){Yu.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function Ml(){Ju.call(this),this.status=1}function Fl(t){this.a=t}(Ks=tl.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=function(t){var e;return(e=t.a)||(e=t.a={}),e}(this.H?this.H:Gu),this.a.onreadystatechange=na(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(o){return void ol(this,o)}t=n||"";var i=new pc(this.headers);r&&fc(r,function(t,e){i.set(e,t)}),r=function(t){t:{for(var e=il,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.L()),n=Gs.FormData&&t instanceof Gs.FormData,!(0<=aa(rl,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(t,e){this.a.setRequestHeader(e,t)},this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{cl(this),0<this.o&&((this.D=function(t){return Ta&&La(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=na(this.xa,this)):this.m=Tu(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(o){ol(this,o)}},Ks.xa=function(){void 0!==Qs&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,hu(this,"timeout"),this.abort(8))},Ks.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,hu(this,"complete"),hu(this,"abort"),ul(this))},Ks.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),ul(this,!0)),tl.X.G.call(this)},Ks.za=function(){this.j||(this.A||this.l||this.g?al(this):this.Ua())},Ks.Ua=function(){al(this)},Ks.W=function(){try{return 2<ll(this)?this.a.status:-1}catch(Ca){return-1}},Ks.$=function(){try{return this.a?this.a.responseText:""}catch(Ca){return""}},Ks.Pa=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Zc(e)}},Ks.ua=function(){return this.h},Ks.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(Ks=fl.prototype).ha=8,Ks.v=1,Ks.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new Zu(this,this.c,t,void 0),r=this.l;if(this.O&&(r?wa(r=ba(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=wl(this,n,e),Cc(i=bc(this.B),"RID",t),Cc(i,"CVER",22),this.A&&Cc(i,"X-HTTP-Session-Id",this.A),_l(this,i),this.i&&r&&hl(i,this.i,r),Wc(this.b,n),this.Ia&&Cc(i,"TYPE","init"),this.da?(Cc(i,"$req",e),Cc(i,"SID","null"),n.U=!0,rc(n,i,null)):rc(n,i,e),this.v=2}}else 3==this.v&&(t?bl(this,t):0==this.g.length||Hc(this.b)||bl(this))},Ks.Aa=function(){if(this.j=null,El(this),this.U&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=Hu(na(this.Ta,this),t)}},Ks.Ta=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,qu(10),gl(this),El(this))},Ks.Sa=function(){null!=this.m&&(this.m=null,gl(this),Sl(this),qu(19))},Ks.Ya=function(t){t?(this.c.info("Successfully pinged google.com"),qu(2)):(this.c.info("Failed to ping google.com"),qu(1))},(Ks=Pl.prototype).ta=function(){},Ks.sa=function(){},Ks.ra=function(){},Ks.qa=function(){},Ks.Ja=function(){},Rl.prototype.a=function(t,e){return new Dl(t,e)},oa(Dl,lu),Dl.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var t=this.a,e=this.o,n=this.b||void 0;qu(0),t.fa=e,t.V=n||{},t.H=t.S,t.B=Al(t,null,t.fa),vl(t)},Dl.prototype.close=function(){pl(this.a)},Dl.prototype.h=function(t){if("string"==typeof t){var e={};e.__data__=t,yl(this.a,e)}else this.l?((e={}).__data__=fu(t),yl(this.a,e)):yl(this.a,t)},Dl.prototype.G=function(){this.a.f=null,delete this.f,pl(this.a),delete this.a,Dl.X.G.call(this)},oa(Ll,Yu),oa(Ml,Ju),oa(Fl,Pl),Fl.prototype.ta=function(){hu(this.a,"a")},Fl.prototype.sa=function(t){hu(this.a,new Ll(t))},Fl.prototype.ra=function(t){hu(this.a,new Ml(t))},Fl.prototype.qa=function(){hu(this.a,"b")},Rl.prototype.createWebChannel=Rl.prototype.a,Dl.prototype.send=Dl.prototype.h,Dl.prototype.open=Dl.prototype.g,Dl.prototype.close=Dl.prototype.close,zu.NO_ERROR=0,zu.TIMEOUT=8,zu.HTTP_ERROR=6,Ku.COMPLETE="complete",Qu.EventType=$u,$u.OPEN="a",$u.CLOSE="b",$u.ERROR="c",$u.MESSAGE="d",lu.prototype.listen=lu.prototype.va,tl.prototype.listenOnce=tl.prototype.wa,tl.prototype.getLastError=tl.prototype.Qa,tl.prototype.getLastErrorCode=tl.prototype.ua,tl.prototype.getStatus=tl.prototype.W,tl.prototype.getResponseJson=tl.prototype.Pa,tl.prototype.getResponseText=tl.prototype.$,tl.prototype.send=tl.prototype.ba;var Vl=zu,Ul=Ku,ql=Du,Bl=Qu,Hl=tl,zl=n("mrSG"),Kl=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.t(t)},this.i=function(t){return e.writeSequenceNumber(t)})}return t.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},t}();Kl.o=-1;var Wl={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Ql=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return Object(zl.c)(e,t),e}(Error),Gl=new Bs.b("@firebase/firestore");function $l(){return Gl.logLevel}function Yl(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Gl.logLevel<=Bs.a.DEBUG){var r=e.map(Zl);Gl.debug.apply(Gl,Object(zl.f)(["Firestore (8.3.2): "+t],r))}}function Jl(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Gl.logLevel<=Bs.a.ERROR){var r=e.map(Zl);Gl.error.apply(Gl,Object(zl.f)(["Firestore (8.3.2): "+t],r))}}function Xl(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Gl.logLevel<=Bs.a.WARN){var r=e.map(Zl);Gl.warn.apply(Gl,Object(zl.f)(["Firestore (8.3.2): "+t],r))}}function Zl(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch(Y_){return t}}function th(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.3.2) INTERNAL ASSERTION FAILED: "+t;throw Jl(e),new Error(e)}function eh(t,e){t||th()}function nh(t,e){return t}function rh(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var ih=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=rh(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function oh(t,e){return t<e?-1:t>e?1:0}function sh(t,e,n){return t.length===e.length&&t.every(function(t,r){return n(t,e[r])})}function ah(t){return t+"\0"}var uh=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Ql(Wl.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Ql(Wl.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Ql(Wl.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Ql(Wl.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,1e6*(e-1e3*n))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?oh(this.nanoseconds,t.nanoseconds):oh(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),ch=function(){function t(t){this.timestamp=t}return t.fromTimestamp=function(e){return new t(e)},t.min=function(){return new t(new uh(0,0))},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t}();function lh(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function hh(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function dh(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var fh=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&th(),void 0===n?n=t.length-e:n>t.length-e&&th(),this.segments=t,this.offset=e,this.len=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(function(t){n.push(t)}):n.push(e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)},t.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),ph=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(zl.c)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new Ql(Wl.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter(function(t){return t.length>0}))}return new e(r)},e.emptyPath=function(){return new e([])},e}(fh),gh=/^[_a-zA-Z][_a-zA-Z0-9]*$/,mh=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(zl.c)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.isValidIdentifier=function(t){return gh.test(t)},e.prototype.canonicalString=function(){return this.toArray().map(function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t}).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new Ql(Wl.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new Ql(Wl.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new Ql(Wl.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new Ql(Wl.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.emptyPath=function(){return new e([])},e}(fh),yh=function(){function t(t){this.fields=t,t.sort(mh.comparator)}return t.prototype.covers=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].isPrefixOf(t))return!0;return!1},t.prototype.isEqual=function(t){return sh(this.fields,t.fields,function(t,e){return t.isEqual(e)})},t}(),vh=function(){function t(t){this.binaryString=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return btoa(this.binaryString)},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)},t.prototype.approximateByteSize=function(){return 2*this.binaryString.length},t.prototype.compareTo=function(t){return oh(this.binaryString,t.binaryString)},t.prototype.isEqual=function(t){return this.binaryString===t.binaryString},t}();vh.EMPTY_BYTE_STRING=new vh("");var bh=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function _h(t){if(eh(!!t),"string"==typeof t){var e=0,n=bh.exec(t);if(eh(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:wh(t.seconds),nanos:wh(t.nanos)}}function wh(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Oh(t){return"string"==typeof t?vh.fromBase64String(t):vh.fromUint8Array(t)}function Sh(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Ch(t){var e=t.mapValue.fields.__previous_value__;return Sh(e)?Ch(e):e}function Eh(t){var e=_h(t.mapValue.fields.__local_write_time__.timestampValue);return new uh(e.seconds,e.nanos)}function Th(t){return null==t}function Ih(t){return 0===t&&1/t==-1/0}function xh(t){return"number"==typeof t&&Number.isInteger(t)&&!Ih(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var kh=function(){function t(t){this.path=t}return t.fromPath=function(e){return new t(ph.fromString(e))},t.fromName=function(e){return new t(ph.fromString(e).popFirst(5))},t.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===ph.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return ph.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new ph(e.slice()))},t}();function Nh(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Sh(t)?4:10:th()}function Ah(t,e){var n=Nh(t);if(n!==Nh(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Eh(t).isEqual(Eh(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=_h(t.timestampValue),r=_h(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return Oh(t.bytesValue).isEqual(Oh(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return wh(t.geoPointValue.latitude)===wh(e.geoPointValue.latitude)&&wh(t.geoPointValue.longitude)===wh(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return wh(t.integerValue)===wh(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=wh(t.doubleValue),r=wh(e.doubleValue);return n===r?Ih(n)===Ih(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return sh(t.arrayValue.values||[],e.arrayValue.values||[],Ah);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(lh(n)!==lh(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Ah(n[i],r[i])))return!1;return!0}(t,e);default:return th()}}function jh(t,e){return void 0!==(t.values||[]).find(function(t){return Ah(t,e)})}function Ph(t,e){var n=Nh(t),r=Nh(e);if(n!==r)return oh(n,r);switch(n){case 0:return 0;case 1:return oh(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=wh(t.integerValue||t.doubleValue),r=wh(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return Rh(t.timestampValue,e.timestampValue);case 4:return Rh(Eh(t),Eh(e));case 5:return oh(t.stringValue,e.stringValue);case 6:return function(t,e){var n=Oh(t),r=Oh(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=oh(n[i],r[i]);if(0!==o)return o}return oh(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=oh(wh(t.latitude),wh(e.latitude));return 0!==n?n:oh(wh(t.longitude),wh(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=Ph(n[i],r[i]);if(o)return o}return oh(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=oh(r[s],o[s]);if(0!==a)return a;var u=Ph(n[r[s]],i[o[s]]);if(0!==u)return u}return oh(r.length,o.length)}(t.mapValue,e.mapValue);default:throw th()}}function Rh(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return oh(t,e);var n=_h(t),r=_h(e),i=oh(n.seconds,r.seconds);return 0!==i?i:oh(n.nanos,r.nanos)}function Dh(t){return Lh(t)}function Lh(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=_h(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Oh(t.bytesValue).toBase64():"referenceValue"in t?kh.fromName(t.referenceValue).toString():"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=Lh(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+Lh(t.fields[o])}return e+"}"}(t.mapValue):th();var e}function Mh(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function Fh(t){return!!t&&"integerValue"in t}function Vh(t){return!!t&&"arrayValue"in t}function Uh(t){return!!t&&"nullValue"in t}function qh(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Bh(t){return!!t&&"mapValue"in t}var Hh=function(){function t(t){this.overlayMap=new Map,this.partialValue=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(e){return t.extractNestedValue(this.buildProto(),e)},t.prototype.toProto=function(){return this.field(mh.emptyPath())},t.prototype.set=function(t,e){this.setOverlay(t,e)},t.prototype.setAll=function(t){var e=this;t.forEach(function(t,n){t?e.set(n,t):e.delete(n)})},t.prototype.delete=function(t){this.setOverlay(t,null)},t.prototype.isEqual=function(t){return Ah(this.buildProto(),t.buildProto())},t.prototype.setOverlay=function(t,e){for(var n=this.overlayMap,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===Nh(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(t.lastSegment(),e)},t.prototype.applyOverlay=function(e,n){var r=this,i=!1,o=t.extractNestedValue(this.partialValue,e),s=Bh(o)?Object.assign({},o.mapValue.fields):{};return n.forEach(function(t,n){if(t instanceof Map){var o=r.applyOverlay(e.child(n),t);null!=o&&(s[n]=o,i=!0)}else null!==t?(s[n]=t,i=!0):s.hasOwnProperty(n)&&(delete s[n],i=!0)}),i?{mapValue:{fields:s}}:null},t.prototype.buildProto=function(){var t=this.applyOverlay(mh.emptyPath(),this.overlayMap);return null!=t&&(this.partialValue=t,this.overlayMap.clear()),this.partialValue},t.extractNestedValue=function(t,e){if(e.isEmpty())return t;for(var n=t,r=0;r<e.length-1;++r){if(!n.mapValue.fields)return null;if(!Bh(n=n.mapValue.fields[e.get(r)]))return null}return(n=(n.mapValue.fields||{})[e.lastSegment()])||null},t.prototype.clone=function(){return new t(this.buildProto())},t}();function zh(t){var e=[];return hh(t.fields||{},function(t,n){var r=new mh([t]);if(Bh(n)){var i=zh(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++)e.push(r.child(s[o]))}else e.push(r)}),new yh(e)}var Kh=function(){function t(t,e,n,r,i){this.key=t,this.documentType=e,this.version=n,this.data=r,this.documentState=i}return t.newInvalidDocument=function(e){return new t(e,0,ch.min(),Hh.empty(),0)},t.newFoundDocument=function(e,n,r){return new t(e,1,n,r,0)},t.newNoDocument=function(e,n){return new t(e,2,n,Hh.empty(),0)},t.newUnknownDocument=function(e,n){return new t(e,3,n,Hh.empty(),2)},t.prototype.convertToFoundDocument=function(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this},t.prototype.convertToNoDocument=function(t){return this.version=t,this.documentType=2,this.data=Hh.empty(),this.documentState=0,this},t.prototype.convertToUnknownDocument=function(t){return this.version=t,this.documentType=3,this.data=Hh.empty(),this.documentState=2,this},t.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},t.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(t.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),t.prototype.isValidDocument=function(){return 0!==this.documentType},t.prototype.isFoundDocument=function(){return 1===this.documentType},t.prototype.isNoDocument=function(){return 2===this.documentType},t.prototype.isUnknownDocument=function(){return 3===this.documentType},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)},t.prototype.clone=function(){return new t(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.toProto())+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},t}(),Wh=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.h=null};function Qh(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new Wh(t,e,n,r,i,o,s)}function Gh(t){var e=nh(t);if(null===e.h){var n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(function(t){return function(t){return t.field.canonicalString()+t.op.toString()+Dh(t.value)}(t)}).join(","),n+="|ob:",n+=e.orderBy.map(function(t){return function(t){return t.field.canonicalString()+t.dir}(t)}).join(","),Th(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=ad(e.startAt)),e.endAt&&(n+="|ub:",n+=ad(e.endAt)),e.h=n}return e.h}function $h(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!cd(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if((i=t.filters[r]).op!==(o=e.filters[r]).op||!i.field.isEqual(o.field)||!Ah(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!hd(t.startAt,e.startAt)&&hd(t.endAt,e.endAt)}function Yh(t){return kh.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var Jh=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return Object(zl.c)(e,t),e.create=function(t,n,r){return t.isKeyField()?"in"===n||"not-in"===n?this.l(t,n,r):new Xh(t,n,r):"array-contains"===n?new nd(t,r):"in"===n?new rd(t,r):"not-in"===n?new id(t,r):"array-contains-any"===n?new od(t,r):new e(t,n,r)},e.l=function(t,e,n){return"in"===e?new Zh(t,n):new td(t,n)},e.prototype.matches=function(t){var e=t.data.field(this.field);return"!="===this.op?null!==e&&this.m(Ph(e,this.value)):null!==e&&Nh(this.value)===Nh(e)&&this.m(Ph(e,this.value))},e.prototype.m=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return th()}},e.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}(function(){}),Xh=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=kh.fromName(r.referenceValue),i}return Object(zl.c)(e,t),e.prototype.matches=function(t){var e=kh.comparator(t.key,this.key);return this.m(e)},e}(Jh),Zh=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=ed(0,n),r}return Object(zl.c)(e,t),e.prototype.matches=function(t){return this.keys.some(function(e){return e.isEqual(t.key)})},e}(Jh),td=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=ed(0,n),r}return Object(zl.c)(e,t),e.prototype.matches=function(t){return!this.keys.some(function(e){return e.isEqual(t.key)})},e}(Jh);function ed(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(function(t){return kh.fromName(t.referenceValue)})}var nd=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return Object(zl.c)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return Vh(e)&&jh(e.arrayValue,this.value)},e}(Jh),rd=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return Object(zl.c)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return null!==e&&jh(this.value.arrayValue,e)},e}(Jh),id=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return Object(zl.c)(e,t),e.prototype.matches=function(t){if(jh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.data.field(this.field);return null!==e&&!jh(this.value.arrayValue,e)},e}(Jh),od=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return Object(zl.c)(e,t),e.prototype.matches=function(t){var e=this,n=t.data.field(this.field);return!(!Vh(n)||!n.arrayValue.values)&&n.arrayValue.values.some(function(t){return jh(e.value.arrayValue,t)})},e}(Jh),sd=function(t,e){this.position=t,this.before=e};function ad(t){return(t.before?"b":"a")+":"+t.position.map(function(t){return Dh(t)}).join(",")}var ud=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function cd(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function ld(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.isKeyField()?kh.comparator(kh.fromName(s.referenceValue),n.key):Ph(s,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function hd(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!Ah(t.position[n],e.position[n]))return!1;return!0}var dd=function(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.p=null,this.T=null};function fd(t,e,n,r,i,o,s,a){return new dd(t,e,n,r,i,o,s,a)}function pd(t){return new dd(t)}function gd(t){return!Th(t.limit)&&"F"===t.limitType}function md(t){return!Th(t.limit)&&"L"===t.limitType}function yd(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function vd(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.g())return r.field}return null}function bd(t){return null!==t.collectionGroup}function _d(t){var e=nh(t);if(null===e.p){e.p=[];var n=vd(e),r=yd(e);if(null!==n&&null===r)n.isKeyField()||e.p.push(new ud(n)),e.p.push(new ud(mh.keyField(),"asc"));else{for(var i=!1,o=0,s=e.explicitOrderBy;o<s.length;o++){var a=s[o];e.p.push(a),a.field.isKeyField()&&(i=!0)}if(!i){var u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new ud(mh.keyField(),u))}}}return e.p}function wd(t){var e=nh(t);if(!e.T)if("F"===e.limitType)e.T=Qh(e.path,e.collectionGroup,_d(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=_d(e);r<i.length;r++){var o=i[r];n.push(new ud(o.field,"desc"===o.dir?"asc":"desc"))}var s=e.endAt?new sd(e.endAt.position,!e.endAt.before):null,a=e.startAt?new sd(e.startAt.position,!e.startAt.before):null;e.T=Qh(e.path,e.collectionGroup,n,e.filters,e.limit,s,a)}return e.T}function Od(t,e,n){return new dd(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Sd(t,e){return $h(wd(t),wd(e))&&t.limitType===e.limitType}function Cd(t){return Gh(wd(t))+"|lt:"+t.limitType}function Ed(t){return"Query(target="+function(t){var e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map(function(t){return(e=t).field.canonicalString()+" "+e.op+" "+Dh(e.value);var e}).join(", ")+"]"),Th(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map(function(t){return function(t){return t.field.canonicalString()+" ("+t.dir+")"}(t)}).join(", ")+"]"),t.startAt&&(e+=", startAt: "+ad(t.startAt)),t.endAt&&(e+=", endAt: "+ad(t.endAt)),"Target("+e+")"}(wd(t))+"; limitType="+t.limitType+")"}function Td(t,e){return e.isFoundDocument()&&function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):kh.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(var n=0,r=t.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===e.data.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!ld(t.startAt,_d(t),e)||t.endAt&&ld(t.endAt,_d(t),e))}(t,e)}function Id(t){return function(e,n){for(var r=!1,i=0,o=_d(t);i<o.length;i++){var s=o[i],a=xd(s,e,n);if(0!==a)return a;r=r||s.field.isKeyField()}return 0}}function xd(t,e,n){var r=t.field.isKeyField()?kh.comparator(e.key,n.key):function(t,e,n){var r=e.data.field(t),i=n.data.field(t);return null!==r&&null!==i?Ph(r,i):th()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return th()}}function kd(t,e){if(t.I){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ih(e)?"-0":e}}function Nd(t){return{integerValue:""+t}}function Ad(t,e){return xh(e)?Nd(e):kd(t,e)}var jd=function(){this._=void 0};function Pd(t,e,n){return t instanceof Ld?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof Md?Fd(t,e):t instanceof Vd?Ud(t,e):function(t,e){var n=Dd(t,e),r=Bd(n)+Bd(t.A);return Fh(n)&&Fh(t.A)?Nd(r):kd(t.R,r)}(t,e)}function Rd(t,e,n){return t instanceof Md?Fd(t,e):t instanceof Vd?Ud(t,e):n}function Dd(t,e){return t instanceof qd?Fh(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var Ld=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(zl.c)(e,t),e}(jd),Md=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(zl.c)(e,t),e}(jd);function Fd(t,e){for(var n=Hd(e),r=function(t){n.some(function(e){return Ah(e,t)})||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Vd=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(zl.c)(e,t),e}(jd);function Ud(t,e){for(var n=Hd(e),r=function(t){n=n.filter(function(e){return!Ah(e,t)})},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var qd=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).R=e,r.A=n,r}return Object(zl.c)(e,t),e}(jd);function Bd(t){return wh(t.integerValue||t.doubleValue)}function Hd(t){return Vh(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var zd=function(t,e){this.field=t,this.transform=e},Kd=function(t,e){this.version=t,this.transformResults=e},Wd=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.none=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function Qd(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}var Gd=function(){};function $d(t,e,n){t instanceof tf?function(t,e,n){var r=t.value.clone(),i=rf(t.fieldTransforms,e,n.transformResults);r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):t instanceof ef?function(t,e,n){if(Qd(t.precondition,e)){var r=rf(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(nf(t)),i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else e.convertToUnknownDocument(n.version)}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function Yd(t,e,n){t instanceof tf?function(t,e,n){if(Qd(t.precondition,e)){var r=t.value.clone(),i=of(t.fieldTransforms,n,e);r.setAll(i),e.convertToFoundDocument(Zd(e),r).setHasLocalMutations()}}(t,e,n):t instanceof ef?function(t,e,n){if(Qd(t.precondition,e)){var r=of(t.fieldTransforms,n,e),i=e.data;i.setAll(nf(t)),i.setAll(r),e.convertToFoundDocument(Zd(e),i).setHasLocalMutations()}}(t,e,n):function(t,e){Qd(t.precondition,e)&&e.convertToNoDocument(ch.min())}(t,e)}function Jd(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],s=e.data.field(o.field),a=Dd(o.transform,s||null);null!=a&&(null==n&&(n=Hh.empty()),n.set(o.field,a))}return n||null}function Xd(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&sh(t,e,function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof Md&&e instanceof Md||t instanceof Vd&&e instanceof Vd?sh(t.elements,e.elements,Ah):t instanceof qd&&e instanceof qd?Ah(t.A,e.A):t instanceof Ld&&e instanceof Ld}(t.transform,e.transform)}(t,e)})}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function Zd(t){return t.isFoundDocument()?t.version:ch.min()}var tf=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.precondition=r,o.fieldTransforms=i,o.type=0,o}return Object(zl.c)(e,t),e}(Gd),ef=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var s=this;return(s=t.call(this)||this).key=e,s.data=n,s.fieldMask=r,s.precondition=i,s.fieldTransforms=o,s.type=1,s}return Object(zl.c)(e,t),e}(Gd);function nf(t){var e=new Map;return t.fieldMask.fields.forEach(function(n){if(!n.isEmpty()){var r=t.data.field(n);e.set(n,r)}}),e}function rf(t,e,n){var r=new Map;eh(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,Rd(s,a,n[i]))}return r}function of(t,e,n){for(var r=new Map,i=0,o=t;i<o.length;i++){var s=o[i],a=s.transform,u=n.data.field(s.field);r.set(s.field,Pd(a,u,e))}return r}var sf,af,uf=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return Object(zl.c)(e,t),e}(Gd),cf=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return Object(zl.c)(e,t),e}(Gd),lf=function(t){this.count=t};function hf(t){switch(t){case Wl.OK:return th();case Wl.CANCELLED:case Wl.UNKNOWN:case Wl.DEADLINE_EXCEEDED:case Wl.RESOURCE_EXHAUSTED:case Wl.INTERNAL:case Wl.UNAVAILABLE:case Wl.UNAUTHENTICATED:return!1;case Wl.INVALID_ARGUMENT:case Wl.NOT_FOUND:case Wl.ALREADY_EXISTS:case Wl.PERMISSION_DENIED:case Wl.FAILED_PRECONDITION:case Wl.ABORTED:case Wl.OUT_OF_RANGE:case Wl.UNIMPLEMENTED:case Wl.DATA_LOSS:return!0;default:return th()}}function df(t){if(void 0===t)return Jl("GRPC error has no .code"),Wl.UNKNOWN;switch(t){case sf.OK:return Wl.OK;case sf.CANCELLED:return Wl.CANCELLED;case sf.UNKNOWN:return Wl.UNKNOWN;case sf.DEADLINE_EXCEEDED:return Wl.DEADLINE_EXCEEDED;case sf.RESOURCE_EXHAUSTED:return Wl.RESOURCE_EXHAUSTED;case sf.INTERNAL:return Wl.INTERNAL;case sf.UNAVAILABLE:return Wl.UNAVAILABLE;case sf.UNAUTHENTICATED:return Wl.UNAUTHENTICATED;case sf.INVALID_ARGUMENT:return Wl.INVALID_ARGUMENT;case sf.NOT_FOUND:return Wl.NOT_FOUND;case sf.ALREADY_EXISTS:return Wl.ALREADY_EXISTS;case sf.PERMISSION_DENIED:return Wl.PERMISSION_DENIED;case sf.FAILED_PRECONDITION:return Wl.FAILED_PRECONDITION;case sf.ABORTED:return Wl.ABORTED;case sf.OUT_OF_RANGE:return Wl.OUT_OF_RANGE;case sf.UNIMPLEMENTED:return Wl.UNIMPLEMENTED;case sf.DATA_LOSS:return Wl.DATA_LOSS;default:return th()}}(af=sf||(sf={}))[af.OK=0]="OK",af[af.CANCELLED=1]="CANCELLED",af[af.UNKNOWN=2]="UNKNOWN",af[af.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",af[af.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",af[af.NOT_FOUND=5]="NOT_FOUND",af[af.ALREADY_EXISTS=6]="ALREADY_EXISTS",af[af.PERMISSION_DENIED=7]="PERMISSION_DENIED",af[af.UNAUTHENTICATED=16]="UNAUTHENTICATED",af[af.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",af[af.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",af[af.ABORTED=10]="ABORTED",af[af.OUT_OF_RANGE=11]="OUT_OF_RANGE",af[af.UNIMPLEMENTED=12]="UNIMPLEMENTED",af[af.INTERNAL=13]="INTERNAL",af[af.UNAVAILABLE=14]="UNAVAILABLE",af[af.DATA_LOSS=15]="DATA_LOSS";var ff=function(){function t(t,e){this.comparator=t,this.root=e||gf.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,gf.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,gf.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal(function(e,n){return t(e,n),!1})},t.prototype.toString=function(){var t=[];return this.inorderTraversal(function(e,n){return t.push(e+":"+n),!1}),"{"+t.join(", ")+"}"},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new pf(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new pf(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new pf(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new pf(this.root,t,this.comparator,!0)},t}(),pf=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),gf=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw th();if(this.right.isRed())throw th();var t=this.left.check();if(t!==this.right.check())throw th();return t+(this.isRed()?0:1)},t}();gf.EMPTY=null,gf.RED=!0,gf.BLACK=!1,gf.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw th()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw th()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw th()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw th()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw th()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new gf(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}());var mf=function(){function t(t){this.comparator=t,this.data=new ff(this.comparator)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new yf(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new yf(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach(function(t){e=e.add(t)}),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach(function(e){t.push(e)}),t},t.prototype.toString=function(){var t=[];return this.forEach(function(e){return t.push(e)}),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),yf=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),vf=new ff(kh.comparator);function bf(){return vf}var _f=new ff(kh.comparator);function wf(){return _f}var Of=new ff(kh.comparator);function Sf(){return Of}var Cf=new mf(kh.comparator);function Ef(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=Cf,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var Tf=new mf(oh);function If(){return Tf}var xf=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r=new Map;return r.set(e,kf.createSynthesizedTargetChangeForCurrentChange(e,n)),new t(ch.min(),r,If(),bf(),Ef())},t}(),kf=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(vh.EMPTY_BYTE_STRING,n,Ef(),Ef(),Ef())},t}(),Nf=function(t,e,n,r){this.v=t,this.removedTargetIds=e,this.key=n,this.P=r},Af=function(t,e){this.targetId=t,this.V=e},jf=function(t,e,n,r){void 0===n&&(n=vh.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},Pf=function(){function t(){this.S=0,this.D=Lf(),this.C=vh.EMPTY_BYTE_STRING,this.N=!1,this.F=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"k",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"O",{get:function(){return this.F},enumerable:!1,configurable:!0}),t.prototype.$=function(t){t.approximateByteSize()>0&&(this.F=!0,this.C=t)},t.prototype.M=function(){var t=Ef(),e=Ef(),n=Ef();return this.D.forEach(function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:th()}}),new kf(this.C,this.N,t,e,n)},t.prototype.L=function(){this.F=!1,this.D=Lf()},t.prototype.B=function(t,e){this.F=!0,this.D=this.D.insert(t,e)},t.prototype.q=function(t){this.F=!0,this.D=this.D.remove(t)},t.prototype.U=function(){this.S+=1},t.prototype.K=function(){this.S-=1},t.prototype.j=function(){this.F=!0,this.N=!0},t}(),Rf=function(){function t(t){this.W=t,this.G=new Map,this.H=bf(),this.J=Df(),this.Y=new mf(oh)}return t.prototype.X=function(t){for(var e=0,n=t.v;e<n.length;e++){var r=n[e];t.P&&t.P.isFoundDocument()?this.Z(r,t.P):this.tt(r,t.key,t.P)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)this.tt(r=o[i],t.key,t.P)},t.prototype.et=function(t){var e=this;this.forEachTarget(t,function(n){var r=e.nt(n);switch(t.state){case 0:e.st(n)&&r.$(t.resumeToken);break;case 1:r.K(),r.k||r.L(),r.$(t.resumeToken);break;case 2:r.K(),r.k||e.removeTarget(n);break;case 3:e.st(n)&&(r.j(),r.$(t.resumeToken));break;case 4:e.st(n)&&(e.it(n),r.$(t.resumeToken));break;default:th()}})},t.prototype.forEachTarget=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.G.forEach(function(t,r){n.st(r)&&e(r)})},t.prototype.rt=function(t){var e=t.targetId,n=t.V.count,r=this.ot(e);if(r){var i=r.target;if(Yh(i))if(0===n){var o=new kh(i.path);this.tt(e,o,Kh.newNoDocument(o,ch.min()))}else eh(1===n);else this.ct(e)!==n&&(this.it(e),this.Y=this.Y.add(e))}},t.prototype.ut=function(t){var e=this,n=new Map;this.G.forEach(function(r,i){var o=e.ot(i);if(o){if(r.current&&Yh(o.target)){var s=new kh(o.target.path);null!==e.H.get(s)||e.at(i,s)||e.tt(i,s,Kh.newNoDocument(s,t))}r.O&&(n.set(i,r.M()),r.L())}});var r=Ef();this.J.forEach(function(t,n){var i=!0;n.forEachWhile(function(t){var n=e.ot(t);return!n||2===n.purpose||(i=!1,!1)}),i&&(r=r.add(t))});var i=new xf(t,n,this.Y,this.H,r);return this.H=bf(),this.J=Df(),this.Y=new mf(oh),i},t.prototype.Z=function(t,e){if(this.st(t)){var n=this.at(t,e.key)?2:0;this.nt(t).B(e.key,n),this.H=this.H.insert(e.key,e),this.J=this.J.insert(e.key,this.ht(e.key).add(t))}},t.prototype.tt=function(t,e,n){if(this.st(t)){var r=this.nt(t);this.at(t,e)?r.B(e,1):r.q(e),this.J=this.J.insert(e,this.ht(e).delete(t)),n&&(this.H=this.H.insert(e,n))}},t.prototype.removeTarget=function(t){this.G.delete(t)},t.prototype.ct=function(t){var e=this.nt(t).M();return this.W.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.U=function(t){this.nt(t).U()},t.prototype.nt=function(t){var e=this.G.get(t);return e||(e=new Pf,this.G.set(t,e)),e},t.prototype.ht=function(t){var e=this.J.get(t);return e||(e=new mf(oh),this.J=this.J.insert(t,e)),e},t.prototype.st=function(t){var e=null!==this.ot(t);return e||Yl("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.ot=function(t){var e=this.G.get(t);return e&&e.k?null:this.W.lt(t)},t.prototype.it=function(t){var e=this;this.G.set(t,new Pf),this.W.getRemoteKeysForTarget(t).forEach(function(n){e.tt(t,n,null)})},t.prototype.at=function(t,e){return this.W.getRemoteKeysForTarget(t).has(e)},t}();function Df(){return new ff(kh.comparator)}function Lf(){return new ff(kh.comparator)}var Mf={asc:"ASCENDING",desc:"DESCENDING"},Ff={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Vf=function(t,e){this.databaseId=t,this.I=e};function Uf(t,e){return t.I?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function qf(t,e){return t.I?e.toBase64():e.toUint8Array()}function Bf(t,e){return Uf(t,e.toTimestamp())}function Hf(t){return eh(!!t),ch.fromTimestamp(function(t){var e=_h(t);return new uh(e.seconds,e.nanos)}(t))}function zf(t,e){return function(t){return new ph(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function Kf(t){var e=ph.fromString(t);return eh(gp(e)),e}function Wf(t,e){return zf(t.databaseId,e.path)}function Qf(t,e){var n=Kf(e);if(n.get(1)!==t.databaseId.projectId)throw new Ql(Wl.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Ql(Wl.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new kh(Jf(n))}function Gf(t,e){return zf(t.databaseId,e)}function $f(t){var e=Kf(t);return 4===e.length?ph.emptyPath():Jf(e)}function Yf(t){return new ph(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Jf(t){return eh(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function Xf(t,e,n){return{name:Wf(t,e),fields:n.toProto().mapValue.fields}}function Zf(t,e,n){var r=Qf(t,e.name),i=Hf(e.updateTime),o=new Hh({mapValue:{fields:e.fields}}),s=Kh.newFoundDocument(r,i,o);return n&&s.setHasCommittedMutations(),n?s.setHasCommittedMutations():s}function tp(t,e){var n;if(e instanceof tf)n={update:Xf(t,e.key,e.value)};else if(e instanceof uf)n={delete:Wf(t,e.key)};else if(e instanceof ef)n={update:Xf(t,e.key,e.data),updateMask:pp(e.fieldMask)};else{if(!(e instanceof cf))return th();n={verify:Wf(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(function(t){return function(t,e){var n=e.transform;if(n instanceof Ld)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Md)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Vd)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof qd)return{fieldPath:e.field.canonicalString(),increment:n.A};throw th()}(0,t)})),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:Bf(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:th()}(t,e.precondition)),n}function ep(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?Wd.updateTime(Hf(t.updateTime)):void 0!==t.exists?Wd.exists(t.exists):Wd.none()}(e.currentDocument):Wd.none(),r=e.updateTransforms?e.updateTransforms.map(function(e){return function(t,e){var n=null;"setToServerValue"in e?(eh("REQUEST_TIME"===e.setToServerValue),n=new Ld):"appendMissingElements"in e?n=new Md(e.appendMissingElements.values||[]):"removeAllFromArray"in e?n=new Vd(e.removeAllFromArray.values||[]):"increment"in e?n=new qd(t,e.increment):th();var r=mh.fromServerFormat(e.fieldPath);return new zd(r,n)}(t,e)}):[];if(e.update){var i=Qf(t,e.update.name),o=new Hh({mapValue:{fields:e.update.fields}});if(e.updateMask){var s=function(t){return new yh((t.fieldPaths||[]).map(function(t){return mh.fromServerFormat(t)}))}(e.updateMask);return new ef(i,o,s,n,r)}return new tf(i,o,n,r)}if(e.delete){var a=Qf(t,e.delete);return new uf(a,n)}if(e.verify){var u=Qf(t,e.verify);return new cf(u,n)}return th()}function np(t,e){return{documents:[Gf(t,e.path)]}}function rp(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=Gf(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Gf(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(t){if(0!==t.length){var e=t.map(function(t){return function(t){if("=="===t.op){if(qh(t.value))return{unaryFilter:{field:lp(t.field),op:"IS_NAN"}};if(Uh(t.value))return{unaryFilter:{field:lp(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(qh(t.value))return{unaryFilter:{field:lp(t.field),op:"IS_NOT_NAN"}};if(Uh(t.value))return{unaryFilter:{field:lp(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:lp(t.field),op:cp(t.op),value:t.value}}}(t)});return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map(function(t){return function(t){return{field:lp(t.field),direction:up(t.dir)}}(t)})}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(t,e){return t.I||Th(e)?e:{value:e}}(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=sp(e.startAt)),e.endAt&&(n.structuredQuery.endAt=sp(e.endAt)),n}function ip(t){var e=$f(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){eh(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=op(n.where));var a=[];n.orderBy&&(a=n.orderBy.map(function(t){return function(t){return new ud(hp(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)}));var u=null;n.limit&&(u=function(t){var e;return Th(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=ap(n.startAt));var l=null;return n.endAt&&(l=ap(n.endAt)),fd(e,i,a,s,u,"F",c,l)}function op(t){return t?void 0!==t.unaryFilter?[fp(t)]:void 0!==t.fieldFilter?[dp(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(function(t){return op(t)}).reduce(function(t,e){return t.concat(e)}):th():[]}function sp(t){return{before:t.before,values:t.position}}function ap(t){return new sd(t.values||[],!!t.before)}function up(t){return Mf[t]}function cp(t){return Ff[t]}function lp(t){return{fieldPath:t.canonicalString()}}function hp(t){return mh.fromServerFormat(t.fieldPath)}function dp(t){return Jh.create(hp(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return th()}}(t.fieldFilter.op),t.fieldFilter.value)}function fp(t){switch(t.unaryFilter.op){case"IS_NAN":var e=hp(t.unaryFilter.field);return Jh.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=hp(t.unaryFilter.field);return Jh.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=hp(t.unaryFilter.field);return Jh.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=hp(t.unaryFilter.field);return Jh.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return th()}}function pp(t){var e=[];return t.fields.forEach(function(t){return e.push(t.canonicalString())}),{fieldPaths:e}}function gp(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}function mp(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=vp(e)),e=yp(t.get(n),e);return vp(e)}function yp(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function vp(t){return t+"\x01\x01"}function bp(t){var e=t.length;if(eh(e>=2),2===e)return eh("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),ph.emptyPath();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("\x01",o);switch((s<0||s>n)&&th(),t.charAt(s+1)){case"\x01":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"\x10":i+=t.substring(o,s),i+="\0";break;case"\x11":i+=t.substring(o,s+1);break;default:th()}o=s+2}return new ph(r)}var _p=function(t,e){this.seconds=t,this.nanoseconds=e},wp=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};wp.store="owner",wp.key="owner";var Op=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};Op.store="mutationQueues",Op.keyPath="userId";var Sp=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};Sp.store="mutations",Sp.keyPath="batchId",Sp.userMutationsIndex="userMutationsIndex",Sp.userMutationsKeyPath=["userId","batchId"];var Cp=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,mp(e)]},t.key=function(t,e,n){return[t,mp(e),n]},t}();Cp.store="documentMutations",Cp.PLACEHOLDER=new Cp;var Ep=function(t,e){this.path=t,this.readTime=e},Tp=function(t,e){this.path=t,this.version=e},Ip=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};Ip.store="remoteDocuments",Ip.readTimeIndex="readTimeIndex",Ip.readTimeIndexPath="readTime",Ip.collectionReadTimeIndex="collectionReadTimeIndex",Ip.collectionReadTimeIndexPath=["parentPath","readTime"];var xp=function(t){this.byteSize=t};xp.store="remoteDocumentGlobal",xp.key="remoteDocumentGlobalKey";var kp=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};kp.store="targets",kp.keyPath="targetId",kp.queryTargetsIndexName="queryTargetsIndex",kp.queryTargetsKeyPath=["canonicalId","targetId"];var Np=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};Np.store="targetDocuments",Np.keyPath=["targetId","path"],Np.documentTargetsIndex="documentTargetsIndex",Np.documentTargetsKeyPath=["path","targetId"];var Ap=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};Ap.key="targetGlobalKey",Ap.store="targetGlobal";var jp=function(t,e){this.collectionId=t,this.parent=e};jp.store="collectionParents",jp.keyPath=["collectionId","parent"];var Pp=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};Pp.store="clientMetadata",Pp.keyPath="clientId";var Rp=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};Rp.store="bundles",Rp.keyPath="bundleId";var Dp=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};Dp.store="namedQueries",Dp.keyPath="name";var Lp=Object(zl.f)(Object(zl.f)([],Object(zl.f)(Object(zl.f)([],Object(zl.f)(Object(zl.f)([],Object(zl.f)(Object(zl.f)([],[Op.store,Sp.store,Cp.store,Ip.store,kp.store,wp.store,Ap.store,Np.store]),[Pp.store])),[xp.store])),[jp.store])),[Rp.store,Dp.store]),Mp="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Fp=function(){function t(){this.onCommittedListeners=[]}return t.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},t.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach(function(t){return t()})},t}(),Vp=function(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})},Up=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)},function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)})}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&th(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t(function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}})},t.prototype.toPromise=function(){var t=this;return new Promise(function(e,n){t.next(e,n)})},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.reject(n)},t.resolve=function(e){return new t(function(t,n){t(e)})},t.reject=function(e){return new t(function(t,n){n(e)})},t.waitFor=function(e){return new t(function(t,n){var r=0,i=0,o=!1;e.forEach(function(e){++r,e.next(function(){++i,o&&i===r&&t()},function(t){return n(t)})}),o=!0,i===r&&t()})},t.or=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next(function(n){return n?t.resolve(n):e()})},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach(function(t,i){r.push(e.call(n,t,i))}),this.waitFor(r)},t}(),qp=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.ft=new Vp,this.transaction.oncomplete=function(){n.ft.resolve()},this.transaction.onabort=function(){e.error?n.ft.reject(new zp(t,e.error)):n.ft.resolve()},this.transaction.onerror=function(e){var r=$p(e.target.error);n.ft.reject(new zp(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new zp(n,e)}},Object.defineProperty(t.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.ft.reject(t),this.aborted||(Yl("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new Wp(e)},t}(),Bp=function(){function t(e,n,r){this.name=e,this.version=n,this.wt=r,12.2===t._t(Object(qs.n)())&&Jl("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return Yl("SimpleDb","Removing database:",t),Qp(window.indexedDB.deleteDatabase(t)).toPromise()},t.yt=function(){if("undefined"==typeof indexedDB)return!1;if(t.gt())return!0;var e=Object(qs.n)(),n=t._t(e),r=0<n&&n<10,i=t.Et(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.gt=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Tt)},t.It=function(t,e){return t.store(e)},t._t=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Et=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.At=function(t){return Object(zl.b)(this,void 0,void 0,function(){var e,n=this;return Object(zl.d)(this,function(r){switch(r.label){case 0:return this.db?[3,2]:(Yl("SimpleDb","Opening database:",this.name),e=this,[4,new Promise(function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){e(t.target.result)},i.onblocked=function(){r(new zp(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;r("VersionError"===n.name?new Ql(Wl.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):new zp(t,n))},i.onupgradeneeded=function(t){Yl("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion),n.wt.Rt(t.target.result,i.transaction,t.oldVersion,n.version).next(function(){Yl("SimpleDb","Database upgrade to version "+n.version+" complete")})}})]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(t){return n.bt(t)}),this.db)]}})})},t.prototype.vt=function(t){this.bt=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return Object(zl.b)(this,void 0,void 0,function(){var i,o,s,a,u;return Object(zl.d)(this,function(c){switch(c.label){case 0:i="readonly"===e,o=0,s=function(){var e,s,u,c,l;return Object(zl.d)(this,function(h){switch(h.label){case 0:++o,h.label=1;case 1:return h.trys.push([1,4,,5]),[4,a.At(t)];case 2:return a.db=h.sent(),e=qp.open(a.db,t,i?"readonly":"readwrite",n),s=r(e).catch(function(t){return e.abort(t),Up.reject(t)}).toPromise(),u={},s.catch(function(){}),[4,e.dt];case 3:return[2,(u.value=(h.sent(),s),u)];case 4:return Yl("SimpleDb","Transaction failed with error:",(c=h.sent()).message,"Retrying:",l="FirebaseError"!==c.name&&o<3),a.close(),l?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}})},a=this,c.label=1;case 1:return[5,s()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}})})},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),Hp=function(){function t(t){this.Pt=t,this.Vt=!1,this.St=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Vt=!0},t.prototype.Ct=function(t){this.St=t},t.prototype.delete=function(){return Qp(this.Pt.delete())},t}(),zp=function(t){function e(e,n){var r=this;return(r=t.call(this,Wl.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return Object(zl.c)(e,t),e}(Ql);function Kp(t){return"IndexedDbTransactionError"===t.name}var Wp=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(Yl("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(Yl("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),Qp(n)},t.prototype.add=function(t){return Yl("SimpleDb","ADD",this.store.name,t,t),Qp(this.store.add(t))},t.prototype.get=function(t){var e=this;return Qp(this.store.get(t)).next(function(n){return void 0===n&&(n=null),Yl("SimpleDb","GET",e.store.name,t,n),n})},t.prototype.delete=function(t){return Yl("SimpleDb","DELETE",this.store.name,t),Qp(this.store.delete(t))},t.prototype.count=function(){return Yl("SimpleDb","COUNT",this.store.name),Qp(this.store.count())},t.prototype.Nt=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.xt(n,function(t,e){r.push(e)}).next(function(){return r})},t.prototype.Ft=function(t,e){Yl("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.kt=!1;var r=this.cursor(n);return this.xt(r,function(t,e,n){return n.delete()})},t.prototype.Ot=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.xt(r,e)},t.prototype.$t=function(t){var e=this.cursor({});return new Up(function(n,r){e.onerror=function(t){var e=$p(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next(function(t){t?r.continue():n()}):n()}})},t.prototype.xt=function(t,e){var n=[];return new Up(function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new Hp(i),s=e(i.primaryKey,i.value,o);if(s instanceof Up){var a=s.catch(function(t){return o.done(),Up.reject(t)});n.push(a)}o.isDone?r():null===o.Dt?i.continue():i.continue(o.Dt)}else r()}}).next(function(){return Up.waitFor(n)})},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.kt?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function Qp(t){return new Up(function(e,n){t.onsuccess=function(t){e(t.target.result)},t.onerror=function(t){var e=$p(t.target.error);n(e)}})}var Gp=!1;function $p(t){var e=Bp._t(Object(qs.n)());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new Ql("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return Gp||(Gp=!0,setTimeout(function(){throw r},0)),r}}return t}var Yp=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Mt=e,r.currentSequenceNumber=n,r}return Object(zl.c)(e,t),e}(Fp);function Jp(t,e){var n=nh(t);return Bp.It(n.Mt,e)}var Xp=function(){function t(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}return t.prototype.applyToRemoteDocument=function(t,e){for(var n=e.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(t.key)&&$d(i,t,n[r])}},t.prototype.applyToLocalView=function(t){for(var e=0,n=this.baseMutations;e<n.length;e++)(o=n[e]).key.isEqual(t.key)&&Yd(o,t,this.localWriteTime);for(var r=0,i=this.mutations;r<i.length;r++){var o;(o=i[r]).key.isEqual(t.key)&&Yd(o,t,this.localWriteTime)}},t.prototype.applyToLocalDocumentSet=function(t){var e=this;this.mutations.forEach(function(n){var r=t.get(n.key),i=r;e.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(ch.min())})},t.prototype.keys=function(){return this.mutations.reduce(function(t,e){return t.add(e.key)},Ef())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&sh(this.mutations,t.mutations,function(t,e){return Xd(t,e)})&&sh(this.baseMutations,t.baseMutations,function(t,e){return Xd(t,e)})},t}(),Zp=function(){function t(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}return t.from=function(e,n,r){eh(e.mutations.length===r.length);for(var i=Sf(),o=e.mutations,s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),tg=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=ch.min()),void 0===o&&(o=ch.min()),void 0===s&&(s=vh.EMPTY_BYTE_STRING),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.withSequenceNumber=function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.withLastLimboFreeSnapshotVersion=function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},t}(),eg=function(t){this.Lt=t};function ng(t,e){if(e.document)return Zf(t.Lt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=kh.fromSegments(e.noDocument.path),r=ag(e.noDocument.readTime),i=Kh.newNoDocument(n,r);return e.hasCommittedMutations?i.setHasCommittedMutations():i}if(e.unknownDocument){var o=kh.fromSegments(e.unknownDocument.path);return r=ag(e.unknownDocument.version),Kh.newUnknownDocument(o,r)}return th()}function rg(t,e,n){var r=ig(n),i=e.key.path.popLast().toArray();if(e.isFoundDocument()){var o=function(t,e){return{name:Wf(t,e.key),fields:e.data.toProto().mapValue.fields,updateTime:Uf(t,e.version.toTimestamp())}}(t.Lt,e),s=e.hasCommittedMutations;return new Ip(null,null,o,s,r,i)}if(e.isNoDocument()){var a=e.key.path.toArray(),u=sg(e.version);return s=e.hasCommittedMutations,new Ip(null,new Ep(a,u),null,s,r,i)}if(e.isUnknownDocument()){var c=e.key.path.toArray(),l=sg(e.version);return new Ip(new Tp(c,l),null,null,!0,r,i)}return th()}function ig(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function og(t){var e=new uh(t[0],t[1]);return ch.fromTimestamp(e)}function sg(t){var e=t.toTimestamp();return new _p(e.seconds,e.nanoseconds)}function ag(t){var e=new uh(t.seconds,t.nanoseconds);return ch.fromTimestamp(e)}function ug(t,e){for(var n=(e.baseMutations||[]).map(function(e){return ep(t.Lt,e)}),r=0;r<e.mutations.length-1;++r)r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform&&(e.mutations[r].updateTransforms=e.mutations[r+1].transform.fieldTransforms,e.mutations.splice(r+1,1),++r);var i=e.mutations.map(function(e){return ep(t.Lt,e)}),o=uh.fromMillis(e.localWriteTimeMs);return new Xp(e.batchId,o,n,i)}function cg(t){var e,n,r=ag(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?ag(t.lastLimboFreeSnapshotVersion):ch.min();return void 0!==t.query.documents?(eh(1===(n=t.query).documents.length),e=wd(pd($f(n.documents[0])))):e=function(t){return wd(ip(t))}(t.query),new tg(e,t.targetId,0,t.lastListenSequenceNumber,r,i,vh.fromBase64String(t.resumeToken))}function lg(t,e){var n,r=sg(e.snapshotVersion),i=sg(e.lastLimboFreeSnapshotVersion);n=Yh(e.target)?np(t.Lt,e.target):rp(t.Lt,e.target);var o=e.resumeToken.toBase64();return new kp(e.targetId,Gh(e.target),r,o,e.sequenceNumber,i,n)}function hg(t){var e=ip({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?Od(e,e.limit,"L"):e}var dg=function(){function t(){}return t.prototype.getBundleMetadata=function(t,e){return fg(t).get(e).next(function(t){if(t)return{id:(e=t).bundleId,createTime:ag(e.createTime),version:e.version};var e})},t.prototype.saveBundleMetadata=function(t,e){return fg(t).put({bundleId:(n=e).id,createTime:sg(Hf(n.createTime)),version:n.version});var n},t.prototype.getNamedQuery=function(t,e){return pg(t).get(e).next(function(t){if(t)return{name:(e=t).name,query:hg(e.bundledQuery),readTime:ag(e.readTime)};var e})},t.prototype.saveNamedQuery=function(t,e){return pg(t).put(function(t){return{name:t.name,readTime:sg(Hf(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function fg(t){return Jp(t,Rp.store)}function pg(t){return Jp(t,Dp.store)}var gg=function(){function t(){this.Bt=new mg}return t.prototype.addToCollectionParentIndex=function(t,e){return this.Bt.add(e),Up.resolve()},t.prototype.getCollectionParents=function(t,e){return Up.resolve(this.Bt.getEntries(e))},t}(),mg=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new mf(ph.comparator),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new mf(ph.comparator)).toArray()},t}(),yg=function(){function t(){this.qt=new mg}return t.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(!this.qt.has(e)){var r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener(function(){n.qt.add(e)});var o={collectionId:r,parent:mp(i)};return vg(t).put(o)}return Up.resolve()},t.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[ah(e),""],!1,!0);return vg(t).Nt(r).next(function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(bp(o.parent))}return n})},t}();function vg(t){return Jp(t,jp.store)}var bg={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},_g=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t}();function wg(t,e,n){var r=t.store(Sp.store),i=t.store(Cp.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.Ot({range:s},function(t,e,n){return a++,n.delete()});o.push(u.next(function(){eh(1===a)}));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var d=h[l],f=Cp.key(e,d.key.path,n.batchId);o.push(i.delete(f)),c.push(d.key)}return Up.waitFor(o).next(function(){return c})}function Og(t){if(!t)return 0;var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw th();e=t.noDocument}return JSON.stringify(e).length}_g.DEFAULT_COLLECTION_PERCENTILE=10,_g.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,_g.DEFAULT=new _g(41943040,_g.DEFAULT_COLLECTION_PERCENTILE,_g.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),_g.DISABLED=new _g(-1,0,0);var Sg=function(){function t(t,e,n,r){this.userId=t,this.R=e,this.Ut=n,this.referenceDelegate=r,this.Qt={}}return t.Kt=function(e,n,r,i){return eh(""!==e.uid),new t(e.isAuthenticated()?e.uid:"",n,r,i)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Eg(t).Ot({index:Sp.userMutationsIndex,range:n},function(t,n,r){e=!1,r.done()}).next(function(){return e})},t.prototype.addMutationBatch=function(t,e,n,r){var i=this,o=Tg(t),s=Eg(t);return s.add({}).next(function(a){eh("number"==typeof a);for(var u=new Xp(a,e,n,r),c=function(t,e,n){var r=n.baseMutations.map(function(e){return tp(t.Lt,e)}),i=n.mutations.map(function(e){return tp(t.Lt,e)});return new Sp(e,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.R,i.userId,u),l=[],h=new mf(function(t,e){return oh(t.canonicalString(),e.canonicalString())}),d=0,f=r;d<f.length;d++){var p=f[d],g=Cp.key(i.userId,p.key.path,a);h=h.add(p.key.path.popLast()),l.push(s.put(c)),l.push(o.put(g,Cp.PLACEHOLDER))}return h.forEach(function(e){l.push(i.Ut.addToCollectionParentIndex(t,e))}),t.addOnCommittedListener(function(){i.Qt[a]=u.keys()}),Up.waitFor(l).next(function(){return u})})},t.prototype.lookupMutationBatch=function(t,e){var n=this;return Eg(t).get(e).next(function(t){return t?(eh(t.userId===n.userId),ug(n.R,t)):null})},t.prototype.jt=function(t,e){var n=this;return this.Qt[e]?Up.resolve(this.Qt[e]):this.lookupMutationBatch(t,e).next(function(t){if(t){var r=t.keys();return n.Qt[e]=r,r}return null})},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Eg(t).Ot({index:Sp.userMutationsIndex,range:i},function(t,e,i){e.userId===n.userId&&(eh(e.batchId>=r),o=ug(n.R,e)),i.done()}).next(function(){return o})},t.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Eg(t).Ot({index:Sp.userMutationsIndex,range:e,reverse:!0},function(t,e,r){n=e.batchId,r.done()}).next(function(){return n})},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Eg(t).Nt(Sp.userMutationsIndex,n).next(function(t){return t.map(function(t){return ug(e.R,t)})})},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=Cp.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return Tg(t).Ot({range:i},function(r,i,s){var a=r[0],u=r[2],c=bp(r[1]);if(a===n.userId&&e.path.isEqual(c))return Eg(t).get(u).next(function(t){if(!t)throw th();eh(t.userId===n.userId),o.push(ug(n.R,t))});s.done()}).next(function(){return o})},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new mf(oh),i=[];return e.forEach(function(e){var o=Cp.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=Tg(t).Ot({range:s},function(t,i,o){var s=t[0],a=t[2],u=bp(t[1]);s===n.userId&&e.path.isEqual(u)?r=r.add(a):o.done()});i.push(a)}),Up.waitFor(i).next(function(){return n.Wt(t,r)})},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this,r=e.path,i=r.length+1,o=Cp.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new mf(oh);return Tg(t).Ot({range:s},function(t,e,o){var s=t[0],u=t[2],c=bp(t[1]);s===n.userId&&r.isPrefixOf(c)?c.length===i&&(a=a.add(u)):o.done()}).next(function(){return n.Wt(t,a)})},t.prototype.Wt=function(t,e){var n=this,r=[],i=[];return e.forEach(function(e){i.push(Eg(t).get(e).next(function(t){if(null===t)throw th();eh(t.userId===n.userId),r.push(ug(n.R,t))}))}),Up.waitFor(i).next(function(){return r})},t.prototype.removeMutationBatch=function(t,e){var n=this;return wg(t.Mt,this.userId,e).next(function(r){return t.addOnCommittedListener(function(){n.Gt(e.batchId)}),Up.forEach(r,function(e){return n.referenceDelegate.markPotentiallyOrphaned(t,e)})})},t.prototype.Gt=function(t){delete this.Qt[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next(function(n){if(!n)return Up.resolve();var r=IDBKeyRange.lowerBound(Cp.prefixForUser(e.userId)),i=[];return Tg(t).Ot({range:r},function(t,n,r){if(t[0]===e.userId){var o=bp(t[1]);i.push(o)}else r.done()}).next(function(){eh(0===i.length)})})},t.prototype.containsKey=function(t,e){return Cg(t,this.userId,e)},t.prototype.zt=function(t){var e=this;return Ig(t).get(this.userId).next(function(t){return t||new Op(e.userId,-1,"")})},t}();function Cg(t,e,n){var r=Cp.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return Tg(t).Ot({range:o,kt:!0},function(t,n,r){t[0]===e&&t[1]===i&&(s=!0),r.done()}).next(function(){return s})}function Eg(t){return Jp(t,Sp.store)}function Tg(t){return Jp(t,Cp.store)}function Ig(t){return Jp(t,Op.store)}var xg=function(){function t(t){this.Ht=t}return t.prototype.next=function(){return this.Ht+=2,this.Ht},t.Jt=function(){return new t(0)},t.Yt=function(){return new t(-1)},t}(),kg=function(){function t(t,e){this.referenceDelegate=t,this.R=e}return t.prototype.allocateTargetId=function(t){var e=this;return this.Xt(t).next(function(n){var r=new xg(n.highestTargetId);return n.highestTargetId=r.next(),e.Zt(t,n).next(function(){return n.highestTargetId})})},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.Xt(t).next(function(t){return ch.fromTimestamp(new uh(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))})},t.prototype.getHighestSequenceNumber=function(t){return this.Xt(t).next(function(t){return t.highestListenSequenceNumber})},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.Xt(t).next(function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Zt(t,i)})},t.prototype.addTargetData=function(t,e){var n=this;return this.te(t,e).next(function(){return n.Xt(t).next(function(r){return r.targetCount+=1,n.ee(e,r),n.Zt(t,r)})})},t.prototype.updateTargetData=function(t,e){return this.te(t,e)},t.prototype.removeTargetData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next(function(){return Ng(t).delete(e.targetId)}).next(function(){return n.Xt(t)}).next(function(e){return eh(e.targetCount>0),e.targetCount-=1,n.Zt(t,e)})},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return Ng(t).Ot(function(s,a){var u=cg(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(t,u)))}).next(function(){return Up.waitFor(o)}).next(function(){return i})},t.prototype.forEachTarget=function(t,e){return Ng(t).Ot(function(t,n){var r=cg(n);e(r)})},t.prototype.Xt=function(t){return Ag(t).get(Ap.key).next(function(t){return eh(null!==t),t})},t.prototype.Zt=function(t,e){return Ag(t).put(Ap.key,e)},t.prototype.te=function(t,e){return Ng(t).put(lg(this.R,e))},t.prototype.ee=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getTargetCount=function(t){return this.Xt(t).next(function(t){return t.targetCount})},t.prototype.getTargetData=function(t,e){var n=Gh(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Ng(t).Ot({range:r,index:kp.queryTargetsIndexName},function(t,n,r){var o=cg(n);$h(e,o.target)&&(i=o,r.done())}).next(function(){return i})},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],o=jg(t);return e.forEach(function(e){var s=mp(e.path);i.push(o.put(new Np(n,s))),i.push(r.referenceDelegate.addReference(t,n,e))}),Up.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=jg(t);return Up.forEach(e,function(e){var o=mp(e.path);return Up.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(t,n,e)])})},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=jg(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=jg(t),i=Ef();return r.Ot({range:n,kt:!0},function(t,e,n){var r=bp(t[1]),o=new kh(r);i=i.add(o)}).next(function(){return i})},t.prototype.containsKey=function(t,e){var n=mp(e.path),r=IDBKeyRange.bound([n],[ah(n)],!1,!0),i=0;return jg(t).Ot({index:Np.documentTargetsIndex,kt:!0,range:r},function(t,e,n){0!==t[0]&&(i++,n.done())}).next(function(){return i>0})},t.prototype.lt=function(t,e){return Ng(t).get(e).next(function(t){return t?cg(t):null})},t}();function Ng(t){return Jp(t,kp.store)}function Ag(t){return Jp(t,Ap.store)}function jg(t){return Jp(t,Np.store)}function Pg(t){return Object(zl.b)(this,void 0,void 0,function(){return Object(zl.d)(this,function(e){if(t.code!==Wl.FAILED_PRECONDITION||t.message!==Mp)throw t;return Yl("LocalStore","Unexpectedly lost primary lease"),[2]})})}function Rg(t,e){var n=t[1],r=e[1],i=oh(t[0],e[0]);return 0===i?oh(n,r):i}var Dg=function(){function t(t){this.ne=t,this.buffer=new mf(Rg),this.se=0}return t.prototype.ie=function(){return++this.se},t.prototype.re=function(t){var e=[t,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();Rg(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),Lg=function(){function t(t,e){this.garbageCollector=t,this.asyncQueue=e,this.oe=!1,this.ce=null}return t.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(t)},t.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),t.prototype.ue=function(t){var e=this,n=this.oe?3e5:6e4;Yl("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,function(){return Object(zl.b)(e,void 0,void 0,function(){var e;return Object(zl.d)(this,function(n){switch(n.label){case 0:this.ce=null,this.oe=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return Kp(e=n.sent())?(Yl("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,Pg(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.ue(t)];case 8:return n.sent(),[2]}})})})},t}(),Mg=function(){function t(t,e){this.ae=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.ae.he(t).next(function(t){return Math.floor(e/100*t)})},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return Up.resolve(Kl.o);var r=new Dg(e);return this.ae.forEachTarget(t,function(t){return r.re(t.sequenceNumber)}).next(function(){return n.ae.le(t,function(t){return r.re(t)})}).next(function(){return r.maxValue})},t.prototype.removeTargets=function(t,e,n){return this.ae.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.ae.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(Yl("LruGarbageCollector","Garbage collection skipped; disabled"),Up.resolve(bg)):this.getCacheSize(t).next(function(r){return r<n.params.cacheSizeCollectionThreshold?(Yl("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),bg):n.fe(t,e)})},t.prototype.getCacheSize=function(t){return this.ae.getCacheSize(t)},t.prototype.fe=function(t,e){var n,r,i,o,s,a,u,c=this,l=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(function(e){return e>c.params.maximumSequenceNumbersToCollect?(Yl("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.maximumSequenceNumbersToCollect+" from "+e),r=c.params.maximumSequenceNumbersToCollect):r=e,o=Date.now(),c.nthSequenceNumber(t,r)}).next(function(r){return n=r,s=Date.now(),c.removeTargets(t,n,e)}).next(function(e){return i=e,a=Date.now(),c.removeOrphanedDocuments(t,n)}).next(function(t){return u=Date.now(),$l()<=Bs.a.DEBUG&&Yl("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-l)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(a-s)+"ms\n\tRemoved "+t+" documents in "+(u-a)+"ms\nTotal Duration: "+(u-l)+"ms"),Up.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t})})},t}(),Fg=function(){function t(t,e){this.db=t,this.garbageCollector=function(t,e){return new Mg(t,e)}(this,e)}return t.prototype.he=function(t){var e=this.de(t);return this.db.getTargetCache().getTargetCount(t).next(function(t){return e.next(function(e){return t+e})})},t.prototype.de=function(t){var e=0;return this.le(t,function(t){e++}).next(function(){return e})},t.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},t.prototype.le=function(t,e){return this.we(t,function(t,n){return e(n)})},t.prototype.addReference=function(t,e,n){return Vg(t,n)},t.prototype.removeReference=function(t,e,n){return Vg(t,n)},t.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},t.prototype.markPotentiallyOrphaned=function(t,e){return Vg(t,e)},t.prototype._e=function(t,e){return function(t,e){var n=!1;return Ig(t).$t(function(r){return Cg(t,r,e).next(function(t){return t&&(n=!0),Up.resolve(!t)})}).next(function(){return n})}(t,e)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.we(t,function(s,a){if(a<=e){var u=n._e(t,s).next(function(e){if(!e)return o++,r.getEntry(t,s).next(function(){return r.removeEntry(s),jg(t).delete([0,mp(s.path)])})});i.push(u)}}).next(function(){return Up.waitFor(i)}).next(function(){return r.apply(t)}).next(function(){return o})},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)},t.prototype.updateLimboDocument=function(t,e){return Vg(t,e)},t.prototype.we=function(t,e){var n,r=jg(t),i=Kl.o;return r.Ot({index:Np.documentTargetsIndex},function(t,r){var o=r.path,s=r.sequenceNumber;0===t[0]?(i!==Kl.o&&e(new kh(bp(n)),i),i=s,n=o):i=Kl.o}).next(function(){i!==Kl.o&&e(new kh(bp(n)),i)})},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function Vg(t,e){return jg(t).put(function(t,e){return new Np(0,mp(t.path),e)}(e,t.currentSequenceNumber))}var Ug=function(){function t(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[1];if(this.equalsFn(o[0],t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){hh(this.inner,function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];t(o[0],o[1])}})},t.prototype.isEmpty=function(){return dh(this.inner)},t}(),qg=function(){function t(){this.changes=new Ug(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),this.changesApplied=!1}return t.prototype.getReadTime=function(t){var e=this.changes.get(t);return e?e.readTime:ch.min()},t.prototype.addEntry=function(t,e){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:e})},t.prototype.removeEntry=function(t,e){void 0===e&&(e=null),this.assertNotApplied(),this.changes.set(t,{document:Kh.newInvalidDocument(t),readTime:e})},t.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?Up.resolve(n.document):this.getFromCache(t,e)},t.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},t.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},t.prototype.assertNotApplied=function(){},t}(),Bg=function(){function t(t,e){this.R=t,this.Ut=e}return t.prototype.addEntry=function(t,e,n){return Kg(t).put(Wg(e),n)},t.prototype.removeEntry=function(t,e){var n=Kg(t),r=Wg(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next(function(r){return r.byteSize+=e,n.me(t,r)})},t.prototype.getEntry=function(t,e){var n=this;return Kg(t).get(Wg(e)).next(function(t){return n.ye(e,t)})},t.prototype.ge=function(t,e){var n=this;return Kg(t).get(Wg(e)).next(function(t){return{document:n.ye(e,t),size:Og(t)}})},t.prototype.getEntries=function(t,e){var n=this,r=bf();return this.pe(t,e,function(t,e){var i=n.ye(t,e);r=r.insert(t,i)}).next(function(){return r})},t.prototype.Ee=function(t,e){var n=this,r=bf(),i=new ff(kh.comparator);return this.pe(t,e,function(t,e){var o=n.ye(t,e);r=r.insert(t,o),i=i.insert(t,Og(e))}).next(function(){return{documents:r,Te:i}})},t.prototype.pe=function(t,e,n){if(e.isEmpty())return Up.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),o=i.getNext();return Kg(t).Ot({range:r},function(t,e,r){for(var s=kh.fromSegments(t);o&&kh.comparator(o,s)<0;)n(o,null),o=i.getNext();o&&o.isEqual(s)&&(n(o,e),o=i.hasNext()?i.getNext():null),o?r.Ct(o.path.toArray()):r.done()}).next(function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null})},t.prototype.getDocumentsMatchingQuery=function(t,e,n){var r=this,i=bf(),o=e.path.length+1,s={};if(n.isEqual(ch.min())){var a=e.path.toArray();s.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.toArray(),c=ig(n);s.range=IDBKeyRange.lowerBound([u,c],!0),s.index=Ip.collectionReadTimeIndex}return Kg(t).Ot(s,function(t,n,s){if(t.length===o){var a=ng(r.R,n);e.path.isPrefixOf(a.key.path)?Td(e,a)&&(i=i.insert(a.key,a)):s.done()}}).next(function(){return i})},t.prototype.newChangeBuffer=function(t){return new Hg(this,!!t&&t.trackRemovals)},t.prototype.getSize=function(t){return this.getMetadata(t).next(function(t){return t.byteSize})},t.prototype.getMetadata=function(t){return zg(t).get(xp.key).next(function(t){return eh(!!t),t})},t.prototype.me=function(t,e){return zg(t).put(xp.key,e)},t.prototype.ye=function(t,e){if(e){var n=ng(this.R,e);if(!n.isNoDocument()||!n.version.isEqual(ch.min()))return n}return Kh.newInvalidDocument(t)},t}(),Hg=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Ie=e,r.trackRemovals=n,r.Ae=new Ug(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),r}return Object(zl.c)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[],r=0,i=new mf(function(t,e){return oh(t.canonicalString(),e.canonicalString())});return this.changes.forEach(function(o,s){var a=e.Ae.get(o);if(s.document.isValidDocument()){var u=rg(e.Ie.R,s.document,e.getReadTime(o));i=i.add(o.path.popLast());var c=Og(u);r+=c-a,n.push(e.Ie.addEntry(t,o,u))}else if(r-=a,e.trackRemovals){var l=rg(e.Ie.R,Kh.newNoDocument(o,ch.min()),e.getReadTime(o));n.push(e.Ie.addEntry(t,o,l))}else n.push(e.Ie.removeEntry(t,o))}),i.forEach(function(r){n.push(e.Ie.Ut.addToCollectionParentIndex(t,r))}),n.push(this.Ie.updateMetadata(t,r)),Up.waitFor(n)},e.prototype.getFromCache=function(t,e){var n=this;return this.Ie.ge(t,e).next(function(t){return n.Ae.set(e,t.size),t.document})},e.prototype.getAllFromCache=function(t,e){var n=this;return this.Ie.Ee(t,e).next(function(t){var e=t.documents;return t.Te.forEach(function(t,e){n.Ae.set(t,e)}),e})},e}(qg);function zg(t){return Jp(t,xp.store)}function Kg(t){return Jp(t,Ip.store)}function Wg(t){return t.path.toArray()}var Qg=function(){function t(t){this.R=t}return t.prototype.Rt=function(t,e,n,r){var i=this;eh(n<r&&n>=0&&r<=11);var o=new qp("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(wp.store)}(t),function(t){t.createObjectStore(Op.store,{keyPath:Op.keyPath}),t.createObjectStore(Sp.store,{keyPath:Sp.keyPath,autoIncrement:!0}).createIndex(Sp.userMutationsIndex,Sp.userMutationsKeyPath,{unique:!0}),t.createObjectStore(Cp.store)}(t),Gg(t),function(t){t.createObjectStore(Ip.store)}(t));var s=Up.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(Np.store),t.deleteObjectStore(kp.store),t.deleteObjectStore(Ap.store)}(t),Gg(t)),s=s.next(function(){return function(t){var e=t.store(Ap.store),n=new Ap(0,0,ch.min().toTimestamp(),0);return e.put(Ap.key,n)}(o)})),n<4&&r>=4&&(0!==n&&(s=s.next(function(){return function(t,e){return e.store(Sp.store).Nt().next(function(n){t.deleteObjectStore(Sp.store),t.createObjectStore(Sp.store,{keyPath:Sp.keyPath,autoIncrement:!0}).createIndex(Sp.userMutationsIndex,Sp.userMutationsKeyPath,{unique:!0});var r=e.store(Sp.store),i=n.map(function(t){return r.put(t)});return Up.waitFor(i)})}(t,o)})),s=s.next(function(){!function(t){t.createObjectStore(Pp.store,{keyPath:Pp.keyPath})}(t)})),n<5&&r>=5&&(s=s.next(function(){return i.Re(o)})),n<6&&r>=6&&(s=s.next(function(){return function(t){t.createObjectStore(xp.store)}(t),i.be(o)})),n<7&&r>=7&&(s=s.next(function(){return i.ve(o)})),n<8&&r>=8&&(s=s.next(function(){return i.Pe(t,o)})),n<9&&r>=9&&(s=s.next(function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(Ip.store);e.createIndex(Ip.readTimeIndex,Ip.readTimeIndexPath,{unique:!1}),e.createIndex(Ip.collectionReadTimeIndex,Ip.collectionReadTimeIndexPath,{unique:!1})}(e)})),n<10&&r>=10&&(s=s.next(function(){return i.Ve(o)})),n<11&&r>=11&&(s=s.next(function(){!function(t){t.createObjectStore(Rp.store,{keyPath:Rp.keyPath})}(t),function(t){t.createObjectStore(Dp.store,{keyPath:Dp.keyPath})}(t)})),s},t.prototype.be=function(t){var e=0;return t.store(Ip.store).Ot(function(t,n){e+=Og(n)}).next(function(){var n=new xp(e);return t.store(xp.store).put(xp.key,n)})},t.prototype.Re=function(t){var e=this,n=t.store(Op.store),r=t.store(Sp.store);return n.Nt().next(function(n){return Up.forEach(n,function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Nt(Sp.userMutationsIndex,i).next(function(r){return Up.forEach(r,function(r){eh(r.userId===n.userId);var i=ug(e.R,r);return wg(t,n.userId,i).next(function(){})})})})})},t.prototype.ve=function(t){var e=t.store(Np.store),n=t.store(Ip.store);return t.store(Ap.store).get(Ap.key).next(function(t){var r=[];return n.Ot(function(n,i){var o=new ph(n),s=function(t){return[0,mp(t)]}(o);r.push(e.get(s).next(function(n){return n?Up.resolve():function(n){return e.put(new Np(0,mp(n),t.highestListenSequenceNumber))}(o)}))}).next(function(){return Up.waitFor(r)})})},t.prototype.Pe=function(t,e){t.createObjectStore(jp.store,{keyPath:jp.keyPath});var n=e.store(jp.store),r=new mg,i=function(t){if(r.add(t)){var e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:mp(i)})}};return e.store(Ip.store).Ot({kt:!0},function(t,e){var n=new ph(t);return i(n.popLast())}).next(function(){return e.store(Cp.store).Ot({kt:!0},function(t,e){var n=bp(t[1]);return i(n.popLast())})})},t.prototype.Ve=function(t){var e=this,n=t.store(kp.store);return n.Ot(function(t,r){var i=cg(r),o=lg(e.R,i);return n.put(o)})},t}();function Gg(t){t.createObjectStore(Np.store,{keyPath:Np.keyPath}).createIndex(Np.documentTargetsIndex,Np.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(kp.store,{keyPath:kp.keyPath}).createIndex(kp.queryTargetsIndexName,kp.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(Ap.store)}var $g="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Yg=function(){function t(e,n,r,i,o,s,a,u,c,l){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Se=o,this.window=s,this.document=a,this.De=c,this.Ce=l,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Fe=null,this.inForeground=!1,this.ke=null,this.Oe=null,this.$e=Number.NEGATIVE_INFINITY,this.Me=function(t){return Promise.resolve()},!t.yt())throw new Ql(Wl.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Fg(this,i),this.Le=n+"main",this.R=new eg(u),this.Be=new Bp(this.Le,11,new Qg(this.R)),this.qe=new kg(this.referenceDelegate,this.R),this.Ut=new yg,this.Ue=function(t,e){return new Bg(t,e)}(this.R,this.Ut),this.Qe=new dg,this.window&&this.window.localStorage?this.Ke=this.window.localStorage:(this.Ke=null,!1===l&&Jl("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.je().then(function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new Ql(Wl.FAILED_PRECONDITION,$g);return t.We(),t.Ge(),t.ze(),t.runTransaction("getHighestListenSequenceNumber","readonly",function(e){return t.qe.getHighestSequenceNumber(e)})}).then(function(e){t.Ne=new Kl(e,t.De)}).then(function(){t.xe=!0}).catch(function(e){return t.Be&&t.Be.close(),Promise.reject(e)})},t.prototype.He=function(t){var e=this;return this.Me=function(n){return Object(zl.b)(e,void 0,void 0,function(){return Object(zl.d)(this,function(e){return this.started?[2,t(n)]:[2]})})},t(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(t){var e=this;this.Be.vt(function(n){return Object(zl.b)(e,void 0,void 0,function(){return Object(zl.d)(this,function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})})},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Se.enqueueAndForget(function(){return Object(zl.b)(e,void 0,void 0,function(){return Object(zl.d)(this,function(t){switch(t.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})}))},t.prototype.je=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(e){return Xg(e).put(new Pp(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next(function(){if(t.isPrimary)return t.Je(e).next(function(e){e||(t.isPrimary=!1,t.Se.enqueueRetryable(function(){return t.Me(!1)}))})}).next(function(){return t.Ye(e)}).next(function(n){return t.isPrimary&&!n?t.Xe(e).next(function(){return!1}):!!n&&t.Ze(e).next(function(){return!0})})}).catch(function(e){if(Kp(e))return Yl("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return Yl("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(function(e){t.isPrimary!==e&&t.Se.enqueueRetryable(function(){return t.Me(e)}),t.isPrimary=e})},t.prototype.Je=function(t){var e=this;return Jg(t).get(wp.key).next(function(t){return Up.resolve(e.tn(t))})},t.prototype.en=function(t){return Xg(t).delete(this.clientId)},t.prototype.nn=function(){return Object(zl.b)(this,void 0,void 0,function(){var t,e,n,r=this;return Object(zl.d)(this,function(i){switch(i.label){case 0:return!this.isPrimary||this.sn(this.$e,18e5)?[3,2]:(this.$e=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(t){var e=Jp(t,Pp.store);return e.Nt().next(function(t){var n=r.rn(t,18e5),i=t.filter(function(t){return-1===n.indexOf(t)});return Up.forEach(i,function(t){return e.delete(t.clientId)}).next(function(){return i})})}).catch(function(){return[]})]);case 1:if(t=i.sent(),this.Ke)for(e=0,n=t;e<n.length;e++)this.Ke.removeItem(this.on(n[e].clientId));i.label=2;case 2:return[2]}})})},t.prototype.ze=function(){var t=this;this.Oe=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,function(){return t.je().then(function(){return t.nn()}).then(function(){return t.ze()})})},t.prototype.tn=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.Ye=function(t){var e=this;return this.Ce?Up.resolve(!0):Jg(t).get(wp.key).next(function(n){if(null!==n&&e.sn(n.leaseTimestampMs,5e3)&&!e.cn(n.ownerId)){if(e.tn(n)&&e.networkEnabled)return!0;if(!e.tn(n)){if(!n.allowTabSynchronization)throw new Ql(Wl.FAILED_PRECONDITION,$g);return!1}}return!(!e.networkEnabled||!e.inForeground)||Xg(t).Nt().next(function(t){return void 0===e.rn(t,5e3).find(function(t){return!(e.clientId===t.clientId||!(!e.networkEnabled&&t.networkEnabled||!e.inForeground&&t.inForeground&&e.networkEnabled===t.networkEnabled))})})}).next(function(t){return e.isPrimary!==t&&Yl("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t})},t.prototype.shutdown=function(){return Object(zl.b)(this,void 0,void 0,function(){var t=this;return Object(zl.d)(this,function(e){switch(e.label){case 0:return this.xe=!1,this.un(),this.Oe&&(this.Oe.cancel(),this.Oe=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[wp.store,Pp.store],function(e){var n=new Yp(e,Kl.o);return t.Xe(n).next(function(){return t.en(n)})})];case 1:return e.sent(),this.Be.close(),this.ln(),[2]}})})},t.prototype.rn=function(t,e){var n=this;return t.filter(function(t){return n.sn(t.updateTimeMs,e)&&!n.cn(t.clientId)})},t.prototype.fn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",function(e){return Xg(e).Nt().next(function(e){return t.rn(e,18e5).map(function(t){return t.clientId})})})},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.getMutationQueue=function(t){return Sg.Kt(t,this.R,this.Ut,this.referenceDelegate)},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getBundleCache=function(){return this.Qe},t.prototype.runTransaction=function(t,e,n){var r,i=this;return Yl("IndexedDbPersistence","Starting transaction:",t),this.Be.runTransaction(t,"readonly"===e?"readonly":"readwrite",Lp,function(o){return r=new Yp(o,i.Ne?i.Ne.next():Kl.o),"readwrite-primary"===e?i.Je(r).next(function(t){return!!t||i.Ye(r)}).next(function(e){if(!e)throw Jl("Failed to obtain primary lease for action '"+t+"'."),i.isPrimary=!1,i.Se.enqueueRetryable(function(){return i.Me(!1)}),new Ql(Wl.FAILED_PRECONDITION,Mp);return n(r)}).next(function(t){return i.Ze(r).next(function(){return t})}):i.dn(r).next(function(){return n(r)})}).then(function(t){return r.raiseOnCommittedEvent(),t})},t.prototype.dn=function(t){var e=this;return Jg(t).get(wp.key).next(function(t){if(null!==t&&e.sn(t.leaseTimestampMs,5e3)&&!e.cn(t.ownerId)&&!e.tn(t)&&!(e.Ce||e.allowTabSynchronization&&t.allowTabSynchronization))throw new Ql(Wl.FAILED_PRECONDITION,$g)})},t.prototype.Ze=function(t){var e=new wp(this.clientId,this.allowTabSynchronization,Date.now());return Jg(t).put(wp.key,e)},t.yt=function(){return Bp.yt()},t.prototype.Xe=function(t){var e=this,n=Jg(t);return n.get(wp.key).next(function(t){return e.tn(t)?(Yl("IndexedDbPersistence","Releasing primary lease."),n.delete(wp.key)):Up.resolve()})},t.prototype.sn=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(Jl("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.We=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ke=function(){t.Se.enqueueAndForget(function(){return t.inForeground="visible"===t.document.visibilityState,t.je()})},this.document.addEventListener("visibilitychange",this.ke),this.inForeground="visible"===this.document.visibilityState)},t.prototype.an=function(){this.ke&&(this.document.removeEventListener("visibilitychange",this.ke),this.ke=null)},t.prototype.Ge=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Fe=function(){e.un(),e.Se.enqueueAndForget(function(){return e.shutdown()})},this.window.addEventListener("unload",this.Fe))},t.prototype.hn=function(){this.Fe&&(this.window.removeEventListener("unload",this.Fe),this.Fe=null)},t.prototype.cn=function(t){var e;try{var n=null!==(null===(e=this.Ke)||void 0===e?void 0:e.getItem(this.on(t)));return Yl("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return Jl("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.un=function(){if(this.Ke)try{this.Ke.setItem(this.on(this.clientId),String(Date.now()))}catch(t){Jl("Failed to set zombie client id.",t)}},t.prototype.ln=function(){if(this.Ke)try{this.Ke.removeItem(this.on(this.clientId))}catch(t){}},t.prototype.on=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function Jg(t){return Jp(t,wp.store)}function Xg(t){return Jp(t,Pp.store)}function Zg(t,e){var n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var tm=function(t,e){this.progress=t,this.wn=e},em=function(){function t(t,e,n){this.Ue=t,this._n=e,this.Ut=n}return t.prototype.mn=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKey(t,e).next(function(r){return n.yn(t,e,r)})},t.prototype.yn=function(t,e,n){return this.Ue.getEntry(t,e).next(function(t){for(var e=0,r=n;e<r.length;e++)r[e].applyToLocalView(t);return t})},t.prototype.gn=function(t,e){t.forEach(function(t,n){for(var r=0,i=e;r<i.length;r++)i[r].applyToLocalView(n)})},t.prototype.pn=function(t,e){var n=this;return this.Ue.getEntries(t,e).next(function(e){return n.En(t,e).next(function(){return e})})},t.prototype.En=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(t,e).next(function(t){return n.gn(e,t)})},t.prototype.getDocumentsMatchingQuery=function(t,e,n){return function(t){return kh.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Tn(t,e.path):bd(e)?this.In(t,e,n):this.An(t,e,n)},t.prototype.Tn=function(t,e){return this.mn(t,new kh(e)).next(function(t){var e=wf();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e})},t.prototype.In=function(t,e,n){var r=this,i=e.collectionGroup,o=wf();return this.Ut.getCollectionParents(t,i).next(function(s){return Up.forEach(s,function(s){var a=function(t,e){return new dd(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(i));return r.An(t,a,n).next(function(t){t.forEach(function(t,e){o=o.insert(t,e)})})}).next(function(){return o})})},t.prototype.An=function(t,e,n){var r,i,o=this;return this.Ue.getDocumentsMatchingQuery(t,e,n).next(function(n){return r=n,o._n.getAllMutationBatchesAffectingQuery(t,e)}).next(function(e){return o.Rn(t,i=e,r).next(function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,a=o.mutations;s<a.length;s++){var u=a[s],c=u.key,l=r.get(c);null==l&&(l=Kh.newInvalidDocument(c),r=r.insert(c,l)),Yd(u,l,o.localWriteTime),l.isFoundDocument()||(r=r.remove(c))}})}).next(function(){return r.forEach(function(t,n){Td(e,n)||(r=r.remove(t))}),r})},t.prototype.Rn=function(t,e,n){for(var r=Ef(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof ef&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Ue.getEntries(t,r).next(function(t){return t.forEach(function(t,e){e.isFoundDocument()&&(c=c.insert(t,e))}),c})},t}(),nm=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.bn=n,this.vn=r}return t.Pn=function(e,n){for(var r=Ef(),i=Ef(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),rm=function(){function t(){}return t.prototype.Vn=function(t){this.Sn=t},t.prototype.getDocumentsMatchingQuery=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}(e)||n.isEqual(ch.min())?this.Dn(t,e):this.Sn.pn(t,r).next(function(o){var s=i.Cn(e,o);return(gd(e)||md(e))&&i.Nn(e.limitType,s,r,n)?i.Dn(t,e):($l()<=Bs.a.DEBUG&&Yl("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Ed(e)),i.Sn.getDocumentsMatchingQuery(t,e,n).next(function(t){return s.forEach(function(e){t=t.insert(e.key,e)}),t}))})},t.prototype.Cn=function(t,e){var n=new mf(Id(t));return e.forEach(function(e,r){Td(t,r)&&(n=n.add(r))}),n},t.prototype.Nn=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},t.prototype.Dn=function(t,e){return $l()<=Bs.a.DEBUG&&Yl("QueryEngine","Using full collection scan to execute query:",Ed(e)),this.Sn.getDocumentsMatchingQuery(t,e,ch.min())},t}(),im=function(){function t(t,e,n,r){this.persistence=t,this.xn=e,this.R=r,this.Fn=new ff(oh),this.kn=new Ug(function(t){return Gh(t)},$h),this.On=ch.min(),this._n=t.getMutationQueue(n),this.$n=t.getRemoteDocumentCache(),this.qe=t.getTargetCache(),this.Mn=new em(this.$n,this._n,this.persistence.getIndexManager()),this.Qe=t.getBundleCache(),this.xn.Vn(this.Mn)}return t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(n){return t.collect(n,e.Fn)})},t}();function om(t,e,n,r){return new im(t,e,n,r)}function sm(t,e){return Object(zl.b)(this,void 0,void 0,function(){var n,r,i,o;return Object(zl.d)(this,function(s){switch(s.label){case 0:return n=nh(t),r=n._n,i=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",function(t){var o;return n._n.getAllMutationBatches(t).next(function(s){return o=s,r=n.persistence.getMutationQueue(e),i=new em(n.$n,r,n.persistence.getIndexManager()),r.getAllMutationBatches(t)}).next(function(e){for(var n=[],r=[],s=Ef(),a=0,u=o;a<u.length;a++){var c=u[a];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++)s=s.add(h[l].key)}for(var d=0,f=e;d<f.length;d++){var p=f[d];r.push(p.batchId);for(var g=0,m=p.mutations;g<m.length;g++)s=s.add(m[g].key)}return i.pn(t,s).next(function(t){return{Ln:t,removedBatchIds:n,addedBatchIds:r}})})})];case 1:return o=s.sent(),[2,(n._n=r,n.Mn=i,n.xn.Vn(n.Mn),o)]}})})}function am(t,e){var n=nh(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(t){var r=e.batch.keys(),i=n.$n.newChangeBuffer({trackRemovals:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),s=Up.resolve();return o.forEach(function(t){s=s.next(function(){return r.getEntry(e,t)}).next(function(e){var o=n.docVersions.get(t);eh(null!==o),e.version.compareTo(o)<0&&(i.applyToRemoteDocument(e,n),e.isValidDocument()&&r.addEntry(e,n.commitVersion))})}),s.next(function(){return t._n.removeMutationBatch(e,i)})}(n,t,e,i).next(function(){return i.apply(t)}).next(function(){return n._n.performConsistencyCheck(t)}).next(function(){return n.Mn.pn(t,r)})})}function um(t){var e=nh(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",function(t){return e.qe.getLastRemoteSnapshotVersion(t)})}function cm(t,e){var n=nh(t),r=e.snapshotVersion,i=n.Fn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",function(t){var o=n.$n.newChangeBuffer({trackRemovals:!0});i=n.Fn;var s=[];e.targetChanges.forEach(function(e,o){var a=i.get(o);if(a){s.push(n.qe.removeMatchingKeys(t,e.removedDocuments,o).next(function(){return n.qe.addMatchingKeys(t,e.addedDocuments,o)}));var u=e.resumeToken;if(u.approximateByteSize()>0){var c=a.withResumeToken(u,r).withSequenceNumber(t.currentSequenceNumber);i=i.insert(o,c),function(t,e,n){return eh(e.resumeToken.approximateByteSize()>0),0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(a,c,e)&&s.push(n.qe.updateTargetData(t,c))}}});var a=bf();if(e.documentUpdates.forEach(function(r,i){e.resolvedLimboDocuments.has(r)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))}),s.push(lm(t,o,e.documentUpdates,r,void 0).next(function(t){a=t})),!r.isEqual(ch.min())){var u=n.qe.getLastRemoteSnapshotVersion(t).next(function(e){return n.qe.setTargetsMetadata(t,t.currentSequenceNumber,r)});s.push(u)}return Up.waitFor(s).next(function(){return o.apply(t)}).next(function(){return n.Mn.En(t,a)}).next(function(){return a})}).then(function(t){return n.Fn=i,t})}function lm(t,e,n,r,i){var o=Ef();return n.forEach(function(t){return o=o.add(t)}),e.getEntries(t,o).next(function(t){var o=bf();return n.forEach(function(n,s){var a=t.get(n),u=(null==i?void 0:i.get(n))||r;s.isNoDocument()&&s.version.isEqual(ch.min())?(e.removeEntry(n,u),o=o.insert(n,s)):!a.isValidDocument()||s.version.compareTo(a.version)>0||0===s.version.compareTo(a.version)&&a.hasPendingWrites?(e.addEntry(s,u),o=o.insert(n,s)):Yl("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)}),o})}function hm(t,e){var n=nh(t);return n.persistence.runTransaction("Get next mutation batch","readonly",function(t){return void 0===e&&(e=-1),n._n.getNextMutationBatchAfterBatchId(t,e)})}function dm(t,e){var n=nh(t);return n.persistence.runTransaction("Allocate target","readwrite",function(t){var r;return n.qe.getTargetData(t,e).next(function(i){return i?Up.resolve(r=i):n.qe.allocateTargetId(t).next(function(i){return r=new tg(e,i,0,t.currentSequenceNumber),n.qe.addTargetData(t,r).next(function(){return r})})})}).then(function(t){var r=n.Fn.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Fn=n.Fn.insert(t.targetId,t),n.kn.set(e,t.targetId)),t})}function fm(t,e,n){return Object(zl.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(zl.d)(this,function(a){switch(a.label){case 0:r=nh(t),i=r.Fn.get(e),o=n?"readwrite":"readwrite-primary",a.label=1;case 1:return a.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,function(t){return r.persistence.referenceDelegate.removeTarget(t,i)})];case 2:a.sent(),a.label=3;case 3:return[3,5];case 4:if(!Kp(s=a.sent()))throw s;return Yl("LocalStore","Failed to update sequence numbers for target "+e+": "+s),[3,5];case 5:return r.Fn=r.Fn.remove(e),r.kn.delete(i.target),[2]}})})}function pm(t,e,n){var r=nh(t),i=ch.min(),o=Ef();return r.persistence.runTransaction("Execute query","readonly",function(t){return function(t,e,n){var r=nh(t),i=r.kn.get(n);return void 0!==i?Up.resolve(r.Fn.get(i)):r.qe.getTargetData(e,n)}(r,t,wd(e)).next(function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(t,e.targetId).next(function(t){o=t})}).next(function(){return r.xn.getDocumentsMatchingQuery(t,e,n?i:ch.min(),n?o:Ef())}).next(function(t){return{documents:t,Bn:o}})})}function gm(t,e){var n=nh(t),r=nh(n.qe),i=n.Fn.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",function(t){return r.lt(t,e).next(function(t){return t?t.target:null})})}function mm(t){var e=nh(t);return e.persistence.runTransaction("Get new document changes","readonly",function(t){return function(t,e,n){var r=nh(t),i=bf(),o=ig(n),s=Kg(e),a=IDBKeyRange.lowerBound(o,!0);return s.Ot({index:Ip.readTimeIndex,range:a},function(t,e){var n=ng(r.R,e);i=i.insert(n.key,n),o=e.readTime}).next(function(){return{wn:i,readTime:og(o)}})}(e.$n,t,e.On)}).then(function(t){var n=t.wn;return e.On=t.readTime,n})}function ym(t){return Object(zl.b)(this,void 0,void 0,function(){var e;return Object(zl.d)(this,function(n){return[2,(e=nh(t)).persistence.runTransaction("Synchronize last document change read time","readonly",function(t){return function(t){var e=Kg(t),n=ch.min();return e.Ot({index:Ip.readTimeIndex,reverse:!0},function(t,e,r){e.readTime&&(n=og(e.readTime)),r.done()}).next(function(){return n})}(t)}).then(function(t){e.On=t})]})})}function vm(t,e,n,r){return Object(zl.b)(this,void 0,void 0,function(){var i,o,s,a,u,c,l,h,d,f;return Object(zl.d)(this,function(p){switch(p.label){case 0:for(i=nh(t),o=Ef(),s=bf(),a=Sf(),u=0,c=n;u<c.length;u++)h=e.qn((l=c[u]).metadata.name),l.document&&(o=o.add(h)),s=s.insert(h,e.Un(l)),a=a.insert(h,e.Qn(l.metadata.readTime));return d=i.$n.newChangeBuffer({trackRemovals:!0}),[4,dm(i,function(t){return wd(pd(ph.fromString("__bundle__/docs/"+t)))}(r))];case 1:return f=p.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",function(t){return lm(t,d,s,ch.min(),a).next(function(e){return d.apply(t),e}).next(function(e){return i.qe.removeMatchingKeysForTargetId(t,f.targetId).next(function(){return i.qe.addMatchingKeys(t,o,f.targetId)}).next(function(){return i.Mn.En(t,e)}).next(function(){return e})})})]}})})}function bm(t,e,n){return void 0===n&&(n=Ef()),Object(zl.b)(this,void 0,void 0,function(){var r,i;return Object(zl.d)(this,function(o){switch(o.label){case 0:return[4,dm(t,wd(hg(e.bundledQuery)))];case 1:return r=o.sent(),[2,(i=nh(t)).persistence.runTransaction("Save named query","readwrite",function(t){var o=Hf(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Qe.saveNamedQuery(t,e);var s=r.withResumeToken(vh.EMPTY_BYTE_STRING,o);return i.Fn=i.Fn.insert(s.targetId,s),i.qe.updateTargetData(t,s).next(function(){return i.qe.removeMatchingKeysForTargetId(t,r.targetId)}).next(function(){return i.qe.addMatchingKeys(t,n,r.targetId)}).next(function(){return i.Qe.saveNamedQuery(t,e)})})]}})})}var _m=function(){function t(t){this.R=t,this.Kn=new Map,this.jn=new Map}return t.prototype.getBundleMetadata=function(t,e){return Up.resolve(this.Kn.get(e))},t.prototype.saveBundleMetadata=function(t,e){var n;return this.Kn.set(e.id,{id:(n=e).id,version:n.version,createTime:Hf(n.createTime)}),Up.resolve()},t.prototype.getNamedQuery=function(t,e){return Up.resolve(this.jn.get(e))},t.prototype.saveNamedQuery=function(t,e){return this.jn.set(e.name,function(t){return{name:t.name,query:hg(t.bundledQuery),readTime:Hf(t.readTime)}}(e)),Up.resolve()},t}(),wm=function(){function t(){this.Wn=new mf(Om.Gn),this.zn=new mf(Om.Hn)}return t.prototype.isEmpty=function(){return this.Wn.isEmpty()},t.prototype.addReference=function(t,e){var n=new Om(t,e);this.Wn=this.Wn.add(n),this.zn=this.zn.add(n)},t.prototype.Jn=function(t,e){var n=this;t.forEach(function(t){return n.addReference(t,e)})},t.prototype.removeReference=function(t,e){this.Yn(new Om(t,e))},t.prototype.Xn=function(t,e){var n=this;t.forEach(function(t){return n.removeReference(t,e)})},t.prototype.Zn=function(t){var e=this,n=new kh(new ph([])),r=new Om(n,t),i=new Om(n,t+1),o=[];return this.zn.forEachInRange([r,i],function(t){e.Yn(t),o.push(t.key)}),o},t.prototype.ts=function(){var t=this;this.Wn.forEach(function(e){return t.Yn(e)})},t.prototype.Yn=function(t){this.Wn=this.Wn.delete(t),this.zn=this.zn.delete(t)},t.prototype.es=function(t){var e=new kh(new ph([])),n=new Om(e,t),r=new Om(e,t+1),i=Ef();return this.zn.forEachInRange([n,r],function(t){i=i.add(t.key)}),i},t.prototype.containsKey=function(t){var e=new Om(t,0),n=this.Wn.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),Om=function(){function t(t,e){this.key=t,this.ns=e}return t.Gn=function(t,e){return kh.comparator(t.key,e.key)||oh(t.ns,e.ns)},t.Hn=function(t,e){return oh(t.ns,e.ns)||kh.comparator(t.key,e.key)},t}(),Sm=function(){function t(t,e){this.Ut=t,this.referenceDelegate=e,this._n=[],this.ss=1,this.rs=new mf(Om.Gn)}return t.prototype.checkEmpty=function(t){return Up.resolve(0===this._n.length)},t.prototype.addMutationBatch=function(t,e,n,r){var i=this.ss;this.ss++;var o=new Xp(i,e,n,r);this._n.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.rs=this.rs.add(new Om(u.key,i)),this.Ut.addToCollectionParentIndex(t,u.key.path.popLast())}return Up.resolve(o)},t.prototype.lookupMutationBatch=function(t,e){return Up.resolve(this.os(e))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this.cs(e+1),r=n<0?0:n;return Up.resolve(this._n.length>r?this._n[r]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return Up.resolve(0===this._n.length?-1:this.ss-1)},t.prototype.getAllMutationBatches=function(t){return Up.resolve(this._n.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new Om(e,0),i=new Om(e,Number.POSITIVE_INFINITY),o=[];return this.rs.forEachInRange([r,i],function(t){var e=n.os(t.ns);o.push(e)}),Up.resolve(o)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new mf(oh);return e.forEach(function(t){var e=new Om(t,0),i=new Om(t,Number.POSITIVE_INFINITY);n.rs.forEachInRange([e,i],function(t){r=r.add(t.ns)})}),Up.resolve(this.us(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1,i=n;kh.isDocumentKey(i)||(i=i.child(""));var o=new Om(new kh(i),0),s=new mf(oh);return this.rs.forEachWhile(function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(s=s.add(t.ns)),!0)},o),Up.resolve(this.us(s))},t.prototype.us=function(t){var e=this,n=[];return t.forEach(function(t){var r=e.os(t);null!==r&&n.push(r)}),n},t.prototype.removeMutationBatch=function(t,e){var n=this;eh(0===this.hs(e.batchId,"removed")),this._n.shift();var r=this.rs;return Up.forEach(e.mutations,function(i){var o=new Om(i.key,e.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(function(){n.rs=r})},t.prototype.Gt=function(t){},t.prototype.containsKey=function(t,e){var n=new Om(e,0),r=this.rs.firstAfterOrEqual(n);return Up.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return Up.resolve()},t.prototype.hs=function(t,e){return this.cs(t)},t.prototype.cs=function(t){return 0===this._n.length?0:t-this._n[0].batchId},t.prototype.os=function(t){var e=this.cs(t);return e<0||e>=this._n.length?null:this._n[e]},t}(),Cm=function(){function t(t,e){this.Ut=t,this.ls=e,this.docs=new ff(kh.comparator),this.size=0}return t.prototype.addEntry=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.ls(e);return this.docs=this.docs.insert(r,{document:e.clone(),size:s,readTime:n}),this.size+=s-o,this.Ut.addToCollectionParentIndex(t,r.path.popLast())},t.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return Up.resolve(n?n.document.clone():Kh.newInvalidDocument(e))},t.prototype.getEntries=function(t,e){var n=this,r=bf();return e.forEach(function(t){var e=n.docs.get(t);r=r.insert(t,e?e.document.clone():Kh.newInvalidDocument(t))}),Up.resolve(r)},t.prototype.getDocumentsMatchingQuery=function(t,e,n){for(var r=bf(),i=new kh(e.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var s=o.getNext(),a=s.value,u=a.document,c=a.readTime;if(!e.path.isPrefixOf(s.key.path))break;c.compareTo(n)<=0||Td(e,u)&&(r=r.insert(u.key,u.clone()))}return Up.resolve(r)},t.prototype.fs=function(t,e){return Up.forEach(this.docs,function(t){return e(t)})},t.prototype.newChangeBuffer=function(t){return new Em(this)},t.prototype.getSize=function(t){return Up.resolve(this.size)},t}(),Em=function(t){function e(e){var n=this;return(n=t.call(this)||this).Ie=e,n}return Object(zl.c)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach(function(r,i){i.document.isValidDocument()?n.push(e.Ie.addEntry(t,i.document,e.getReadTime(r))):e.Ie.removeEntry(r)}),Up.waitFor(n)},e.prototype.getFromCache=function(t,e){return this.Ie.getEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.Ie.getEntries(t,e)},e}(qg),Tm=function(){function t(t){this.persistence=t,this.ds=new Ug(function(t){return Gh(t)},$h),this.lastRemoteSnapshotVersion=ch.min(),this.highestTargetId=0,this.ws=0,this._s=new wm,this.targetCount=0,this.ys=xg.Jt()}return t.prototype.forEachTarget=function(t,e){return this.ds.forEach(function(t,n){return e(n)}),Up.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return Up.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return Up.resolve(this.ws)},t.prototype.allocateTargetId=function(t){return this.highestTargetId=this.ys.next(),Up.resolve(this.highestTargetId)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ws&&(this.ws=e),Up.resolve()},t.prototype.te=function(t){this.ds.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.ys=new xg(e),this.highestTargetId=e),t.sequenceNumber>this.ws&&(this.ws=t.sequenceNumber)},t.prototype.addTargetData=function(t,e){return this.te(e),this.targetCount+=1,Up.resolve()},t.prototype.updateTargetData=function(t,e){return this.te(e),Up.resolve()},t.prototype.removeTargetData=function(t,e){return this.ds.delete(e.target),this._s.Zn(e.targetId),this.targetCount-=1,Up.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return this.ds.forEach(function(s,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.ds.delete(s),o.push(r.removeMatchingKeysForTargetId(t,a.targetId)),i++)}),Up.waitFor(o).next(function(){return i})},t.prototype.getTargetCount=function(t){return Up.resolve(this.targetCount)},t.prototype.getTargetData=function(t,e){var n=this.ds.get(e)||null;return Up.resolve(n)},t.prototype.addMatchingKeys=function(t,e,n){return this._s.Jn(e,n),Up.resolve()},t.prototype.removeMatchingKeys=function(t,e,n){this._s.Xn(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach(function(e){i.push(r.markPotentiallyOrphaned(t,e))}),Up.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this._s.Zn(e),Up.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this._s.es(e);return Up.resolve(n)},t.prototype.containsKey=function(t,e){return Up.resolve(this._s.containsKey(e))},t}(),Im=function(){function t(t,e){var n=this;this.gs={},this.Ne=new Kl(0),this.xe=!1,this.xe=!0,this.referenceDelegate=t(this),this.qe=new Tm(this),this.Ut=new gg,this.Ue=function(t,e){return new Cm(t,function(t){return n.referenceDelegate.ps(t)})}(this.Ut),this.R=new eg(e),this.Qe=new _m(this.R)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(){},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getMutationQueue=function(t){var e=this.gs[t.toKey()];return e||(e=new Sm(this.Ut,this.referenceDelegate),this.gs[t.toKey()]=e),e},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getBundleCache=function(){return this.Qe},t.prototype.runTransaction=function(t,e,n){var r=this;Yl("MemoryPersistence","Starting transaction:",t);var i=new xm(this.Ne.next());return this.referenceDelegate.Es(),n(i).next(function(t){return r.referenceDelegate.Ts(i).next(function(){return t})}).toPromise().then(function(t){return i.raiseOnCommittedEvent(),t})},t.prototype.Is=function(t,e){return Up.or(Object.values(this.gs).map(function(n){return function(){return n.containsKey(t,e)}}))},t}(),xm=function(t){function e(e){var n=this;return(n=t.call(this)||this).currentSequenceNumber=e,n}return Object(zl.c)(e,t),e}(Fp),km=function(){function t(t){this.persistence=t,this.As=new wm,this.Rs=null}return t.bs=function(e){return new t(e)},Object.defineProperty(t.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw th()},enumerable:!1,configurable:!0}),t.prototype.addReference=function(t,e,n){return this.As.addReference(n,e),this.vs.delete(n.toString()),Up.resolve()},t.prototype.removeReference=function(t,e,n){return this.As.removeReference(n,e),this.vs.add(n.toString()),Up.resolve()},t.prototype.markPotentiallyOrphaned=function(t,e){return this.vs.add(e.toString()),Up.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.As.Zn(e.targetId).forEach(function(t){return n.vs.add(t.toString())});var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next(function(t){t.forEach(function(t){return n.vs.add(t.toString())})}).next(function(){return r.removeTargetData(t,e)})},t.prototype.Es=function(){this.Rs=new Set},t.prototype.Ts=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Up.forEach(this.vs,function(r){var i=kh.fromPath(r);return e.Ps(t,i).next(function(t){t||n.removeEntry(i)})}).next(function(){return e.Rs=null,n.apply(t)})},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.Ps(t,e).next(function(t){t?n.vs.delete(e.toString()):n.vs.add(e.toString())})},t.prototype.ps=function(t){return 0},t.prototype.Ps=function(t,e){var n=this;return Up.or([function(){return Up.resolve(n.As.containsKey(e))},function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.Is(t,e)}])},t}(),Nm=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();function Am(t,e){return"firestore_clients_"+t+"_"+e}function jm(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.isAuthenticated()&&(r+="_"+e.uid),r}function Pm(t,e){return"firestore_targets_"+t+"_"+e}Nm.UNAUTHENTICATED=new Nm(null),Nm.GOOGLE_CREDENTIALS=new Nm("google-credentials-uid"),Nm.FIRST_PARTY=new Nm("first-party-uid");var Rm=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.Vs=function(e,n,r){var i,o=JSON.parse(r),s="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return s&&o.error&&(s="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new Ql(o.error.code,o.error.message)),s?new t(e,n,o.state,i):(Jl("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Dm=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.Vs=function(e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new Ql(i.error.code,i.error.message)),o?new t(e,i.state,r):(Jl("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Lm=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Vs=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=If(),s=0;i&&s<r.activeTargetIds.length;++s)i=xh(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(Jl("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),Mm=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Vs=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(Jl("SharedClientState","Failed to parse online state: "+e),null)},t}(),Fm=function(){function t(){this.activeTargetIds=If()}return t.prototype.Ds=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Cs=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.Ss=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),Vm=function(){function t(t,e,n,r,i){this.window=t,this.Se=e,this.persistenceKey=n,this.Ns=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.Fs.bind(this),this.ks=new ff(oh),this.started=!1,this.Os=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.$s=Am(this.persistenceKey,this.Ns),this.Ms=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.ks=this.ks.insert(this.Ns,new Fm),this.Ls=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Us=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Qs=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return t.yt=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return Object(zl.b)(this,void 0,void 0,function(){var t,e,n,r,i,o,s,a,u,c,l=this;return Object(zl.d)(this,function(h){switch(h.label){case 0:return[4,this.syncEngine.fn()];case 1:for(t=h.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Ns&&(i=this.getItem(Am(this.persistenceKey,r)))&&(o=Lm.Vs(r,i))&&(this.ks=this.ks.insert(o.clientId,o));for(this.Ks(),(s=this.storage.getItem(this.Us))&&(a=this.js(s))&&this.Ws(a),u=0,c=this.Os;u<c.length;u++)this.Fs(c[u]);return this.Os=[],this.window.addEventListener("unload",function(){return l.shutdown()}),this.started=!0,[2]}})})},t.prototype.writeSequenceNumber=function(t){this.setItem(this.Ms,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.ks)},t.prototype.isActiveQueryTarget=function(t){var e=!1;return this.ks.forEach(function(n,r){r.activeTargetIds.has(t)&&(e=!0)}),e},t.prototype.addPendingMutation=function(t){this.zs(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.zs(t,e,n),this.Hs(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(Pm(this.persistenceKey,t));if(n){var r=Dm.Vs(t,n);r&&(e=r.state)}}return this.Js.Ds(t),this.Ks(),e},t.prototype.removeLocalQueryTarget=function(t){this.Js.Cs(t),this.Ks()},t.prototype.isLocalQueryTarget=function(t){return this.Js.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(Pm(this.persistenceKey,t))},t.prototype.updateQueryState=function(t,e,n){this.Ys(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach(function(t){r.Hs(t)}),this.currentUser=t,n.forEach(function(t){r.addPendingMutation(t)})},t.prototype.setOnlineState=function(t){this.Xs(t)},t.prototype.notifyBundleLoaded=function(){this.Zs()},t.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.$s),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return Yl("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){Yl("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){Yl("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Fs=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(Yl("SharedClientState","EVENT",n.key,n.newValue),n.key===this.$s)return void Jl("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable(function(){return Object(zl.b)(e,void 0,void 0,function(){var t,e,r,i,o,s;return Object(zl.d)(this,function(a){if(this.started){if(null!==n.key)if(this.Ls.test(n.key)){if(null==n.newValue)return t=this.ti(n.key),[2,this.ei(t,null)];if(e=this.ni(n.key,n.newValue))return[2,this.ei(e.clientId,e)]}else if(this.Bs.test(n.key)){if(null!==n.newValue&&(r=this.si(n.key,n.newValue)))return[2,this.ii(r)]}else if(this.qs.test(n.key)){if(null!==n.newValue&&(i=this.ri(n.key,n.newValue)))return[2,this.oi(i)]}else if(n.key===this.Us){if(null!==n.newValue&&(o=this.js(n.newValue)))return[2,this.Ws(o)]}else if(n.key===this.Ms)(s=function(t){var e=Kl.o;if(null!=t)try{var n=JSON.parse(t);eh("number"==typeof n),e=n}catch(t){Jl("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==Kl.o&&this.sequenceNumberHandler(s);else if(n.key===this.Qs)return[2,this.syncEngine.ci()]}else this.Os.push(n);return[2]})})})}},Object.defineProperty(t.prototype,"Js",{get:function(){return this.ks.get(this.Ns)},enumerable:!1,configurable:!0}),t.prototype.Ks=function(){this.setItem(this.$s,this.Js.Ss())},t.prototype.zs=function(t,e,n){var r=new Rm(this.currentUser,t,e,n),i=jm(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Ss())},t.prototype.Hs=function(t){var e=jm(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Xs=function(t){this.storage.setItem(this.Us,JSON.stringify({clientId:this.Ns,onlineState:t}))},t.prototype.Ys=function(t,e,n){var r=Pm(this.persistenceKey,t),i=new Dm(t,e,n);this.setItem(r,i.Ss())},t.prototype.Zs=function(){this.setItem(this.Qs,"value-not-used")},t.prototype.ti=function(t){var e=this.Ls.exec(t);return e?e[1]:null},t.prototype.ni=function(t,e){var n=this.ti(t);return Lm.Vs(n,e)},t.prototype.si=function(t,e){var n=this.Bs.exec(t),r=Number(n[1]);return Rm.Vs(new Nm(void 0!==n[2]?n[2]:null),r,e)},t.prototype.ri=function(t,e){var n=this.qs.exec(t),r=Number(n[1]);return Dm.Vs(r,e)},t.prototype.js=function(t){return Mm.Vs(t)},t.prototype.ii=function(t){return Object(zl.b)(this,void 0,void 0,function(){return Object(zl.d)(this,function(e){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(t.batchId,t.state,t.error)]:(Yl("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])})})},t.prototype.oi=function(t){return this.syncEngine.ai(t.targetId,t.state,t.error)},t.prototype.ei=function(t,e){var n=this,r=e?this.ks.insert(t,e):this.ks.remove(t),i=this.Gs(this.ks),o=this.Gs(r),s=[],a=[];return o.forEach(function(t){i.has(t)||s.push(t)}),i.forEach(function(t){o.has(t)||a.push(t)}),this.syncEngine.hi(s,a).then(function(){n.ks=r})},t.prototype.Ws=function(t){this.ks.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},t.prototype.Gs=function(t){var e=If();return t.forEach(function(t,n){e=e.unionWith(n.activeTargetIds)}),e},t}(),Um=function(){function t(){this.li=new Fm,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.li.Ds(t),this.fi[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.fi[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.li.Cs(t)},t.prototype.isLocalQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.fi[t]},t.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.start=function(){return this.li=new Fm,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t.prototype.notifyBundleLoaded=function(){},t}(),qm=function(){function t(){}return t.prototype.di=function(t){},t.prototype.shutdown=function(){},t}(),Bm=function(){function t(){var t=this;this.wi=function(){return t._i()},this.mi=function(){return t.yi()},this.gi=[],this.pi()}return t.prototype.di=function(t){this.gi.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},t.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},t.prototype._i=function(){Yl("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(0)},t.prototype.yi=function(){Yl("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(1)},t.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),Hm={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},zm=function(){function t(t){this.Ei=t.Ei,this.Ti=t.Ti}return t.prototype.Ii=function(t){this.Ai=t},t.prototype.Ri=function(t){this.bi=t},t.prototype.onMessage=function(t){this.vi=t},t.prototype.close=function(){this.Ti()},t.prototype.send=function(t){this.Ei(t)},t.prototype.Pi=function(){this.Ai()},t.prototype.Vi=function(t){this.bi(t)},t.prototype.Si=function(t){this.vi(t)},t}(),Km=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.autoDetectLongPolling=e.autoDetectLongPolling,n}return Object(zl.c)(e,t),e.prototype.ki=function(t,e,n,r){return new Promise(function(i,o){var s=new Hl;s.listenOnce(Ul.COMPLETE,function(){try{switch(s.getLastErrorCode()){case Vl.NO_ERROR:var e=s.getResponseJson();Yl("Connection","XHR received:",JSON.stringify(e)),i(e);break;case Vl.TIMEOUT:Yl("Connection",'RPC "'+t+'" timed out'),o(new Ql(Wl.DEADLINE_EXCEEDED,"Request time out"));break;case Vl.HTTP_ERROR:var n=s.getStatus();if(Yl("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var a=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(Wl).indexOf(e)>=0?e:Wl.UNKNOWN}(r.status);o(new Ql(a,r.message))}else o(new Ql(Wl.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new Ql(Wl.UNAVAILABLE,"Connection failed."));break;default:th()}}finally{Yl("Connection",'RPC "'+t+'" completed.')}});var a=JSON.stringify(r);s.send(e,"POST",a,n,15)})},e.prototype.$i=function(t,e){var n=[this.Di,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=new Rl,i=Mu(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.Fi(o.initMessageHeaders,e),Object(qs.u)()||Object(qs.x)()||Object(qs.r)()||Object(qs.t)()||Object(qs.y)()||Object(qs.q)()||(o.httpHeadersOverwriteParam="$httpHeaders");var s=n.join("");Yl("Connection","Creating WebChannel: "+s,o);var a=r.createWebChannel(s,o),u=!1,c=!1,l=new zm({Ei:function(t){c?Yl("Connection","Not sending because WebChannel is closed:",t):(u||(Yl("Connection","Opening WebChannel transport."),a.open(),u=!0),Yl("Connection","WebChannel sending:",t),a.send(t))},Ti:function(){return a.close()}}),h=function(t,e,n){t.listen(e,function(t){try{n(t)}catch(t){setTimeout(function(){throw t},0)}})};return h(a,Bl.EventType.OPEN,function(){c||Yl("Connection","WebChannel transport opened.")}),h(a,Bl.EventType.CLOSE,function(){c||(c=!0,Yl("Connection","WebChannel transport closed"),l.Vi())}),h(a,Bl.EventType.ERROR,function(t){c||(c=!0,Xl("Connection","WebChannel transport errored:",t),l.Vi(new Ql(Wl.UNAVAILABLE,"The operation could not be completed")))}),h(a,Bl.EventType.MESSAGE,function(t){var e;if(!c){var n=t.data[0];eh(!!n);var r=n.error||(null===(e=n[0])||void 0===e?void 0:e.error);if(r){Yl("Connection","WebChannel received error:",r);var i=r.status,o=function(t){var e=sf[t];if(void 0!==e)return df(e)}(i),s=r.message;void 0===o&&(o=Wl.INTERNAL,s="Unknown error status: "+i+" with message "+r.message),c=!0,l.Vi(new Ql(o,s)),a.close()}else Yl("Connection","WebChannel received:",n),l.Si(n)}}),h(i,ql.STAT_EVENT,function(t){10===t.stat?Yl("Connection","Detected buffering proxy"):11===t.stat&&Yl("Connection","Detected no buffering proxy")}),setTimeout(function(){l.Pi()},0),l},e}(function(){function t(t){this.databaseInfo=t,this.databaseId=t.databaseId,this.Di=(t.ssl?"https":"http")+"://"+t.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return t.prototype.Ni=function(t,e,n,r){var i=this.xi(t,e);Yl("RestConnection","Sending: ",i,n);var o={};return this.Fi(o,r),this.ki(t,i,o,n).then(function(t){return Yl("RestConnection","Received: ",t),t},function(e){throw Xl("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e})},t.prototype.Oi=function(t,e,n,r){return this.Ni(t,e,n,r)},t.prototype.Fi=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.3.2",t["X-Firebase-GMPID"]=this.databaseInfo.appId,t["Content-Type"]="text/plain",e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])},t.prototype.xi=function(t,e){return this.Di+"/v1/"+e+":"+Hm[t]},t}());function Wm(){return"undefined"!=typeof window?window:null}function Qm(){return"undefined"!=typeof document?document:null}function Gm(t){return new Vf(t,!0)}var $m=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Se=t,this.timerId=e,this.Mi=n,this.Li=r,this.Bi=i,this.qi=0,this.Ui=null,this.Qi=Date.now(),this.reset()}return t.prototype.reset=function(){this.qi=0},t.prototype.Ki=function(){this.qi=this.Bi},t.prototype.ji=function(t){var e=this;this.cancel();var n=Math.floor(this.qi+this.Wi()),r=Math.max(0,Date.now()-this.Qi),i=Math.max(0,n-r);i>0&&Yl("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.qi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,i,function(){return e.Qi=Date.now(),t()}),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},t.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},t.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},t.prototype.Wi=function(){return(Math.random()-.5)*this.qi},t}(),Ym=function(){function t(t,e,n,r,i,o){this.Se=t,this.zi=n,this.Hi=r,this.Ji=i,this.listener=o,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new $m(t,e)}return t.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.er=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.nr()},t.prototype.stop=function(){return Object(zl.b)(this,void 0,void 0,function(){return Object(zl.d)(this,function(t){switch(t.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},t.prototype.sr=function(){this.state=0,this.Zi.reset()},t.prototype.ir=function(){var t=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,function(){return t.rr()}))},t.prototype.cr=function(t){this.ur(),this.stream.send(t)},t.prototype.rr=function(){return Object(zl.b)(this,void 0,void 0,function(){return Object(zl.d)(this,function(t){return this.er()?[2,this.close(0)]:[2]})})},t.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},t.prototype.close=function(t,e){return Object(zl.b)(this,void 0,void 0,function(){return Object(zl.d)(this,function(n){switch(n.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==t?this.Zi.reset():e&&e.code===Wl.RESOURCE_EXHAUSTED?(Jl(e.toString()),Jl("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Ki()):e&&e.code===Wl.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Ri(e)];case 1:return n.sent(),[2]}})})},t.prototype.ar=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.hr(this.Yi),n=this.Yi;this.Ji.getToken().then(function(e){t.Yi===n&&t.lr(e)},function(n){e(function(){var e=new Ql(Wl.UNKNOWN,"Fetching auth token failed: "+n.message);return t.dr(e)})})},t.prototype.lr=function(t){var e=this,n=this.hr(this.Yi);this.stream=this.wr(t),this.stream.Ii(function(){n(function(){return e.state=2,e.listener.Ii()})}),this.stream.Ri(function(t){n(function(){return e.dr(t)})}),this.stream.onMessage(function(t){n(function(){return e.onMessage(t)})})},t.prototype.nr=function(){var t=this;this.state=4,this.Zi.ji(function(){return Object(zl.b)(t,void 0,void 0,function(){return Object(zl.d)(this,function(t){return this.state=0,this.start(),[2]})})})},t.prototype.dr=function(t){return Yl("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.hr=function(t){var e=this;return function(n){e.Se.enqueueAndForget(function(){return e.Yi===t?n():(Yl("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},t}(),Jm=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).R=i,s}return Object(zl.c)(e,t),e.prototype.wr=function(t){return this.Hi.$i("Listen",t)},e.prototype.onMessage=function(t){this.Zi.reset();var e=function(t,e){var n;if("targetChange"in e){var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:th()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.I?(eh(void 0===e||"string"==typeof e),vh.fromBase64String(e||"")):(eh(void 0===e||e instanceof Uint8Array),vh.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=(a=e.targetChange.cause)&&function(t){var e=void 0===t.code?Wl.UNKNOWN:df(t.code);return new Ql(e,t.message||"")}(a);n=new jf(r,i,o,s||null)}else if("documentChange"in e){i=Qf(t,(r=e.documentChange).document.name),o=Hf(r.document.updateTime);var a=new Hh({mapValue:{fields:r.document.fields}}),u=(s=Kh.newFoundDocument(i,o,a),r.targetIds||[]);n=new Nf(u,r.removedTargetIds||[],s.key,s)}else if("documentDelete"in e)i=Qf(t,(r=e.documentDelete).document),o=r.readTime?Hf(r.readTime):ch.min(),a=Kh.newNoDocument(i,o),n=new Nf([],s=r.removedTargetIds||[],a.key,a);else if("documentRemove"in e)i=Qf(t,(r=e.documentRemove).document),n=new Nf([],o=r.removedTargetIds||[],i,null);else{if(!("filter"in e))return th();var c=e.filter;i=new lf(r=c.count||0),n=new Af(o=c.targetId,i)}return n}(this.R,t),n=function(t){if(!("targetChange"in t))return ch.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?ch.min():e.readTime?Hf(e.readTime):ch.min()}(t);return this.listener._r(e,n)},e.prototype.mr=function(t){var e={};e.database=Yf(this.R),e.addTarget=function(t,e){var n,r=e.target;return(n=Yh(r)?{documents:np(t,r)}:{query:rp(t,r)}).targetId=e.targetId,e.resumeToken.approximateByteSize()>0?n.resumeToken=qf(t,e.resumeToken):e.snapshotVersion.compareTo(ch.min())>0&&(n.readTime=Uf(t,e.snapshotVersion.toTimestamp())),n}(this.R,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return th()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,t);n&&(e.labels=n),this.cr(e)},e.prototype.yr=function(t){var e={};e.database=Yf(this.R),e.removeTarget=t,this.cr(e)},e}(Ym),Xm=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).R=i,s.gr=!1,s}return Object(zl.c)(e,t),Object.defineProperty(e.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.ar=function(){this.gr&&this.Er([])},e.prototype.wr=function(t){return this.Hi.$i("Write",t)},e.prototype.onMessage=function(t){if(eh(!!t.streamToken),this.lastStreamToken=t.streamToken,this.gr){this.Zi.reset();var e=function(t,e){return t&&t.length>0?(eh(void 0!==e),t.map(function(t){return function(t,e){var n=Hf(t.updateTime?t.updateTime:e);return n.isEqual(ch.min())&&(n=Hf(e)),new Kd(n,t.transformResults||[])}(t,e)})):[]}(t.writeResults,t.commitTime),n=Hf(t.commitTime);return this.listener.Tr(n,e)}return eh(!t.writeResults||0===t.writeResults.length),this.gr=!0,this.listener.Ir()},e.prototype.Ar=function(){var t={};t.database=Yf(this.R),this.cr(t)},e.prototype.Er=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map(function(t){return tp(e.R,t)})};this.cr(n)},e}(Ym),Zm=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Hi=n,i.R=r,i.Rr=!1,i}return Object(zl.c)(e,t),e.prototype.br=function(){if(this.Rr)throw new Ql(Wl.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Ni=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then(function(i){return r.Hi.Ni(t,e,n,i)}).catch(function(t){throw t.code===Wl.UNAUTHENTICATED&&r.credentials.invalidateToken(),t})},e.prototype.Oi=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then(function(i){return r.Hi.Oi(t,e,n,i)}).catch(function(t){throw t.code===Wl.UNAUTHENTICATED&&r.credentials.invalidateToken(),t})},e.prototype.terminate=function(){this.Rr=!1},e}(function(){}),ty=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return t.prototype.Sr=function(){var t=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,function(){return t.Pr=null,t.Cr("Backend didn't respond within 10 seconds."),t.Dr("Offline"),Promise.resolve()}))},t.prototype.Nr=function(t){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.Fr(),this.Cr("Connection failed 1 times. Most recent error: "+t.toString()),this.Dr("Offline")))},t.prototype.set=function(t){this.Fr(),this.vr=0,"Online"===t&&(this.Vr=!1),this.Dr(t)},t.prototype.Dr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.Cr=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?(Jl(e),this.Vr=!1):Yl("OnlineStateTracker",e)},t.prototype.Fr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},t}(),ey=function(t,e,n,r,i){var o=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.kr=[],this.Or=new Map,this.$r=new Set,this.Mr=[],this.Lr=i,this.Lr.di(function(t){n.enqueueAndForget(function(){return Object(zl.b)(o,void 0,void 0,function(){return Object(zl.d)(this,function(t){switch(t.label){case 0:return ly(this)?(Yl("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return Object(zl.b)(this,void 0,void 0,function(){var e;return Object(zl.d)(this,function(n){switch(n.label){case 0:return(e=nh(t)).$r.add(4),[4,ry(e)];case 1:return n.sent(),e.Br.set("Unknown"),e.$r.delete(4),[4,ny(e)];case 2:return n.sent(),[2]}})})}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})}),this.Br=new ty(n,r)};function ny(t){return Object(zl.b)(this,void 0,void 0,function(){var e,n;return Object(zl.d)(this,function(r){switch(r.label){case 0:if(!ly(t))return[3,4];e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function ry(t){return Object(zl.b)(this,void 0,void 0,function(){var e,n;return Object(zl.d)(this,function(r){switch(r.label){case 0:e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function iy(t,e){var n=nh(t);n.Or.has(e.targetId)||(n.Or.set(e.targetId,e),cy(n)?uy(n):Ey(n).er()&&sy(n,e))}function oy(t,e){var n=nh(t),r=Ey(n);n.Or.delete(e),r.er()&&ay(n,e),0===n.Or.size&&(r.er()?r.ir():ly(n)&&n.Br.set("Unknown"))}function sy(t,e){t.qr.U(e.targetId),Ey(t).mr(e)}function ay(t,e){t.qr.U(e),Ey(t).yr(e)}function uy(t){t.qr=new Rf({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},lt:function(e){return t.Or.get(e)||null}}),Ey(t).start(),t.Br.Sr()}function cy(t){return ly(t)&&!Ey(t).tr()&&t.Or.size>0}function ly(t){return 0===nh(t).$r.size}function hy(t){t.qr=void 0}function dy(t){return Object(zl.b)(this,void 0,void 0,function(){return Object(zl.d)(this,function(e){return t.Or.forEach(function(e,n){sy(t,e)}),[2]})})}function fy(t,e){return Object(zl.b)(this,void 0,void 0,function(){return Object(zl.d)(this,function(n){return hy(t),cy(t)?(t.Br.Nr(e),uy(t)):t.Br.set("Unknown"),[2]})})}function py(t,e,n){return Object(zl.b)(this,void 0,void 0,function(){var r,i,o;return Object(zl.d)(this,function(s){switch(s.label){case 0:if(t.Br.set("Online"),!(e instanceof jf&&2===e.state&&e.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(t,e){return Object(zl.b)(this,void 0,void 0,function(){var n,r,i,o;return Object(zl.d)(this,function(s){switch(s.label){case 0:n=e.cause,r=0,i=e.targetIds,s.label=1;case 1:return r<i.length?t.Or.has(o=i[r])?[4,t.remoteSyncer.rejectListen(o,n)]:[3,3]:[3,5];case 2:s.sent(),t.Or.delete(o),t.qr.removeTarget(o),s.label=3;case 3:s.label=4;case 4:return r++,[3,1];case 5:return[2]}})})}(t,e)];case 2:return s.sent(),[3,5];case 3:return r=s.sent(),Yl("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,gy(t,r)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof Nf?t.qr.X(e):e instanceof Af?t.qr.rt(e):t.qr.et(e),n.isEqual(ch.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,um(t.localStore)];case 8:return i=s.sent(),n.compareTo(i)>=0?[4,function(t,e){var n=t.qr.ut(e);return n.targetChanges.forEach(function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=t.Or.get(r);i&&t.Or.set(r,i.withResumeToken(n.resumeToken,e))}}),n.targetMismatches.forEach(function(e){var n=t.Or.get(e);if(n){t.Or.set(e,n.withResumeToken(vh.EMPTY_BYTE_STRING,n.snapshotVersion)),ay(t,e);var r=new tg(n.target,e,1,n.sequenceNumber);sy(t,r)}}),t.remoteSyncer.applyRemoteEvent(n)}(t,n)]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return Yl("RemoteStore","Failed to raise snapshot:",o=s.sent()),[4,gy(t,o)];case 12:return s.sent(),[3,13];case 13:return[2]}})})}function gy(t,e,n){return Object(zl.b)(this,void 0,void 0,function(){var r=this;return Object(zl.d)(this,function(i){switch(i.label){case 0:if(!Kp(e))throw e;return t.$r.add(1),[4,ry(t)];case 1:return i.sent(),t.Br.set("Offline"),n||(n=function(){return um(t.localStore)}),t.asyncQueue.enqueueRetryable(function(){return Object(zl.b)(r,void 0,void 0,function(){return Object(zl.d)(this,function(e){switch(e.label){case 0:return Yl("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.$r.delete(1),[4,ny(t)];case 2:return e.sent(),[2]}})})}),[2]}})})}function my(t,e){return e().catch(function(n){return gy(t,n,e)})}function yy(t){return Object(zl.b)(this,void 0,void 0,function(){var e,n,r,i,o;return Object(zl.d)(this,function(s){switch(s.label){case 0:e=nh(t),n=Ty(e),r=e.kr.length>0?e.kr[e.kr.length-1].batchId:-1,s.label=1;case 1:if(!function(t){return ly(t)&&t.kr.length<10}(e))return[3,7];s.label=2;case 2:return s.trys.push([2,4,,6]),[4,hm(e.localStore,r)];case 3:return null===(i=s.sent())?(0===e.kr.length&&n.ir(),[3,7]):(r=i.batchId,function(t,e){t.kr.push(e);var n=Ty(t);n.er()&&n.pr&&n.Er(e.mutations)}(e,i),[3,6]);case 4:return o=s.sent(),[4,gy(e,o)];case 5:return s.sent(),[3,6];case 6:return[3,1];case 7:return vy(e)&&by(e),[2]}})})}function vy(t){return ly(t)&&!Ty(t).tr()&&t.kr.length>0}function by(t){Ty(t).start()}function _y(t){return Object(zl.b)(this,void 0,void 0,function(){return Object(zl.d)(this,function(e){return Ty(t).Ar(),[2]})})}function wy(t){return Object(zl.b)(this,void 0,void 0,function(){var e,n,r;return Object(zl.d)(this,function(i){for(e=Ty(t),n=0,r=t.kr;n<r.length;n++)e.Er(r[n].mutations);return[2]})})}function Oy(t,e,n){return Object(zl.b)(this,void 0,void 0,function(){var r,i;return Object(zl.d)(this,function(o){switch(o.label){case 0:return r=t.kr.shift(),i=Zp.from(r,e,n),[4,my(t,function(){return t.remoteSyncer.applySuccessfulWrite(i)})];case 1:return o.sent(),[4,yy(t)];case 2:return o.sent(),[2]}})})}function Sy(t,e){return Object(zl.b)(this,void 0,void 0,function(){return Object(zl.d)(this,function(n){switch(n.label){case 0:return e&&Ty(t).pr?[4,function(t,e){return Object(zl.b)(this,void 0,void 0,function(){var n,r;return Object(zl.d)(this,function(i){switch(i.label){case 0:return hf(r=e.code)&&r!==Wl.ABORTED?(n=t.kr.shift(),Ty(t).sr(),[4,my(t,function(){return t.remoteSyncer.rejectFailedWrite(n.batchId,e)})]):[3,3];case 1:return i.sent(),[4,yy(t)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return vy(t)&&by(t),[2]}})})}function Cy(t,e){return Object(zl.b)(this,void 0,void 0,function(){var n;return Object(zl.d)(this,function(r){switch(r.label){case 0:return n=nh(t),e?(n.$r.delete(2),[4,ny(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.$r.add(2),[4,ry(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}})})}function Ey(t){var e=this;return t.Ur||(t.Ur=function(t,e,n){var r=nh(t);return r.br(),new Jm(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:dy.bind(null,t),Ri:fy.bind(null,t),_r:py.bind(null,t)}),t.Mr.push(function(n){return Object(zl.b)(e,void 0,void 0,function(){return Object(zl.d)(this,function(e){switch(e.label){case 0:return n?(t.Ur.sr(),cy(t)?uy(t):t.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Ur.stop()];case 2:e.sent(),hy(t),e.label=3;case 3:return[2]}})})})),t.Ur}function Ty(t){var e=this;return t.Qr||(t.Qr=function(t,e,n){var r=nh(t);return r.br(),new Xm(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:_y.bind(null,t),Ri:Sy.bind(null,t),Ir:wy.bind(null,t),Tr:Oy.bind(null,t)}),t.Mr.push(function(n){return Object(zl.b)(e,void 0,void 0,function(){return Object(zl.d)(this,function(e){switch(e.label){case 0:return n?(t.Qr.sr(),[4,yy(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Qr.stop()];case 3:e.sent(),t.kr.length>0&&(Yl("RemoteStore","Stopping write stream with "+t.kr.length+" pending writes"),t.kr=[]),e.label=4;case 4:return[2]}})})})),t.Qr}var Iy=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Vp,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(function(t){})}return t.createAndSchedule=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout(function(){return e.handleDelayElapsed()},t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ql(Wl.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget(function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then(function(e){return t.deferred.resolve(e)})):Promise.resolve()})},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}();function xy(t,e){if(Jl("AsyncQueue",e+": "+t),Kp(t))return new Ql(Wl.UNAVAILABLE,e+": "+t);throw t}var ky=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||kh.comparator(e.key,n.key)}:function(t,e){return kh.comparator(t.key,e.key)},this.keyedMap=wf(),this.sortedSet=new ff(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach(function(e){t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),Ny=function(){function t(){this.Kr=new ff(kh.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Kr.get(e);n?0!==t.type&&3===n.type?this.Kr=this.Kr.insert(e,t):3===t.type&&1!==n.type?this.Kr=this.Kr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Kr=this.Kr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Kr=this.Kr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Kr=this.Kr.remove(e):1===t.type&&2===n.type?this.Kr=this.Kr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Kr=this.Kr.insert(e,{type:2,doc:t.doc}):th():this.Kr=this.Kr.insert(e,t)},t.prototype.jr=function(){var t=[];return this.Kr.inorderTraversal(function(e,n){t.push(n)}),t},t}(),Ay=function(){function t(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=a}return t.fromInitialDocuments=function(e,n,r,i){var o=[];return n.forEach(function(t){o.push({type:0,doc:t})}),new t(e,n,ky.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Sd(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),jy=function(){this.Wr=void 0,this.listeners=[]},Py=function(){this.queries=new Ug(function(t){return Cd(t)},Sd),this.onlineState="Unknown",this.Gr=new Set};function Ry(t,e){return Object(zl.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u;return Object(zl.d)(this,function(c){switch(c.label){case 0:if(n=nh(t),i=!1,(o=n.queries.get(r=e.query))||(i=!0,o=new jy),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),s=o,[4,n.onListen(r)];case 2:return s.Wr=c.sent(),[3,4];case 3:return a=c.sent(),u=xy(a,"Initialization of query '"+Ed(e.query)+"' failed"),[2,void e.onError(u)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.zr(n.onlineState),o.Wr&&e.Hr(o.Wr)&&Fy(n),[2]}})})}function Dy(t,e){return Object(zl.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(zl.d)(this,function(a){return n=nh(t),i=!1,(o=n.queries.get(r=e.query))&&(s=o.listeners.indexOf(e))>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]})})}function Ly(t,e){for(var n=nh(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],a=n.queries.get(s.query);if(a){for(var u=0,c=a.listeners;u<c.length;u++)c[u].Hr(s)&&(r=!0);a.Wr=s}}r&&Fy(n)}function My(t,e,n){var r=nh(t),i=r.queries.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.queries.delete(e)}function Fy(t){t.Gr.forEach(function(t){t.next()})}var Vy=function(){function t(t,e,n){this.query=t,this.Jr=e,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Hr=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new Ay(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var o=!1;return this.Yr?this.Zr(t)&&(this.Jr.next(t),o=!0):this.eo(t,this.onlineState)&&(this.no(t),o=!0),this.Xr=t,o},t.prototype.onError=function(t){this.Jr.error(t)},t.prototype.zr=function(t){this.onlineState=t;var e=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,t)&&(this.no(this.Xr),e=!0),e},t.prototype.eo=function(t,e){return!t.fromCache||!(this.options.so&&"Offline"!==e||t.docs.isEmpty()&&"Offline"!==e)},t.prototype.Zr=function(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.Xr&&this.Xr.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges},t.prototype.no=function(t){t=Ay.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Yr=!0,this.Jr.next(t)},t}(),Uy=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.io=function(){return"metadata"in this.payload},t}(),qy=function(){function t(t){this.R=t}return t.prototype.qn=function(t){return Qf(this.R,t)},t.prototype.Un=function(t){return t.metadata.exists?Zf(this.R,t.document,!1):Kh.newNoDocument(this.qn(t.metadata.name),this.Qn(t.metadata.readTime))},t.prototype.Qn=function(t){return Hf(t)},t}();!function(){function t(t,e,n){this.ro=t,this.localStore=e,this.R=n,this.queries=[],this.documents=[],this.progress=function(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(t)}t.prototype.oo=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.co=function(t){for(var e=new Map,n=new qy(this.R),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var s=n.qn(o.metadata.name),a=0,u=o.metadata.queries;a<u.length;a++){var c=u[a],l=(e.get(c)||Ef()).add(s);e.set(c,l)}}return e},t.prototype.complete=function(){return Object(zl.b)(this,void 0,void 0,function(){var t,e,n,r,i;return Object(zl.d)(this,function(o){switch(o.label){case 0:return[4,vm(this.localStore,new qy(this.R),this.documents,this.ro.id)];case 1:t=o.sent(),e=this.co(this.documents),n=0,r=this.queries,o.label=2;case 2:return n<r.length?[4,bm(this.localStore,i=r[n],e.get(i.name))]:[3,5];case 3:o.sent(),o.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new tm(Object.assign({},this.progress),t))]}})})}}();var By=function(t){this.key=t},Hy=function(t){this.key=t},zy=function(){function t(t,e){this.query=t,this.uo=e,this.ao=null,this.current=!1,this.ho=Ef(),this.mutatedKeys=Ef(),this.lo=Id(t),this.fo=new ky(this.lo)}return Object.defineProperty(t.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),t.prototype._o=function(t,e){var n=this,r=e?e.mo:new Ny,i=e?e.fo:this.fo,o=e?e.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=gd(this.query)&&i.size===this.query.limit?i.last():null,c=md(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal(function(t,e){var l=i.get(t),h=Td(n.query,e)?e:null,d=!!l&&n.mutatedKeys.has(l.key),f=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data.isEqual(h.data)?d!==f&&(r.track({type:3,doc:h}),p=!0):n.yo(l,h)||(r.track({type:2,doc:h}),p=!0,(u&&n.lo(h,u)>0||c&&n.lo(h,c)<0)&&(a=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(a=!0)),p&&(h?(s=s.add(h),o=f?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))}),gd(this.query)||md(this.query))for(;s.size>this.query.limit;){var l=gd(this.query)?s.last():s.first();s=s.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{fo:s,mo:r,Nn:a,mutatedKeys:o}},t.prototype.yo=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this,i=this.fo;this.fo=t.fo,this.mutatedKeys=t.mutatedKeys;var o=t.mo.jr();o.sort(function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return th()}};return n(t)-n(e)}(t.type,e.type)||r.lo(t.doc,e.doc)}),this.po(n);var s=e?this.Eo():[],a=0===this.ho.size&&this.current?1:0,u=a!==this.ao;return this.ao=a,0!==o.length||u?{snapshot:new Ay(this.query,t.fo,i,o,t.mutatedKeys,0===a,u,!1),To:s}:{To:s}},t.prototype.zr=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({fo:this.fo,mo:new Ny,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},t.prototype.Io=function(t){return!this.uo.has(t)&&!!this.fo.has(t)&&!this.fo.get(t).hasLocalMutations},t.prototype.po=function(t){var e=this;t&&(t.addedDocuments.forEach(function(t){return e.uo=e.uo.add(t)}),t.modifiedDocuments.forEach(function(t){}),t.removedDocuments.forEach(function(t){return e.uo=e.uo.delete(t)}),this.current=t.current)},t.prototype.Eo=function(){var t=this;if(!this.current)return[];var e=this.ho;this.ho=Ef(),this.fo.forEach(function(e){t.Io(e.key)&&(t.ho=t.ho.add(e.key))});var n=[];return e.forEach(function(e){t.ho.has(e)||n.push(new Hy(e))}),this.ho.forEach(function(t){e.has(t)||n.push(new By(t))}),n},t.prototype.Ao=function(t){this.uo=t.Bn,this.ho=Ef();var e=this._o(t.documents);return this.applyChanges(e,!0)},t.prototype.Ro=function(){return Ay.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},t}(),Ky=function(t,e,n){this.query=t,this.targetId=e,this.view=n},Wy=function(t){this.key=t,this.bo=!1},Qy=function(){function t(t,e,n,r,i,o){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.vo={},this.Po=new Ug(function(t){return Cd(t)},Sd),this.Vo=new Map,this.So=new Set,this.Do=new ff(kh.comparator),this.Co=new Map,this.No=new wm,this.xo={},this.Fo=new Map,this.ko=xg.Yt(),this.onlineState="Unknown",this.Oo=void 0}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.Oo},enumerable:!1,configurable:!0}),t}();function Gy(t,e){return Object(zl.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(zl.d)(this,function(a){switch(a.label){case 0:return n=Sv(t),(i=n.Po.get(e))?(n.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.Ro(),[3,4]):[3,1];case 1:return[4,dm(n.localStore,wd(e))];case 2:return o=a.sent(),s=n.sharedClientState.addLocalQueryTarget(o.targetId),[4,$y(n,e,o.targetId,"current"===s)];case 3:r=a.sent(),n.isPrimaryClient&&iy(n.remoteStore,o),a.label=4;case 4:return[2,r]}})})}function $y(t,e,n,r){return Object(zl.b)(this,void 0,void 0,function(){var i,o,s,a,u,c;return Object(zl.d)(this,function(l){switch(l.label){case 0:return t.$o=function(e,n,r){return function(t,e,n,r){return Object(zl.b)(this,void 0,void 0,function(){var i,o,s;return Object(zl.d)(this,function(a){switch(a.label){case 0:return(i=e.view._o(n)).Nn?[4,pm(t.localStore,e.query,!1).then(function(t){return e.view._o(t.documents,i)})]:[3,2];case 1:i=a.sent(),a.label=2;case 2:return o=r&&r.targetChanges.get(e.targetId),s=e.view.applyChanges(i,t.isPrimaryClient,o),[2,(uv(t,e.targetId,s.To),s.snapshot)]}})})}(t,e,n,r)},[4,pm(t.localStore,e,!0)];case 1:return i=l.sent(),o=new zy(e,i.Bn),s=o._o(i.documents),a=kf.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState),u=o.applyChanges(s,t.isPrimaryClient,a),uv(t,n,u.To),c=new Ky(e,n,o),[2,(t.Po.set(e,c),t.Vo.has(n)?t.Vo.get(n).push(e):t.Vo.set(n,[e]),u.snapshot)]}})})}function Yy(t,e){return Object(zl.b)(this,void 0,void 0,function(){var n,r,i;return Object(zl.d)(this,function(o){switch(o.label){case 0:return n=nh(t),r=n.Po.get(e),(i=n.Vo.get(r.targetId)).length>1?[2,(n.Vo.set(r.targetId,i.filter(function(t){return!Sd(t,e)})),void n.Po.delete(e))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,fm(n.localStore,r.targetId,!1).then(function(){n.sharedClientState.clearQueryState(r.targetId),oy(n.remoteStore,r.targetId),sv(n,r.targetId)}).catch(Pg)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return sv(n,r.targetId),[4,fm(n.localStore,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}})})}function Jy(t,e,n){return Object(zl.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(zl.d)(this,function(a){switch(a.label){case 0:r=Cv(t),a.label=1;case 1:return a.trys.push([1,5,,6]),[4,function(t,e){var n,r=nh(t),i=uh.now(),o=e.reduce(function(t,e){return t.add(e.key)},Ef());return r.persistence.runTransaction("Locally write mutations","readwrite",function(t){return r.Mn.pn(t,o).next(function(o){n=o;for(var s=[],a=0,u=e;a<u.length;a++){var c=u[a],l=Jd(c,n.get(c.key));null!=l&&s.push(new ef(c.key,l,zh(l.toProto().mapValue),Wd.exists(!0)))}return r._n.addMutationBatch(t,i,s,e)})}).then(function(t){return t.applyToLocalDocumentSet(n),{batchId:t.batchId,changes:n}})}(r.localStore,e)];case 2:return i=a.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(t,e,n){var r=t.xo[t.currentUser.toKey()];r||(r=new ff(oh)),r=r.insert(e,n),t.xo[t.currentUser.toKey()]=r}(r,i.batchId,n),[4,hv(r,i.changes)];case 3:return a.sent(),[4,yy(r.remoteStore)];case 4:return a.sent(),[3,6];case 5:return o=a.sent(),s=xy(o,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}})})}function Xy(t,e){return Object(zl.b)(this,void 0,void 0,function(){var n,r;return Object(zl.d)(this,function(i){switch(i.label){case 0:n=nh(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,cm(n.localStore,e)];case 2:return r=i.sent(),e.targetChanges.forEach(function(t,e){var r=n.Co.get(e);r&&(eh(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.bo=!0:t.modifiedDocuments.size>0?eh(r.bo):t.removedDocuments.size>0&&(eh(r.bo),r.bo=!1))}),[4,hv(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,Pg(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}})})}function Zy(t,e,n){var r=nh(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Po.forEach(function(t,n){var r=n.view.zr(e);r.snapshot&&i.push(r.snapshot)}),function(t,e){var n=nh(t);n.onlineState=e;var r=!1;n.queries.forEach(function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].zr(e)&&(r=!0)}),r&&Fy(n)}(r.eventManager,e),i.length&&r.vo._r(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function tv(t,e,n){return Object(zl.b)(this,void 0,void 0,function(){var r,i,o,s,a,u;return Object(zl.d)(this,function(c){switch(c.label){case 0:return(r=nh(t)).sharedClientState.updateQueryState(e,"rejected",n),i=r.Co.get(e),(o=i&&i.key)?(s=(s=new ff(kh.comparator)).insert(o,Kh.newNoDocument(o,ch.min())),a=Ef().add(o),u=new xf(ch.min(),new Map,new mf(oh),s,a),[4,Xy(r,u)]):[3,2];case 1:return c.sent(),r.Do=r.Do.remove(o),r.Co.delete(e),lv(r),[3,4];case 2:return[4,fm(r.localStore,e,!1).then(function(){return sv(r,e,n)}).catch(Pg)];case 3:c.sent(),c.label=4;case 4:return[2]}})})}function ev(t,e){return Object(zl.b)(this,void 0,void 0,function(){var n,r,i;return Object(zl.d)(this,function(o){switch(o.label){case 0:n=nh(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,am(n.localStore,e)];case 2:return i=o.sent(),ov(n,r,null),iv(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,hv(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,Pg(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function nv(t,e,n){return Object(zl.b)(this,void 0,void 0,function(){var r,i;return Object(zl.d)(this,function(o){switch(o.label){case 0:r=nh(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=nh(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",function(t){var r;return n._n.lookupMutationBatch(t,e).next(function(e){return eh(null!==e),r=e.keys(),n._n.removeMutationBatch(t,e)}).next(function(){return n._n.performConsistencyCheck(t)}).next(function(){return n.Mn.pn(t,r)})})}(r.localStore,e)];case 2:return i=o.sent(),ov(r,e,n),iv(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),[4,hv(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,Pg(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function rv(t,e){return Object(zl.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(zl.d)(this,function(a){switch(a.label){case 0:ly((n=nh(t)).remoteStore)||Yl("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,function(t){var e=nh(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(t){return e._n.getHighestUnacknowledgedBatchId(t)})}(n.localStore)];case 2:return-1===(r=a.sent())?[2,void e.resolve()]:((i=n.Fo.get(r)||[]).push(e),n.Fo.set(r,i),[3,4]);case 3:return o=a.sent(),s=xy(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(s),[3,4];case 4:return[2]}})})}function iv(t,e){(t.Fo.get(e)||[]).forEach(function(t){t.resolve()}),t.Fo.delete(e)}function ov(t,e,n){var r=nh(t),i=r.xo[r.currentUser.toKey()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.xo[r.currentUser.toKey()]=i}}function sv(t,e,n){void 0===n&&(n=null),t.sharedClientState.removeLocalQueryTarget(e);for(var r=0,i=t.Vo.get(e);r<i.length;r++){var o=i[r];t.Po.delete(o),n&&t.vo.Mo(o,n)}t.Vo.delete(e),t.isPrimaryClient&&t.No.Zn(e).forEach(function(e){t.No.containsKey(e)||av(t,e)})}function av(t,e){t.So.delete(e.path.canonicalString());var n=t.Do.get(e);null!==n&&(oy(t.remoteStore,n),t.Do=t.Do.remove(e),t.Co.delete(n),lv(t))}function uv(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof By?(t.No.addReference(o.key,e),cv(t,o)):o instanceof Hy?(Yl("SyncEngine","Document no longer in limbo: "+o.key),t.No.removeReference(o.key,e),t.No.containsKey(o.key)||av(t,o.key)):th()}}function cv(t,e){var n=e.key,r=n.path.canonicalString();t.Do.get(n)||t.So.has(r)||(Yl("SyncEngine","New document in limbo: "+n),t.So.add(r),lv(t))}function lv(t){for(;t.So.size>0&&t.Do.size<t.maxConcurrentLimboResolutions;){var e=t.So.values().next().value;t.So.delete(e);var n=new kh(ph.fromString(e)),r=t.ko.next();t.Co.set(r,new Wy(n)),t.Do=t.Do.insert(n,r),iy(t.remoteStore,new tg(wd(pd(n.path)),r,2,Kl.o))}}function hv(t,e,n){return Object(zl.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(zl.d)(this,function(a){switch(a.label){case 0:return r=nh(t),i=[],o=[],s=[],r.Po.isEmpty()?[3,3]:(r.Po.forEach(function(t,a){s.push(r.$o(a,e,n).then(function(t){if(t){r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=nm.Pn(a.targetId,t);o.push(e)}}))}),[4,Promise.all(s)]);case 1:return a.sent(),r.vo._r(i),[4,function(t,e){return Object(zl.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c;return Object(zl.d)(this,function(l){switch(l.label){case 0:n=nh(t),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(t){return Up.forEach(e,function(e){return Up.forEach(e.bn,function(r){return n.persistence.referenceDelegate.addReference(t,e.targetId,r)}).next(function(){return Up.forEach(e.vn,function(r){return n.persistence.referenceDelegate.removeReference(t,e.targetId,r)})})})})];case 2:return l.sent(),[3,4];case 3:if(!Kp(r=l.sent()))throw r;return Yl("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)a=(s=o[i]).targetId,s.fromCache||(u=n.Fn.get(a),c=u.withLastLimboFreeSnapshotVersion(u.snapshotVersion),n.Fn=n.Fn.insert(a,c));return[2]}})})}(r.localStore,o)];case 2:a.sent(),a.label=3;case 3:return[2]}})})}function dv(t,e){return Object(zl.b)(this,void 0,void 0,function(){var n,r;return Object(zl.d)(this,function(i){switch(i.label){case 0:return(n=nh(t)).currentUser.isEqual(e)?[3,3]:(Yl("SyncEngine","User change. New user:",e.toKey()),[4,sm(n.localStore,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.Fo.forEach(function(t){t.forEach(function(t){t.reject(new Ql(Wl.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),t.Fo.clear()}(n),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),[4,hv(n,r.Ln)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}function fv(t,e){var n=nh(t),r=n.Co.get(e);if(r&&r.bo)return Ef().add(r.key);var i=Ef(),o=n.Vo.get(e);if(!o)return i;for(var s=0,a=o;s<a.length;s++){var u=n.Po.get(a[s]);i=i.unionWith(u.view.wo)}return i}function pv(t,e){return Object(zl.b)(this,void 0,void 0,function(){var n,r,i;return Object(zl.d)(this,function(o){switch(o.label){case 0:return[4,pm((n=nh(t)).localStore,e.query,!0)];case 1:return r=o.sent(),i=e.view.Ao(r),[2,(n.isPrimaryClient&&uv(n,e.targetId,i.To),i)]}})})}function gv(t){return Object(zl.b)(this,void 0,void 0,function(){var e;return Object(zl.d)(this,function(n){return[2,mm((e=nh(t)).localStore).then(function(t){return hv(e,t)})]})})}function mv(t,e,n,r){return Object(zl.b)(this,void 0,void 0,function(){var i,o;return Object(zl.d)(this,function(s){switch(s.label){case 0:return[4,function(t,e){var n=nh(t),r=nh(n._n);return n.persistence.runTransaction("Lookup mutation documents","readonly",function(t){return r.jt(t,e).next(function(e){return e?n.Mn.pn(t,e):Up.resolve(null)})})}((i=nh(t)).localStore,e)];case 1:return null===(o=s.sent())?[3,6]:"pending"!==n?[3,3]:[4,yy(i.remoteStore)];case 2:return s.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(ov(i,e,r||null),iv(i,e),function(t,e){nh(nh(t)._n).Gt(e)}(i.localStore,e)):th(),s.label=4;case 4:return[4,hv(i,o)];case 5:return s.sent(),[3,7];case 6:Yl("SyncEngine","Cannot apply mutation batch with id: "+e),s.label=7;case 7:return[2]}})})}function yv(t,e){return Object(zl.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u;return Object(zl.d)(this,function(c){switch(c.label){case 0:return Sv(n=nh(t)),Cv(n),!0!==e||!0===n.Oo?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,vv(n,r.toArray())]);case 1:return i=c.sent(),n.Oo=!0,[4,Cy(n.remoteStore,!0)];case 2:for(c.sent(),o=0,s=i;o<s.length;o++)iy(n.remoteStore,s[o]);return[3,7];case 3:return!1!==e||!1===n.Oo?[3,7]:(a=[],u=Promise.resolve(),n.Vo.forEach(function(t,e){n.sharedClientState.isLocalQueryTarget(e)?a.push(e):u=u.then(function(){return sv(n,e),fm(n.localStore,e,!0)}),oy(n.remoteStore,e)}),[4,u]);case 4:return c.sent(),[4,vv(n,a)];case 5:return c.sent(),function(t){var e=nh(t);e.Co.forEach(function(t,n){oy(e.remoteStore,n)}),e.No.ts(),e.Co=new Map,e.Do=new ff(kh.comparator)}(n),n.Oo=!1,[4,Cy(n.remoteStore,!1)];case 6:c.sent(),c.label=7;case 7:return[2]}})})}function vv(t,e,n){return Object(zl.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c,l,h,d,f,p;return Object(zl.d)(this,function(g){switch(g.label){case 0:n=nh(t),r=[],i=[],o=0,s=e,g.label=1;case 1:return o<s.length?(u=void 0,(c=n.Vo.get(a=s[o]))&&0!==c.length?[4,dm(n.localStore,wd(c[0]))]:[3,7]):[3,13];case 2:u=g.sent(),l=0,h=c,g.label=3;case 3:return l<h.length?(d=n.Po.get(h[l]),[4,pv(n,d)]):[3,6];case 4:(f=g.sent()).snapshot&&i.push(f.snapshot),g.label=5;case 5:return l++,[3,3];case 6:return[3,11];case 7:return[4,gm(n.localStore,a)];case 8:return p=g.sent(),[4,dm(n.localStore,p)];case 9:return u=g.sent(),[4,$y(n,bv(p),a,!1)];case 10:g.sent(),g.label=11;case 11:r.push(u),g.label=12;case 12:return o++,[3,1];case 13:return[2,(n.vo._r(i),r)]}})})}function bv(t){return fd(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function _v(t){var e=nh(t);return nh(nh(e.localStore).persistence).fn()}function wv(t,e,n,r){return Object(zl.b)(this,void 0,void 0,function(){var i,o,s;return Object(zl.d)(this,function(a){switch(a.label){case 0:return(i=nh(t)).Oo?(Yl("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Vo.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,mm(i.localStore)];case 3:return o=a.sent(),s=xf.createSynthesizedRemoteEventForCurrentChange(e,"current"===n),[4,hv(i,o,s)];case 4:return a.sent(),[3,8];case 5:return[4,fm(i.localStore,e,!0)];case 6:return a.sent(),sv(i,e,r),[3,8];case 7:th(),a.label=8;case 8:return[2]}})})}function Ov(t,e,n){return Object(zl.b)(this,void 0,void 0,function(){var r,i,o,s,a,u,c,l,h;return Object(zl.d)(this,function(d){switch(d.label){case 0:if(!(r=Sv(t)).Oo)return[3,10];i=0,o=e,d.label=1;case 1:return i<o.length?r.Vo.has(s=o[i])?(Yl("SyncEngine","Adding an already active target "+s),[3,5]):[4,gm(r.localStore,s)]:[3,6];case 2:return a=d.sent(),[4,dm(r.localStore,a)];case 3:return u=d.sent(),[4,$y(r,bv(a),u.targetId,!1)];case 4:d.sent(),iy(r.remoteStore,u),d.label=5;case 5:return i++,[3,1];case 6:c=function(t){return Object(zl.d)(this,function(e){switch(e.label){case 0:return r.Vo.has(t)?[4,fm(r.localStore,t,!1).then(function(){oy(r.remoteStore,t),sv(r,t)}).catch(Pg)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})},l=0,h=n,d.label=7;case 7:return l<h.length?[5,c(h[l])]:[3,10];case 8:d.sent(),d.label=9;case 9:return l++,[3,7];case 10:return[2]}})})}function Sv(t){var e=nh(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Xy.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=fv.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=tv.bind(null,e),e.vo._r=Ly.bind(null,e.eventManager),e.vo.Mo=My.bind(null,e.eventManager),e}function Cv(t){var e=nh(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=ev.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=nv.bind(null,e),e}var Ev=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return Object(zl.b)(this,void 0,void 0,function(){return Object(zl.d)(this,function(e){switch(e.label){case 0:return this.R=Gm(t.databaseInfo.databaseId),this.sharedClientState=this.Bo(t),this.persistence=this.qo(t),[4,this.persistence.start()];case 1:return e.sent(),this.gcScheduler=this.Uo(t),this.localStore=this.Qo(t),[2]}})})},t.prototype.Uo=function(t){return null},t.prototype.Qo=function(t){return om(this.persistence,new rm,t.initialUser,this.R)},t.prototype.qo=function(t){return new Im(km.bs,this.R)},t.prototype.Bo=function(t){return new Um},t.prototype.terminate=function(){return Object(zl.b)(this,void 0,void 0,function(){return Object(zl.d)(this,function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}})})},t}(),Tv=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Ko=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return Object(zl.c)(e,t),e.prototype.initialize=function(e){return Object(zl.b)(this,void 0,void 0,function(){return Object(zl.d)(this,function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,ym(this.localStore)];case 2:return n.sent(),[4,this.Ko.initialize(this,e)];case 3:return n.sent(),[4,Cv(this.Ko.syncEngine)];case 4:return n.sent(),[4,yy(this.Ko.remoteStore)];case 5:return n.sent(),[2]}})})},e.prototype.Qo=function(t){return om(this.persistence,new rm,t.initialUser,this.R)},e.prototype.Uo=function(t){return new Lg(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue)},e.prototype.qo=function(t){var e=Zg(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?_g.withCacheSize(this.cacheSizeBytes):_g.DEFAULT;return new Yg(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,Wm(),Qm(),this.R,this.sharedClientState,!!this.forceOwnership)},e.prototype.Bo=function(t){return new Um},e}(Ev),Iv=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Ko=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return Object(zl.c)(e,t),e.prototype.initialize=function(e){return Object(zl.b)(this,void 0,void 0,function(){var n,r=this;return Object(zl.d)(this,function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Ko.syncEngine,this.sharedClientState instanceof Vm?(this.sharedClientState.syncEngine={ui:mv.bind(null,n),ai:wv.bind(null,n),hi:Ov.bind(null,n),fn:_v.bind(null,n),ci:gv.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.He(function(t){return Object(zl.b)(r,void 0,void 0,function(){return Object(zl.d)(this,function(e){switch(e.label){case 0:return[4,yv(this.Ko.syncEngine,t)];case 1:return e.sent(),this.gcScheduler&&(t&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):t||this.gcScheduler.stop()),[2]}})})})];case 4:return i.sent(),[2]}})})},e.prototype.Bo=function(t){var e=Wm();if(!Vm.yt(e))throw new Ql(Wl.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Zg(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new Vm(e,t.asyncQueue,n,t.clientId,t.initialUser)},e}(Tv),xv=function(){function t(){}return t.prototype.initialize=function(t,e){return Object(zl.b)(this,void 0,void 0,function(){var n=this;return Object(zl.d)(this,function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(t){return Zy(n.syncEngine,t,1)},this.remoteStore.remoteSyncer.handleCredentialChange=dv.bind(null,this.syncEngine),[4,Cy(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}})})},t.prototype.createEventManager=function(t){return new Py},t.prototype.createDatastore=function(t){var e=Gm(t.databaseInfo.databaseId),n=new Km(t.databaseInfo);return function(t,e,n){return new Zm(t,e,n)}(t.credentials,n,e)},t.prototype.createRemoteStore=function(t){var e,n,r,i,o,s=this;return e=this.localStore,n=this.datastore,r=t.asyncQueue,i=function(t){return Zy(s.syncEngine,t,0)},o=Bm.yt()?new Bm:new qm,new ey(e,n,r,i,o)},t.prototype.createSyncEngine=function(t,e){return function(t,e,n,r,i,o,s){var a=new Qy(t,e,n,r,i,o);return s&&(a.Oo=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)},t.prototype.terminate=function(){return function(t){return Object(zl.b)(this,void 0,void 0,function(){var e;return Object(zl.d)(this,function(n){switch(n.label){case 0:return e=nh(t),Yl("RemoteStore","RemoteStore shutting down."),e.$r.add(5),[4,ry(e)];case 1:return n.sent(),e.Lr.shutdown(),e.Br.set("Unknown"),[2]}})})}(this.remoteStore)},t}(),kv=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.jo(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.jo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Wo=function(){this.muted=!0},t.prototype.jo=function(t,e){var n=this;this.muted||setTimeout(function(){n.muted||t(e)},0)},t}(),Nv=(function(){function t(t,e){var n=this;this.Go=t,this.R=e,this.metadata=new Vp,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then(function(t){t&&t.io()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))},function(t){return n.metadata.reject(t)})}t.prototype.close=function(){return this.Go.cancel()},t.prototype.getMetadata=function(){return Object(zl.b)(this,void 0,void 0,function(){return Object(zl.d)(this,function(t){return[2,this.metadata.promise]})})},t.prototype.Lo=function(){return Object(zl.b)(this,void 0,void 0,function(){return Object(zl.d)(this,function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.Ho())]}})})},t.prototype.Ho=function(){return Object(zl.b)(this,void 0,void 0,function(){var t,e,n,r;return Object(zl.d)(this,function(i){switch(i.label){case 0:return[4,this.Jo()];case 1:return null===(t=i.sent())?[2,null]:(e=this.zo.decode(t),n=Number(e),isNaN(n)&&this.Yo("length string ("+e+") is not valid number"),[4,this.Xo(n)]);case 2:return r=i.sent(),[2,new Uy(JSON.parse(r),t.length+n)]}})})},t.prototype.Zo=function(){return this.buffer.findIndex(function(t){return t==="{".charCodeAt(0)})},t.prototype.Jo=function(){return Object(zl.b)(this,void 0,void 0,function(){var t,e;return Object(zl.d)(this,function(n){switch(n.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}})})},t.prototype.Xo=function(t){return Object(zl.b)(this,void 0,void 0,function(){var e;return Object(zl.d)(this,function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.tc()]:[3,3];case 1:n.sent()&&this.Yo("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.zo.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}})})},t.prototype.Yo=function(t){throw this.Go.cancel(),new Error("Invalid bundle format: "+t)},t.prototype.tc=function(){return Object(zl.b)(this,void 0,void 0,function(){var t,e;return Object(zl.d)(this,function(n){switch(n.label){case 0:return[4,this.Go.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}})})}}(),function(){function t(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(t){return Object(zl.b)(this,void 0,void 0,function(){var e,n=this;return Object(zl.d)(this,function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new Ql(Wl.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return Object(zl.b)(this,void 0,void 0,function(){var n,r,i,o,s,a;return Object(zl.d)(this,function(u){switch(u.label){case 0:return n=nh(t),r=Yf(n.R)+"/documents",i={documents:e.map(function(t){return Wf(n.R,t)})},[4,n.Oi("BatchGetDocuments",r,i)];case 1:return o=u.sent(),s=new Map,o.forEach(function(t){var e=function(t,e){return"found"in e?function(t,e){eh(!!e.found);var n=Qf(t,e.found.name),r=Hf(e.found.updateTime),i=new Hh({mapValue:{fields:e.found.fields}});return Kh.newFoundDocument(n,r,i)}(t,e):"missing"in e?function(t,e){eh(!!e.missing),eh(!!e.readTime);var n=Qf(t,e.missing),r=Hf(e.readTime);return Kh.newNoDocument(n,r)}(t,e):th()}(n.R,t);s.set(e.key.toString(),e)}),a=[],[2,(e.forEach(function(t){var e=s.get(t.toString());eh(!!e),a.push(e)}),a)]}})})}(this.datastore,t)];case 1:return[2,((e=r.sent()).forEach(function(t){return n.recordVersion(t)}),e)]}})})},t.prototype.set=function(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t.toString())},t.prototype.delete=function(t){this.write(new uf(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.commit=function(){return Object(zl.b)(this,void 0,void 0,function(){var t,e=this;return Object(zl.d)(this,function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach(function(e){t.delete(e.key.toString())}),t.forEach(function(t,n){var r=kh.fromPath(n);e.mutations.push(new cf(r,e.precondition(r)))}),[4,function(t,e){return Object(zl.b)(this,void 0,void 0,function(){var n,r,i;return Object(zl.d)(this,function(o){switch(o.label){case 0:return n=nh(t),r=Yf(n.R)+"/documents",i={writes:e.map(function(t){return tp(n.R,t)})},[4,n.Ni("Commit",r,i)];case 1:return o.sent(),[2]}})})}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}})})},t.prototype.recordVersion=function(t){var e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw th();e=ch.min()}var n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new Ql(Wl.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)},t.prototype.precondition=function(t){var e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?Wd.updateTime(e):Wd.none()},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(ch.min()))throw new Ql(Wl.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Wd.updateTime(e)}return Wd.exists(!0)},t.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},t.prototype.ensureCommitNotCalled=function(){},t}()),Av=function(){function t(t,e,n,r){this.asyncQueue=t,this.datastore=e,this.updateFunction=n,this.deferred=r,this.ec=5,this.Zi=new $m(this.asyncQueue,"transaction_retry")}return t.prototype.run=function(){this.nc()},t.prototype.nc=function(){var t=this;this.Zi.ji(function(){return Object(zl.b)(t,void 0,void 0,function(){var t,e,n=this;return Object(zl.d)(this,function(r){return t=new Nv(this.datastore),(e=this.sc(t))&&e.then(function(e){n.asyncQueue.enqueueAndForget(function(){return t.commit().then(function(){n.deferred.resolve(e)}).catch(function(t){n.ic(t)})})}).catch(function(t){n.ic(t)}),[2]})})})},t.prototype.sc=function(t){try{var e=this.updateFunction(t);return!Th(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}},t.prototype.ic=function(t){var e=this;this.ec>0&&this.rc(t)?(this.ec-=1,this.asyncQueue.enqueueAndForget(function(){return e.nc(),Promise.resolve()})):this.deferred.reject(t)},t.prototype.rc=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!hf(e)}return!1},t}(),jv=function(){function t(t,e,n){var r=this;this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=Nm.UNAUTHENTICATED,this.clientId=ih.u(),this.credentialListener=function(){},this.receivedInitialUser=new Vp,this.credentials.setChangeListener(function(t){Yl("FirestoreClient","Received user=",t.uid),r.user=t,r.credentialListener(t),r.receivedInitialUser.resolve()})}return t.prototype.getConfiguration=function(){return Object(zl.b)(this,void 0,void 0,function(){return Object(zl.d)(this,function(t){switch(t.label){case 0:return[4,this.receivedInitialUser.promise];case 1:return[2,(t.sent(),{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100})]}})})},t.prototype.setCredentialChangeListener=function(t){var e=this;this.credentialListener=t,this.receivedInitialUser.promise.then(function(){return e.credentialListener(e.user)})},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new Ql(Wl.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var e=new Vp;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(function(){return Object(zl.b)(t,void 0,void 0,function(){var t,n;return Object(zl.d)(this,function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.removeChangeListener(),e.resolve(),[3,6];case 5:return t=r.sent(),n=xy(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}})})}),e.promise},t}();function Pv(t,e){return Object(zl.b)(this,void 0,void 0,function(){var n,r,i=this;return Object(zl.d)(this,function(o){switch(o.label){case 0:return t.asyncQueue.verifyOperationInProgress(),Yl("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.initialUser,t.setCredentialChangeListener(function(n){r.isEqual(n)||(r=n,t.asyncQueue.enqueueRetryable(function(){return Object(zl.b)(i,void 0,void 0,function(){return Object(zl.d)(this,function(t){switch(t.label){case 0:return[4,sm(e.localStore,n)];case 1:return t.sent(),[2]}})})}))}),e.persistence.setDatabaseDeletedListener(function(){return t.terminate()}),t.offlineComponents=e,[2]}})})}function Rv(t,e){return Object(zl.b)(this,void 0,void 0,function(){var n,r;return Object(zl.d)(this,function(i){switch(i.label){case 0:return t.asyncQueue.verifyOperationInProgress(),[4,Dv(t)];case 1:return n=i.sent(),Yl("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.setCredentialChangeListener(function(n){return t.asyncQueue.enqueueRetryable(function(){return function(t,e){return Object(zl.b)(this,void 0,void 0,function(){var n,r;return Object(zl.d)(this,function(i){switch(i.label){case 0:return(n=nh(t)).asyncQueue.verifyOperationInProgress(),Yl("RemoteStore","RemoteStore received new credentials"),r=ly(n),n.$r.add(3),[4,ry(n)];case 1:return i.sent(),r&&n.Br.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(e)];case 2:return i.sent(),n.$r.delete(3),[4,ny(n)];case 3:return i.sent(),[2]}})})}(e.remoteStore,n)})}),t.onlineComponents=e,[2]}})})}function Dv(t){return Object(zl.b)(this,void 0,void 0,function(){return Object(zl.d)(this,function(e){switch(e.label){case 0:return t.offlineComponents?[3,2]:(Yl("FirestoreClient","Using default OfflineComponentProvider"),[4,Pv(t,new Ev)]);case 1:e.sent(),e.label=2;case 2:return[2,t.offlineComponents]}})})}function Lv(t){return Object(zl.b)(this,void 0,void 0,function(){return Object(zl.d)(this,function(e){switch(e.label){case 0:return t.onlineComponents?[3,2]:(Yl("FirestoreClient","Using default OnlineComponentProvider"),[4,Rv(t,new xv)]);case 1:e.sent(),e.label=2;case 2:return[2,t.onlineComponents]}})})}function Mv(t){return Dv(t).then(function(t){return t.persistence})}function Fv(t){return Dv(t).then(function(t){return t.localStore})}function Vv(t){return Lv(t).then(function(t){return t.remoteStore})}function Uv(t){return Lv(t).then(function(t){return t.syncEngine})}function qv(t){return Object(zl.b)(this,void 0,void 0,function(){var e,n;return Object(zl.d)(this,function(r){switch(r.label){case 0:return[4,Lv(t)];case 1:return e=r.sent(),[2,((n=e.eventManager).onListen=Gy.bind(null,e.syncEngine),n.onUnlisten=Yy.bind(null,e.syncEngine),n)]}})})}function Bv(t,e,n){var r=this;void 0===n&&(n={});var i=new Vp;return t.asyncQueue.enqueueAndForget(function(){return Object(zl.b)(r,void 0,void 0,function(){var r;return Object(zl.d)(this,function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new kv({next:function(o){e.enqueueAndForget(function(){return Dy(t,s)});var a=o.docs.has(n);!a&&o.fromCache?i.reject(new Ql(Wl.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new Ql(Wl.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new Vy(pd(n.path),o,{includeMetadataChanges:!0,so:!0});return Ry(t,s)},[4,qv(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}})})}),i.promise}function Hv(t,e,n){var r=this;void 0===n&&(n={});var i=new Vp;return t.asyncQueue.enqueueAndForget(function(){return Object(zl.b)(r,void 0,void 0,function(){var r;return Object(zl.d)(this,function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new kv({next:function(n){e.enqueueAndForget(function(){return Dy(t,s)}),n.fromCache&&"server"===r.source?i.reject(new Ql(Wl.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new Vy(n,o,{includeMetadataChanges:!0,so:!0});return Ry(t,s)},[4,qv(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}})})}),i.promise}var zv=function(t,e,n,r,i,o,s){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=s},Kv=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),Wv=new Map,Qv=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t},Gv=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t){this.changeListener=t,t(Nm.UNAUTHENTICATED)},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),$v=function(){function t(t){var e=this;this.oc=null,this.currentUser=Nm.UNAUTHENTICATED,this.receivedInitialUser=!1,this.cc=0,this.changeListener=null,this.forceRefresh=!1,this.oc=function(){e.cc++,e.currentUser=e.uc(),e.receivedInitialUser=!0,e.changeListener&&e.changeListener(e.currentUser)},this.cc=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.oc):(this.oc(null),t.get().then(function(t){e.auth=t,e.oc&&e.auth.addAuthTokenListener(e.oc)},function(){}))}return t.prototype.getToken=function(){var t=this,e=this.cc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(function(n){return t.cc!==e?(Yl("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(eh("string"==typeof n.accessToken),new Qv(n.accessToken,t.currentUser)):null}):Promise.resolve(null)},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t){this.changeListener=t,this.receivedInitialUser&&t(this.currentUser)},t.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.oc),this.oc=null,this.changeListener=null},t.prototype.uc=function(){var t=this.auth&&this.auth.getUid();return eh(null===t||"string"==typeof t),new Nm(t)},t}(),Yv=function(){function t(t,e){this.ac=t,this.hc=e,this.type="FirstParty",this.user=Nm.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.hc},e=this.ac.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),t},enumerable:!1,configurable:!0}),t}(),Jv=function(){function t(t,e){this.ac=t,this.hc=e}return t.prototype.getToken=function(){return Promise.resolve(new Yv(this.ac,this.hc))},t.prototype.setChangeListener=function(t){t(Nm.FIRST_PARTY)},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();function Xv(t,e,n){if(!n)throw new Ql(Wl.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function Zv(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ql(Wl.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function tb(t,e,n,r){if(!0===e&&!0===r)throw new Ql(Wl.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function eb(t){if(!kh.isDocumentKey(t))throw new Ql(Wl.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function nb(t){if(kh.isDocumentKey(t))throw new Ql(Wl.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function rb(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":th()}function ib(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Ql(Wl.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=rb(t);throw new Ql(Wl.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function ob(t,e){if(e<=0)throw new Ql(Wl.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var sb=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new Ql(Wl.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Ql(Wl.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,tb("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}(),ab=function(){function t(t,e){this._persistenceKey="(lite)",this._settings=new sb({}),this._settingsFrozen=!1,t instanceof Kv?(this._databaseId=t,this._credentials=new Gv):(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Ql(Wl.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Kv(t.options.projectId)}(t),this._credentials=new $v(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this._app)throw new Ql(Wl.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),t.prototype._setSettings=function(t){if(this._settingsFrozen)throw new Ql(Wl.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new sb(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new Gv;switch(t.type){case"gapi":var e=t.client;return eh(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new Jv(e,t.sessionIndex||"0");case"provider":return t.client;default:throw new Ql(Wl.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype._getSettings=function(){return this._settings},t.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},t.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},t.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},t.prototype._terminate=function(){return(t=Wv.get(this))&&(Yl("ComponentProvider","Removing Datastore"),Wv.delete(this),t.terminate()),Promise.resolve();var t},t}(),ub=function(){function t(t,e,n){this._converter=e,this._key=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new lb(this.firestore,this._converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._key)},t}(),cb=function(){function t(t,e,n){this._converter=e,this._query=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this._query)},t}(),lb=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,pd(r))||this).firestore=e,i._path=r,i.type="collection",i}return Object(zl.c)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._path.popLast();return t.isEmpty()?null:new ub(this.firestore,null,new kh(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._path)},e}(cb);function hb(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=Object(qs.m)(t),Xv("collection","path",e),t instanceof ab)return nb(n=ph.fromString.apply(ph,Object(zl.f)([e],r))),new lb(t,null,n);if(!(t instanceof ub||t instanceof lb))throw new Ql(Wl.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return nb(n=ph.fromString.apply(ph,Object(zl.f)([t.path],r)).child(ph.fromString(e))),new lb(t.firestore,null,n)}function db(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=Object(qs.m)(t),1===arguments.length&&(e=ih.u()),Xv("doc","path",e),t instanceof ab)return eb(n=ph.fromString.apply(ph,Object(zl.f)([e],r))),new ub(t,null,new kh(n));if(!(t instanceof ub||t instanceof lb))throw new Ql(Wl.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return eb(n=t._path.child(ph.fromString.apply(ph,Object(zl.f)([e],r)))),new ub(t.firestore,t instanceof lb?t._converter:null,new kh(n))}function fb(t,e){return t=Object(qs.m)(t),e=Object(qs.m)(e),(t instanceof ub||t instanceof lb)&&(e instanceof ub||e instanceof lb)&&t.firestore===e.firestore&&t.path===e.path&&t._converter===e._converter}function pb(t,e){return t=Object(qs.m)(t),e=Object(qs.m)(e),t instanceof cb&&e instanceof cb&&t.firestore===e.firestore&&Sd(t._query,e._query)&&t._converter===e._converter}var gb=function(){function t(){var t=this;this.lc=Promise.resolve(),this.fc=[],this.dc=!1,this.wc=[],this._c=null,this.mc=!1,this.yc=[],this.Zi=new $m(this,"async_queue_retry"),this.gc=function(){var e=Qm();e&&Yl("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Zi.Gi()};var e=Qm();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.gc)}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this.dc},enumerable:!1,configurable:!0}),t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.Ec(),this.Tc(t)},t.prototype.enterRestrictedMode=function(){if(!this.dc){this.dc=!0;var t=Qm();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.gc)}},t.prototype.enqueue=function(t){return this.Ec(),this.dc?new Promise(function(t){}):this.Tc(t)},t.prototype.enqueueRetryable=function(t){var e=this;this.enqueueAndForget(function(){return e.fc.push(t),e.Ic()})},t.prototype.Ic=function(){return Object(zl.b)(this,void 0,void 0,function(){var t,e=this;return Object(zl.d)(this,function(n){switch(n.label){case 0:if(0===this.fc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.fc[0]()];case 2:return n.sent(),this.fc.shift(),this.Zi.reset(),[3,4];case 3:if(!Kp(t=n.sent()))throw t;return Yl("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.fc.length>0&&this.Zi.ji(function(){return e.Ic()}),n.label=5;case 5:return[2]}})})},t.prototype.Tc=function(t){var e=this,n=this.lc.then(function(){return e.mc=!0,t().catch(function(t){throw e._c=t,e.mc=!1,Jl("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t}).then(function(t){return e.mc=!1,t})});return this.lc=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.Ec(),this.yc.indexOf(t)>-1&&(e=0);var i=Iy.createAndSchedule(this,t,e,n,function(t){return r.Ac(t)});return this.wc.push(i),i},t.prototype.Ec=function(){this._c&&th()},t.prototype.verifyOperationInProgress=function(){},t.prototype.Rc=function(){return Object(zl.b)(this,void 0,void 0,function(){var t;return Object(zl.d)(this,function(e){switch(e.label){case 0:return[4,t=this.lc];case 1:e.sent(),e.label=2;case 2:if(t!==this.lc)return[3,0];e.label=3;case 3:return[2]}})})},t.prototype.bc=function(t){for(var e=0,n=this.wc;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},t.prototype.vc=function(t){var e=this;return this.Rc().then(function(){e.wc.sort(function(t,e){return t.targetTimeMs-e.targetTimeMs});for(var n=0,r=e.wc;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==t&&i.timerId===t)break}return e.Rc()})},t.prototype.Pc=function(t){this.yc.push(t)},t.prototype.Ac=function(t){var e=this.wc.indexOf(t);this.wc.splice(e,1)},t}();function mb(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}!function(){function t(){this._progressObserver={},this._taskCompletionResolver=new Vp,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}t.prototype.onProgress=function(t,e,n){this._progressObserver={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this._taskCompletionResolver.promise.catch(t)},t.prototype.then=function(t,e){return this._taskCompletionResolver.promise.then(t,e)},t.prototype._completeWith=function(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)},t.prototype._failWith=function(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)},t.prototype._updateProgress=function(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}();var yb=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._queue=new gb,r._persistenceKey="name"in e?e.name:"[DEFAULT]",r}return Object(zl.c)(e,t),e.prototype._terminate=function(){return this._firestoreClient||bb(this),this._firestoreClient.terminate()},e}(ab);function vb(t){return t._firestoreClient||bb(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function bb(t){var e,n=t._freezeSettings(),r=function(t,e,n,r){return new zv(t,e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new jv(t._credentials,t._queue,r)}function _b(t,e,n){var r=this,i=new Vp;return t.asyncQueue.enqueue(function(){return Object(zl.b)(r,void 0,void 0,function(){var r;return Object(zl.d)(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,Pv(t,n)];case 1:return o.sent(),[4,Rv(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===Wl.FAILED_PRECONDITION||t.code===Wl.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}})})}).then(function(){return i.promise})}function wb(t){if(t._initialized||t._terminated)throw new Ql(Wl.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var Ob=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new Ql(Wl.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new mh(t)}return t.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},t}(),Sb=function(){function t(t){this._byteString=t}return t.fromBase64String=function(e){try{return new t(vh.fromBase64String(e))}catch(e){throw new Ql(Wl.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(vh.fromUint8Array(e))},t.prototype.toBase64=function(){return this._byteString.toBase64()},t.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},t}(),Cb=function(t){this._methodName=t},Eb=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new Ql(Wl.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Ql(Wl.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},t.prototype._compareTo=function(t){return oh(this._lat,t._lat)||oh(this._long,t._long)},t}(),Tb=/^__.*__$/,Ib=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return null!==this.fieldMask?new ef(t,this.data,this.fieldMask,e,this.fieldTransforms):new tf(t,this.data,e,this.fieldTransforms)},t}(),xb=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return new ef(t,this.data,this.fieldMask,e,this.fieldTransforms)},t}();function kb(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw th()}}var Nb=function(){function t(t,e,n,r,i,o){this.settings=t,this.databaseId=e,this.R=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Vc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Sc",{get:function(){return this.settings.Sc},enumerable:!1,configurable:!0}),t.prototype.Dc=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},t.prototype.Cc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Dc({path:n,Nc:!1});return r.xc(t),r},t.prototype.Fc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Dc({path:n,Nc:!1});return r.Vc(),r},t.prototype.kc=function(t){return this.Dc({path:void 0,Nc:!0})},t.prototype.Oc=function(t){return Yb(t,this.settings.methodName,this.settings.$c||!1,this.path,this.settings.Mc)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find(function(e){return t.isPrefixOf(e)})||void 0!==this.fieldTransforms.find(function(e){return t.isPrefixOf(e.field)})},t.prototype.Vc=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.xc(this.path.get(t))},t.prototype.xc=function(t){if(0===t.length)throw this.Oc("Document fields must not be empty");if(kb(this.Sc)&&Tb.test(t))throw this.Oc('Document fields cannot begin and end with "__"')},t}(),Ab=function(){function t(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.R=n||Gm(t)}return t.prototype.Lc=function(t,e,n,r){return void 0===r&&(r=!1),new Nb({Sc:t,methodName:e,Mc:n,path:mh.emptyPath(),Nc:!1,$c:r},this.databaseId,this.R,this.ignoreUndefinedProperties)},t}();function jb(t){var e=t._freezeSettings(),n=Gm(t._databaseId);return new Ab(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Pb(t,e,n,r,i,o){void 0===o&&(o={});var s=t.Lc(o.merge||o.mergeFields?2:0,e,n,i);Wb("Data must be an object, but it was:",s,r);var a,u,c=zb(r,s);if(o.merge)a=new yh(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){for(var l=[],h=0,d=o.mergeFields;h<d.length;h++){var f=Qb(e,d[h],n);if(!s.contains(f))throw new Ql(Wl.INVALID_ARGUMENT,"Field '"+f+"' is specified in your field mask but missing from your input data.");Jb(l,f)||l.push(f)}a=new yh(l),u=s.fieldTransforms.filter(function(t){return a.covers(t.field)})}else a=null,u=s.fieldTransforms;return new Ib(new Hh(c),a,u)}var Rb=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(zl.c)(e,t),e.prototype._toFieldTransform=function(t){if(2!==t.Sc)throw t.Oc(1===t.Sc?this._methodName+"() can only appear at the top level of your update data":this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.fieldMask.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(Cb);function Db(t,e,n){return new Nb({Sc:3,Mc:e.settings.Mc,methodName:t._methodName,Nc:n},e.databaseId,e.R,e.ignoreUndefinedProperties)}var Lb=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(zl.c)(e,t),e.prototype._toFieldTransform=function(t){return new zd(t.path,new Ld)},e.prototype.isEqual=function(t){return t instanceof e},e}(Cb),Mb=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Bc=n,r}return Object(zl.c)(e,t),e.prototype._toFieldTransform=function(t){var e=Db(this,t,!0),n=this.Bc.map(function(t){return Hb(t,e)}),r=new Md(n);return new zd(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Cb),Fb=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Bc=n,r}return Object(zl.c)(e,t),e.prototype._toFieldTransform=function(t){var e=Db(this,t,!0),n=this.Bc.map(function(t){return Hb(t,e)}),r=new Vd(n);return new zd(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Cb),Vb=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).qc=n,r}return Object(zl.c)(e,t),e.prototype._toFieldTransform=function(t){var e=new qd(t.R,Ad(t.R,this.qc));return new zd(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(Cb);function Ub(t,e,n,r){var i=t.Lc(1,e,n);Wb("Data must be an object, but it was:",i,r);var o=[],s=Hh.empty();hh(r,function(t,r){var a=$b(e,t,n);r=Object(qs.m)(r);var u=i.Fc(a);if(r instanceof Rb)o.push(a);else{var c=Hb(r,u);null!=c&&(o.push(a),s.set(a,c))}});var a=new yh(o);return new xb(s,a,i.fieldTransforms)}function qb(t,e,n,r,i,o){var s=t.Lc(1,e,n),a=[Qb(e,r,n)],u=[i];if(o.length%2!=0)throw new Ql(Wl.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)a.push(Qb(e,o[c])),u.push(o[c+1]);for(var l=[],h=Hh.empty(),d=a.length-1;d>=0;--d)if(!Jb(l,a[d])){var f=a[d],p=u[d];p=Object(qs.m)(p);var g=s.Fc(f);if(p instanceof Rb)l.push(f);else{var m=Hb(p,g);null!=m&&(l.push(f),h.set(f,m))}}var y=new yh(l);return new xb(h,y,s.fieldTransforms)}function Bb(t,e,n,r){return void 0===r&&(r=!1),Hb(n,t.Lc(r?4:3,e))}function Hb(t,e){if(Kb(t=Object(qs.m)(t)))return Wb("Unsupported field value:",e,t),zb(t,e);if(t instanceof Cb)return function(t,e){if(!kb(e.Sc))throw e.Oc(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.Oc(t._methodName+"() is not currently supported inside arrays");var n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Nc&&4!==e.Sc)throw e.Oc("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=Hb(o[i],e.kc(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=Object(qs.m)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Ad(e.R,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=uh.fromDate(t);return{timestampValue:Uf(e.R,n)}}if(t instanceof uh)return n=new uh(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:Uf(e.R,n)};if(t instanceof Eb)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Sb)return{bytesValue:qf(e.R,t._byteString)};if(t instanceof ub){var r=t.firestore._databaseId;if(!r.isEqual(n=e.databaseId))throw e.Oc("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:zf(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.Oc("Unsupported field value: "+rb(t))}(t,e)}function zb(t,e){var n={};return dh(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):hh(t,function(t,r){var i=Hb(r,e.Cc(t));null!=i&&(n[t]=i)}),{mapValue:{fields:n}}}function Kb(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof uh||t instanceof Eb||t instanceof Sb||t instanceof ub||t instanceof Cb)}function Wb(t,e,n){if(!Kb(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=rb(n);throw e.Oc("an object"===r?t+" a custom object":t+" "+r)}}function Qb(t,e,n){if((e=Object(qs.m)(e))instanceof Ob)return e._internalPath;if("string"==typeof e)return $b(t,e);throw Yb("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var Gb=new RegExp("[~\\*/\\[\\]]");function $b(t,e,n){if(e.search(Gb)>=0)throw Yb("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(Ob.bind.apply(Ob,Object(zl.f)([void 0],e.split(".")))))._internalPath}catch(r){throw Yb("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function Yb(t,e,n,r,i){var o=r&&!r.isEmpty(),s=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(o||s)&&(u+=" (found",o&&(u+=" in field "+r),s&&(u+=" in document "+i),u+=")"),new Ql(Wl.INVALID_ARGUMENT,(a+=". ")+t+u)}function Jb(t,e){return t.some(function(t){return t.isEqual(e)})}var Xb=function(){function t(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new ub(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this._document},t.prototype.data=function(){if(this._document){if(this._converter){var t=new Zb(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.toProto())}},t.prototype.get=function(t){if(this._document){var e=this._document.data.field(t_("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}},t}(),Zb=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(zl.c)(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(Xb);function t_(t,e){return"string"==typeof e?$b(t,e):e instanceof Ob?e._internalPath:e._delegate._internalPath}var e_=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),n_=function(t){function e(e,n,r,i,o,s){var a=this;return(a=t.call(this,e,n,r,i,s)||this)._firestore=e,a._firestoreImpl=e,a.metadata=o,a}return Object(zl.c)(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this._document){if(this._converter){var e=new r_(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.toProto(),t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this._document){var n=this._document.data.field(t_("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}},e}(Xb),r_=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(zl.c)(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(n_),i_=function(){function t(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new e_(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach(function(e){return t.push(e)}),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._snapshot.docs.forEach(function(r){t.call(e,new r_(n._firestore,n._userDataWriter,r.key,r,new e_(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query._converter))})},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Ql(Wl.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){var n=0;return t._snapshot.docChanges.map(function(e){return{type:"added",doc:new r_(t._firestore,t._userDataWriter,e.doc.key,e.doc,new e_(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query._converter),oldIndex:-1,newIndex:n++}})}var r=t._snapshot.oldDocs;return t._snapshot.docChanges.filter(function(t){return e||3!==t.type}).map(function(e){var n=new r_(t._firestore,t._userDataWriter,e.doc.key,e.doc,new e_(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query._converter),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:o_(e.type),doc:n,oldIndex:i,newIndex:o}})}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t}();function o_(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return th()}}function s_(t,e){return t instanceof n_&&e instanceof n_?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof i_&&e instanceof i_&&t._firestore===e._firestore&&pb(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function a_(t){if(md(t)&&0===t.explicitOrderBy.length)throw new Ql(Wl.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var u_=function(){};function c_(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o._apply(t)}return t}var l_=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Uc=e,i.Qc=n,i.Kc=r,i.type="where",i}return Object(zl.c)(e,t),e.prototype._apply=function(t){var e=jb(t.firestore),n=function(t,e,n,r,i,o,s){var a;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new Ql(Wl.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){y_(s,o);for(var u=[],c=0,l=s;c<l.length;c++)u.push(m_(r,t,l[c]));a={arrayValue:{values:u}}}else a=m_(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||y_(s,o),a=Bb(n,"where",s,"in"===o||"not-in"===o);var h=Jh.create(i,o,a);return function(t,e){if(e.g()){var n=vd(t);if(null!==n&&!n.isEqual(e.field))throw new Ql(Wl.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=yd(t);null!==r&&v_(0,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw new Ql(Wl.INVALID_ARGUMENT,i===e.op?"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter.":"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,h),h}(t._query,0,e,t.firestore._databaseId,this.Uc,this.Qc,this.Kc);return new cb(t.firestore,t._converter,function(t,e){var n=t.filters.concat([e]);return new dd(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t._query,n))},e}(u_),h_=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Uc=e,r.jc=n,r.type="orderBy",r}return Object(zl.c)(e,t),e.prototype._apply=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new Ql(Wl.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new Ql(Wl.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new ud(e,n);return function(t,e){if(null===yd(t)){var n=vd(t);null!==n&&v_(0,n,e.field)}}(t,r),r}(t._query,this.Uc,this.jc);return new cb(t.firestore,t._converter,function(t,e){var n=t.explicitOrderBy.concat([e]);return new dd(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t._query,e))},e}(u_),d_=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Wc=n,i.Gc=r,i}return Object(zl.c)(e,t),e.prototype._apply=function(t){return new cb(t.firestore,t._converter,Od(t._query,this.Wc,this.Gc))},e}(u_),f_=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.zc=n,i.Hc=r,i}return Object(zl.c)(e,t),e.prototype._apply=function(t){var e=g_(t,this.type,this.zc,this.Hc);return new cb(t.firestore,t._converter,function(t,e){return new dd(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t._query,e))},e}(u_),p_=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.zc=n,i.Hc=r,i}return Object(zl.c)(e,t),e.prototype._apply=function(t){var e=g_(t,this.type,this.zc,this.Hc);return new cb(t.firestore,t._converter,function(t,e){return new dd(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t._query,e))},e}(u_);function g_(t,e,n,r){if(n[0]=Object(qs.m)(n[0]),n[0]instanceof Xb)return function(t,e,n,r,i){if(!r)throw new Ql(Wl.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,a=_d(t);s<a.length;s++){var u=a[s];if(u.field.isKeyField())o.push(Mh(e,r.key));else{var c=r.data.field(u.field);if(Sh(c))throw new Ql(Wl.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.canonicalString();throw new Ql(Wl.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+l+"' (used as the orderBy) does not exist.")}o.push(c)}}return new sd(o,i)}(t._query,t.firestore._databaseId,e,n[0]._document,r);var i=jb(t.firestore);return function(t,e,n,r,i,o){var s=t.explicitOrderBy;if(i.length>s.length)throw new Ql(Wl.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(s[u].field.isKeyField()){if("string"!=typeof c)throw new Ql(Wl.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!bd(t)&&-1!==c.indexOf("/"))throw new Ql(Wl.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var l=t.path.child(ph.fromString(c));if(!kh.isDocumentKey(l))throw new Ql(Wl.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+l+"' is not because it contains an odd number of segments.");var h=new kh(l);a.push(Mh(e,h))}else{var d=Bb(n,r,c);a.push(d)}}return new sd(a,o)}(t._query,t.firestore._databaseId,i,e,n,r)}function m_(t,e,n){if("string"==typeof(n=Object(qs.m)(n))){if(""===n)throw new Ql(Wl.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!bd(e)&&-1!==n.indexOf("/"))throw new Ql(Wl.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(ph.fromString(n));if(!kh.isDocumentKey(r))throw new Ql(Wl.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return Mh(t,new kh(r))}if(n instanceof ub)return Mh(t,n._key);throw new Ql(Wl.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+rb(n)+".")}function y_(t,e){if(!Array.isArray(t)||0===t.length)throw new Ql(Wl.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new Ql(Wl.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function v_(t,e,n){if(!n.isEqual(e))throw new Ql(Wl.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}var b_=function(){function t(){}return t.prototype.convertValue=function(t,e){switch(void 0===e&&(e="none"),Nh(t)){case 0:return null;case 1:return t.booleanValue;case 2:return wh(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Oh(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw th()}},t.prototype.convertObject=function(t,e){var n=this,r={};return hh(t.fields||{},function(t,i){r[t]=n.convertValue(i,e)}),r},t.prototype.convertGeoPoint=function(t){return new Eb(wh(t.latitude),wh(t.longitude))},t.prototype.convertArray=function(t,e){var n=this;return(t.values||[]).map(function(t){return n.convertValue(t,e)})},t.prototype.convertServerTimestamp=function(t,e){switch(e){case"previous":var n=Ch(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(Eh(t));default:return null}},t.prototype.convertTimestamp=function(t){var e=_h(t);return new uh(e.seconds,e.nanos)},t.prototype.convertDocumentKey=function(t,e){var n=ph.fromString(t);eh(gp(n));var r=new Kv(n.get(1),n.get(3)),i=new kh(n.popFirst(5));return r.isEqual(e)||Jl("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}();function __(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var w_=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(zl.c)(e,t),e.prototype.convertBytes=function(t){return new Sb(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new ub(this.firestore,null,e)},e}(b_),O_=function(){function t(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=jb(t)}return t.prototype.set=function(t,e,n){this._verifyNotCommitted();var r=S_(t,this._firestore),i=__(r._converter,e,n),o=Pb(this._dataReader,"WriteBatch.set",r._key,i,null!==r._converter,n);return this._mutations.push(o.toMutation(r._key,Wd.none())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this._verifyNotCommitted();var o,s=S_(t,this._firestore);return o="string"==typeof(e=Object(qs.m)(e))||e instanceof Ob?qb(this._dataReader,"WriteBatch.update",s._key,e,n,r):Ub(this._dataReader,"WriteBatch.update",s._key,e),this._mutations.push(o.toMutation(s._key,Wd.exists(!0))),this},t.prototype.delete=function(t){this._verifyNotCommitted();var e=S_(t,this._firestore);return this._mutations=this._mutations.concat(new uf(e._key,Wd.none())),this},t.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},t.prototype._verifyNotCommitted=function(){if(this._committed)throw new Ql(Wl.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function S_(t,e){if((t=Object(qs.m)(t)).firestore!==e)throw new Ql(Wl.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var C_=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(zl.c)(e,t),e.prototype.convertBytes=function(t){return new Sb(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new ub(this.firestore,null,e)},e}(b_);function E_(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=ib(t,ub);var o=ib(t.firestore,yb),s=jb(o);return I_(o,[("string"==typeof(e=Object(qs.m)(e))||e instanceof Ob?qb(s,"updateDoc",t._key,e,n,r):Ub(s,"updateDoc",t._key,e)).toMutation(t._key,Wd.exists(!0))])}function T_(t){for(var e,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t=Object(qs.m)(t);var s={includeMetadataChanges:!1},a=0;"object"!=typeof i[a]||mb(i[a])||(s=i[a],a++);var u,c,l,h={includeMetadataChanges:s.includeMetadataChanges};if(mb(i[a])){var d=i[a];i[a]=null===(e=d.next)||void 0===e?void 0:e.bind(d),i[a+1]=null===(n=d.error)||void 0===n?void 0:n.bind(d),i[a+2]=null===(r=d.complete)||void 0===r?void 0:r.bind(d)}if(t instanceof ub)c=ib(t.firestore,yb),l=pd(t._key.path),u={next:function(e){i[a]&&i[a](x_(c,t,e))},error:i[a+1],complete:i[a+2]};else{var f=ib(t,cb);c=ib(f.firestore,yb),l=f._query;var p=new C_(c);u={next:function(t){i[a]&&i[a](new i_(c,p,f,t))},error:i[a+1],complete:i[a+2]},a_(t._query)}return function(t,e,n,r){var i=this,o=new kv(r),s=new Vy(e,o,n);return t.asyncQueue.enqueueAndForget(function(){return Object(zl.b)(i,void 0,void 0,function(){var e;return Object(zl.d)(this,function(n){switch(n.label){case 0:return e=Ry,[4,qv(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}})})}),function(){o.Wo(),t.asyncQueue.enqueueAndForget(function(){return Object(zl.b)(i,void 0,void 0,function(){var e;return Object(zl.d)(this,function(n){switch(n.label){case 0:return e=Dy,[4,qv(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}})})})}}(vb(c),l,h,u)}function I_(t,e){return function(t,e){var n=this,r=new Vp;return t.asyncQueue.enqueueAndForget(function(){return Object(zl.b)(n,void 0,void 0,function(){var n;return Object(zl.d)(this,function(i){switch(i.label){case 0:return n=Jy,[4,Uv(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(vb(t),e)}function x_(t,e,n){var r=n.docs.get(e._key),i=new C_(t);return new n_(t,i,e._key,r,new e_(n.hasPendingWrites,n.fromCache),e._converter)}var k_=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._firestore=e,r}return Object(zl.c)(e,t),e.prototype.get=function(e){var n=this,r=S_(e,this._firestore),i=new C_(this._firestore);return t.prototype.get.call(this,e).then(function(t){return new n_(n._firestore,i,r._key,t._document,new e_(!1,!1),r._converter)})},e}(function(){function t(t,e){this._firestore=t,this._transaction=e,this._dataReader=jb(t)}return t.prototype.get=function(t){var e=this,n=S_(t,this._firestore),r=new w_(this._firestore);return this._transaction.lookup([n._key]).then(function(t){if(!t||1!==t.length)return th();var i=t[0];if(i.isFoundDocument())return new Xb(e._firestore,r,i.key,i,n._converter);if(i.isNoDocument())return new Xb(e._firestore,r,n._key,null,n._converter);throw th()})},t.prototype.set=function(t,e,n){var r=S_(t,this._firestore),i=__(r._converter,e,n),o=Pb(this._dataReader,"Transaction.set",r._key,i,null!==r._converter,n);return this._transaction.set(r._key,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,s=S_(t,this._firestore);return o="string"==typeof(e=Object(qs.m)(e))||e instanceof Ob?qb(this._dataReader,"Transaction.update",s._key,e,n,r):Ub(this._dataReader,"Transaction.update",s._key,e),this._transaction.update(s._key,o),this},t.prototype.delete=function(t){var e=S_(t,this._firestore);return this._transaction.delete(e._key),this},t}());function N_(){if("undefined"==typeof Uint8Array)throw new Ql(Wl.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function A_(){if("undefined"==typeof atob)throw new Ql(Wl.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var j_=function(){function t(t){this._delegate=t}return t.fromBase64String=function(e){return A_(),new t(Sb.fromBase64String(e))},t.fromUint8Array=function(e){return N_(),new t(Sb.fromUint8Array(e))},t.prototype.toBase64=function(){return A_(),this._delegate.toBase64()},t.prototype.toUint8Array=function(){return N_(),this._delegate.toUint8Array()},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t}(),P_=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){wb(t=ib(t,yb));var n=vb(t),r=t._freezeSettings(),i=new xv;return _b(n,i,new Tv(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._delegate,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){wb(t=ib(t,yb));var e=vb(t),n=t._freezeSettings(),r=new xv;return _b(e,r,new Iv(r,n.cacheSizeBytes))}(t._delegate)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t._initialized&&!t._terminated)throw new Ql(Wl.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new Vp;return t._queue.enqueueAndForgetEvenWhileRestricted(function(){return Object(zl.b)(e,void 0,void 0,function(){var e;return Object(zl.d)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return Object(zl.b)(this,void 0,void 0,function(){return Object(zl.d)(this,function(e){switch(e.label){case 0:return Bp.yt()?[4,Bp.delete(t+"main")]:[2,Promise.resolve()];case 1:return e.sent(),[2]}})})}(Zg(t._databaseId,t._persistenceKey))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}})})}),n.promise}(t._delegate)},t}(),R_=function(){function t(t,e,n){var r=this;this._delegate=e,this.Jc=n,this.INTERNAL={delete:function(){return r.terminate()}},t instanceof Kv||(this.Yc=t)}return Object.defineProperty(t.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),t.prototype.settings=function(t){t.merge&&delete(t=Object.assign(Object.assign({},this._delegate._getSettings()),t)).merge,this._delegate._setSettings(t)},t.prototype.useEmulator=function(t,e){!function(t,e,n){var r=(t=ib(t,ab))._getSettings();"firestore.googleapis.com"!==r.host&&r.host!==e&&Xl("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},r),{host:e+":"+n,ssl:!1}))}(this._delegate,t,e)},t.prototype.enableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue(function(){return Object(zl.b)(e,void 0,void 0,function(){var e,n;return Object(zl.d)(this,function(r){switch(r.label){case 0:return[4,Mv(t)];case 1:return e=r.sent(),[4,Vv(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!0),function(t){var e=nh(t);return e.$r.delete(0),ny(e)}(n))]}})})})}(vb(ib(this._delegate,yb)))},t.prototype.disableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue(function(){return Object(zl.b)(e,void 0,void 0,function(){var e,n;return Object(zl.d)(this,function(r){switch(r.label){case 0:return[4,Mv(t)];case 1:return e=r.sent(),[4,Vv(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!1),function(t){return Object(zl.b)(this,void 0,void 0,function(){var e;return Object(zl.d)(this,function(n){switch(n.label){case 0:return(e=nh(t)).$r.add(0),[4,ry(e)];case 1:return n.sent(),e.Br.set("Offline"),[2]}})})}(n))]}})})})}(vb(ib(this._delegate,yb)))},t.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&tb("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Jc.enableMultiTabIndexedDbPersistence(this):this.Jc.enableIndexedDbPersistence(this,n)},t.prototype.clearPersistence=function(){return this.Jc.clearIndexedDbPersistence(this)},t.prototype.terminate=function(){return this.Yc&&(this.Yc._removeServiceInstance("firestore"),this.Yc._removeServiceInstance("firestore-exp")),this._delegate._delete()},t.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new Vp;return t.asyncQueue.enqueueAndForget(function(){return Object(zl.b)(e,void 0,void 0,function(){var e;return Object(zl.d)(this,function(r){switch(r.label){case 0:return e=rv,[4,Uv(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}})})}),n.promise}(vb(ib(this._delegate,yb)))},t.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new kv(e);return t.asyncQueue.enqueueAndForget(function(){return Object(zl.b)(n,void 0,void 0,function(){var e;return Object(zl.d)(this,function(n){switch(n.label){case 0:return e=function(t,e){nh(t).Gr.add(e),e.next()},[4,qv(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})}),function(){r.Wo(),t.asyncQueue.enqueueAndForget(function(){return Object(zl.b)(n,void 0,void 0,function(){var e;return Object(zl.d)(this,function(n){switch(n.label){case 0:return e=function(t,e){nh(t).Gr.delete(e)},[4,qv(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})})}}(vb(t=ib(t,yb)),mb(e)?e:{next:e})}(this._delegate,t)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.Yc)throw new Ql(Wl.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.Yc},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new G_(this,hb(this._delegate,t))}catch(t){throw U_(t,"collection()","Firestore.collection()")}},t.prototype.doc=function(t){try{return new V_(this,db(this._delegate,t))}catch(t){throw U_(t,"doc()","Firestore.doc()")}},t.prototype.collectionGroup=function(t){try{return new K_(this,function(t,e){if(t=ib(t,ab),Xv("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ql(Wl.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new cb(t,null,function(t){return new dd(ph.emptyPath(),t)}(e))}(this._delegate,t))}catch(t){throw U_(t,"collectionGroup()","Firestore.collectionGroup()")}},t.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new Vp;return t.asyncQueue.enqueueAndForget(function(){return Object(zl.b)(n,void 0,void 0,function(){var n;return Object(zl.d)(this,function(i){switch(i.label){case 0:return[4,function(t){return Lv(t).then(function(t){return t.datastore})}(t)];case 1:return n=i.sent(),new Av(t.asyncQueue,n,e,r).run(),[2]}})})}),r.promise}(vb(t),function(n){return e(new k_(t,n))})}(this._delegate,function(n){return t(new L_(e,n))})},t.prototype.batch=function(){var t=this;return vb(this._delegate),new M_(new O_(this._delegate,function(e){return I_(t._delegate,e)}))},t.prototype.loadBundle=function(t){throw new Ql(Wl.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},t.prototype.namedQuery=function(t){throw new Ql(Wl.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},t}(),D_=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(zl.c)(e,t),e.prototype.convertBytes=function(t){return new j_(new Sb(t))},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return V_.Xc(e,this.firestore,null)},e}(b_),L_=function(){function t(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new D_(t)}return t.prototype.get=function(t){var e=this,n=$_(t);return this._delegate.get(n).then(function(t){return new H_(e._firestore,new n_(e._firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,n._converter))})},t.prototype.set=function(t,e,n){var r=$_(t);return n?(Zv("Transaction.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=$_(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,Object(zl.f)([s,e,n],i)),this},t.prototype.delete=function(t){var e=$_(t);return this._delegate.delete(e),this},t}(),M_=function(){function t(t){this._delegate=t}return t.prototype.set=function(t,e,n){var r=$_(t);return n?(Zv("WriteBatch.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=$_(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,Object(zl.f)([s,e,n],i)),this},t.prototype.delete=function(t){var e=$_(t);return this._delegate.delete(e),this},t.prototype.commit=function(){return this._delegate.commit()},t}(),F_=function(){function t(t,e,n){this._firestore=t,this._userDataWriter=e,this._delegate=n}return t.prototype.fromFirestore=function(t,e){var n=new r_(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new z_(this._firestore,n),null!=e?e:{})},t.prototype.toFirestore=function(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)},t.Zc=function(e,n){var r=t.tu,i=r.get(e);i||(i=new WeakMap,r.set(e,i));var o=i.get(n);return o||(o=new t(e,new D_(e),n),i.set(n,o)),o},t}();F_.tu=new WeakMap;var V_=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new D_(t)}return t.eu=function(e,n,r){if(e.length%2!=0)throw new Ql(Wl.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new t(n,new ub(n._delegate,r,new kh(e)))},t.Xc=function(e,n,r){return new t(n,new ub(n._delegate,r,e))},Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new G_(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new G_(this.firestore,hb(this._delegate,t))}catch(t){throw U_(t,"collection()","DocumentReference.collection()")}},t.prototype.isEqual=function(t){return(t=Object(qs.m)(t))instanceof ub&&fb(this._delegate,t)},t.prototype.set=function(t,e){e=Zv("DocumentReference.set",e);try{return function(t,e,n){t=ib(t,ub);var r=ib(t.firestore,yb),i=__(t._converter,e,n);return I_(r,[Pb(jb(r),"setDoc",t._key,i,null!==t._converter,n).toMutation(t._key,Wd.none())])}(this._delegate,t,e)}catch(t){throw U_(t,"setDoc()","DocumentReference.set()")}},t.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?E_(this._delegate,t):E_.apply(void 0,Object(zl.f)([this._delegate,t,e],n))}catch(t){throw U_(t,"updateDoc()","DocumentReference.update()")}},t.prototype.delete=function(){return I_(ib((t=this._delegate).firestore,yb),[new uf(t._key,Wd.none())]);var t},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=q_(e),i=B_(e,function(e){return new H_(t.firestore,new n_(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate._converter))});return T_(this._delegate,r,i)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=ib(t,ub);var e=ib(t.firestore,yb),n=vb(e),r=new C_(e);return function(t,e){var n=this,r=new Vp;return t.asyncQueue.enqueueAndForget(function(){return Object(zl.b)(n,void 0,void 0,function(){var n;return Object(zl.d)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return Object(zl.b)(this,void 0,void 0,function(){var r,i;return Object(zl.d)(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(t,e){var n=nh(t);return n.persistence.runTransaction("read document","readonly",function(t){return n.Mn.mn(t,e)})}(t,e)];case 1:return(i=o.sent()).isFoundDocument()?n.resolve(i):i.isNoDocument()?n.resolve(null):n.reject(new Ql(Wl.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=xy(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}})})},[4,Fv(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t._key).then(function(n){return new n_(e,r,t._key,n,new e_(null!==n&&n.hasLocalMutations,!0),t._converter)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=ib(t,ub);var e=ib(t.firestore,yb);return Bv(vb(e),t._key,{source:"server"}).then(function(n){return x_(e,t,n)})}(this._delegate):function(t){t=ib(t,ub);var e=ib(t.firestore,yb);return Bv(vb(e),t._key).then(function(n){return x_(e,t,n)})}(this._delegate)).then(function(t){return new H_(e.firestore,new n_(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate._converter))})},t.prototype.withConverter=function(e){return new t(this.firestore,this._delegate.withConverter(e?F_.Zc(this.firestore,e):null))},t}();function U_(t,e,n){return t.message=t.message.replace(e,n),t}function q_(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!mb(r))return r}return{}}function B_(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=mb(t[0])?t[0]:mb(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var H_=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"ref",{get:function(){return new V_(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),t.prototype.data=function(t){return this._delegate.data(t)},t.prototype.get=function(t,e){return this._delegate.get(t,e)},t.prototype.isEqual=function(t){return s_(this._delegate,t._delegate)},t}(),z_=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(zl.c)(e,t),e.prototype.data=function(t){return this._delegate.data(t)},e}(H_),K_=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new D_(t)}return t.prototype.where=function(e,n,r){try{return new t(this.firestore,c_(this._delegate,function(t,e,n){var r=e,i=t_("where",t);return new l_(i,r,n)}(e,n,r)))}catch(e){throw U_(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.orderBy=function(e,n){try{return new t(this.firestore,c_(this._delegate,function(t,e){void 0===e&&(e="asc");var n=e,r=t_("orderBy",t);return new h_(r,n)}(e,n)))}catch(e){throw U_(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.limit=function(e){try{return new t(this.firestore,c_(this._delegate,function(t){return ob("limit",t),new d_("limit",t,"F")}(e)))}catch(e){throw U_(e,"limit()","Query.limit()")}},t.prototype.limitToLast=function(e){try{return new t(this.firestore,c_(this._delegate,function(t){return ob("limitToLast",t),new d_("limitToLast",t,"L")}(e)))}catch(e){throw U_(e,"limitToLast()","Query.limitToLast()")}},t.prototype.startAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,c_(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new f_("startAt",t,!0)}).apply(void 0,e)))}catch(e){throw U_(e,"startAt()","Query.startAt()")}},t.prototype.startAfter=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,c_(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new f_("startAfter",t,!1)}).apply(void 0,e)))}catch(e){throw U_(e,"startAfter()","Query.startAfter()")}},t.prototype.endBefore=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,c_(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new p_("endBefore",t,!0)}).apply(void 0,e)))}catch(e){throw U_(e,"endBefore()","Query.endBefore()")}},t.prototype.endAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,c_(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new p_("endAt",t,!1)}).apply(void 0,e)))}catch(e){throw U_(e,"endAt()","Query.endAt()")}},t.prototype.isEqual=function(t){return pb(this._delegate,t._delegate)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=ib(t,cb);var e=ib(t.firestore,yb),n=vb(e),r=new C_(e);return function(t,e){var n=this,r=new Vp;return t.asyncQueue.enqueueAndForget(function(){return Object(zl.b)(n,void 0,void 0,function(){var n;return Object(zl.d)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return Object(zl.b)(this,void 0,void 0,function(){var r,i,o,s,a;return Object(zl.d)(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,pm(t,e,!0)];case 1:return a=u.sent(),r=new zy(e,a.Bn),i=r._o(a.documents),o=r.applyChanges(i,!1),n.resolve(o.snapshot),[3,3];case 2:return s=u.sent(),a=xy(s,"Failed to execute query '"+e+" against cache"),n.reject(a),[3,3];case 3:return[2]}})})},[4,Fv(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t._query).then(function(n){return new i_(e,r,t,n)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=ib(t,cb);var e=ib(t.firestore,yb),n=vb(e),r=new C_(e);return Hv(n,t._query,{source:"server"}).then(function(n){return new i_(e,r,t,n)})}(this._delegate):function(t){t=ib(t,cb);var e=ib(t.firestore,yb),n=vb(e),r=new C_(e);return a_(t._query),Hv(n,t._query).then(function(n){return new i_(e,r,t,n)})}(this._delegate)).then(function(t){return new Q_(e.firestore,new i_(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))})},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=q_(e),i=B_(e,function(e){return new Q_(t.firestore,new i_(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))});return T_(this._delegate,r,i)},t.prototype.withConverter=function(e){return new t(this.firestore,this._delegate.withConverter(e?F_.Zc(this.firestore,e):null))},t}(),W_=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"doc",{get:function(){return new z_(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),t}(),Q_=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"query",{get:function(){return new K_(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map(function(e){return new z_(t._firestore,e)})},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(t){var e=this;return this._delegate.docChanges(t).map(function(t){return new W_(e._firestore,t)})},t.prototype.forEach=function(t,e){var n=this;this._delegate.forEach(function(r){t.call(e,new z_(n._firestore,r))})},t.prototype.isEqual=function(t){return s_(this._delegate,t._delegate)},t}(),G_=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._delegate=n,r}return Object(zl.c)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return t?new V_(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new V_(this.firestore,void 0===t?db(this._delegate):db(this._delegate,t))}catch(t){throw U_(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=ib(t.firestore,yb),r=db(t),i=__(t._converter,e);return I_(n,[Pb(jb(t.firestore),"addDoc",r._key,i,null!==t._converter,{}).toMutation(r._key,Wd.exists(!1))]).then(function(){return r})}(this._delegate,t).then(function(t){return new V_(e.firestore,t)})},e.prototype.isEqual=function(t){return fb(this._delegate,t._delegate)},e.prototype.withConverter=function(t){return new e(this.firestore,this._delegate.withConverter(t?F_.Zc(this.firestore,t):null))},e}(K_);function $_(t){return ib(t,ub)}var Y_,J_=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._delegate=new(Ob.bind.apply(Ob,Object(zl.f)([void 0],t)))}return t.documentId=function(){return new t(mh.keyField().canonicalString())},t.prototype.isEqual=function(t){return(t=Object(qs.m)(t))instanceof Ob&&this._delegate._internalPath.isEqual(t._internalPath)},t}(),X_=function(){function t(t){this._delegate=t}return t.serverTimestamp=function(){var e=new Lb("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new t(e)},t.delete=function(){var e=new Rb("deleteField");return e._methodName="FieldValue.delete",new t(e)},t.arrayUnion=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Mb("arrayUnion",t)}).apply(void 0,e);return r._methodName="FieldValue.arrayUnion",new t(r)},t.arrayRemove=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Fb("arrayRemove",t)}).apply(void 0,e);return r._methodName="FieldValue.arrayRemove",new t(r)},t.increment=function(e){var n=function(t){return new Vb("increment",t)}(e);return n._methodName="FieldValue.increment",new t(n)},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t}(),Z_=n("/6Yf"),tw={Firestore:R_,GeoPoint:Eb,Timestamp:uh,Blob:j_,Transaction:L_,WriteBatch:M_,DocumentReference:V_,DocumentSnapshot:H_,Query:K_,QueryDocumentSnapshot:z_,QuerySnapshot:Q_,CollectionReference:G_,FieldPath:J_,FieldValue:X_,setLogLevel:function(t){Gl.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};function ew(t,e){return function(t,e=Si.a){return new jt.a(n=>{let r;return null!=e?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{null!=r&&r()}})}(t,e)}function nw(t,e){return ew(t,e).pipe(Object(Ht.a)(t=>({payload:t,type:"query"})))}function rw(t,e){return nw(t,e).pipe(Xt(void 0),Ms(),Object(Ht.a)(([t,e])=>{const n=e.payload.docChanges(),r=n.map(t=>({type:t.type,payload:t}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(e.payload.metadata)&&e.payload.docs.forEach((e,i)=>{const o=n.find(t=>t.doc.ref.isEqual(e.ref)),s=null==t?void 0:t.payload.docs.find(t=>t.ref.isEqual(e.ref));o&&JSON.stringify(o.doc.metadata)===JSON.stringify(e.metadata)||!o&&s&&JSON.stringify(s.metadata)===JSON.stringify(e.metadata)||r.push({type:"modified",payload:{oldIndex:i,newIndex:i,type:"modified",doc:e}})}),r}))}function iw(t,e,n){return rw(t,n).pipe(Zt((t,n)=>function(t,e,n){return e.forEach(e=>{n.indexOf(e.type)>-1&&(t=function(t,e){switch(e.type){case"added":if(!t[e.newIndex]||!t[e.newIndex].doc.ref.isEqual(e.doc.ref))return ow(t,e.newIndex,0,e);break;case"modified":if(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return ow(t,e.newIndex,1,e)}break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return ow(t,e.oldIndex,1)}return t}(t,e))}),t}(t,n.map(t=>t.payload),e),[]),Ti(),Object(Ht.a)(t=>t.map(t=>({type:t.type,payload:t}))))}function ow(t,e,n,...r){const i=t.slice();return i.splice(e,n,...r),i}function sw(t){return t&&0!==t.length||(t=["added","removed","modified"]),t}(function(t,e){t.INTERNAL.registerComponent(new Z_.a("firestore",function(t){return function(t,e){return new R_(t,new yb(t,e),new P_)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))},"PUBLIC").setServiceProps(Object.assign({},tw)))})(Y_=Us.a),Y_.registerVersion("@firebase/firestore","2.2.2");class aw{constructor(t,e,n){this.ref=t,this.query=e,this.afs=n}stateChanges(t){let e=rw(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe(Object(Ht.a)(e=>e.filter(e=>t.indexOf(e.type)>-1)))),e.pipe(Xt(void 0),Ms(),ne(([t,e])=>e.length>0||!t),Object(Ht.a)(([t,e])=>e),this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(Zt((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=sw(t);return iw(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return nw(this.query,this.afs.schedulers.outsideAngular).pipe(Object(Ht.a)(e=>e.payload.docs.map(e=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return Object(wt.a)(this.query.get(t)).pipe(Object(Ri.b)(this.afs.schedulers.insideAngular))}add(t){return this.ref.add(t)}doc(t){return new uw(this.ref.doc(t),this.afs)}}class uw{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const n=this.ref.collection(t),{ref:r,query:i}=pw(n,e);return new aw(r,i,this.afs)}snapshotChanges(){return ew(this.ref,this.afs.schedulers.outsideAngular).pipe(Xt(void 0),Ms(),Object(Ht.a)(([t,e])=>e.exists?(null==t?void 0:t.exists)?{payload:e,type:"modified"}:{payload:e,type:"added"}:{payload:e,type:"removed"})).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return this.snapshotChanges().pipe(Object(Ht.a)(({payload:e})=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return Object(wt.a)(this.ref.get(t)).pipe(Object(Ri.b)(this.afs.schedulers.insideAngular))}}class cw{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?rw(this.query,this.afs.schedulers.outsideAngular).pipe(Object(Ht.a)(e=>e.filter(e=>t.indexOf(e.type)>-1)),ne(t=>t.length>0),this.afs.keepUnstableUntilFirst):rw(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(Zt((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=sw(t);return iw(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return nw(this.query,this.afs.schedulers.outsideAngular).pipe(Object(Ht.a)(e=>e.payload.docs.map(e=>t.idField?Object.assign({[t.idField]:e.id},e.data()):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return Object(wt.a)(this.query.get(t)).pipe(Object(Ri.b)(this.afs.schedulers.insideAngular))}}const lw=new r.q("angularfire2.enableFirestorePersistence"),hw=new r.q("angularfire2.firestore.persistenceSettings"),dw=new r.q("angularfire2.firestore.settings"),fw=new r.q("angularfire2.firestore.use-emulator");function pw(t,e=(t=>t)){return{query:e(t),ref:t}}let gw=(()=>{class t{constructor(t,e,n,r,i,o,s,a,u){this.schedulers=new Pi.d(o),this.keepUnstableUntilFirst=Object(Pi.h)(this.schedulers);const c=Object(Pi.g)(t,o,e);!$i.a.auth&&u&&Object(Pi.j)();const l=a;[this.firestore,this.persistenceEnabled$]=Object(Pi.f)(c.name+".firestore","AngularFirestore",c,()=>{const t=o.runOutsideAngular(()=>c.firestore());if(r&&t.settings(r),l&&t.useEmulator(...l),n&&!U(i)){const e=()=>{try{return Object(wt.a)(t.enablePersistence(s||void 0).then(()=>!0,()=>!1))}catch(Y_){return"undefined"!=typeof console&&console.warn(Y_),Object(Ot.a)(!1)}};return[t,o.runOutsideAngular(e)]}return[t,Object(Ot.a)(!1)]},[r,l,n])}collection(t,e){let n;n="string"==typeof t?this.firestore.collection(t):t;const{ref:r,query:i}=pw(n,e),o=this.schedulers.ngZone.run(()=>r);return new aw(o,i,this)}collectionGroup(t,e){const n=e||(t=>t),r=this.firestore.collectionGroup(t);return new cw(n(r),this)}doc(t){let e;e="string"==typeof t?this.firestore.doc(t):t;const n=this.schedulers.ngZone.run(()=>e);return new uw(n,this)}createId(){return this.firestore.collection("_").doc().id}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(Pi.c),r.Sb(Pi.b,8),r.Sb(lw,8),r.Sb(dw,8),r.Sb(r.B),r.Sb(r.z),r.Sb(hw,8),r.Sb(fw,8),r.Sb(Bi,8))},t.\u0275prov=Object(r.Fb)({factory:function(){return new t(Object(r.Sb)(Pi.c),Object(r.Sb)(Pi.b,8),Object(r.Sb)(lw,8),Object(r.Sb)(dw,8),Object(r.Sb)(r.B),Object(r.Sb)(r.z),Object(r.Sb)(hw,8),Object(r.Sb)(fw,8),Object(r.Sb)(Bi,8))},token:t,providedIn:"any"}),t})();class mw{}const yw="*";function vw(t,e=null){return{type:4,styles:e,timings:t}}function bw(t,e=null){return{type:2,steps:t,options:e}}function _w(t){return{type:6,styles:t,offset:null}}function ww(t,e,n){return{type:0,name:t,styles:e,options:n}}function Ow(t,e,n=null){return{type:1,expr:t,animation:e,options:n}}function Sw(t){Promise.resolve(null).then(t)}class Cw{constructor(t=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){Sw(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}class Ew{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let e=0,n=0,r=0;const i=this.players.length;0==i?Sw(()=>this._onFinish()):this.players.forEach(t=>{t.onDone(()=>{++e==i&&this._onFinish()}),t.onDestroy(()=>{++n==i&&this._onDestroy()}),t.onStart(()=>{++r==i&&this._onStart()})}),this.totalTime=this.players.reduce((t,e)=>Math.max(t,e.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const e=t*this.totalTime;this.players.forEach(t=>{const n=t.totalTime?Math.min(1,e/t.totalTime):1;t.setPosition(n)})}getPosition(){const t=this.players.reduce((t,e)=>null===t||e.totalTime>t.totalTime?e:t,null);return null!=t?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}const Tw=["toast-component",""];function Iw(t,e){if(1&t){const t=r.Pb();r.Ob(0,"button",5),r.Vb("click",function(){return r.gc(t),r.Xb().remove()}),r.Ob(1,"span",6),r.nc(2,"\xd7"),r.Nb(),r.Nb()}}function xw(t,e){if(1&t&&(r.Mb(0),r.nc(1),r.Lb()),2&t){const t=r.Xb(2);r.yb(1),r.pc("[",t.duplicatesCount+1,"]")}}function kw(t,e){if(1&t&&(r.Ob(0,"div"),r.nc(1),r.mc(2,xw,2,1,"ng-container",4),r.Nb()),2&t){const t=r.Xb();r.Ab(t.options.titleClass),r.zb("aria-label",t.title),r.yb(1),r.pc(" ",t.title," "),r.yb(1),r.bc("ngIf",t.duplicatesCount)}}function Nw(t,e){if(1&t&&r.Kb(0,"div",7),2&t){const t=r.Xb();r.Ab(t.options.messageClass),r.bc("innerHTML",t.message,r.hc)}}function Aw(t,e){if(1&t&&(r.Ob(0,"div",8),r.nc(1),r.Nb()),2&t){const t=r.Xb();r.Ab(t.options.messageClass),r.zb("aria-label",t.message),r.yb(1),r.pc(" ",t.message," ")}}function jw(t,e){if(1&t&&(r.Ob(0,"div"),r.Kb(1,"div",9),r.Nb()),2&t){const t=r.Xb();r.yb(1),r.kc("width",t.width+"%")}}function Pw(t,e){if(1&t){const t=r.Pb();r.Ob(0,"button",5),r.Vb("click",function(){return r.gc(t),r.Xb().remove()}),r.Ob(1,"span",6),r.nc(2,"\xd7"),r.Nb(),r.Nb()}}function Rw(t,e){if(1&t&&(r.Mb(0),r.nc(1),r.Lb()),2&t){const t=r.Xb(2);r.yb(1),r.pc("[",t.duplicatesCount+1,"]")}}function Dw(t,e){if(1&t&&(r.Ob(0,"div"),r.nc(1),r.mc(2,Rw,2,1,"ng-container",4),r.Nb()),2&t){const t=r.Xb();r.Ab(t.options.titleClass),r.zb("aria-label",t.title),r.yb(1),r.pc(" ",t.title," "),r.yb(1),r.bc("ngIf",t.duplicatesCount)}}function Lw(t,e){if(1&t&&r.Kb(0,"div",7),2&t){const t=r.Xb();r.Ab(t.options.messageClass),r.bc("innerHTML",t.message,r.hc)}}function Mw(t,e){if(1&t&&(r.Ob(0,"div",8),r.nc(1),r.Nb()),2&t){const t=r.Xb();r.Ab(t.options.messageClass),r.zb("aria-label",t.message),r.yb(1),r.pc(" ",t.message," ")}}function Fw(t,e){if(1&t&&(r.Ob(0,"div"),r.Kb(1,"div",9),r.Nb()),2&t){const t=r.Xb();r.yb(1),r.kc("width",t.width+"%")}}class Vw{constructor(t,e,n,r,i,o){this.toastId=t,this.config=e,this.message=n,this.title=r,this.toastType=i,this.toastRef=o,this._onTap=new St.a,this._onAction=new St.a,this.toastRef.afterClosed().subscribe(()=>{this._onAction.complete(),this._onTap.complete()})}triggerTap(){this._onTap.next(),this.config.tapToDismiss&&this._onTap.complete()}onTap(){return this._onTap.asObservable()}triggerAction(t){this._onAction.next(t)}onAction(){return this._onAction.asObservable()}}const Uw={maxOpened:0,autoDismiss:!1,newestOnTop:!0,preventDuplicates:!1,countDuplicates:!1,resetTimeoutOnDuplicate:!1,includeTitleDuplicates:!1,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},closeButton:!1,disableTimeOut:!1,timeOut:5e3,extendedTimeOut:1e3,enableHtml:!1,progressBar:!1,toastClass:"ngx-toastr",positionClass:"toast-top-right",titleClass:"toast-title",messageClass:"toast-message",easing:"ease-in",easeTime:300,tapToDismiss:!0,onActivateTick:!1,progressAnimation:"decreasing"},qw=new r.q("ToastConfig");class Bw{constructor(t,e){this.component=t,this.injector=e}attach(t,e){return this._attachedHost=t,t.attach(this,e)}detach(){const t=this._attachedHost;if(t)return this._attachedHost=void 0,t.detach()}get isAttached(){return null!=this._attachedHost}setAttachedHost(t){this._attachedHost=t}}class Hw extends class{attach(t,e){return this._attachedPortal=t,this.attachComponentPortal(t,e)}detach(){this._attachedPortal&&this._attachedPortal.setAttachedHost(),this._attachedPortal=void 0,this._disposeFn&&(this._disposeFn(),this._disposeFn=void 0)}setDisposeFn(t){this._disposeFn=t}}{constructor(t,e,n){super(),this._hostDomElement=t,this._componentFactoryResolver=e,this._appRef=n}attachComponentPortal(t,e){const n=this._componentFactoryResolver.resolveComponentFactory(t.component);let r;return r=n.create(t.injector),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.detachView(r.hostView),r.destroy()}),e?this._hostDomElement.insertBefore(this._getComponentRootNode(r),this._hostDomElement.firstChild):this._hostDomElement.appendChild(this._getComponentRootNode(r)),r}_getComponentRootNode(t){return t.hostView.rootNodes[0]}}let zw=(()=>{class t{constructor(t){this._document=t}ngOnDestroy(){this._containerElement&&this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t=this._document.createElement("div");t.classList.add("overlay-container"),this._document.body.appendChild(t),this._containerElement=t}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(a))},t.\u0275prov=Object(r.Fb)({factory:function(){return new t(Object(r.Sb)(a))},token:t,providedIn:"root"}),t})();class Kw{constructor(t){this._portalHost=t}attach(t,e=!0){return this._portalHost.attach(t,e)}detach(){return this._portalHost.detach()}}let Ww=(()=>{class t{constructor(t,e,n,r){this._overlayContainer=t,this._componentFactoryResolver=e,this._appRef=n,this._document=r,this._paneElements=new Map}create(t,e){return this._createOverlayRef(this.getPaneElement(t,e))}getPaneElement(t="",e){return this._paneElements.get(e)||this._paneElements.set(e,{}),this._paneElements.get(e)[t]||(this._paneElements.get(e)[t]=this._createPaneElement(t,e)),this._paneElements.get(e)[t]}_createPaneElement(t,e){const n=this._document.createElement("div");return n.id="toast-container",n.classList.add(t),n.classList.add("toast-container"),e?e.getContainerElement().appendChild(n):this._overlayContainer.getContainerElement().appendChild(n),n}_createPortalHost(t){return new Hw(t,this._componentFactoryResolver,this._appRef)}_createOverlayRef(t){return new Kw(this._createPortalHost(t))}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(zw),r.Sb(r.j),r.Sb(r.g),r.Sb(a))},t.\u0275prov=Object(r.Fb)({factory:function(){return new t(Object(r.Sb)(zw),Object(r.Sb)(r.j),Object(r.Sb)(r.g),Object(r.Sb)(a))},token:t,providedIn:"root"}),t})();class Qw{constructor(t){this._overlayRef=t,this.duplicatesCount=0,this._afterClosed=new St.a,this._activate=new St.a,this._manualClose=new St.a,this._resetTimeout=new St.a,this._countDuplicate=new St.a}manualClose(){this._manualClose.next(),this._manualClose.complete()}manualClosed(){return this._manualClose.asObservable()}timeoutReset(){return this._resetTimeout.asObservable()}countDuplicate(){return this._countDuplicate.asObservable()}close(){this._overlayRef.detach(),this._afterClosed.next(),this._manualClose.next(),this._afterClosed.complete(),this._manualClose.complete(),this._activate.complete(),this._resetTimeout.complete(),this._countDuplicate.complete()}afterClosed(){return this._afterClosed.asObservable()}isInactive(){return this._activate.isStopped}activate(){this._activate.next(),this._activate.complete()}afterActivate(){return this._activate.asObservable()}onDuplicate(t,e){t&&this._resetTimeout.next(),e&&this._countDuplicate.next(++this.duplicatesCount)}}class Gw{constructor(t,e){this._toastPackage=t,this._parentInjector=e}get(t,e,n){return t===Vw?this._toastPackage:this._parentInjector.get(t,e,n)}}let $w=(()=>{class t{constructor(t,e,n,r,i){this.overlay=e,this._injector=n,this.sanitizer=r,this.ngZone=i,this.currentlyActive=0,this.toasts=[],this.index=0,this.toastrConfig=Object.assign(Object.assign({},t.default),t.config),t.config.iconClasses&&(this.toastrConfig.iconClasses=Object.assign(Object.assign({},t.default.iconClasses),t.config.iconClasses))}show(t,e,n={},r=""){return this._preBuildNotification(r,t,e,this.applyConfig(n))}success(t,e,n={}){return this._preBuildNotification(this.toastrConfig.iconClasses.success||"",t,e,this.applyConfig(n))}error(t,e,n={}){return this._preBuildNotification(this.toastrConfig.iconClasses.error||"",t,e,this.applyConfig(n))}info(t,e,n={}){return this._preBuildNotification(this.toastrConfig.iconClasses.info||"",t,e,this.applyConfig(n))}warning(t,e,n={}){return this._preBuildNotification(this.toastrConfig.iconClasses.warning||"",t,e,this.applyConfig(n))}clear(t){for(const e of this.toasts)if(void 0!==t){if(e.toastId===t)return void e.toastRef.manualClose()}else e.toastRef.manualClose()}remove(t){const e=this._findToast(t);if(!e)return!1;if(e.activeToast.toastRef.close(),this.toasts.splice(e.index,1),this.currentlyActive=this.currentlyActive-1,!this.toastrConfig.maxOpened||!this.toasts.length)return!1;if(this.currentlyActive<this.toastrConfig.maxOpened&&this.toasts[this.currentlyActive]){const t=this.toasts[this.currentlyActive].toastRef;t.isInactive()||(this.currentlyActive=this.currentlyActive+1,t.activate())}return!0}findDuplicate(t="",e="",n,r){const{includeTitleDuplicates:i}=this.toastrConfig;for(const o of this.toasts){const s=i&&o.title===t;if((!i||s)&&o.message===e)return o.toastRef.onDuplicate(n,r),o}return null}applyConfig(t={}){return Object.assign(Object.assign({},this.toastrConfig),t)}_findToast(t){for(let e=0;e<this.toasts.length;e++)if(this.toasts[e].toastId===t)return{index:e,activeToast:this.toasts[e]};return null}_preBuildNotification(t,e,n,r){return r.onActivateTick?this.ngZone.run(()=>this._buildNotification(t,e,n,r)):this._buildNotification(t,e,n,r)}_buildNotification(t,e,n,i){if(!i.toastComponent)throw new Error("toastComponent required");const o=this.findDuplicate(n,e,this.toastrConfig.resetTimeoutOnDuplicate&&i.timeOut>0,this.toastrConfig.countDuplicates);if((this.toastrConfig.includeTitleDuplicates&&n||e)&&this.toastrConfig.preventDuplicates&&null!==o)return o;this.previousToastMessage=e;let s=!1;this.toastrConfig.maxOpened&&this.currentlyActive>=this.toastrConfig.maxOpened&&(s=!0,this.toastrConfig.autoDismiss&&this.clear(this.toasts[0].toastId));const a=this.overlay.create(i.positionClass,this.overlayContainer);this.index=this.index+1;let u=e;e&&i.enableHtml&&(u=this.sanitizer.sanitize(r.H.HTML,e));const c=new Qw(a),l=new Vw(this.index,i,u,n,t,c),h=new Gw(l,this._injector),d=new Bw(i.toastComponent,h),f=a.attach(d,this.toastrConfig.newestOnTop);c.componentInstance=f.instance;const p={toastId:this.index,title:n||"",message:e||"",toastRef:c,onShown:c.afterActivate(),onHidden:c.afterClosed(),onTap:l.onTap(),onAction:l.onAction(),portal:f};return s||(this.currentlyActive=this.currentlyActive+1,setTimeout(()=>{p.toastRef.activate()})),this.toasts.push(p),p}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(qw),r.Sb(Ww),r.Sb(r.r),r.Sb(gt),r.Sb(r.z))},t.\u0275prov=Object(r.Fb)({factory:function(){return new t(Object(r.Sb)(qw),Object(r.Sb)(Ww),Object(r.Sb)(r.o),Object(r.Sb)(gt),Object(r.Sb)(r.z))},token:t,providedIn:"root"}),t})(),Yw=(()=>{class t{constructor(t,e,n){this.toastrService=t,this.toastPackage=e,this.ngZone=n,this.width=-1,this.toastClasses="",this.state={value:"inactive",params:{easeTime:this.toastPackage.config.easeTime,easing:"ease-in"}},this.message=e.message,this.title=e.title,this.options=e.config,this.originalTimeout=e.config.timeOut,this.toastClasses=`${e.toastType} ${e.config.toastClass}`,this.sub=e.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=e.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=e.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=e.toastRef.countDuplicate().subscribe(t=>{this.duplicatesCount=t})}get displayStyle(){if("inactive"===this.state.value)return"none"}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state=Object.assign(Object.assign({},this.state),{value:"active"}),!0!==this.options.disableTimeOut&&"timeOut"!==this.options.disableTimeOut&&this.options.timeOut&&(this.outsideTimeout(()=>this.remove(),this.options.timeOut),this.hideTime=(new Date).getTime()+this.options.timeOut,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}updateProgress(){if(0===this.width||100===this.width||!this.options.timeOut)return;const t=(new Date).getTime();this.width=(this.hideTime-t)/this.options.timeOut*100,"increasing"===this.options.progressAnimation&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state=Object.assign(Object.assign({},this.state),{value:"active"}),this.outsideTimeout(()=>this.remove(),this.originalTimeout),this.options.timeOut=this.originalTimeout,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10)}remove(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.state=Object.assign(Object.assign({},this.state),{value:"removed"}),this.outsideTimeout(()=>this.toastrService.remove(this.toastPackage.toastId),+this.toastPackage.config.easeTime))}tapToast(){"removed"!==this.state.value&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){!0!==this.options.disableTimeOut&&"extendedTimeOut"!==this.options.disableTimeOut&&0!==this.options.extendedTimeOut&&"removed"!==this.state.value&&(this.outsideTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}outsideTimeout(t,e){this.ngZone?this.ngZone.runOutsideAngular(()=>this.timeout=setTimeout(()=>this.runInsideAngular(t),e)):this.timeout=setTimeout(()=>t(),e)}outsideInterval(t,e){this.ngZone?this.ngZone.runOutsideAngular(()=>this.intervalId=setInterval(()=>this.runInsideAngular(t),e)):this.intervalId=setInterval(()=>t(),e)}runInsideAngular(t){this.ngZone?this.ngZone.run(()=>t()):t()}}var e;return t.\u0275fac=function(e){return new(e||t)(r.Jb($w),r.Jb(Vw),r.Jb(r.z))},t.\u0275cmp=r.Db({type:t,selectors:[["","toast-component",""]],hostVars:5,hostBindings:function(t,e){1&t&&r.Vb("click",function(){return e.tapToast()})("mouseenter",function(){return e.stickAround()})("mouseleave",function(){return e.delayedHideToast()}),2&t&&(r.lc("@flyInOut",e.state),r.Ab(e.toastClasses),r.kc("display",e.displayStyle))},attrs:Tw,decls:5,vars:5,consts:[["class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alertdialog","aria-live","polite",3,"class","innerHTML",4,"ngIf"],["role","alertdialog","aria-live","polite",3,"class",4,"ngIf"],[4,"ngIf"],["aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alertdialog","aria-live","polite",3,"innerHTML"],["role","alertdialog","aria-live","polite"],[1,"toast-progress"]],template:function(t,e){1&t&&(r.mc(0,Iw,3,0,"button",0),r.mc(1,kw,3,5,"div",1),r.mc(2,Nw,1,3,"div",2),r.mc(3,Aw,2,4,"div",3),r.mc(4,jw,2,2,"div",4)),2&t&&(r.bc("ngIf",e.options.closeButton),r.yb(1),r.bc("ngIf",e.title),r.yb(1),r.bc("ngIf",e.message&&e.options.enableHtml),r.yb(1),r.bc("ngIf",e.message&&!e.options.enableHtml),r.yb(1),r.bc("ngIf",e.options.progressBar))},directives:[P],encapsulation:2,data:{animation:[(e=[ww("inactive",_w({opacity:0})),ww("active",_w({opacity:1})),ww("removed",_w({opacity:0})),Ow("inactive => active",vw("{{ easeTime }}ms {{ easing }}")),Ow("active => removed",vw("{{ easeTime }}ms {{ easing }}"))],{type:7,name:"flyInOut",definitions:e,options:{}})]}}),t})();const Jw=Object.assign(Object.assign({},Uw),{toastComponent:Yw});let Xw=(()=>{class t{static forRoot(e={}){return{ngModule:t,providers:[{provide:qw,useValue:{default:Jw,config:e}}]}}}return t.\u0275mod=r.Hb({type:t}),t.\u0275inj=r.Gb({factory:function(e){return new(e||t)},imports:[[V]]}),t})(),Zw=(()=>{class t{constructor(t,e,n){this.toastrService=t,this.toastPackage=e,this.appRef=n,this.width=-1,this.toastClasses="",this.state="inactive",this.message=e.message,this.title=e.title,this.options=e.config,this.originalTimeout=e.config.timeOut,this.toastClasses=`${e.toastType} ${e.config.toastClass}`,this.sub=e.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=e.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=e.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=e.toastRef.countDuplicate().subscribe(t=>{this.duplicatesCount=t})}get displayStyle(){if("inactive"===this.state)return"none"}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state="active",!0!==this.options.disableTimeOut&&"timeOut"!==this.options.disableTimeOut&&this.options.timeOut&&(this.timeout=setTimeout(()=>{this.remove()},this.options.timeOut),this.hideTime=(new Date).getTime()+this.options.timeOut,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10))),this.options.onActivateTick&&this.appRef.tick()}updateProgress(){if(0===this.width||100===this.width||!this.options.timeOut)return;const t=(new Date).getTime();this.width=(this.hideTime-t)/this.options.timeOut*100,"increasing"===this.options.progressAnimation&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state="active",this.options.timeOut=this.originalTimeout,this.timeout=setTimeout(()=>this.remove(),this.originalTimeout),this.hideTime=(new Date).getTime()+(this.originalTimeout||0),this.width=-1,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10))}remove(){"removed"!==this.state&&(clearTimeout(this.timeout),this.state="removed",this.timeout=setTimeout(()=>this.toastrService.remove(this.toastPackage.toastId)))}tapToast(){"removed"!==this.state&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){"removed"!==this.state&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){!0!==this.options.disableTimeOut&&"extendedTimeOut"!==this.options.disableTimeOut&&0!==this.options.extendedTimeOut&&"removed"!==this.state&&(this.timeout=setTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10)))}}return t.\u0275fac=function(e){return new(e||t)(r.Jb($w),r.Jb(Vw),r.Jb(r.g))},t.\u0275cmp=r.Db({type:t,selectors:[["","toast-component",""]],hostVars:4,hostBindings:function(t,e){1&t&&r.Vb("click",function(){return e.tapToast()})("mouseenter",function(){return e.stickAround()})("mouseleave",function(){return e.delayedHideToast()}),2&t&&(r.Ab(e.toastClasses),r.kc("display",e.displayStyle))},attrs:Tw,decls:5,vars:5,consts:[["class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert","aria-live","polite",3,"class","innerHTML",4,"ngIf"],["role","alert","aria-live","polite",3,"class",4,"ngIf"],[4,"ngIf"],["aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert","aria-live","polite",3,"innerHTML"],["role","alert","aria-live","polite"],[1,"toast-progress"]],template:function(t,e){1&t&&(r.mc(0,Pw,3,0,"button",0),r.mc(1,Dw,3,5,"div",1),r.mc(2,Lw,1,3,"div",2),r.mc(3,Mw,2,4,"div",3),r.mc(4,Fw,2,2,"div",4)),2&t&&(r.bc("ngIf",e.options.closeButton),r.yb(1),r.bc("ngIf",e.title),r.yb(1),r.bc("ngIf",e.message&&e.options.enableHtml),r.yb(1),r.bc("ngIf",e.message&&!e.options.enableHtml),r.yb(1),r.bc("ngIf",e.options.progressBar))},directives:[P],encapsulation:2}),t})();Object.assign(Object.assign({},Uw),{toastComponent:Zw});let tO=(()=>{class t{constructor(t,e,n,r,i){this.afs=t,this.afAuth=e,this.router=n,this.ngZone=r,this.toastr=i,console.log("auth ser"),this.afAuth.authState.subscribe(t=>{if(t){console.log("ther is user"),this.userState=t,localStorage.setItem("user",JSON.stringify(this.userState));const e=localStorage.getItem("user");null!=e&&JSON.parse(e)}else localStorage.removeItem("user"),console.log(localStorage.getItem("user"))})}SignIn(t,e){return this.afAuth.signInWithEmailAndPassword(t,e).then(t=>{this.ngZone.run(()=>{this.toastr.success("Enjoy!"),window.location.reload()})}).catch(t=>{this.toastr.error(""+t.message,"Error",{closeButton:!0,timeOut:5e3,progressBar:!0})})}SignUp(t){return this.afAuth.createUserWithEmailAndPassword(t.email,t.password).then(e=>{this.SetUserData(t,e.user).then(t=>{this.toastr.success("Enjoy!"),window.location.reload()})}).catch(t=>{this.toastr.error(""+t.message,"Error",{closeButton:!0,timeOut:5e3,progressBar:!0})})}SetUserData(t,e){const n=this.afs.doc("users/"+e.uid),r={uid:e.uid,email:t.email,password:t.password,username:t.username,favorites:[],likes:[],comments:[]};return console.log(r),n.set(r,{merge:!0})}SignOut(){return this.afAuth.signOut().then(()=>{localStorage.removeItem("user")})}get isLoggedIn(){return null!=localStorage.getItem("user")}get userLoggedID(){return JSON.parse(localStorage.getItem("user")||"{}").uid}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(gw),r.Sb(Gi),r.Sb(Jr),r.Sb(r.z),r.Sb($w))},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),eO=(()=>{class t{constructor(t,e){this.firestore=t,this.afs=e}getUserById(t){return this.firestore.collection("users").doc(t).snapshotChanges()}updatefavoritesList(t,e){return this.afs.doc("users/"+e).set({favorites:t},{merge:!0})}updatefLikesList(t,e){return this.afs.doc("users/"+e).set({likes:t},{merge:!0})}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(gw),r.Sb(gw))},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const nO=function(){return["/Home"]},rO=function(){return["/topmovies"]},iO=function(){return["/upcomingmovies"]},oO=function(){return["/nowplayingmovies"]};function sO(t,e){if(1&t){const t=r.Pb();r.Ob(0,"nav",1),r.Ob(1,"a",2),r.Ob(2,"h3",3),r.nc(3,"Movies"),r.Nb(),r.Nb(),r.Ob(4,"button",4),r.nc(5," \u2630 "),r.Nb(),r.Ob(6,"div",5),r.Ob(7,"ul",6),r.Ob(8,"li",7),r.Ob(9,"a",8),r.nc(10,"Top Rated"),r.Nb(),r.Nb(),r.Ob(11,"li",7),r.Ob(12,"a",8),r.nc(13,"Upcoming"),r.Nb(),r.Nb(),r.Ob(14,"li",7),r.Ob(15,"a",8),r.nc(16,"Playing now"),r.Nb(),r.Nb(),r.Nb(),r.Nb(),r.Ob(17,"div",9),r.Ob(18,"ul",6),r.Ob(19,"li",7),r.Ob(20,"button",10),r.Vb("click",function(){return r.gc(t),r.Xb().login()}),r.nc(21,"Login"),r.Nb(),r.Nb(),r.Ob(22,"li",7),r.Ob(23,"button",10),r.Vb("click",function(){return r.gc(t),r.Xb().signup()}),r.nc(24,"Sign up"),r.Nb(),r.Nb(),r.Nb(),r.Nb(),r.Nb()}2&t&&(r.yb(1),r.bc("routerLink",r.dc(4,nO)),r.yb(8),r.bc("routerLink",r.dc(5,rO)),r.yb(3),r.bc("routerLink",r.dc(6,iO)),r.yb(3),r.bc("routerLink",r.dc(7,oO)))}const aO=function(){return["/chat"]},uO=function(){return["/userpage"]};function cO(t,e){if(1&t){const t=r.Pb();r.Ob(0,"nav",1),r.Ob(1,"a",2),r.Ob(2,"h3",3),r.nc(3,"Movies"),r.Nb(),r.Nb(),r.Ob(4,"button",4),r.nc(5," \u2630 "),r.Nb(),r.Ob(6,"div",5),r.Ob(7,"ul",6),r.Ob(8,"li",7),r.Ob(9,"a",8),r.nc(10,"Top Rated"),r.Nb(),r.Nb(),r.Ob(11,"li",7),r.Ob(12,"a",8),r.nc(13,"Upcoming"),r.Nb(),r.Nb(),r.Ob(14,"li",7),r.Ob(15,"a",8),r.nc(16,"Playing now"),r.Nb(),r.Nb(),r.Nb(),r.Nb(),r.Ob(17,"div",9),r.Ob(18,"ul",6),r.Ob(19,"li",7),r.Ob(20,"a",11),r.Kb(21,"i",12),r.Nb(),r.Nb(),r.Ob(22,"li",7),r.Ob(23,"div",13),r.Ob(24,"button",14),r.nc(25),r.Nb(),r.Ob(26,"div",15),r.Ob(27,"a",16),r.nc(28,"view profile"),r.Nb(),r.Kb(29,"div",17),r.Ob(30,"a",18),r.Vb("click",function(){return r.gc(t),r.Xb().logout()}),r.nc(31,"logout"),r.Nb(),r.Nb(),r.Nb(),r.Nb(),r.Nb(),r.Nb(),r.Nb()}if(2&t){const t=r.Xb();r.yb(1),r.bc("routerLink",r.dc(7,nO)),r.yb(8),r.bc("routerLink",r.dc(8,rO)),r.yb(3),r.bc("routerLink",r.dc(9,iO)),r.yb(3),r.bc("routerLink",r.dc(10,oO)),r.yb(5),r.bc("routerLink",r.dc(11,aO)),r.yb(5),r.pc(" ",null==t.user?null:t.user.username," "),r.yb(2),r.bc("routerLink",r.dc(12,uO))}}let lO=(()=>{class t{constructor(t,e,n){this.router=t,this.auth=e,this.userser=n,this.isLoggedIn=!1}ngOnChanges(t){console.log("on change")}ngOnInit(){console.log("iam in header"),!0===this.auth.isLoggedIn&&(console.log("the user id = "),console.log(this.auth.userLoggedID),this.isLoggedIn=this.auth.isLoggedIn,this.userId=this.auth.userLoggedID,this.userser.getUserById(this.userId).subscribe(t=>{this.user=Object.assign({id:t.payload.id},t.payload.data())}))}login(){this.router.navigate(["/Login"])}signup(){this.router.navigate(["/Register"])}logout(){this.auth.SignOut().then(t=>{window.location.reload()})}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(Jr),r.Jb(tO),r.Jb(eO))},t.\u0275cmp=r.Db({type:t,selectors:[["app-header"]],features:[r.wb],decls:2,vars:2,consts:[["class","navbar fixed-top navbar-expand-md px-5",4,"ngIf"],[1,"navbar","fixed-top","navbar-expand-md","px-5"],[1,"navbar-brand",3,"routerLink"],[1,"title"],["id","menubtn","type","button","data-toggle","collapse","data-target","#collapsibleNavbar",1,"navbar-toggler"],["id","collapsibleNavbar",1,"collapse","navbar-collapse","justify-content-center"],[1,"navbar-nav"],[1,"nav-item","mx-2","my-2"],["routerLinkActive","activated",3,"routerLink"],["id","collapsibleNavbar",1,"collapse","navbar-collapse","justify-content-end"],[1,"btn","btn-info","px-4",3,"click"],[1,"rounded-circle","btn","btn-info",3,"routerLink"],[1,"fab","fa-facebook-messenger"],[1,"btn-group"],["type","button","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"btn","btn-info","dropdown-toggle"],[1,"dropdown-menu","dropdownMenuForUser"],["routerLinkActive","router-link-active",1,"dropdown-item",3,"routerLink"],[1,"dropdown-divider"],[1,"dropdown-item",3,"click"]],template:function(t,e){1&t&&(r.mc(0,sO,25,8,"nav",0),r.mc(1,cO,32,13,"nav",0)),2&t&&(r.bc("ngIf",!e.isLoggedIn),r.yb(1),r.bc("ngIf",e.isLoggedIn))},directives:[P,Zr,ei],styles:[".title[_ngcontent-%COMP%]{font-family:Montserrat,sans-serif;text-transform:uppercase;color:#fff}#menubtn[_ngcontent-%COMP%]{color:#fff;font-size:25px}nav[_ngcontent-%COMP%]{background-color:#032541}a[_ngcontent-%COMP%]{cursor:pointer;text-decoration:none}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-weight:700}.notActivated[_ngcontent-%COMP%], ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff}.activated[_ngcontent-%COMP%]{color:#2382b2!important}.dropdownMenuForUser[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#000!important;font-size:15px}"]}),t})();function hO(t,e){1&t&&(r.Ob(0,"div",15),r.nc(1," username must be at least 5 characters long. "),r.Nb())}function dO(t,e){1&t&&(r.Ob(0,"div"),r.nc(1," Please Enter a valid email "),r.Nb())}function fO(t,e){if(1&t&&(r.Ob(0,"div",15),r.mc(1,dO,2,0,"div",16),r.Nb()),2&t){r.Xb();const t=r.fc(16);r.yb(1),r.bc("ngIf",t.invalid)}}function pO(t,e){1&t&&(r.Ob(0,"div",15),r.nc(1," password must be at least 10 characters long. "),r.Nb())}let gO=(()=>{class t{constructor(t,e,n){this.auth=t,this.router=e,this._document=n,this.password="",this.email="",this.username="",this.user={password:"",email:"",username:""}}ngOnInit(){}addUser(){this.user={email:this.email,password:this.password,username:this.username},this.auth.SignUp(this.user).then(t=>{console.log("signup succseffuly")})}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(tO),r.Jb(Jr),r.Jb(a))},t.\u0275cmp=r.Db({type:t,selectors:[["app-creat-account"]],decls:26,vars:7,consts:[[1,"container","main-div"],["craetAccountForm","ngForm"],[1,"mb-3","from-group"],["id","regUsernameLabel","for","usernameRegTxt",1,"form-label","text-left","justify-content-left","d-flex"],["name","username","type","username","id","usernameRegTxt","required","","minlength","5",1,"form-control",3,"ngModel","ngModelChange"],["newUsername","ngModel"],["class","alert alert-danger",4,"ngIf"],[1,"form-group"],["for","exampleInputEmail1"],["name","email","type","email","id","exampleInputEmail1","email","true","required","",1,"form-control",3,"ngModel","ngModelChange"],["useremail","ngModel"],["id","regPasswordLabel","for","passwordRegTxt",1,"form-label","text-left","justify-content-left","d-flex"],["name","password","type","password","id","passwordRegTxt","placeholder","* * * * * * * *","required","","minlength","10",1,"form-control",3,"ngModel","ngModelChange"],["newPassword","ngModel"],["type","button",1,"btn","btn-primary",3,"disabled","click"],[1,"alert","alert-danger"],[4,"ngIf"]],template:function(t,e){if(1&t&&(r.Kb(0,"app-header"),r.Ob(1,"div",0),r.Ob(2,"form",null,1),r.Ob(4,"h2"),r.nc(5,"Sign up for an account"),r.Nb(),r.Ob(6,"div",2),r.Ob(7,"label",3),r.nc(8,"Enter username"),r.Nb(),r.Ob(9,"input",4,5),r.Vb("ngModelChange",function(t){return e.username=t}),r.Nb(),r.mc(11,hO,2,0,"div",6),r.Nb(),r.Ob(12,"div",7),r.Ob(13,"label",8),r.nc(14,"Enter email"),r.Nb(),r.Ob(15,"input",9,10),r.Vb("ngModelChange",function(t){return e.email=t}),r.Nb(),r.mc(17,fO,2,1,"div",6),r.Nb(),r.Ob(18,"div",2),r.Ob(19,"label",11),r.nc(20,"Enter password"),r.Nb(),r.Ob(21,"input",12,13),r.Vb("ngModelChange",function(t){return e.password=t}),r.Nb(),r.mc(23,pO,2,0,"div",6),r.Nb(),r.Ob(24,"button",14),r.Vb("click",function(){return e.addUser()}),r.nc(25,"Sign Up"),r.Nb(),r.Nb(),r.Nb()),2&t){const t=r.fc(3),n=r.fc(10),i=r.fc(16),o=r.fc(22);r.yb(9),r.bc("ngModel",e.username),r.yb(2),r.bc("ngIf",n.invalid&&(n.dirty||n.touched)),r.yb(4),r.bc("ngModel",e.email),r.yb(2),r.bc("ngIf",i.invalid&&(i.dirty||i.touched)),r.yb(4),r.bc("ngModel",e.password),r.yb(2),r.bc("ngIf",o.invalid&&(o.dirty||o.touched)),r.yb(1),r.bc("disabled",t.invalid)}},directives:[lO,Es,Bo,ws,wo,Is,As,qo,Cs,P,ks],styles:[".main-div[_ngcontent-%COMP%]{margin-top:6rem}"]}),t})();class mO{}class yO{}class vO{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(t=>{const e=t.indexOf(":");if(e>0){const n=t.slice(0,e),r=n.toLowerCase(),i=t.slice(e+1).trim();this.maybeSetNormalizedName(n,r),this.headers.has(r)?this.headers.get(r).push(i):this.headers.set(r,[i])}})}:()=>{this.headers=new Map,Object.keys(t).forEach(e=>{let n=t[e];const r=e.toLowerCase();"string"==typeof n&&(n=[n]),n.length>0&&(this.headers.set(r,n),this.maybeSetNormalizedName(e,r))})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof vO?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new vO;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof vO?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let n=t.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(t.name,e);const r=("a"===t.op?this.headers.get(e):void 0)||[];r.push(...n),this.headers.set(e,r);break;case"d":const i=t.value;if(i){let t=this.headers.get(e);if(!t)return;t=t.filter(t=>-1===i.indexOf(t)),0===t.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,t)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class bO{encodeKey(t){return _O(t)}encodeValue(t){return _O(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}function _O(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}class wO{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new bO,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(t,e){const n=new Map;return t.length>0&&t.split("&").forEach(t=>{const r=t.indexOf("="),[i,o]=-1==r?[e.decodeKey(t),""]:[e.decodeKey(t.slice(0,r)),e.decodeValue(t.slice(r+1))],s=n.get(i)||[];s.push(o),n.set(i,s)}),n}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const n=t.fromObject[e];this.map.set(e,Array.isArray(n)?n:[n])})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(t=>e+"="+this.encoder.encodeValue(t)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new wO({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat([t]),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(t.value),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let e=this.map.get(t.param)||[];const n=e.indexOf(t.value);-1!==n&&e.splice(n,1),e.length>0?this.map.set(t.param,e):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}function OO(t){return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer}function SO(t){return"undefined"!=typeof Blob&&t instanceof Blob}function CO(t){return"undefined"!=typeof FormData&&t instanceof FormData}class EO{constructor(t,e,n,r){let i;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==n?n:null,i=r):i=n,i&&(this.reportProgress=!!i.reportProgress,this.withCredentials=!!i.withCredentials,i.responseType&&(this.responseType=i.responseType),i.headers&&(this.headers=i.headers),i.params&&(this.params=i.params)),this.headers||(this.headers=new vO),this.params){const t=this.params.toString();if(0===t.length)this.urlWithParams=e;else{const n=e.indexOf("?");this.urlWithParams=e+(-1===n?"?":n<e.length-1?"&":"")+t}}else this.params=new wO,this.urlWithParams=e}serializeBody(){return null===this.body?null:OO(this.body)||SO(this.body)||CO(this.body)||"string"==typeof this.body?this.body:this.body instanceof wO?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||CO(this.body)?null:SO(this.body)?this.body.type||null:OO(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof wO?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||Array.isArray(this.body)?"application/json":null}clone(t={}){const e=t.method||this.method,n=t.url||this.url,r=t.responseType||this.responseType,i=void 0!==t.body?t.body:this.body,o=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,s=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let a=t.headers||this.headers,u=t.params||this.params;return void 0!==t.setHeaders&&(a=Object.keys(t.setHeaders).reduce((e,n)=>e.set(n,t.setHeaders[n]),a)),t.setParams&&(u=Object.keys(t.setParams).reduce((e,n)=>e.set(n,t.setParams[n]),u)),new EO(e,n,i,{params:u,headers:a,reportProgress:s,responseType:r,withCredentials:o})}}var TO=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}({});class IO{constructor(t,e=200,n="OK"){this.headers=t.headers||new vO,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||n,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class xO extends IO{constructor(t={}){super(t),this.type=TO.ResponseHeader}clone(t={}){return new xO({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class kO extends IO{constructor(t={}){super(t),this.type=TO.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new kO({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class NO extends IO{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?"Http failure during parsing for "+(t.url||"(unknown url)"):`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function AO(t,e){return{body:e,headers:t.headers,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials}}let jO=(()=>{class t{constructor(t){this.handler=t}request(t,e,n={}){let r;if(t instanceof EO)r=t;else{let i=void 0;i=n.headers instanceof vO?n.headers:new vO(n.headers);let o=void 0;n.params&&(o=n.params instanceof wO?n.params:new wO({fromObject:n.params})),r=new EO(t,e,void 0!==n.body?n.body:null,{headers:i,params:o,reportProgress:n.reportProgress,responseType:n.responseType||"json",withCredentials:n.withCredentials})}const i=Object(Ot.a)(r).pipe(ce(t=>this.handler.handle(t)));if(t instanceof EO||"events"===n.observe)return i;const o=i.pipe(ne(t=>t instanceof kO));switch(n.observe||"body"){case"body":switch(r.responseType){case"arraybuffer":return o.pipe(Object(Ht.a)(t=>{if(null!==t.body&&!(t.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return t.body}));case"blob":return o.pipe(Object(Ht.a)(t=>{if(null!==t.body&&!(t.body instanceof Blob))throw new Error("Response is not a Blob.");return t.body}));case"text":return o.pipe(Object(Ht.a)(t=>{if(null!==t.body&&"string"!=typeof t.body)throw new Error("Response is not a string.");return t.body}));case"json":default:return o.pipe(Object(Ht.a)(t=>t.body))}case"response":return o;default:throw new Error(`Unreachable: unhandled observe type ${n.observe}}`)}}delete(t,e={}){return this.request("DELETE",t,e)}get(t,e={}){return this.request("GET",t,e)}head(t,e={}){return this.request("HEAD",t,e)}jsonp(t,e){return this.request("JSONP",t,{params:(new wO).append(e,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,e={}){return this.request("OPTIONS",t,e)}patch(t,e,n={}){return this.request("PATCH",t,AO(n,e))}post(t,e,n={}){return this.request("POST",t,AO(n,e))}put(t,e,n={}){return this.request("PUT",t,AO(n,e))}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(mO))},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac}),t})();class PO{constructor(t,e){this.next=t,this.interceptor=e}handle(t){return this.interceptor.intercept(t,this.next)}}const RO=new r.q("HTTP_INTERCEPTORS");let DO=(()=>{class t{intercept(t,e){return e.handle(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac}),t})();const LO=/^\)\]\}',?\n/;class MO{}let FO=(()=>{class t{constructor(){}build(){return new XMLHttpRequest}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac}),t})(),VO=(()=>{class t{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new jt.a(e=>{const n=this.xhrFactory.build();if(n.open(t.method,t.urlWithParams),t.withCredentials&&(n.withCredentials=!0),t.headers.forEach((t,e)=>n.setRequestHeader(t,e.join(","))),t.headers.has("Accept")||n.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const e=t.detectContentTypeHeader();null!==e&&n.setRequestHeader("Content-Type",e)}if(t.responseType){const e=t.responseType.toLowerCase();n.responseType="json"!==e?e:"text"}const r=t.serializeBody();let i=null;const o=()=>{if(null!==i)return i;const e=1223===n.status?204:n.status,r=n.statusText||"OK",o=new vO(n.getAllResponseHeaders()),s=function(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}(n)||t.url;return i=new xO({headers:o,status:e,statusText:r,url:s}),i},s=()=>{let{headers:r,status:i,statusText:s,url:a}=o(),u=null;204!==i&&(u=void 0===n.response?n.responseText:n.response),0===i&&(i=u?200:0);let c=i>=200&&i<300;if("json"===t.responseType&&"string"==typeof u){const t=u;u=u.replace(LO,"");try{u=""!==u?JSON.parse(u):null}catch(l){u=t,c&&(c=!1,u={error:l,text:u})}}c?(e.next(new kO({body:u,headers:r,status:i,statusText:s,url:a||void 0})),e.complete()):e.error(new NO({error:u,headers:r,status:i,statusText:s,url:a||void 0}))},a=t=>{const{url:r}=o(),i=new NO({error:t,status:n.status||0,statusText:n.statusText||"Unknown Error",url:r||void 0});e.error(i)};let u=!1;const c=r=>{u||(e.next(o()),u=!0);let i={type:TO.DownloadProgress,loaded:r.loaded};r.lengthComputable&&(i.total=r.total),"text"===t.responseType&&n.responseText&&(i.partialText=n.responseText),e.next(i)},l=t=>{let n={type:TO.UploadProgress,loaded:t.loaded};t.lengthComputable&&(n.total=t.total),e.next(n)};return n.addEventListener("load",s),n.addEventListener("error",a),t.reportProgress&&(n.addEventListener("progress",c),null!==r&&n.upload&&n.upload.addEventListener("progress",l)),n.send(r),e.next({type:TO.Sent}),()=>{n.removeEventListener("error",a),n.removeEventListener("load",s),t.reportProgress&&(n.removeEventListener("progress",c),null!==r&&n.upload&&n.upload.removeEventListener("progress",l)),n.readyState!==n.DONE&&n.abort()}})}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(MO))},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac}),t})();const UO=new r.q("XSRF_COOKIE_NAME"),qO=new r.q("XSRF_HEADER_NAME");class BO{}let HO=(()=>{class t{constructor(t,e,n){this.doc=t,this.platform=e,this.cookieName=n,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=k(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(a),r.Sb(r.B),r.Sb(UO))},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac}),t})(),zO=(()=>{class t{constructor(t,e){this.tokenService=t,this.headerName=e}intercept(t,e){const n=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||n.startsWith("http://")||n.startsWith("https://"))return e.handle(t);const r=this.tokenService.getToken();return null===r||t.headers.has(this.headerName)||(t=t.clone({headers:t.headers.set(this.headerName,r)})),e.handle(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(BO),r.Sb(qO))},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac}),t})(),KO=(()=>{class t{constructor(t,e){this.backend=t,this.injector=e,this.chain=null}handle(t){if(null===this.chain){const t=this.injector.get(RO,[]);this.chain=t.reduceRight((t,e)=>new PO(t,e),this.backend)}return this.chain.handle(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(yO),r.Sb(r.r))},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac}),t})(),WO=(()=>{class t{static disable(){return{ngModule:t,providers:[{provide:zO,useClass:DO}]}}static withOptions(e={}){return{ngModule:t,providers:[e.cookieName?{provide:UO,useValue:e.cookieName}:[],e.headerName?{provide:qO,useValue:e.headerName}:[]]}}}return t.\u0275mod=r.Hb({type:t}),t.\u0275inj=r.Gb({factory:function(e){return new(e||t)},providers:[zO,{provide:RO,useExisting:zO,multi:!0},{provide:BO,useClass:HO},{provide:UO,useValue:"XSRF-TOKEN"},{provide:qO,useValue:"X-XSRF-TOKEN"}]}),t})(),QO=(()=>{class t{}return t.\u0275mod=r.Hb({type:t}),t.\u0275inj=r.Gb({factory:function(e){return new(e||t)},providers:[jO,{provide:mO,useClass:KO},VO,{provide:yO,useExisting:VO},FO,{provide:MO,useExisting:FO}],imports:[[WO.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),t})(),GO=(()=>{class t{constructor(t){this.http=t,this.baseUrl="https://api.themoviedb.org/3",this.key="?api_key=1a5602c2cce1df66d9735323fe31b85d"}getUpcoming(t){return this.http.get(`${this.baseUrl}/movie/upcoming${this.key}&language=en-US&page=${t}`)}getNowPlaying(t){return this.http.get(`${this.baseUrl}/movie/now_playing${this.key}&language=en-US&page=${t}`)}getTopRated(t){return this.http.get(`${this.baseUrl}/movie/top_rated${this.key}&language=en-US&page=${t}`)}getMovie(t){return this.http.get(`${this.baseUrl}/movie/${t}${this.key}&language=en-US`)}getRecommendations(t){return this.http.get(`${this.baseUrl}/movie/${t}/recommendations${this.key}&language=en-USUS&page=1`)}getReviews(t){return this.http.get(`${this.baseUrl}/movie/${t}/reviews${this.key}&language=en-USUS&page=1`)}getSimilarMovies(t){return this.http.get(`${this.baseUrl}/movie/${t}/similar${this.key}&language=en-USUS&page=1`)}getPopular(){return this.http.get(`${this.baseUrl}/movie/popular${this.key}&language=en-USUS&page=1`)}getTrending(){return this.http.get(`${this.baseUrl}/trending/all/day${this.key}`)}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(jO))},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function $O(t,e){if(1&t){const t=r.Pb();r.Ob(0,"div",9),r.Ob(1,"a",10),r.Vb("click",function(){r.gc(t);const e=r.Xb().$implicit;return r.Xb().showMovieDetails(e)}),r.Kb(2,"img",11),r.Nb(),r.Ob(3,"p"),r.nc(4),r.Nb(),r.Nb()}if(2&t){const t=r.Xb().$implicit;r.yb(2),r.cc("src","https://image.tmdb.org/t/p/original/",t.poster_path,"",r.ic),r.yb(2),r.oc(null==t?null:t.title)}}function YO(t,e){if(1&t&&(r.Ob(0,"div"),r.mc(1,$O,5,2,"div",8),r.Nb()),2&t){const t=e.$implicit;r.yb(1),r.bc("ngIf",null!=t.poster_path&&null!=t.title)}}function JO(t,e){if(1&t){const t=r.Pb();r.Ob(0,"div",9),r.Ob(1,"a",10),r.Vb("click",function(){r.gc(t);const e=r.Xb().$implicit;return r.Xb().showMovieDetails(e)}),r.Kb(2,"img",11),r.Nb(),r.Ob(3,"p"),r.nc(4),r.Nb(),r.Nb()}if(2&t){const t=r.Xb().$implicit;r.yb(2),r.cc("src","https://image.tmdb.org/t/p/original/",t.poster_path,"",r.ic),r.yb(2),r.oc(null==t?null:t.title)}}function XO(t,e){if(1&t&&(r.Ob(0,"div"),r.mc(1,JO,5,2,"div",8),r.Nb()),2&t){const t=e.$implicit;r.yb(1),r.bc("ngIf",null!=t.poster_path&&null!=t.title)}}let ZO=(()=>{class t{constructor(t,e){this.router=t,this.apiser=e,this.listOfPopularMovies=[],this.listOfTrendingMovies=[]}ngOnInit(){this.apiser.getPopular().subscribe(t=>{this.listOfPopularMovies=t.results}),this.apiser.getTrending().subscribe(t=>{this.listOfTrendingMovies=t.results})}showMovieDetails(t){this.router.navigate(["movie",t.id])}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(Jr),r.Jb(GO))},t.\u0275cmp=r.Db({type:t,selectors:[["app-home"]],decls:20,vars:2,consts:[[1,"main-div"],[1,"jumbotron","jumbotron-fluid"],[1,"jumbotronContent","p-5"],[1,"container-fluid","my-5"],[1,"title"],[1,"d-flex","flex-row","flex-nowrap","overflow-auto"],[4,"ngFor","ngForOf"],[1,"badge","badge-pill","badge-info","px-3","py-2"],["class","card card-block m-2 movieCard",4,"ngIf"],[1,"card","card-block","m-2","movieCard"],[3,"click"],[1,"img-fluid","rounded-top",3,"src"]],template:function(t,e){1&t&&(r.Ob(0,"div",0),r.Ob(1,"div",1),r.Ob(2,"div",2),r.Ob(3,"h2"),r.nc(4,"Welcome."),r.Nb(),r.Ob(5,"h5"),r.nc(6,"Millions of movies, TV shows and people to discover. Explore now."),r.Nb(),r.Nb(),r.Nb(),r.Ob(7,"div",3),r.Ob(8,"span",4),r.nc(9,"What's Popular"),r.Nb(),r.Ob(10,"div",5),r.mc(11,YO,2,1,"div",6),r.Nb(),r.Nb(),r.Ob(12,"div",3),r.Ob(13,"div"),r.Ob(14,"span",4),r.nc(15,"Trending "),r.Nb(),r.Ob(16,"span",7),r.nc(17,"Today"),r.Nb(),r.Nb(),r.Ob(18,"div",5),r.mc(19,XO,2,1,"div",6),r.Nb(),r.Nb(),r.Nb()),2&t&&(r.yb(11),r.bc("ngForOf",e.listOfPopularMovies),r.yb(8),r.bc("ngForOf",e.listOfTrendingMovies))},directives:[A,P],styles:['.main-div[_ngcontent-%COMP%]{padding-top:4rem}.jumbotron[_ngcontent-%COMP%]{background-image:url("https://www.themoviedb.org/t/p/w1920_and_h600_multi_faces_filter(duotone,032541,01b4e4)/zqkmTXzjkAgXmEWLRsY4UpTWCeo.jpg");background-size:cover;font-family:Source Sans Pro,sans-serif}.jumbotronContent[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;font-size:3em;font-weight:700;line-height:1}.jumbotronContent[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{color:#fff;font-size:2em;font-weight:600;margin:0}[_ngcontent-%COMP%]::-webkit-scrollbar{width:5px;height:10px;border-radius:10px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1;border-radius:10px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb, [_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#032541;border-radius:10px}.movieCard[_ngcontent-%COMP%]{min-width:200px;font-size:13px;color:#032541;text-align:center}.movieCard[_ngcontent-%COMP%], .movieCard[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{cursor:pointer}.title[_ngcontent-%COMP%]{font-size:2rem}']}),t})(),tS=(()=>{class t{constructor(t,e,n){this.auth=t,this.router=e,this._document=n,this.email="",this.password=""}ngOnInit(){}login(){this.auth.SignIn(this.email,this.password).then(t=>{})}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(tO),r.Jb(Jr),r.Jb(a))},t.\u0275cmp=r.Db({type:t,selectors:[["app-login"]],decls:17,vars:3,consts:[[1,"container","main-div"],["loginForm","ngForm"],[1,"form-group"],["for","exampleInputEmail1"],["name","email","type","email","id","exampleInputEmail1","email","true","required","",1,"form-control",3,"ngModel","ngModelChange"],["useremail","ngModel"],[1,"mb-3","from-group"],["id","regPasswordLabel","for","passwordRegTxt",1,"form-label","text-left","justify-content-left","d-flex"],["name","password","type","password","id","passwordRegTxt","placeholder","* * * * * * * *","required","",1,"form-control",3,"ngModel","ngModelChange"],["newPassword","ngModel"],["type","button",1,"btn","btn-primary",3,"disabled","click"]],template:function(t,e){if(1&t&&(r.Ob(0,"div",0),r.Ob(1,"form",null,1),r.Ob(3,"h2"),r.nc(4,"Login to your account"),r.Nb(),r.Ob(5,"div",2),r.Ob(6,"label",3),r.nc(7,"Enter email"),r.Nb(),r.Ob(8,"input",4,5),r.Vb("ngModelChange",function(t){return e.email=t}),r.Nb(),r.Nb(),r.Ob(10,"div",6),r.Ob(11,"label",7),r.nc(12,"Enter password"),r.Nb(),r.Ob(13,"input",8,9),r.Vb("ngModelChange",function(t){return e.password=t}),r.Nb(),r.Nb(),r.Ob(15,"button",10),r.Vb("click",function(){return e.login()}),r.nc(16,"login"),r.Nb(),r.Nb(),r.Nb()),2&t){const t=r.fc(2);r.yb(8),r.bc("ngModel",e.email),r.yb(5),r.bc("ngModel",e.password),r.yb(2),r.bc("disabled",t.invalid)}},directives:[Es,Bo,ws,wo,ks,Is,qo,Cs],styles:[".main-div[_ngcontent-%COMP%]{margin-top:6rem}"]}),t})();function eS(t,e){if(1&t&&(r.Ob(0,"span",24),r.nc(1),r.Nb()),2&t){const t=e.$implicit;r.yb(1),r.oc(t.name)}}function nS(t,e){1&t&&r.Kb(0,"i",25)}function rS(t,e){1&t&&r.Kb(0,"i",26)}function iS(t,e){1&t&&r.Kb(0,"i",27)}function oS(t,e){1&t&&r.Kb(0,"i",28)}function sS(t,e){if(1&t){const t=r.Pb();r.Ob(0,"div",33),r.Ob(1,"a",34),r.Vb("click",function(){r.gc(t);const n=e.$implicit;return r.Xb(2).showMovieDetails(n)}),r.Kb(2,"img",35),r.Nb(),r.Ob(3,"h6",36),r.nc(4),r.Nb(),r.Nb()}if(2&t){const t=e.$implicit;r.yb(2),r.cc("src","https://image.tmdb.org/t/p/original/",t.poster_path,"",r.ic),r.yb(2),r.oc(t.title)}}function aS(t,e){if(1&t&&(r.Ob(0,"div",29),r.Ob(1,"h2",7),r.nc(2,"Recommended for you"),r.Nb(),r.Ob(3,"div",30),r.mc(4,sS,5,2,"div",31),r.Nb(),r.Kb(5,"hr",32),r.Nb()),2&t){const t=r.Xb();r.yb(4),r.bc("ngForOf",t.recommendationsList)}}function uS(t,e){if(1&t){const t=r.Pb();r.Ob(0,"div",33),r.Ob(1,"a",34),r.Vb("click",function(){r.gc(t);const n=e.$implicit;return r.Xb(2).showMovieDetails(n)}),r.Kb(2,"img",35),r.Nb(),r.Ob(3,"h6",36),r.nc(4),r.Nb(),r.Nb()}if(2&t){const t=e.$implicit;r.yb(2),r.cc("src","https://image.tmdb.org/t/p/original/",t.poster_path,"",r.ic),r.yb(2),r.oc(t.title)}}function cS(t,e){if(1&t&&(r.Ob(0,"div",37),r.Ob(1,"h2",7),r.nc(2,"You might like "),r.Nb(),r.Ob(3,"div",30),r.mc(4,uS,5,2,"div",31),r.Nb(),r.Kb(5,"hr",32),r.Nb()),2&t){const t=r.Xb();r.yb(4),r.bc("ngForOf",t.similarMoviesList)}}function lS(t,e){if(1&t){const t=r.Pb();r.Ob(0,"p",43),r.nc(1),r.Yb(2,"slice"),r.Ob(3,"a",44),r.Vb("click",function(){return r.gc(t),r.Xb(3).showtext()}),r.nc(4),r.Nb(),r.Nb()}if(2&t){const t=r.Xb().$implicit;r.yb(1),r.pc("",r.ac(2,2,t.content,1,200)," "),r.yb(3),r.oc(t.content.length>200?".... Read more":"")}}function hS(t,e){if(1&t){const t=r.Pb();r.Ob(0,"p",43),r.nc(1),r.Ob(2,"a",44),r.Vb("click",function(){return r.gc(t),r.Xb(3).hidetext()}),r.nc(3,"Show less"),r.Nb(),r.Nb()}if(2&t){const t=r.Xb().$implicit;r.yb(1),r.pc("",t.content," ")}}function dS(t,e){if(1&t&&(r.Ob(0,"div",40),r.Ob(1,"h6",41),r.nc(2),r.Nb(),r.Ob(3,"small"),r.nc(4),r.Nb(),r.mc(5,lS,5,6,"p",42),r.mc(6,hS,4,1,"p",42),r.Nb()),2&t){const t=e.$implicit,n=r.Xb(2);r.yb(2),r.pc("A review by ",t.author," "),r.yb(2),r.qc("Written by ",t.author," - on ",t.created_at,""),r.yb(1),r.bc("ngIf",n.showSmallText),r.yb(1),r.bc("ngIf",n.showAllText)}}function fS(t,e){if(1&t&&(r.Ob(0,"div",38),r.Ob(1,"h2",7),r.nc(2,"Reviews"),r.Nb(),r.Ob(3,"div",2),r.mc(4,dS,7,5,"div",39),r.Nb(),r.Nb()),2&t){const t=r.Xb();r.yb(4),r.bc("ngForOf",t.reviewsList)}}let pS=(()=>{class t{constructor(t,e,n,r,i,o){this.auth=t,this.apiSer=e,this.activatedroute=n,this.router=r,this.userser=i,this.toastr=o,this.isLoggedIn=!1,this.recommendationsList=[],this.similarMoviesList=[],this.isFav=!1,this.isLiked=!1,this.showAllText=!1,this.showSmallText=!0}ngOnInit(){this.isLoggedIn=this.auth.isLoggedIn,this.userId=this.auth.userLoggedID,!0===this.auth.isLoggedIn&&this.userser.getUserById(this.userId).subscribe(t=>{for(var e in this.user=Object.assign({id:t.payload.id},t.payload.data()),this.favoritesListIds=this.user.favorites,this.likesListIds=this.user.likes,this.favoritesListIds)this.favoritesListIds[e]==this.movieId&&(this.isFav=!0);for(var e in this.likesListIds)this.likesListIds[e]==this.movieId&&(this.isLiked=!0)}),this.activatedroute.paramMap.subscribe(t=>{let e=t.get("id");this.movieId=e,this.apiSer.getMovie(this.movieId).subscribe(t=>{this.movie=t,this.movieYear=t.release_date.slice(0,4),this.hours=Math.floor(t.runtime/60),this.minutes=t.runtime%60}),this.apiSer.getRecommendations(this.movieId).subscribe(t=>{this.recommendationsList=t.results}),this.apiSer.getSimilarMovies(this.movieId).subscribe(t=>{this.similarMoviesList=t.results}),this.apiSer.getReviews(this.movieId).subscribe(t=>{this.reviewsList=t.results})})}addtofav(){if(!0===this.auth.isLoggedIn){if(!1===this.isFav){let t=[...this.favoritesListIds];t.push(Number(this.movieId)),this.userser.updatefavoritesList(t,this.userId),this.toastr.success("Mark as favorite","Done",{closeButton:!0,timeOut:5e3,progressBar:!0}),this.isFav=!0}else if(!0===this.isFav){let t=[...this.favoritesListIds];t=t.filter(t=>t!=this.movieId),this.userser.updatefavoritesList(t,this.userId).then(t=>{this.reloadComponent()}),this.toastr.success("Remove from favorite","Done",{closeButton:!0,timeOut:5e3,progressBar:!0})}}else this.toastr.error("You need to login first.","Error",{closeButton:!0,timeOut:5e3,progressBar:!0})}addtolikes(){if(!0===this.auth.isLoggedIn){if(!1===this.isLiked){let t=[...this.likesListIds];t.push(Number(this.movieId)),this.userser.updatefLikesList(t,this.userId),this.toastr.success("you might like the Recommedtions","take a look",{closeButton:!0,timeOut:5e3,progressBar:!0})}}else this.toastr.error("You need to login first.","",{closeButton:!0,timeOut:5e3,progressBar:!0})}showMovieDetails(t){this.router.navigate(["movie",t.id])}showtext(){this.showAllText=!0,this.showSmallText=!1}hidetext(){this.showAllText=!1,this.showSmallText=!0}reloadComponent(){let t=this.router.url;this.router.routeReuseStrategy.shouldReuseRoute=()=>!1,this.router.onSameUrlNavigation="reload",this.router.navigate([t])}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(tO),r.Jb(GO),r.Jb(jn),r.Jb(Jr),r.Jb(eO),r.Jb($w))},t.\u0275cmp=r.Db({type:t,selectors:[["app-movieDeatails"]],decls:35,vars:15,consts:[[1,"main-div"],[1,"jumbotron","jumbotron-fluid"],[1,"container"],[1,"row"],[1,"col-lg-3","col-md-3","col-sm-4"],[1,"img-fluid","rounded",3,"src"],[1,"col-lg-9","col-md-9","col-sm-8","d-flex","flex-column","justify-content-center"],[1,"title"],[1,"infoBox"],[1,"mx-2"],[1,"fas","fa-circle"],["class","mr-1",4,"ngFor","ngForOf"],[1,"actionButtonsBox"],["type","button","data-toggle","tooltip","data-placement","bottom","title","Mark as favorite",1,"rounded-circle","btn","btn-primary",3,"click"],["class","fas fa-heart",4,"ngIf"],["class","fas fa-heart buleIcon",4,"ngIf"],["type","button","data-toggle","tooltip","data-placement","bottom","title","write comment",1,"rounded-circle","btn","btn-primary"],[1,"fas","fa-comment"],["type","button","data-toggle","tooltip","data-placement","bottom","title","Like this Movie",1,"rounded-circle","btn","btn-primary",3,"click"],["class","fas fa-thumbs-up",4,"ngIf"],["class","fas fa-thumbs-up buleIcon",4,"ngIf"],["class","container my-4 RecommendtionsSection",4,"ngIf"],["class","container my-4 SimilarMoviesSection",4,"ngIf"],["class","container my-4",4,"ngIf"],[1,"mr-1"],[1,"fas","fa-heart"],[1,"fas","fa-heart","buleIcon"],[1,"fas","fa-thumbs-up"],[1,"fas","fa-thumbs-up","buleIcon"],[1,"container","my-4","RecommendtionsSection"],[1,"d-flex","flex-row","flex-nowrap","overflow-auto","my-3"],["class","card card-block m-2 movieCard",4,"ngFor","ngForOf"],[1,"mt-5"],[1,"card","card-block","m-2","movieCard"],[3,"click"],[1,"img-fluid","rounded-top",3,"src"],[1,"title","mt-2"],[1,"container","my-4","SimilarMoviesSection"],[1,"container","my-4"],["class","reviewCard shadow-sm p-3 mb-5 bg-white rounded",4,"ngFor","ngForOf"],[1,"reviewCard","shadow-sm","p-3","mb-5","bg-white","rounded"],[1,"mb-0"],["class","my-2",4,"ngIf"],[1,"my-2"],[1,"readmoreText",3,"click"]],template:function(t,e){1&t&&(r.Ob(0,"div",0),r.Ob(1,"div",1),r.Ob(2,"div",2),r.Ob(3,"div",3),r.Ob(4,"div",4),r.Kb(5,"img",5),r.Nb(),r.Ob(6,"div",6),r.Ob(7,"h2",7),r.nc(8),r.Nb(),r.Ob(9,"div",8),r.Ob(10,"span"),r.nc(11),r.Nb(),r.Ob(12,"span",9),r.Kb(13,"i",10),r.Nb(),r.mc(14,eS,2,1,"span",11),r.Ob(15,"span",9),r.Kb(16,"i",10),r.Nb(),r.Ob(17,"span"),r.nc(18),r.Nb(),r.Nb(),r.Ob(19,"div",12),r.Ob(20,"button",13),r.Vb("click",function(){return e.addtofav()}),r.mc(21,nS,1,0,"i",14),r.mc(22,rS,1,0,"i",15),r.Nb(),r.Ob(23,"button",16),r.Kb(24,"i",17),r.Nb(),r.Ob(25,"button",18),r.Vb("click",function(){return e.addtolikes()}),r.mc(26,iS,1,0,"i",19),r.mc(27,oS,1,0,"i",20),r.Nb(),r.Nb(),r.Ob(28,"h5",7),r.nc(29,"overview"),r.Nb(),r.Ob(30,"p"),r.nc(31),r.Nb(),r.Nb(),r.Nb(),r.Nb(),r.Nb(),r.mc(32,aS,6,1,"div",21),r.mc(33,cS,6,1,"div",22),r.mc(34,fS,5,1,"div",23),r.Nb()),2&t&&(r.yb(5),r.cc("src","https://image.tmdb.org/t/p/original/",null==e.movie?null:e.movie.poster_path,"",r.ic),r.yb(3),r.qc("",null==e.movie?null:e.movie.title,"(",e.movieYear,")"),r.yb(3),r.oc(null==e.movie?null:e.movie.release_date),r.yb(3),r.bc("ngForOf",null==e.movie?null:e.movie.genres),r.yb(4),r.qc("",e.hours,"h ",e.minutes,"m"),r.yb(3),r.bc("ngIf",0==e.isFav),r.yb(1),r.bc("ngIf",1==e.isFav),r.yb(4),r.bc("ngIf",0==e.isLiked),r.yb(1),r.bc("ngIf",1==e.isLiked),r.yb(4),r.oc(null==e.movie?null:e.movie.overview),r.yb(1),r.bc("ngIf",(null==e.recommendationsList?null:e.recommendationsList.length)>0),r.yb(1),r.bc("ngIf",(null==e.similarMoviesList?null:e.similarMoviesList.length)>0),r.yb(1),r.bc("ngIf",(null==e.reviewsList?null:e.reviewsList.length)>0))},directives:[A,P],pipes:[F],styles:[".main-div[_ngcontent-%COMP%]{padding-top:3rem}nav[_ngcontent-%COMP%]{background-color:#1a2127}nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-transform:uppercase;color:#fff}.jumbotron[_ngcontent-%COMP%]{background-color:#f6faf6}.title[_ngcontent-%COMP%]{font-weight:700;font-family:Raleway,sans-serif}.infoBox[_ngcontent-%COMP%]{font-size:12px;font-weight:700}.infoBox[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:5px}.actionButtonsBox[_ngcontent-%COMP%]{margin-top:.5rem;margin-bottom:.5rem}.actionButtonsBox[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{font-size:18px;color:#02023a}.actionButtonsBox[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-right:.5rem}.buleIcon[_ngcontent-%COMP%]{color:#02023a}.whiteIcon[_ngcontent-%COMP%]{color:#fff}.movieCard[_ngcontent-%COMP%], .RecommendtionsSection[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .SimilarMoviesSection[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{cursor:pointer}.movieCard[_ngcontent-%COMP%]{min-width:160px;font-size:12px;color:#032541;text-align:center}.movieCard[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{cursor:pointer}[_ngcontent-%COMP%]::-webkit-scrollbar{width:20px;border-radius:10px;height:5px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1;border-radius:10px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb, [_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#032541;border-radius:10px}.readmoreText[_ngcontent-%COMP%]{font-weight:700;color:#032541;text-decoration:none;cursor:pointer}"]}),t})(),gS=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Db({type:t,selectors:[["app-notFound"]],decls:2,vars:0,template:function(t,e){1&t&&(r.Ob(0,"p"),r.nc(1," notFound works!\n"),r.Nb())},styles:[""]}),t})();function mS(t,e){if(1&t){const t=r.Pb();r.Ob(0,"div",5),r.Ob(1,"div"),r.Ob(2,"a",6),r.Vb("click",function(){r.gc(t);const n=e.$implicit;return r.Xb().showMovieDetails(n)}),r.Kb(3,"img",7),r.Nb(),r.Ob(4,"p"),r.nc(5),r.Nb(),r.Nb(),r.Nb()}if(2&t){const t=e.$implicit;r.yb(3),r.cc("src","https://image.tmdb.org/t/p/original/",t.poster_path,"",r.ic),r.yb(2),r.oc(t.title)}}let yS=(()=>{class t{constructor(t,e){this.apiService=t,this.route=e,this.page=1,this.listOfMovies=[]}ngOnInit(){this.apiService.getNowPlaying(this.page).subscribe(t=>{this.listOfMovies=t.results})}getMoreNowPlaying(){this.page=this.page+1,this.apiService.getNowPlaying(this.page).subscribe(t=>{this.page<=t.total_pages&&(this.listOfMovies=this.listOfMovies.concat(t.results)),console.log(this.listOfMovies)})}showMovieDetails(t){console.log(t.id),this.route.navigate(["movie",t.id])}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(GO),r.Jb(Jr))},t.\u0275cmp=r.Db({type:t,selectors:[["app-nowPlayingMovies"]],decls:6,vars:1,consts:[[1,"container","main-div"],[1,"row","g-0"],["class","col-lg-3 col-md-3 col-sm-6 col-xs-12 MovieCard my-3",4,"ngFor","ngForOf"],[1,"row","d-flex","justify-content-center"],[1,"btn","btn-primary","px-4",3,"click"],[1,"col-lg-3","col-md-3","col-sm-6","col-xs-12","MovieCard","my-3"],[3,"click"],[1,"img-fluid","rounded","shadow-sm",3,"src"]],template:function(t,e){1&t&&(r.Ob(0,"div",0),r.Ob(1,"div",1),r.mc(2,mS,6,2,"div",2),r.Nb(),r.Ob(3,"div",3),r.Ob(4,"button",4),r.Vb("click",function(){return e.getMoreNowPlaying()}),r.nc(5,"Load More"),r.Nb(),r.Nb(),r.Nb()),2&t&&(r.yb(2),r.bc("ngForOf",e.listOfMovies))},directives:[A],styles:[".main-div[_ngcontent-%COMP%]{margin-top:6rem}.MovieCard[_ngcontent-%COMP%]{color:#1a2127;font-weight:700;text-align:center}.MovieCard[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{cursor:pointer}"]}),t})();function vS(t,e){if(1&t){const t=r.Pb();r.Ob(0,"div",5),r.Ob(1,"div"),r.Ob(2,"a",6),r.Vb("click",function(){r.gc(t);const n=e.$implicit;return r.Xb().showMovieDetails(n)}),r.Kb(3,"img",7),r.Nb(),r.Ob(4,"p"),r.nc(5),r.Nb(),r.Nb(),r.Nb()}if(2&t){const t=e.$implicit;r.yb(3),r.cc("src","https://image.tmdb.org/t/p/original/",t.poster_path,"",r.ic),r.yb(2),r.oc(t.title)}}let bS=(()=>{class t{constructor(t,e){this.apiService=t,this.route=e,this.page=1,this.listOfMovies=[]}ngOnInit(){this.apiService.getTopRated(this.page).subscribe(t=>{this.listOfMovies=t.results})}getMoreTopRated(){this.page=this.page+1,this.apiService.getTopRated(this.page).subscribe(t=>{this.page<=t.total_pages&&(this.listOfMovies=this.listOfMovies.concat(t.results))})}showMovieDetails(t){this.route.navigate(["movie",t.id])}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(GO),r.Jb(Jr))},t.\u0275cmp=r.Db({type:t,selectors:[["app-topRatedMovies"]],decls:6,vars:1,consts:[[1,"container","main-div"],[1,"row","g-0"],["class","col-lg-3 col-md-3 col-sm-6 col-xs-12 MovieCard my-3",4,"ngFor","ngForOf"],[1,"row","d-flex","justify-content-center"],[1,"btn","btn-primary","px-4",3,"click"],[1,"col-lg-3","col-md-3","col-sm-6","col-xs-12","MovieCard","my-3"],[3,"click"],[1,"img-fluid","rounded","shadow-sm",3,"src"]],template:function(t,e){1&t&&(r.Ob(0,"div",0),r.Ob(1,"div",1),r.mc(2,vS,6,2,"div",2),r.Nb(),r.Ob(3,"div",3),r.Ob(4,"button",4),r.Vb("click",function(){return e.getMoreTopRated()}),r.nc(5,"Load More"),r.Nb(),r.Nb(),r.Nb()),2&t&&(r.yb(2),r.bc("ngForOf",e.listOfMovies))},directives:[A],styles:[".main-div[_ngcontent-%COMP%]{margin-top:6rem}.MovieCard[_ngcontent-%COMP%]{color:#1a2127;font-weight:700;text-align:center}.MovieCard[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{cursor:pointer}"]}),t})();function _S(t,e){if(1&t){const t=r.Pb();r.Ob(0,"div",5),r.Ob(1,"div"),r.Ob(2,"a",6),r.Vb("click",function(){r.gc(t);const n=e.$implicit;return r.Xb().showMovieDetails(n)}),r.Kb(3,"img",7),r.Nb(),r.Ob(4,"p"),r.nc(5),r.Nb(),r.Nb(),r.Nb()}if(2&t){const t=e.$implicit;r.yb(3),r.cc("src","https://image.tmdb.org/t/p/original/",t.poster_path,"",r.ic),r.yb(2),r.oc(t.title)}}let wS=(()=>{class t{constructor(t,e){this.apiService=t,this.route=e,this.page=1,this.listOfMovies=[]}ngOnInit(){this.apiService.getUpcoming(this.page).subscribe(t=>{this.listOfMovies=t.results})}getMoreUpcoming(){this.page=this.page+1,this.apiService.getUpcoming(this.page).subscribe(t=>{this.page<=t.total_pages&&(this.listOfMovies=this.listOfMovies.concat(t.results)),console.log(this.listOfMovies)})}showMovieDetails(t){this.route.navigate(["movie",t.id])}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(GO),r.Jb(Jr))},t.\u0275cmp=r.Db({type:t,selectors:[["app-upcomingMovies"]],decls:6,vars:1,consts:[[1,"container","main-div"],[1,"row","g-0"],["class","col-lg-3 col-md-3 col-sm-6 col-xs-12 MovieCard my-3",4,"ngFor","ngForOf"],[1,"row","d-flex","justify-content-center"],[1,"btn","btn-primary","px-4",3,"click"],[1,"col-lg-3","col-md-3","col-sm-6","col-xs-12","MovieCard","my-3"],[3,"click"],[1,"img-fluid","rounded","shadow-sm",3,"src"]],template:function(t,e){1&t&&(r.Ob(0,"div",0),r.Ob(1,"div",1),r.mc(2,_S,6,2,"div",2),r.Nb(),r.Ob(3,"div",3),r.Ob(4,"button",4),r.Vb("click",function(){return e.getMoreUpcoming()}),r.nc(5,"Load More"),r.Nb(),r.Nb(),r.Nb()),2&t&&(r.yb(2),r.bc("ngForOf",e.listOfMovies))},directives:[A],styles:[".main-div[_ngcontent-%COMP%]{margin-top:6rem}.MovieCard[_ngcontent-%COMP%]{color:#1a2127;font-weight:700;text-align:center}.MovieCard[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{cursor:pointer}"]}),t})();function OS(t,e){1&t&&(r.Ob(0,"p"),r.nc(1,"You haven't added any favorite movies."),r.Nb())}function SS(t,e){if(1&t){const t=r.Pb();r.Ob(0,"div",3),r.Ob(1,"div",4),r.Ob(2,"a",5),r.Vb("click",function(){r.gc(t);const n=e.$implicit;return r.Xb(2).showMovieDetails(n)}),r.Kb(3,"img",6),r.Nb(),r.Nb(),r.Ob(4,"div",7),r.Ob(5,"h6",8),r.nc(6),r.Nb(),r.Ob(7,"p"),r.nc(8),r.Nb(),r.Ob(9,"div"),r.Ob(10,"button",9),r.Vb("click",function(){r.gc(t);const n=e.$implicit;return r.Xb(2).removefromfavorites(n.id)}),r.Kb(11,"i",10),r.Nb(),r.Ob(12,"span",11),r.nc(13,"Remove"),r.Nb(),r.Nb(),r.Nb(),r.Nb()}if(2&t){const t=e.$implicit;r.yb(3),r.cc("src","https://image.tmdb.org/t/p/original/",t.poster_path,"",r.ic),r.yb(3),r.oc(null==t?null:t.title),r.yb(2),r.oc(null==t?null:t.overview)}}function CS(t,e){if(1&t&&(r.Ob(0,"div"),r.mc(1,SS,14,3,"div",2),r.Nb()),2&t){const t=r.Xb();r.yb(1),r.bc("ngForOf",t.favoritesListMovies)}}let ES=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.auth=e,this.userser=n,this.apiser=r,this.toastr=i,this.isLoggedIn=!1,this.favoritesListMovies=[]}ngOnInit(){this.isLoggedIn=this.auth.isLoggedIn,this.userId=this.auth.userLoggedID,this.userser.getUserById(this.userId).subscribe(t=>{this.user=Object.assign({id:t.payload.id},t.payload.data()),this.favoritesListIds=this.user.favorites,this.getfavoritesList()})}getfavoritesList(){for(let t=0;t<this.favoritesListIds.length;t++)this.apiser.getMovie(this.favoritesListIds[t]).subscribe(e=>{this.favoritesListMovies.some(e=>e.id===this.favoritesListIds[t])||this.favoritesListMovies.push(e)})}showMovieDetails(t){this.router.navigate(["movie",t.id])}removefromfavorites(t){let e=[...this.favoritesListIds];const n=e.indexOf(t);n>-1&&e.splice(n,1),this.userser.updatefavoritesList(e,this.userId).then(t=>{console.log(t),this.ngOnInit()}),this.toastr.success("Remove from favorite","Done",{closeButton:!0,timeOut:5e3,progressBar:!0})}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(Jr),r.Jb(tO),r.Jb(eO),r.Jb(GO),r.Jb($w))},t.\u0275cmp=r.Db({type:t,selectors:[["app-userFavorites"]],decls:5,vars:2,consts:[[1,"container-fluid","p-3"],[4,"ngIf"],["class","row shadow p-3 mb-5 bg-white rounded movieCard",4,"ngFor","ngForOf"],[1,"row","shadow","p-3","mb-5","bg-white","rounded","movieCard"],[1,"col-lg-2","col-md-2","col-sm-12"],[3,"click"],[1,"w-100","rounded",3,"src"],[1,"col-lg-10","col-md-10","col-sm-12"],[1,"title"],["type","button","data-toggle","tooltip","data-placement","bottom","title","Mark as favorite",1,"rounded-circle","btn","btn-primary",3,"click"],[1,"fas","fa-times"],[1,"mx-2"]],template:function(t,e){1&t&&(r.Ob(0,"div",0),r.Ob(1,"h4"),r.nc(2,"My Favorites"),r.Nb(),r.mc(3,OS,2,0,"p",1),r.mc(4,CS,2,1,"div",1),r.Nb()),2&t&&(r.yb(3),r.bc("ngIf",0==(null==e.favoritesListIds?null:e.favoritesListIds.length)),r.yb(1),r.bc("ngIf",(null==e.favoritesListIds?null:e.favoritesListIds.length)>0))},directives:[P,A],styles:["img[_ngcontent-%COMP%]{cursor:pointer}.title[_ngcontent-%COMP%]{font-weight:700;font-family:Raleway,sans-serif}"]}),t})();function TS(t,e){1&t&&(r.Ob(0,"p"),r.nc(1,"You haven't Like any movies."),r.Nb())}function IS(t,e){if(1&t){const t=r.Pb();r.Ob(0,"div",5),r.Ob(1,"a",6),r.Vb("click",function(){r.gc(t);const n=e.$implicit;return r.Xb(2).showMovieDetails(n)}),r.Kb(2,"img",7),r.Nb(),r.Ob(3,"h6",8),r.nc(4),r.Nb(),r.Nb()}if(2&t){const t=e.$implicit;r.yb(2),r.cc("src","https://image.tmdb.org/t/p/original/",t.poster_path,"",r.ic),r.yb(2),r.oc(null==t?null:t.title)}}function xS(t,e){if(1&t&&(r.Ob(0,"div",3),r.mc(1,IS,5,2,"div",4),r.Nb()),2&t){const t=r.Xb();r.yb(1),r.bc("ngForOf",t.likesListMovies)}}let kS=(()=>{class t{constructor(t,e,n,r){this.router=t,this.auth=e,this.userser=n,this.apiser=r,this.isLoggedIn=!1,this.likesListIds=[],this.likesListMovies=[]}ngOnInit(){this.isLoggedIn=this.auth.isLoggedIn,this.userId=this.auth.userLoggedID,this.userser.getUserById(this.userId).subscribe(t=>{this.user=Object.assign({id:t.payload.id},t.payload.data()),this.likesListIds=this.user.likes,this.getfLikedList()})}getfLikedList(){for(let t=0;t<this.likesListIds.length;t++)this.apiser.getMovie(this.likesListIds[t]).subscribe(e=>{this.likesListMovies.some(e=>e.id===this.likesListIds[t])||this.likesListMovies.push(e)})}showMovieDetails(t){this.router.navigate(["movie",t.id])}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(Jr),r.Jb(tO),r.Jb(eO),r.Jb(GO))},t.\u0275cmp=r.Db({type:t,selectors:[["app-userLikes"]],decls:5,vars:2,consts:[[1,"container-fluid","p-3"],[4,"ngIf"],["class","row",4,"ngIf"],[1,"row"],["class","col-lg-2 col-md-3 col-sm-12 rounded movieCard",4,"ngFor","ngForOf"],[1,"col-lg-2","col-md-3","col-sm-12","rounded","movieCard"],[3,"click"],[1,"w-100","rounded",3,"src"],[1,"title"]],template:function(t,e){1&t&&(r.Ob(0,"div",0),r.Ob(1,"h4"),r.nc(2,"My likes"),r.Nb(),r.mc(3,TS,2,0,"p",1),r.mc(4,xS,2,1,"div",2),r.Nb()),2&t&&(r.yb(3),r.bc("ngIf",0==(null==e.likesListIds?null:e.likesListIds.length)),r.yb(1),r.bc("ngIf",(null==e.likesListIds?null:e.likesListIds.length)>0))},directives:[P,A],styles:[".movieCard[_ngcontent-%COMP%]{cursor:pointer}"]}),t})();function NS(t,e){1&t&&r.Kb(0,"app-userFavorites")}function AS(t,e){1&t&&r.Kb(0,"app-userLikes")}let jS=(()=>{class t{constructor(t,e,n,r){this.router=t,this.auth=e,this.userser=n,this.apiser=r,this.isLoggedIn=!1,this.showFav=!1,this.showLikes=!1}ngOnChanges(t){}ngOnInit(){!0===this.auth.isLoggedIn&&(this.isLoggedIn=this.auth.isLoggedIn,this.userId=this.auth.userLoggedID,this.userser.getUserById(this.userId).subscribe(t=>{this.user=Object.assign({id:t.payload.id},t.payload.data())}))}showFavoritesSection(){this.showFav=!0,this.showLikes=!1}showLikesSection(){this.showFav=!1,this.showLikes=!0}showMovieDetails(t){}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(Jr),r.Jb(tO),r.Jb(eO),r.Jb(GO))},t.\u0275cmp=r.Db({type:t,selectors:[["app-userPage"]],features:[r.wb],decls:21,vars:6,consts:[[1,"main-div"],[1,"jumbotron","jumbotron-fluid","mb-0","d-none","d-xl-block","d-lg-block","d-md-block"],[1,"container"],[1,"row"],[1,"col-lg-2","col-md-3","col-sm-6"],[1,"rounded-circle","circleContainer"],[1,"col-lg-10","col-md-9","col-sm-6","usernameContainer"],["id","myGroup",1,"container-fluid","mt-0"],[1,"row","g-0","border-bottom","btn-menu-group"],[3,"click"],[4,"ngIf"]],template:function(t,e){1&t&&(r.Kb(0,"app-header"),r.Ob(1,"div",0),r.Ob(2,"div",1),r.Ob(3,"div",2),r.Ob(4,"div",3),r.Ob(5,"div",4),r.Ob(6,"div",5),r.Ob(7,"h1"),r.nc(8),r.Yb(9,"uppercase"),r.Nb(),r.Nb(),r.Nb(),r.Ob(10,"div",6),r.Ob(11,"h1"),r.nc(12),r.Nb(),r.Nb(),r.Nb(),r.Nb(),r.Nb(),r.Ob(13,"div",7),r.Ob(14,"div",8),r.Ob(15,"button",9),r.Vb("click",function(){return e.showFavoritesSection()}),r.nc(16," favoraties "),r.Nb(),r.Ob(17,"button",9),r.Vb("click",function(){return e.showLikesSection()}),r.nc(18," likes "),r.Nb(),r.Nb(),r.Nb(),r.mc(19,NS,1,0,"app-userFavorites",10),r.mc(20,AS,1,0,"app-userLikes",10),r.Nb()),2&t&&(r.yb(8),r.oc(r.Zb(9,4,null==e.user?null:e.user.username[0])),r.yb(4),r.oc(null==e.user?null:e.user.username),r.yb(7),r.bc("ngIf",e.showFav),r.yb(1),r.bc("ngIf",e.showLikes))},directives:[lO,P,ES,kS],pipes:[M],styles:['.main-div[_ngcontent-%COMP%]{padding-top:3rem}.jumbotron[_ngcontent-%COMP%]{background-image:url("https://www.themoviedb.org/t/p/w1920_and_h600_multi_faces_filter(duotone,032541,01b4e4)/kf456ZqeC45XTvo6W9pW5clYKfQ.jpg");background-size:cover}.circleContainer[_ngcontent-%COMP%]{background-color:#032541;width:150px;height:150px;display:flex;justify-content:center;align-items:center;color:#fff;font-family:Noto Sans,sans-serif}.usernameContainer[_ngcontent-%COMP%]{display:flex;align-items:center;font-family:Archivo Black,sans-serif}h1[_ngcontent-%COMP%]{font-size:4vw;color:#fff}.btn-menu-group[_ngcontent-%COMP%]{display:flex;justify-content:center;color:#000}.collapse.in[_ngcontent-%COMP%]{min-height:50px;border:1px solid #00f}.btn-menu-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{text-decoration:none;border:none;font-size:15px;background-color:#fff;color:#050505!important;padding:1rem 2rem}.btn-menu-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus{outline:none}']}),t})(),PS=(()=>{class t{constructor(t,e){this.authSer=t,this.router=e}canActivate(t,e){return!0!==this.authSer.isLoggedIn&&this.router.navigate(["/Home"]),!0}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(tO),r.Sb(Jr))},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),RS=(()=>{class t{constructor(t,e){this.authSer=t,this.router=e}canActivate(t,e){return!0===this.authSer.isLoggedIn&&this.router.navigate(["/Home"]),!0}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(tO),r.Sb(Jr))},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const DS=[{path:"Home",component:ZO},{path:"Register",component:gO,canActivate:[RS]},{path:"Login",component:tS,canActivate:[RS]},{path:"movie/:id",component:pS},{path:"topmovies",component:bS},{path:"upcomingmovies",component:wS},{path:"nowplayingmovies",component:yS},{path:"userpage",component:jS,canActivate:[PS]},{path:"chat",component:Ls},{path:"",redirectTo:"Home",pathMatch:"full"},{path:"**",component:gS}];let LS=(()=>{class t{}return t.\u0275mod=r.Hb({type:t}),t.\u0275inj=r.Gb({factory:function(e){return new(e||t)},imports:[[di.forRoot(DS)],di]}),t})(),MS=(()=>{class t{constructor(){this.title="movieApp"}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Db({type:t,selectors:[["app-root"]],decls:2,vars:0,template:function(t,e){1&t&&(r.Kb(0,"app-header"),r.Kb(1,"router-outlet"))},directives:[lO,ni],styles:[""]}),t})();function FS(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function VS(t){switch(t.length){case 0:return new Cw;case 1:return t[0];default:return new Ew(t)}}function US(t,e,n,r,i={},o={}){const s=[],a=[];let u=-1,c=null;if(r.forEach(t=>{const n=t.offset,r=n==u,l=r&&c||{};Object.keys(t).forEach(n=>{let r=n,a=t[n];if("offset"!==n)switch(r=e.normalizePropertyName(r,s),a){case"!":a=i[n];break;case yw:a=o[n];break;default:a=e.normalizeStyleValue(n,r,a,s)}l[r]=a}),r||a.push(l),c=l,u=n}),s.length){const t="\n - ";throw new Error(`Unable to animate due to the following errors:${t}${s.join(t)}`)}return a}function qS(t,e,n,r){switch(e){case"start":t.onStart(()=>r(n&&BS(n,"start",t)));break;case"done":t.onDone(()=>r(n&&BS(n,"done",t)));break;case"destroy":t.onDestroy(()=>r(n&&BS(n,"destroy",t)))}}function BS(t,e,n){const r=n.totalTime,i=HS(t.element,t.triggerName,t.fromState,t.toState,e||t.phaseName,null==r?t.totalTime:r,!!n.disabled),o=t._data;return null!=o&&(i._data=o),i}function HS(t,e,n,r,i="",o=0,s){return{element:t,triggerName:e,fromState:n,toState:r,phaseName:i,totalTime:o,disabled:!!s}}function zS(t,e,n){let r;return t instanceof Map?(r=t.get(e),r||t.set(e,r=n)):(r=t[e],r||(r=t[e]=n)),r}function KS(t){const e=t.indexOf(":");return[t.substring(1,e),t.substr(e+1)]}let WS=(t,e)=>!1,QS=(t,e)=>!1,GS=(t,e,n)=>[];const $S=FS();($S||"undefined"!=typeof Element)&&(WS=(t,e)=>t.contains(e),QS=(()=>{if($S||Element.prototype.matches)return(t,e)=>t.matches(e);{const t=Element.prototype,e=t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector;return e?(t,n)=>e.apply(t,[n]):QS}})(),GS=(t,e,n)=>{let r=[];if(n){const n=t.querySelectorAll(e);for(let t=0;t<n.length;t++)r.push(n[t])}else{const n=t.querySelector(e);n&&r.push(n)}return r});let YS=null,JS=!1;function XS(t){YS||(YS=("undefined"!=typeof document?document.body:null)||{},JS=!!YS.style&&"WebkitAppearance"in YS.style);let e=!0;return YS.style&&!function(t){return"ebkit"==t.substring(1,6)}(t)&&(e=t in YS.style,!e&&JS)&&(e="Webkit"+t.charAt(0).toUpperCase()+t.substr(1)in YS.style),e}const ZS=QS,tC=WS,eC=GS;function nC(t){const e={};return Object.keys(t).forEach(n=>{const r=n.replace(/([a-z])([A-Z])/g,"$1-$2");e[r]=t[n]}),e}let rC=(()=>{class t{validateStyleProperty(t){return XS(t)}matchesElement(t,e){return ZS(t,e)}containsElement(t,e){return tC(t,e)}query(t,e,n){return eC(t,e,n)}computeStyle(t,e,n){return n||""}animate(t,e,n,r,i,o=[],s){return new Cw(n,r)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac}),t})(),iC=(()=>{class t{}return t.NOOP=new rC,t})();const oC="ng-enter",sC="ng-leave",aC="ng-trigger",uC=".ng-trigger",cC="ng-animating",lC=".ng-animating";function hC(t){if("number"==typeof t)return t;const e=t.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:dC(parseFloat(e[1]),e[2])}function dC(t,e){switch(e){case"s":return 1e3*t;default:return t}}function fC(t,e,n){return t.hasOwnProperty("duration")?t:function(t,e,n){let r,i=0,o="";if("string"==typeof t){const n=t.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===n)return e.push(`The provided timing value "${t}" is invalid.`),{duration:0,delay:0,easing:""};r=dC(parseFloat(n[1]),n[2]);const s=n[3];null!=s&&(i=dC(parseFloat(s),n[4]));const a=n[5];a&&(o=a)}else r=t;if(!n){let n=!1,o=e.length;r<0&&(e.push("Duration values below 0 are not allowed for this animation step."),n=!0),i<0&&(e.push("Delay values below 0 are not allowed for this animation step."),n=!0),n&&e.splice(o,0,`The provided timing value "${t}" is invalid.`)}return{duration:r,delay:i,easing:o}}(t,e,n)}function pC(t,e={}){return Object.keys(t).forEach(n=>{e[n]=t[n]}),e}function gC(t,e,n={}){if(e)for(let r in t)n[r]=t[r];else pC(t,n);return n}function mC(t,e,n){return n?e+":"+n+";":""}function yC(t){let e="";for(let n=0;n<t.style.length;n++){const r=t.style.item(n);e+=mC(0,r,t.style.getPropertyValue(r))}for(const n in t.style)t.style.hasOwnProperty(n)&&!n.startsWith("_")&&(e+=mC(0,n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),t.style[n]));t.setAttribute("style",e)}function vC(t,e,n){t.style&&(Object.keys(e).forEach(r=>{const i=TC(r);n&&!n.hasOwnProperty(r)&&(n[r]=t.style[i]),t.style[i]=e[r]}),FS()&&yC(t))}function bC(t,e){t.style&&(Object.keys(e).forEach(e=>{const n=TC(e);t.style[n]=""}),FS()&&yC(t))}function _C(t){return Array.isArray(t)?1==t.length?t[0]:bw(t):t}const wC=new RegExp("{{\\s*(.+?)\\s*}}","g");function OC(t){let e=[];if("string"==typeof t){let n;for(;n=wC.exec(t);)e.push(n[1]);wC.lastIndex=0}return e}function SC(t,e,n){const r=t.toString(),i=r.replace(wC,(t,r)=>{let i=e[r];return e.hasOwnProperty(r)||(n.push("Please provide a value for the animation param "+r),i=""),i.toString()});return i==r?t:i}function CC(t){const e=[];let n=t.next();for(;!n.done;)e.push(n.value),n=t.next();return e}const EC=/-+([a-z0-9])/g;function TC(t){return t.replace(EC,(...t)=>t[1].toUpperCase())}function IC(t,e){return 0===t||0===e}function xC(t,e,n){const r=Object.keys(n);if(r.length&&e.length){let o=e[0],s=[];if(r.forEach(t=>{o.hasOwnProperty(t)||s.push(t),o[t]=n[t]}),s.length)for(var i=1;i<e.length;i++){let n=e[i];s.forEach(function(e){n[e]=NC(t,e)})}}return e}function kC(t,e,n){switch(e.type){case 7:return t.visitTrigger(e,n);case 0:return t.visitState(e,n);case 1:return t.visitTransition(e,n);case 2:return t.visitSequence(e,n);case 3:return t.visitGroup(e,n);case 4:return t.visitAnimate(e,n);case 5:return t.visitKeyframes(e,n);case 6:return t.visitStyle(e,n);case 8:return t.visitReference(e,n);case 9:return t.visitAnimateChild(e,n);case 10:return t.visitAnimateRef(e,n);case 11:return t.visitQuery(e,n);case 12:return t.visitStagger(e,n);default:throw new Error("Unable to resolve animation metadata node #"+e.type)}}function NC(t,e){return window.getComputedStyle(t)[e]}const AC="*";function jC(t,e){const n=[];return"string"==typeof t?t.split(/\s*,\s*/).forEach(t=>function(t,e,n){if(":"==t[0]){const r=function(t,e){switch(t){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,e)=>parseFloat(e)>parseFloat(t);case":decrement":return(t,e)=>parseFloat(e)<parseFloat(t);default:return e.push(`The transition alias value "${t}" is not supported`),"* => *"}}(t,n);if("function"==typeof r)return void e.push(r);t=r}const r=t.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return n.push(`The provided transition expression "${t}" is not supported`),e;const i=r[1],o=r[2],s=r[3];e.push(DC(i,s)),"<"!=o[0]||i==AC&&s==AC||e.push(DC(s,i))}(t,n,e)):n.push(t),n}const PC=new Set(["true","1"]),RC=new Set(["false","0"]);function DC(t,e){const n=PC.has(t)||RC.has(t),r=PC.has(e)||RC.has(e);return(i,o)=>{let s=t==AC||t==i,a=e==AC||e==o;return!s&&n&&"boolean"==typeof i&&(s=i?PC.has(t):RC.has(t)),!a&&r&&"boolean"==typeof o&&(a=o?PC.has(e):RC.has(e)),s&&a}}const LC=new RegExp("s*:selfs*,?","g");function MC(t,e,n){return new FC(t).build(e,n)}class FC{constructor(t){this._driver=t}build(t,e){const n=new VC(e);return this._resetContextStyleTimingState(n),kC(this,_C(t),n)}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles={},t.collectedStyles[""]={},t.currentTime=0}visitTrigger(t,e){let n=e.queryCount=0,r=e.depCount=0;const i=[],o=[];return"@"==t.name.charAt(0)&&e.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),t.definitions.forEach(t=>{if(this._resetContextStyleTimingState(e),0==t.type){const n=t,r=n.name;r.toString().split(/\s*,\s*/).forEach(t=>{n.name=t,i.push(this.visitState(n,e))}),n.name=r}else if(1==t.type){const i=this.visitTransition(t,e);n+=i.queryCount,r+=i.depCount,o.push(i)}else e.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:t.name,states:i,transitions:o,queryCount:n,depCount:r,options:null}}visitState(t,e){const n=this.visitStyle(t.styles,e),r=t.options&&t.options.params||null;if(n.containsDynamicStyles){const i=new Set,o=r||{};if(n.styles.forEach(t=>{if(UC(t)){const e=t;Object.keys(e).forEach(t=>{OC(e[t]).forEach(t=>{o.hasOwnProperty(t)||i.add(t)})})}}),i.size){const n=CC(i.values());e.errors.push(`state("${t.name}", ...) must define default values for all the following style substitutions: ${n.join(", ")}`)}}return{type:0,name:t.name,style:n,options:r?{params:r}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;const n=kC(this,_C(t.animation),e);return{type:1,matchers:jC(t.expr,e.errors),animation:n,queryCount:e.queryCount,depCount:e.depCount,options:qC(t.options)}}visitSequence(t,e){return{type:2,steps:t.steps.map(t=>kC(this,t,e)),options:qC(t.options)}}visitGroup(t,e){const n=e.currentTime;let r=0;const i=t.steps.map(t=>{e.currentTime=n;const i=kC(this,t,e);return r=Math.max(r,e.currentTime),i});return e.currentTime=r,{type:3,steps:i,options:qC(t.options)}}visitAnimate(t,e){const n=function(t,e){let n=null;if(t.hasOwnProperty("duration"))n=t;else if("number"==typeof t)return BC(fC(t,e).duration,0,"");const r=t;if(r.split(/\s+/).some(t=>"{"==t.charAt(0)&&"{"==t.charAt(1))){const t=BC(0,0,"");return t.dynamic=!0,t.strValue=r,t}return n=n||fC(r,e),BC(n.duration,n.delay,n.easing)}(t.timings,e.errors);let r;e.currentAnimateTimings=n;let i=t.styles?t.styles:_w({});if(5==i.type)r=this.visitKeyframes(i,e);else{let i=t.styles,o=!1;if(!i){o=!0;const t={};n.easing&&(t.easing=n.easing),i=_w(t)}e.currentTime+=n.duration+n.delay;const s=this.visitStyle(i,e);s.isEmptyStep=o,r=s}return e.currentAnimateTimings=null,{type:4,timings:n,style:r,options:null}}visitStyle(t,e){const n=this._makeStyleAst(t,e);return this._validateStyleAst(n,e),n}_makeStyleAst(t,e){const n=[];Array.isArray(t.styles)?t.styles.forEach(t=>{"string"==typeof t?t==yw?n.push(t):e.errors.push(`The provided style string value ${t} is not allowed.`):n.push(t)}):n.push(t.styles);let r=!1,i=null;return n.forEach(t=>{if(UC(t)){const e=t,n=e.easing;if(n&&(i=n,delete e.easing),!r)for(let t in e)if(e[t].toString().indexOf("{{")>=0){r=!0;break}}}),{type:6,styles:n,easing:i,offset:t.offset,containsDynamicStyles:r,options:null}}_validateStyleAst(t,e){const n=e.currentAnimateTimings;let r=e.currentTime,i=e.currentTime;n&&i>0&&(i-=n.duration+n.delay),t.styles.forEach(t=>{"string"!=typeof t&&Object.keys(t).forEach(n=>{if(!this._driver.validateStyleProperty(n))return void e.errors.push(`The provided animation property "${n}" is not a supported CSS property for animations`);const o=e.collectedStyles[e.currentQuerySelector],s=o[n];let a=!0;s&&(i!=r&&i>=s.startTime&&r<=s.endTime&&(e.errors.push(`The CSS property "${n}" that exists between the times of "${s.startTime}ms" and "${s.endTime}ms" is also being animated in a parallel animation between the times of "${i}ms" and "${r}ms"`),a=!1),i=s.startTime),a&&(o[n]={startTime:i,endTime:r}),e.options&&function(t,e,n){const r=e.params||{},i=OC(t);i.length&&i.forEach(t=>{r.hasOwnProperty(t)||n.push(`Unable to resolve the local animation param ${t} in the given list of values`)})}(t[n],e.options,e.errors)})})}visitKeyframes(t,e){const n={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push("keyframes() must be placed inside of a call to animate()"),n;let r=0;const i=[];let o=!1,s=!1,a=0;const u=t.steps.map(t=>{const n=this._makeStyleAst(t,e);let u=null!=n.offset?n.offset:function(t){if("string"==typeof t)return null;let e=null;if(Array.isArray(t))t.forEach(t=>{if(UC(t)&&t.hasOwnProperty("offset")){const n=t;e=parseFloat(n.offset),delete n.offset}});else if(UC(t)&&t.hasOwnProperty("offset")){const n=t;e=parseFloat(n.offset),delete n.offset}return e}(n.styles),c=0;return null!=u&&(r++,c=n.offset=u),s=s||c<0||c>1,o=o||c<a,a=c,i.push(c),n});s&&e.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),o&&e.errors.push("Please ensure that all keyframe offsets are in order");const c=t.steps.length;let l=0;r>0&&r<c?e.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==r&&(l=1/(c-1));const h=c-1,d=e.currentTime,f=e.currentAnimateTimings,p=f.duration;return u.forEach((t,r)=>{const o=l>0?r==h?1:l*r:i[r],s=o*p;e.currentTime=d+f.delay+s,f.duration=s,this._validateStyleAst(t,e),t.offset=o,n.styles.push(t)}),n}visitReference(t,e){return{type:8,animation:kC(this,_C(t.animation),e),options:qC(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:9,options:qC(t.options)}}visitAnimateRef(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:qC(t.options)}}visitQuery(t,e){const n=e.currentQuerySelector,r=t.options||{};e.queryCount++,e.currentQuery=t;const[i,o]=function(t){const e=!!t.split(/\s*,\s*/).find(t=>":self"==t);return e&&(t=t.replace(LC,"")),[t=t.replace(/@\*/g,uC).replace(/@\w+/g,t=>".ng-trigger-"+t.substr(1)).replace(/:animating/g,lC),e]}(t.selector);e.currentQuerySelector=n.length?n+" "+i:i,zS(e.collectedStyles,e.currentQuerySelector,{});const s=kC(this,_C(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=n,{type:11,selector:i,limit:r.limit||0,optional:!!r.optional,includeSelf:o,animation:s,originalSelector:t.selector,options:qC(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push("stagger() can only be used inside of query()");const n="full"===t.timings?{duration:0,delay:0,easing:"full"}:fC(t.timings,e.errors,!0);return{type:12,animation:kC(this,_C(t.animation),e),timings:n,options:null}}}class VC{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function UC(t){return!Array.isArray(t)&&"object"==typeof t}function qC(t){var e;return t?(t=pC(t)).params&&(t.params=(e=t.params)?pC(e):null):t={},t}function BC(t,e,n){return{duration:t,delay:e,easing:n}}function HC(t,e,n,r,i,o,s=null,a=!1){return{type:1,element:t,keyframes:e,preStyleProps:n,postStyleProps:r,duration:i,delay:o,totalTime:i+o,easing:s,subTimeline:a}}class zC{constructor(){this._map=new Map}consume(t){let e=this._map.get(t);return e?this._map.delete(t):e=[],e}append(t,e){let n=this._map.get(t);n||this._map.set(t,n=[]),n.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const KC=new RegExp(":enter","g"),WC=new RegExp(":leave","g");function QC(t,e,n,r,i,o={},s={},a,u,c=[]){return(new GC).buildKeyframes(t,e,n,r,i,o,s,a,u,c)}class GC{buildKeyframes(t,e,n,r,i,o,s,a,u,c=[]){u=u||new zC;const l=new YC(t,e,u,r,i,c,[]);l.options=a,l.currentTimeline.setStyles([o],null,l.errors,a),kC(this,n,l);const h=l.timelines.filter(t=>t.containsAnimation());if(h.length&&Object.keys(s).length){const t=h[h.length-1];t.allowOnlyTimelineStyles()||t.setStyles([s],null,l.errors,a)}return h.length?h.map(t=>t.buildKeyframes()):[HC(e,[],[],[],0,0,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){const n=e.subInstructions.consume(e.element);if(n){const r=e.createSubContext(t.options),i=e.currentTimeline.currentTime,o=this._visitSubInstructions(n,r,r.options);i!=o&&e.transformIntoNewTimeline(o)}e.previousNode=t}visitAnimateRef(t,e){const n=e.createSubContext(t.options);n.transformIntoNewTimeline(),this.visitReference(t.animation,n),e.transformIntoNewTimeline(n.currentTimeline.currentTime),e.previousNode=t}_visitSubInstructions(t,e,n){let r=e.currentTimeline.currentTime;const i=null!=n.duration?hC(n.duration):null,o=null!=n.delay?hC(n.delay):null;return 0!==i&&t.forEach(t=>{const n=e.appendInstructionToTimeline(t,i,o);r=Math.max(r,n.duration+n.delay)}),r}visitReference(t,e){e.updateOptions(t.options,!0),kC(this,t.animation,e),e.previousNode=t}visitSequence(t,e){const n=e.subContextCount;let r=e;const i=t.options;if(i&&(i.params||i.delay)&&(r=e.createSubContext(i),r.transformIntoNewTimeline(),null!=i.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=$C);const t=hC(i.delay);r.delayNextStep(t)}t.steps.length&&(t.steps.forEach(t=>kC(this,t,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>n&&r.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){const n=[];let r=e.currentTimeline.currentTime;const i=t.options&&t.options.delay?hC(t.options.delay):0;t.steps.forEach(o=>{const s=e.createSubContext(t.options);i&&s.delayNextStep(i),kC(this,o,s),r=Math.max(r,s.currentTimeline.currentTime),n.push(s.currentTimeline)}),n.forEach(t=>e.currentTimeline.mergeTimelineCollectedStyles(t)),e.transformIntoNewTimeline(r),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){const n=t.strValue;return fC(e.params?SC(n,e.params,e.errors):n,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){const n=e.currentAnimateTimings=this._visitTiming(t.timings,e),r=e.currentTimeline;n.delay&&(e.incrementTime(n.delay),r.snapshotCurrentStyles());const i=t.style;5==i.type?this.visitKeyframes(i,e):(e.incrementTime(n.duration),this.visitStyle(i,e),r.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){const n=e.currentTimeline,r=e.currentAnimateTimings;!r&&n.getCurrentStyleProperties().length&&n.forwardFrame();const i=r&&r.easing||t.easing;t.isEmptyStep?n.applyEmptyStep(i):n.setStyles(t.styles,i,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){const n=e.currentAnimateTimings,r=e.currentTimeline.duration,i=n.duration,o=e.createSubContext().currentTimeline;o.easing=n.easing,t.styles.forEach(t=>{o.forwardTime((t.offset||0)*i),o.setStyles(t.styles,t.easing,e.errors,e.options),o.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(o),e.transformIntoNewTimeline(r+i),e.previousNode=t}visitQuery(t,e){const n=e.currentTimeline.currentTime,r=t.options||{},i=r.delay?hC(r.delay):0;i&&(6===e.previousNode.type||0==n&&e.currentTimeline.getCurrentStyleProperties().length)&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=$C);let o=n;const s=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!r.optional,e.errors);e.currentQueryTotal=s.length;let a=null;s.forEach((n,r)=>{e.currentQueryIndex=r;const s=e.createSubContext(t.options,n);i&&s.delayNextStep(i),n===e.element&&(a=s.currentTimeline),kC(this,t.animation,s),s.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,s.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(o),a&&(e.currentTimeline.mergeTimelineCollectedStyles(a),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){const n=e.parentContext,r=e.currentTimeline,i=t.timings,o=Math.abs(i.duration),s=o*(e.currentQueryTotal-1);let a=o*e.currentQueryIndex;switch(i.duration<0?"reverse":i.easing){case"reverse":a=s-a;break;case"full":a=n.currentStaggerTime}const u=e.currentTimeline;a&&u.delayNextStep(a);const c=u.currentTime;kC(this,t.animation,e),e.previousNode=t,n.currentStaggerTime=r.currentTime-c+(r.startTime-n.currentTimeline.startTime)}}const $C={};class YC{constructor(t,e,n,r,i,o,s,a){this._driver=t,this.element=e,this.subInstructions=n,this._enterClassName=r,this._leaveClassName=i,this.errors=o,this.timelines=s,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=$C,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=a||new JC(this._driver,e,0),s.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;const n=t;let r=this.options;null!=n.duration&&(r.duration=hC(n.duration)),null!=n.delay&&(r.delay=hC(n.delay));const i=n.params;if(i){let t=r.params;t||(t=this.options.params={}),Object.keys(i).forEach(n=>{e&&t.hasOwnProperty(n)||(t[n]=SC(i[n],t,this.errors))})}}_copyOptions(){const t={};if(this.options){const e=this.options.params;if(e){const n=t.params={};Object.keys(e).forEach(t=>{n[t]=e[t]})}}return t}createSubContext(t=null,e,n){const r=e||this.element,i=new YC(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,n||0));return i.previousNode=this.previousNode,i.currentAnimateTimings=this.currentAnimateTimings,i.options=this._copyOptions(),i.updateOptions(t),i.currentQueryIndex=this.currentQueryIndex,i.currentQueryTotal=this.currentQueryTotal,i.parentContext=this,this.subContextCount++,i}transformIntoNewTimeline(t){return this.previousNode=$C,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,n){const r={duration:null!=e?e:t.duration,delay:this.currentTimeline.currentTime+(null!=n?n:0)+t.delay,easing:""},i=new XC(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,r,t.stretchStartingKeyframe);return this.timelines.push(i),r}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,n,r,i,o){let s=[];if(r&&s.push(this.element),t.length>0){t=(t=t.replace(KC,"."+this._enterClassName)).replace(WC,"."+this._leaveClassName);let e=this._driver.query(this.element,t,1!=n);0!==n&&(e=n<0?e.slice(e.length+n,e.length):e.slice(0,n)),s.push(...e)}return i||0!=s.length||o.push(`\`query("${e}")\` returned zero elements. (Use \`query("${e}", { optional: true })\` if you wish to allow this.)`),s}}class JC{constructor(t,e,n,r){this._driver=t,this.element=e,this.startTime=n,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const e=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new JC(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles[t]=e,this._globalTimelineStyles[t]=e,this._styleSummary[t]={time:this.currentTime,value:e}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&(this._previousKeyframe.easing=t),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||yw,this._currentKeyframe[t]=yw}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,n,r){e&&(this._previousKeyframe.easing=e);const i=r&&r.params||{},o=function(t,e){const n={};let r;return t.forEach(t=>{"*"===t?(r=r||Object.keys(e),r.forEach(t=>{n[t]=yw})):gC(t,!1,n)}),n}(t,this._globalTimelineStyles);Object.keys(o).forEach(t=>{const e=SC(o[t],i,n);this._pendingStyles[t]=e,this._localTimelineStyles.hasOwnProperty(t)||(this._backFill[t]=this._globalTimelineStyles.hasOwnProperty(t)?this._globalTimelineStyles[t]:yw),this._updateStyle(t,e)})}applyStylesToKeyframe(){const t=this._pendingStyles,e=Object.keys(t);0!=e.length&&(this._pendingStyles={},e.forEach(e=>{this._currentKeyframe[e]=t[e]}),Object.keys(this._localTimelineStyles).forEach(t=>{this._currentKeyframe.hasOwnProperty(t)||(this._currentKeyframe[t]=this._localTimelineStyles[t])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(t=>{const e=this._localTimelineStyles[t];this._pendingStyles[t]=e,this._updateStyle(t,e)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){Object.keys(t._styleSummary).forEach(e=>{const n=this._styleSummary[e],r=t._styleSummary[e];(!n||r.time>n.time)&&this._updateStyle(e,r.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,e=new Set,n=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((i,o)=>{const s=gC(i,!0);Object.keys(s).forEach(n=>{const r=s[n];"!"==r?t.add(n):r==yw&&e.add(n)}),n||(s.offset=o/this.duration),r.push(s)});const i=t.size?CC(t.values()):[],o=e.size?CC(e.values()):[];if(n){const t=r[0],e=pC(t);t.offset=0,e.offset=1,r=[t,e]}return HC(this.element,r,i,o,this.duration,this.startTime,this.easing,!1)}}class XC extends JC{constructor(t,e,n,r,i,o,s=!1){super(t,e,o.delay),this.element=e,this.keyframes=n,this.preStyleProps=r,this.postStyleProps=i,this._stretchStartingKeyframe=s,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:n,easing:r}=this.timings;if(this._stretchStartingKeyframe&&e){const i=[],o=n+e,s=e/o,a=gC(t[0],!1);a.offset=0,i.push(a);const u=gC(t[0],!1);u.offset=ZC(s),i.push(u);const c=t.length-1;for(let r=1;r<=c;r++){let s=gC(t[r],!1);s.offset=ZC((e+s.offset*n)/o),i.push(s)}n=o,e=0,r="",t=i}return HC(this.element,t,this.preStyleProps,this.postStyleProps,n,e,r,!0)}}function ZC(t,e=3){const n=Math.pow(10,e-1);return Math.round(t*n)/n}class tE{}class eE extends tE{normalizePropertyName(t,e){return TC(t)}normalizeStyleValue(t,e,n,r){let i="";const o=n.toString().trim();if(nE[e]&&0!==n&&"0"!==n)if("number"==typeof n)i="px";else{const e=n.match(/^[+-]?[\d\.]+([a-z]*)$/);e&&0==e[1].length&&r.push(`Please provide a CSS unit value for ${t}:${n}`)}return o+i}}const nE=(()=>function(t){const e={};return t.forEach(t=>e[t]=!0),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function rE(t,e,n,r,i,o,s,a,u,c,l,h,d){return{type:0,element:t,triggerName:e,isRemovalTransition:i,fromState:n,fromStyles:o,toState:r,toStyles:s,timelines:a,queriedElements:u,preStyleProps:c,postStyleProps:l,totalTime:h,errors:d}}const iE={};class oE{constructor(t,e,n){this._triggerName=t,this.ast=e,this._stateStyles=n}match(t,e,n,r){return function(t,e,n,r,i){return t.some(t=>t(e,n,r,i))}(this.ast.matchers,t,e,n,r)}buildStyles(t,e,n){const r=this._stateStyles["*"],i=this._stateStyles[t],o=r?r.buildStyles(e,n):{};return i?i.buildStyles(e,n):o}build(t,e,n,r,i,o,s,a,u,c){const l=[],h=this.ast.options&&this.ast.options.params||iE,d=this.buildStyles(n,s&&s.params||iE,l),f=a&&a.params||iE,p=this.buildStyles(r,f,l),g=new Set,m=new Map,y=new Map,v="void"===r,b={params:Object.assign(Object.assign({},h),f)},_=c?[]:QC(t,e,this.ast.animation,i,o,d,p,b,u,l);let w=0;if(_.forEach(t=>{w=Math.max(t.duration+t.delay,w)}),l.length)return rE(e,this._triggerName,n,r,v,d,p,[],[],m,y,w,l);_.forEach(t=>{const n=t.element,r=zS(m,n,{});t.preStyleProps.forEach(t=>r[t]=!0);const i=zS(y,n,{});t.postStyleProps.forEach(t=>i[t]=!0),n!==e&&g.add(n)});const O=CC(g.values());return rE(e,this._triggerName,n,r,v,d,p,_,O,m,y,w)}}class sE{constructor(t,e){this.styles=t,this.defaultParams=e}buildStyles(t,e){const n={},r=pC(this.defaultParams);return Object.keys(t).forEach(e=>{const n=t[e];null!=n&&(r[e]=n)}),this.styles.styles.forEach(t=>{if("string"!=typeof t){const i=t;Object.keys(i).forEach(t=>{let o=i[t];o.length>1&&(o=SC(o,r,e)),n[t]=o})}}),n}}class aE{constructor(t,e){this.name=t,this.ast=e,this.transitionFactories=[],this.states={},e.states.forEach(t=>{this.states[t.name]=new sE(t.style,t.options&&t.options.params||{})}),uE(this.states,"true","1"),uE(this.states,"false","0"),e.transitions.forEach(e=>{this.transitionFactories.push(new oE(t,e,this.states))}),this.fallbackTransition=new oE(t,{type:1,animation:{type:2,steps:[],options:null},matchers:[(t,e)=>!0],options:null,queryCount:0,depCount:0},this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,n,r){return this.transitionFactories.find(i=>i.match(t,e,n,r))||null}matchStyles(t,e,n){return this.fallbackTransition.buildStyles(t,e,n)}}function uE(t,e,n){t.hasOwnProperty(e)?t.hasOwnProperty(n)||(t[n]=t[e]):t.hasOwnProperty(n)&&(t[e]=t[n])}const cE=new zC;class lE{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._normalizer=n,this._animations={},this._playersById={},this.players=[]}register(t,e){const n=[],r=MC(this._driver,e,n);if(n.length)throw new Error("Unable to build the animation due to the following errors: "+n.join("\n"));this._animations[t]=r}_buildPlayer(t,e,n){const r=t.element,i=US(0,this._normalizer,0,t.keyframes,e,n);return this._driver.animate(r,i,t.duration,t.delay,t.easing,[],!0)}create(t,e,n={}){const r=[],i=this._animations[t];let o;const s=new Map;if(i?(o=QC(this._driver,e,i,oC,sC,{},{},n,cE,r),o.forEach(t=>{const e=zS(s,t.element,{});t.postStyleProps.forEach(t=>e[t]=null)})):(r.push("The requested animation doesn't exist or has already been destroyed"),o=[]),r.length)throw new Error("Unable to create the animation due to the following errors: "+r.join("\n"));s.forEach((t,e)=>{Object.keys(t).forEach(n=>{t[n]=this._driver.computeStyle(e,n,yw)})});const a=VS(o.map(t=>{const e=s.get(t.element);return this._buildPlayer(t,{},e)}));return this._playersById[t]=a,a.onDestroy(()=>this.destroy(t)),this.players.push(a),a}destroy(t){const e=this._getPlayer(t);e.destroy(),delete this._playersById[t];const n=this.players.indexOf(e);n>=0&&this.players.splice(n,1)}_getPlayer(t){const e=this._playersById[t];if(!e)throw new Error("Unable to find the timeline player referenced by "+t);return e}listen(t,e,n,r){const i=HS(e,"","","");return qS(this._getPlayer(t),n,i,r),()=>{}}command(t,e,n,r){if("register"==n)return void this.register(t,r[0]);if("create"==n)return void this.create(t,e,r[0]||{});const i=this._getPlayer(t);switch(n){case"play":i.play();break;case"pause":i.pause();break;case"reset":i.reset();break;case"restart":i.restart();break;case"finish":i.finish();break;case"init":i.init();break;case"setPosition":i.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(t)}}}const hE="ng-animate-queued",dE="ng-animate-disabled",fE=".ng-animate-disabled",pE=[],gE={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},mE={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0};class yE{constructor(t,e=""){this.namespaceId=e;const n=t&&t.hasOwnProperty("value");if(this.value=null!=(r=n?t.value:t)?r:null,n){const e=pC(t);delete e.value,this.options=e}else this.options={};var r;this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(t){const e=t.params;if(e){const t=this.options.params;Object.keys(e).forEach(n=>{null==t[n]&&(t[n]=e[n])})}}}const vE="void",bE=new yE(vE);class _E{constructor(t,e,n){this.id=t,this.hostElement=e,this._engine=n,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,IE(e,this._hostClassName)}listen(t,e,n,r){if(!this._triggers.hasOwnProperty(e))throw new Error(`Unable to listen on the animation trigger event "${n}" because the animation trigger "${e}" doesn't exist!`);if(null==n||0==n.length)throw new Error(`Unable to listen on the animation trigger "${e}" because the provided event is undefined!`);if("start"!=(i=n)&&"done"!=i)throw new Error(`The provided animation trigger event "${n}" for the animation trigger "${e}" is not supported!`);var i;const o=zS(this._elementListeners,t,[]),s={name:e,phase:n,callback:r};o.push(s);const a=zS(this._engine.statesByElement,t,{});return a.hasOwnProperty(e)||(IE(t,aC),IE(t,"ng-trigger-"+e),a[e]=bE),()=>{this._engine.afterFlush(()=>{const t=o.indexOf(s);t>=0&&o.splice(t,1),this._triggers[e]||delete a[e]})}}register(t,e){return!this._triggers[t]&&(this._triggers[t]=e,!0)}_getTrigger(t){const e=this._triggers[t];if(!e)throw new Error(`The provided animation trigger "${t}" has not been registered!`);return e}trigger(t,e,n,r=!0){const i=this._getTrigger(e),o=new OE(this.id,e,t);let s=this._engine.statesByElement.get(t);s||(IE(t,aC),IE(t,"ng-trigger-"+e),this._engine.statesByElement.set(t,s={}));let a=s[e];const u=new yE(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&a&&u.absorbOptions(a.options),s[e]=u,a||(a=bE),u.value!==vE&&a.value===u.value){if(!function(t,e){const n=Object.keys(t),r=Object.keys(e);if(n.length!=r.length)return!1;for(let i=0;i<n.length;i++){const r=n[i];if(!e.hasOwnProperty(r)||t[r]!==e[r])return!1}return!0}(a.params,u.params)){const e=[],n=i.matchStyles(a.value,a.params,e),r=i.matchStyles(u.value,u.params,e);e.length?this._engine.reportError(e):this._engine.afterFlush(()=>{bC(t,n),vC(t,r)})}return}const c=zS(this._engine.playersByElement,t,[]);c.forEach(t=>{t.namespaceId==this.id&&t.triggerName==e&&t.queued&&t.destroy()});let l=i.matchTransition(a.value,u.value,t,u.params),h=!1;if(!l){if(!r)return;l=i.fallbackTransition,h=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:l,fromState:a,toState:u,player:o,isFallbackTransition:h}),h||(IE(t,hE),o.onStart(()=>{xE(t,hE)})),o.onDone(()=>{let e=this.players.indexOf(o);e>=0&&this.players.splice(e,1);const n=this._engine.playersByElement.get(t);if(n){let t=n.indexOf(o);t>=0&&n.splice(t,1)}}),this.players.push(o),c.push(o),o}deregister(t){delete this._triggers[t],this._engine.statesByElement.forEach((e,n)=>{delete e[t]}),this._elementListeners.forEach((e,n)=>{this._elementListeners.set(n,e.filter(e=>e.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const e=this._engine.playersByElement.get(t);e&&(e.forEach(t=>t.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){const n=this._engine.driver.query(t,uC,!0);n.forEach(t=>{if(t.__ng_removed)return;const n=this._engine.fetchNamespacesByElement(t);n.size?n.forEach(n=>n.triggerLeaveAnimation(t,e,!1,!0)):this.clearElementCache(t)}),this._engine.afterFlushAnimationsDone(()=>n.forEach(t=>this.clearElementCache(t)))}triggerLeaveAnimation(t,e,n,r){const i=this._engine.statesByElement.get(t);if(i){const o=[];if(Object.keys(i).forEach(e=>{if(this._triggers[e]){const n=this.trigger(t,e,vE,r);n&&o.push(n)}}),o.length)return this._engine.markElementAsRemoved(this.id,t,!0,e),n&&VS(o).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const e=this._elementListeners.get(t);if(e){const n=new Set;e.forEach(e=>{const r=e.name;if(n.has(r))return;n.add(r);const i=this._triggers[r].fallbackTransition,o=this._engine.statesByElement.get(t)[r]||bE,s=new yE(vE),a=new OE(this.id,r,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:r,transition:i,fromState:o,toState:s,player:a,isFallbackTransition:!0})})}}removeNode(t,e){const n=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let r=!1;if(n.totalAnimations){const e=n.players.length?n.playersByQueriedElement.get(t):[];if(e&&e.length)r=!0;else{let e=t;for(;e=e.parentNode;)if(n.statesByElement.get(e)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(t),r)n.markElementAsRemoved(this.id,t,!1,e);else{const r=t.__ng_removed;r&&r!==gE||(n.afterFlush(()=>this.clearElementCache(t)),n.destroyInnerAnimations(t),n._onRemovalComplete(t,e))}}insertNode(t,e){IE(t,this._hostClassName)}drainQueuedTransitions(t){const e=[];return this._queue.forEach(n=>{const r=n.player;if(r.destroyed)return;const i=n.element,o=this._elementListeners.get(i);o&&o.forEach(e=>{if(e.name==n.triggerName){const r=HS(i,n.triggerName,n.fromState.value,n.toState.value);r._data=t,qS(n.player,e.phase,r,e.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):e.push(n)}),this._queue=[],e.sort((t,e)=>{const n=t.transition.ast.depCount,r=e.transition.ast.depCount;return 0==n||0==r?n-r:this._engine.driver.containsElement(t.element,e.element)?1:-1})}destroy(t){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}elementContainsData(t){let e=!1;return this._elementListeners.has(t)&&(e=!0),e=!!this._queue.find(e=>e.element===t)||e,e}}class wE{constructor(t,e,n){this.bodyNode=t,this.driver=e,this._normalizer=n,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(t,e)=>{}}_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}get queuedPlayers(){const t=[];return this._namespaceList.forEach(e=>{e.players.forEach(e=>{e.queued&&t.push(e)})}),t}createNamespace(t,e){const n=new _E(t,e,this);return e.parentNode?this._balanceNamespaceList(n,e):(this.newHostElements.set(e,n),this.collectEnterElement(e)),this._namespaceLookup[t]=n}_balanceNamespaceList(t,e){const n=this._namespaceList.length-1;if(n>=0){let r=!1;for(let i=n;i>=0;i--)if(this.driver.containsElement(this._namespaceList[i].hostElement,e)){this._namespaceList.splice(i+1,0,t),r=!0;break}r||this._namespaceList.splice(0,0,t)}else this._namespaceList.push(t);return this.namespacesByHostElement.set(e,t),t}register(t,e){let n=this._namespaceLookup[t];return n||(n=this.createNamespace(t,e)),n}registerTrigger(t,e,n){let r=this._namespaceLookup[t];r&&r.register(e,n)&&this.totalAnimations++}destroy(t,e){if(!t)return;const n=this._fetchNamespace(t);this.afterFlush(()=>{this.namespacesByHostElement.delete(n.hostElement),delete this._namespaceLookup[t];const e=this._namespaceList.indexOf(n);e>=0&&this._namespaceList.splice(e,1)}),this.afterFlushAnimationsDone(()=>n.destroy(e))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const e=new Set,n=this.statesByElement.get(t);if(n){const t=Object.keys(n);for(let r=0;r<t.length;r++){const i=n[t[r]].namespaceId;if(i){const t=this._fetchNamespace(i);t&&e.add(t)}}}return e}trigger(t,e,n,r){if(SE(e)){const i=this._fetchNamespace(t);if(i)return i.trigger(e,n,r),!0}return!1}insertNode(t,e,n,r){if(!SE(e))return;const i=e.__ng_removed;if(i&&i.setForRemoval){i.setForRemoval=!1,i.setForMove=!0;const t=this.collectedLeaveElements.indexOf(e);t>=0&&this.collectedLeaveElements.splice(t,1)}if(t){const r=this._fetchNamespace(t);r&&r.insertNode(e,n)}r&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),IE(t,dE)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),xE(t,dE))}removeNode(t,e,n,r){if(SE(e)){const i=t?this._fetchNamespace(t):null;if(i?i.removeNode(e,r):this.markElementAsRemoved(t,e,!1,r),n){const n=this.namespacesByHostElement.get(e);n&&n.id!==t&&n.removeNode(e,r)}}else this._onRemovalComplete(e,r)}markElementAsRemoved(t,e,n,r){this.collectedLeaveElements.push(e),e.__ng_removed={namespaceId:t,setForRemoval:r,hasAnimation:n,removedBeforeQueried:!1}}listen(t,e,n,r,i){return SE(e)?this._fetchNamespace(t).listen(e,n,r,i):()=>{}}_buildInstruction(t,e,n,r,i){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,n,r,t.fromState.options,t.toState.options,e,i)}destroyInnerAnimations(t){let e=this.driver.query(t,uC,!0);e.forEach(t=>this.destroyActiveAnimationsForElement(t)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(t,lC,!0),e.forEach(t=>this.finishActiveQueriedAnimationOnElement(t)))}destroyActiveAnimationsForElement(t){const e=this.playersByElement.get(t);e&&e.forEach(t=>{t.queued?t.markedForDestroy=!0:t.destroy()})}finishActiveQueriedAnimationOnElement(t){const e=this.playersByQueriedElement.get(t);e&&e.forEach(t=>t.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return VS(this.players).onDone(()=>t());t()})}processLeaveNode(t){const e=t.__ng_removed;if(e&&e.setForRemoval){if(t.__ng_removed=gE,e.namespaceId){this.destroyInnerAnimations(t);const n=this._fetchNamespace(e.namespaceId);n&&n.clearElementCache(t)}this._onRemovalComplete(t,e.setForRemoval)}this.driver.matchesElement(t,fE)&&this.markElementAsDisabled(t,!1),this.driver.query(t,fE,!0).forEach(t=>{this.markElementAsDisabled(t,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((t,e)=>this._balanceNamespaceList(t,e)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let n=0;n<this.collectedEnterElements.length;n++)IE(this.collectedEnterElements[n],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const n=[];try{e=this._flushAnimations(n,t)}finally{for(let t=0;t<n.length;t++)n[t]()}}else for(let n=0;n<this.collectedLeaveElements.length;n++)this.processLeaveNode(this.collectedLeaveElements[n]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(t=>t()),this._flushFns=[],this._whenQuietFns.length){const t=this._whenQuietFns;this._whenQuietFns=[],e.length?VS(e).onDone(()=>{t.forEach(t=>t())}):t.forEach(t=>t())}}reportError(t){throw new Error("Unable to process animations due to the following failed trigger transitions\n "+t.join("\n"))}_flushAnimations(t,e){const n=new zC,r=[],i=new Map,o=[],s=new Map,a=new Map,u=new Map,c=new Set;this.disabledNodes.forEach(t=>{c.add(t);const e=this.driver.query(t,".ng-animate-queued",!0);for(let n=0;n<e.length;n++)c.add(e[n])});const l=this.bodyNode,h=Array.from(this.statesByElement.keys()),d=TE(h,this.collectedEnterElements),f=new Map;let p=0;d.forEach((t,e)=>{const n=oC+p++;f.set(e,n),t.forEach(t=>IE(t,n))});const g=[],m=new Set,y=new Set;for(let N=0;N<this.collectedLeaveElements.length;N++){const t=this.collectedLeaveElements[N],e=t.__ng_removed;e&&e.setForRemoval&&(g.push(t),m.add(t),e.hasAnimation?this.driver.query(t,".ng-star-inserted",!0).forEach(t=>m.add(t)):y.add(t))}const v=new Map,b=TE(h,Array.from(m));b.forEach((t,e)=>{const n=sC+p++;v.set(e,n),t.forEach(t=>IE(t,n))}),t.push(()=>{d.forEach((t,e)=>{const n=f.get(e);t.forEach(t=>xE(t,n))}),b.forEach((t,e)=>{const n=v.get(e);t.forEach(t=>xE(t,n))}),g.forEach(t=>{this.processLeaveNode(t)})});const _=[],w=[];for(let N=this._namespaceList.length-1;N>=0;N--)this._namespaceList[N].drainQueuedTransitions(e).forEach(t=>{const e=t.player,i=t.element;if(_.push(e),this.collectedEnterElements.length){const t=i.__ng_removed;if(t&&t.setForMove)return void e.destroy()}const c=!l||!this.driver.containsElement(l,i),h=v.get(i),d=f.get(i),p=this._buildInstruction(t,n,d,h,c);if(p.errors&&p.errors.length)w.push(p);else{if(c)return e.onStart(()=>bC(i,p.fromStyles)),e.onDestroy(()=>vC(i,p.toStyles)),void r.push(e);if(t.isFallbackTransition)return e.onStart(()=>bC(i,p.fromStyles)),e.onDestroy(()=>vC(i,p.toStyles)),void r.push(e);p.timelines.forEach(t=>t.stretchStartingKeyframe=!0),n.append(i,p.timelines),o.push({instruction:p,player:e,element:i}),p.queriedElements.forEach(t=>zS(s,t,[]).push(e)),p.preStyleProps.forEach((t,e)=>{const n=Object.keys(t);if(n.length){let t=a.get(e);t||a.set(e,t=new Set),n.forEach(e=>t.add(e))}}),p.postStyleProps.forEach((t,e)=>{const n=Object.keys(t);let r=u.get(e);r||u.set(e,r=new Set),n.forEach(t=>r.add(t))})}});if(w.length){const t=[];w.forEach(e=>{t.push(`@${e.triggerName} has failed due to:\n`),e.errors.forEach(e=>t.push(`- ${e}\n`))}),_.forEach(t=>t.destroy()),this.reportError(t)}const O=new Map,S=new Map;o.forEach(t=>{const e=t.element;n.has(e)&&(S.set(e,e),this._beforeAnimationBuild(t.player.namespaceId,t.instruction,O))}),r.forEach(t=>{const e=t.element;this._getPreviousPlayers(e,!1,t.namespaceId,t.triggerName,null).forEach(t=>{zS(O,e,[]).push(t),t.destroy()})});const C=g.filter(t=>AE(t,a,u)),E=new Map;EE(E,this.driver,y,u,yw).forEach(t=>{AE(t,a,u)&&C.push(t)});const T=new Map;d.forEach((t,e)=>{EE(T,this.driver,new Set(t),a,"!")}),C.forEach(t=>{const e=E.get(t),n=T.get(t);E.set(t,Object.assign(Object.assign({},e),n))});const I=[],x=[],k={};o.forEach(t=>{const{element:e,player:o,instruction:s}=t;if(n.has(e)){if(c.has(e))return o.onDestroy(()=>vC(e,s.toStyles)),o.disabled=!0,o.overrideTotalTime(s.totalTime),void r.push(o);let t=k;if(S.size>1){let n=e;const r=[];for(;n=n.parentNode;){const e=S.get(n);if(e){t=e;break}r.push(n)}r.forEach(e=>S.set(e,t))}const n=this._buildAnimation(o.namespaceId,s,O,i,T,E);if(o.setRealPlayer(n),t===k)I.push(o);else{const e=this.playersByElement.get(t);e&&e.length&&(o.parentPlayer=VS(e)),r.push(o)}}else bC(e,s.fromStyles),o.onDestroy(()=>vC(e,s.toStyles)),x.push(o),c.has(e)&&r.push(o)}),x.forEach(t=>{const e=i.get(t.element);if(e&&e.length){const n=VS(e);t.setRealPlayer(n)}}),r.forEach(t=>{t.parentPlayer?t.syncPlayerEvents(t.parentPlayer):t.destroy()});for(let N=0;N<g.length;N++){const t=g[N],e=t.__ng_removed;if(xE(t,sC),e&&e.hasAnimation)continue;let n=[];if(s.size){let e=s.get(t);e&&e.length&&n.push(...e);let r=this.driver.query(t,lC,!0);for(let t=0;t<r.length;t++){let e=s.get(r[t]);e&&e.length&&n.push(...e)}}const r=n.filter(t=>!t.destroyed);r.length?kE(this,t,r):this.processLeaveNode(t)}return g.length=0,I.forEach(t=>{this.players.push(t),t.onDone(()=>{t.destroy();const e=this.players.indexOf(t);this.players.splice(e,1)}),t.play()}),I}elementContainsData(t,e){let n=!1;const r=e.__ng_removed;return r&&r.setForRemoval&&(n=!0),this.playersByElement.has(e)&&(n=!0),this.playersByQueriedElement.has(e)&&(n=!0),this.statesByElement.has(e)&&(n=!0),this._fetchNamespace(t).elementContainsData(e)||n}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,n,r,i){let o=[];if(e){const e=this.playersByQueriedElement.get(t);e&&(o=e)}else{const e=this.playersByElement.get(t);if(e){const t=!i||i==vE;e.forEach(e=>{e.queued||(t||e.triggerName==r)&&o.push(e)})}}return(n||r)&&(o=o.filter(t=>!(n&&n!=t.namespaceId||r&&r!=t.triggerName))),o}_beforeAnimationBuild(t,e,n){const r=e.element,i=e.isRemovalTransition?void 0:t,o=e.isRemovalTransition?void 0:e.triggerName;for(const s of e.timelines){const t=s.element,a=t!==r,u=zS(n,t,[]);this._getPreviousPlayers(t,a,i,o,e.toState).forEach(t=>{const e=t.getRealPlayer();e.beforeDestroy&&e.beforeDestroy(),t.destroy(),u.push(t)})}bC(r,e.fromStyles)}_buildAnimation(t,e,n,r,i,o){const s=e.triggerName,a=e.element,u=[],c=new Set,l=new Set,h=e.timelines.map(e=>{const h=e.element;c.add(h);const d=h.__ng_removed;if(d&&d.removedBeforeQueried)return new Cw(e.duration,e.delay);const f=h!==a,p=function(t){const e=[];return NE(t,e),e}((n.get(h)||pE).map(t=>t.getRealPlayer())).filter(t=>!!t.element&&t.element===h),g=i.get(h),m=o.get(h),y=US(0,this._normalizer,0,e.keyframes,g,m),v=this._buildPlayer(e,y,p);if(e.subTimeline&&r&&l.add(h),f){const e=new OE(t,s,h);e.setRealPlayer(v),u.push(e)}return v});u.forEach(t=>{zS(this.playersByQueriedElement,t.element,[]).push(t),t.onDone(()=>function(t,e,n){let r;if(t instanceof Map){if(r=t.get(e),r){if(r.length){const t=r.indexOf(n);r.splice(t,1)}0==r.length&&t.delete(e)}}else if(r=t[e],r){if(r.length){const t=r.indexOf(n);r.splice(t,1)}0==r.length&&delete t[e]}return r}(this.playersByQueriedElement,t.element,t))}),c.forEach(t=>IE(t,cC));const d=VS(h);return d.onDestroy(()=>{c.forEach(t=>xE(t,cC)),vC(a,e.toStyles)}),l.forEach(t=>{zS(r,t,[]).push(d)}),d}_buildPlayer(t,e,n){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,n):new Cw(t.duration,t.delay)}}class OE{constructor(t,e,n){this.namespaceId=t,this.triggerName=e,this.element=n,this._player=new Cw,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,Object.keys(this._queuedCallbacks).forEach(e=>{this._queuedCallbacks[e].forEach(n=>qS(t,e,void 0,n))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){zS(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const e=this._player;e.triggerCallback&&e.triggerCallback(t)}}function SE(t){return t&&1===t.nodeType}function CE(t,e){const n=t.style.display;return t.style.display=null!=e?e:"none",n}function EE(t,e,n,r,i){const o=[];n.forEach(t=>o.push(CE(t)));const s=[];r.forEach((n,r)=>{const o={};n.forEach(t=>{const n=o[t]=e.computeStyle(r,t,i);n&&0!=n.length||(r.__ng_removed=mE,s.push(r))}),t.set(r,o)});let a=0;return n.forEach(t=>CE(t,o[a++])),s}function TE(t,e){const n=new Map;if(t.forEach(t=>n.set(t,[])),0==e.length)return n;const r=new Set(e),i=new Map;function o(t){if(!t)return 1;let e=i.get(t);if(e)return e;const s=t.parentNode;return e=n.has(s)?s:r.has(s)?1:o(s),i.set(t,e),e}return e.forEach(t=>{const e=o(t);1!==e&&n.get(e).push(t)}),n}function IE(t,e){if(t.classList)t.classList.add(e);else{let n=t.$$classes;n||(n=t.$$classes={}),n[e]=!0}}function xE(t,e){if(t.classList)t.classList.remove(e);else{let n=t.$$classes;n&&delete n[e]}}function kE(t,e,n){VS(n).onDone(()=>t.processLeaveNode(e))}function NE(t,e){for(let n=0;n<t.length;n++){const r=t[n];r instanceof Ew?NE(r.players,e):e.push(r)}}function AE(t,e,n){const r=n.get(t);if(!r)return!1;let i=e.get(t);return i?r.forEach(t=>i.add(t)):e.set(t,r),n.delete(t),!0}class jE{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._triggerCache={},this.onRemovalComplete=(t,e)=>{},this._transitionEngine=new wE(t,e,n),this._timelineEngine=new lE(t,e,n),this._transitionEngine.onRemovalComplete=(t,e)=>this.onRemovalComplete(t,e)}registerTrigger(t,e,n,r,i){const o=t+"-"+r;let s=this._triggerCache[o];if(!s){const t=[],e=MC(this._driver,i,t);if(t.length)throw new Error(`The animation trigger "${r}" has failed to build due to the following errors:\n - ${t.join("\n - ")}`);s=function(t,e){return new aE(t,e)}(r,e),this._triggerCache[o]=s}this._transitionEngine.registerTrigger(e,r,s)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,n,r){this._transitionEngine.insertNode(t,e,n,r)}onRemove(t,e,n,r){this._transitionEngine.removeNode(t,e,r||!1,n)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,n,r){if("@"==n.charAt(0)){const[t,i]=KS(n);this._timelineEngine.command(t,e,i,r)}else this._transitionEngine.trigger(t,e,n,r)}listen(t,e,n,r,i){if("@"==n.charAt(0)){const[t,r]=KS(n);return this._timelineEngine.listen(t,e,r,i)}return this._transitionEngine.listen(t,e,n,r,i)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function PE(t,e){let n=null,r=null;return Array.isArray(e)&&e.length?(n=DE(e[0]),e.length>1&&(r=DE(e[e.length-1]))):e&&(n=DE(e)),n||r?new RE(t,n,r):null}let RE=(()=>{class t{constructor(e,n,r){this._element=e,this._startStyles=n,this._endStyles=r,this._state=0;let i=t.initialStylesByElement.get(e);i||t.initialStylesByElement.set(e,i={}),this._initialStyles=i}start(){this._state<1&&(this._startStyles&&vC(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(vC(this._element,this._initialStyles),this._endStyles&&(vC(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(t.initialStylesByElement.delete(this._element),this._startStyles&&(bC(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(bC(this._element,this._endStyles),this._endStyles=null),vC(this._element,this._initialStyles),this._state=3)}}return t.initialStylesByElement=new WeakMap,t})();function DE(t){let e=null;const n=Object.keys(t);for(let r=0;r<n.length;r++){const i=n[r];LE(i)&&(e=e||{},e[i]=t[i])}return e}function LE(t){return"display"===t||"position"===t}const ME="animation",FE="animationend";class VE{constructor(t,e,n,r,i,o,s){this._element=t,this._name=e,this._duration=n,this._delay=r,this._easing=i,this._fillMode=o,this._onDoneFn=s,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=t=>this._handleCallback(t)}apply(){!function(t,e){const n=KE(t,"").trim();n.length&&(function(t,e){let n=0;for(let r=0;r<t.length;r++)","===t.charAt(r)&&n++}(n),e=`${n}, ${e}`),zE(t,"",e)}(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),HE(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){UE(this._element,this._name,"paused")}resume(){UE(this._element,this._name,"running")}setPosition(t){const e=qE(this._element,this._name);this._position=t*this._duration,zE(this._element,"Delay",`-${this._position}ms`,e)}getPosition(){return this._position}_handleCallback(t){const e=t._ngTestManualTimestamp||Date.now(),n=1e3*parseFloat(t.elapsedTime.toFixed(3));t.animationName==this._name&&Math.max(e-this._startTime,0)>=this._delay&&n>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),HE(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function(t,e){const n=KE(t,"").split(","),r=BE(n,e);r>=0&&(n.splice(r,1),zE(t,"",n.join(",")))}(this._element,this._name))}}function UE(t,e,n){zE(t,"PlayState",n,qE(t,e))}function qE(t,e){const n=KE(t,"");return n.indexOf(",")>0?BE(n.split(","),e):BE([n],e)}function BE(t,e){for(let n=0;n<t.length;n++)if(t[n].indexOf(e)>=0)return n;return-1}function HE(t,e,n){n?t.removeEventListener(FE,e):t.addEventListener(FE,e)}function zE(t,e,n,r){const i=ME+e;if(null!=r){const e=t.style[i];if(e.length){const t=e.split(",");t[r]=n,n=t.join(",")}}t.style[i]=n}function KE(t,e){return t.style[ME+e]||""}class WE{constructor(t,e,n,r,i,o,s,a){this.element=t,this.keyframes=e,this.animationName=n,this._duration=r,this._delay=i,this._finalStyles=s,this._specialStyles=a,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this.currentSnapshot={},this._state=0,this.easing=o||"linear",this.totalTime=r+i,this._buildStyler()}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}destroy(){this.init(),this._state>=4||(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(t=>t()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}finish(){this.init(),this._state>=3||(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(t){this._styler.setPosition(t)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new VE(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}beforeDestroy(){this.init();const t={};if(this.hasStarted()){const e=this._state>=3;Object.keys(this._finalStyles).forEach(n=>{"offset"!=n&&(t[n]=e?this._finalStyles[n]:NC(this.element,n))})}this.currentSnapshot=t}}class QE extends Cw{constructor(t,e){super(),this.element=t,this._startingStyles={},this.__initialized=!1,this._styles=nC(e)}init(){!this.__initialized&&this._startingStyles&&(this.__initialized=!0,Object.keys(this._styles).forEach(t=>{this._startingStyles[t]=this.element.style[t]}),super.init())}play(){this._startingStyles&&(this.init(),Object.keys(this._styles).forEach(t=>this.element.style.setProperty(t,this._styles[t])),super.play())}destroy(){this._startingStyles&&(Object.keys(this._startingStyles).forEach(t=>{const e=this._startingStyles[t];e?this.element.style.setProperty(t,e):this.element.style.removeProperty(t)}),this._startingStyles=null,super.destroy())}}class GE{constructor(){this._count=0,this._head=document.querySelector("head")}validateStyleProperty(t){return XS(t)}matchesElement(t,e){return ZS(t,e)}containsElement(t,e){return tC(t,e)}query(t,e,n){return eC(t,e,n)}computeStyle(t,e,n){return window.getComputedStyle(t)[e]}buildKeyframeElement(t,e,n){n=n.map(t=>nC(t));let r=`@keyframes ${e} {\n`,i="";n.forEach(t=>{i=" ";const e=parseFloat(t.offset);r+=`${i}${100*e}% {\n`,i+=" ",Object.keys(t).forEach(e=>{const n=t[e];switch(e){case"offset":return;case"easing":return void(n&&(r+=`${i}animation-timing-function: ${n};\n`));default:return void(r+=`${i}${e}: ${n};\n`)}}),r+=i+"}\n"}),r+="}\n";const o=document.createElement("style");return o.textContent=r,o}animate(t,e,n,r,i,o=[],s){const a=o.filter(t=>t instanceof WE),u={};IC(n,r)&&a.forEach(t=>{let e=t.currentSnapshot;Object.keys(e).forEach(t=>u[t]=e[t])});const c=function(t){let e={};return t&&(Array.isArray(t)?t:[t]).forEach(t=>{Object.keys(t).forEach(n=>{"offset"!=n&&"easing"!=n&&(e[n]=t[n])})}),e}(e=xC(t,e,u));if(0==n)return new QE(t,c);const l="gen_css_kf_"+this._count++,h=this.buildKeyframeElement(t,l,e);document.querySelector("head").appendChild(h);const d=PE(t,e),f=new WE(t,e,l,n,r,i,c,d);return f.onDestroy(()=>{var t;(t=h).parentNode.removeChild(t)}),f}}class $E{constructor(t,e,n,r){this.element=t,this.keyframes=e,this.options=n,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=n.duration,this._delay=n.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(t,e,n){return t.animate(e,n)}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){this.domPlayer.currentTime=t*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(e=>{"offset"!=e&&(t[e]=this._finished?this._finalKeyframe[e]:NC(this.element,e))}),this.currentSnapshot=t}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}class YE{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(JE().toString()),this._cssKeyframesDriver=new GE}validateStyleProperty(t){return XS(t)}matchesElement(t,e){return ZS(t,e)}containsElement(t,e){return tC(t,e)}query(t,e,n){return eC(t,e,n)}computeStyle(t,e,n){return window.getComputedStyle(t)[e]}overrideWebAnimationsSupport(t){this._isNativeImpl=t}animate(t,e,n,r,i,o=[],s){if(!s&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(t,e,n,r,i,o);const a={duration:n,delay:r,fill:0==r?"both":"forwards"};i&&(a.easing=i);const u={},c=o.filter(t=>t instanceof $E);IC(n,r)&&c.forEach(t=>{let e=t.currentSnapshot;Object.keys(e).forEach(t=>u[t]=e[t])});const l=PE(t,e=xC(t,e=e.map(t=>gC(t,!1)),u));return new $E(t,e,a,l)}}function JE(){return"undefined"!=typeof window&&void 0!==window.document&&Element.prototype.animate||{}}let XE=(()=>{class t extends mw{constructor(t,e){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(e.body,{id:"0",encapsulation:r.Q.None,styles:[],data:{animation:[]}})}build(t){const e=this._nextAnimationId.toString();this._nextAnimationId++;const n=Array.isArray(t)?bw(t):t;return eT(this._renderer,null,e,"register",[n]),new ZE(e,this._renderer)}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(r.E),r.Sb(a))},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac}),t})();class ZE extends class{}{constructor(t,e){super(),this._id=t,this._renderer=e}create(t,e){return new tT(this._id,t,e||{},this._renderer)}}class tT{constructor(t,e,n,r){this.id=t,this.element=e,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",n)}_listen(t,e){return this._renderer.listen(this.element,`@@${this.id}:${t}`,e)}_command(t,...e){return eT(this._renderer,this.element,this.id,t,e)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset")}setPosition(t){this._command("setPosition",t)}getPosition(){var t,e;return null!==(e=null===(t=this._renderer.engine.players[+this.id])||void 0===t?void 0:t.getPosition())&&void 0!==e?e:0}}function eT(t,e,n,r,i){return t.setProperty(e,`@@${n}:${r}`,i)}const nT="@",rT="@.disabled";let iT=(()=>{class t{constructor(t,e,n){this.delegate=t,this.engine=e,this._zone=n,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),e.onRemovalComplete=(t,e)=>{e&&e.parentNode(t)&&e.removeChild(t.parentNode,t)}}createRenderer(t,e){const n=this.delegate.createRenderer(t,e);if(!(t&&e&&e.data&&e.data.animation)){let t=this._rendererCache.get(n);return t||(t=new oT("",n,this.engine),this._rendererCache.set(n,t)),t}const r=e.id,i=e.id+"-"+this._currentId;this._currentId++,this.engine.register(i,t);const o=e=>{Array.isArray(e)?e.forEach(o):this.engine.registerTrigger(r,i,t,e.name,e)};return e.data.animation.forEach(o),new sT(this,i,n,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,e,n){t>=0&&t<this._microtaskId?this._zone.run(()=>e(n)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(t=>{const[e,n]=t;e(n)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([e,n]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(r.E),r.Sb(jE),r.Sb(r.z))},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac}),t})();class oT{constructor(t,e,n){this.namespaceId=t,this.delegate=e,this.engine=n,this.destroyNode=this.delegate.destroyNode?t=>e.destroyNode(t):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,n,r=!0){this.delegate.insertBefore(t,e,n),this.engine.onInsert(this.namespaceId,e,t,r)}removeChild(t,e,n){this.engine.onRemove(this.namespaceId,e,this.delegate,n)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,n,r){this.delegate.setAttribute(t,e,n,r)}removeAttribute(t,e,n){this.delegate.removeAttribute(t,e,n)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,n,r){this.delegate.setStyle(t,e,n,r)}removeStyle(t,e,n){this.delegate.removeStyle(t,e,n)}setProperty(t,e,n){e.charAt(0)==nT&&e==rT?this.disableAnimations(t,!!n):this.delegate.setProperty(t,e,n)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,n){return this.delegate.listen(t,e,n)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}}class sT extends oT{constructor(t,e,n,r){super(e,n,r),this.factory=t,this.namespaceId=e}setProperty(t,e,n){e.charAt(0)==nT?"."==e.charAt(1)&&e==rT?this.disableAnimations(t,n=void 0===n||!!n):this.engine.process(this.namespaceId,t,e.substr(1),n):this.delegate.setProperty(t,e,n)}listen(t,e,n){if(e.charAt(0)==nT){const r=function(t){switch(t){case"body":return document.body;case"document":return document;case"window":return window;default:return t}}(t);let i=e.substr(1),o="";return i.charAt(0)!=nT&&([i,o]=function(t){const e=t.indexOf(".");return[t.substring(0,e),t.substr(e+1)]}(i)),this.engine.listen(this.namespaceId,r,i,o,t=>{this.factory.scheduleListenerCallback(t._data||-1,n,t)})}return this.delegate.listen(t,e,n)}}let aT=(()=>{class t extends jE{constructor(t,e,n){super(t.body,e,n)}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(a),r.Sb(iC),r.Sb(tE))},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac}),t})();const uT=[{provide:iC,useFactory:function(){return"function"==typeof JE()?new YE:new GE}},{provide:new r.q("AnimationModuleType"),useValue:"BrowserAnimations"},{provide:mw,useClass:XE},{provide:tE,useFactory:function(){return new eE}},{provide:jE,useClass:aT},{provide:r.E,useFactory:function(t,e,n){return new iT(t,e,n)},deps:[ot,jE,r.z]}];let cT=(()=>{class t{}return t.\u0275mod=r.Hb({type:t}),t.\u0275inj=r.Gb({factory:function(e){return new(e||t)},providers:uT,imports:[_t]}),t})(),lT=(()=>{class t{}return t.\u0275mod=r.Hb({type:t,bootstrap:[MS]}),t.\u0275inj=r.Gb({factory:function(e){return new(e||t)},providers:[],imports:[[_t,LS,Ps,QO,Pi.a.initializeApp(i),ho,cT,Xw.forRoot()]]}),t})();Object(r.S)(),vt().bootstrapModule(lT).catch(t=>console.error(t))},zn8P:function(t,e){function n(t){return Promise.resolve().then(function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e})}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id="zn8P"},zx2A:function(t,e,n){"use strict";n.d(e,"a",function(){return s}),n.d(e,"b",function(){return a}),n.d(e,"c",function(){return u});var r=n("7o/Q"),i=n("HDdC"),o=n("SeVD");class s extends r.a{constructor(t){super(),this.parent=t}_next(t){this.parent.notifyNext(t)}_error(t){this.parent.notifyError(t),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class a extends r.a{notifyNext(t){this.destination.next(t)}notifyError(t){this.destination.error(t)}notifyComplete(){this.destination.complete()}}function u(t,e){if(e.closed)return;if(t instanceof i.a)return t.subscribe(e);let n;try{n=Object(o.a)(t)(e)}catch(r){e.error(r)}return n}}},[[0,0]]]);